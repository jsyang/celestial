webpackJsonp([0],{11:function(t,e,a){"use strict";e.a={_COLORS:[255,65280,16711680,16776960,16711935],NONE:-1,BLUE:0,GREEN:1,RED:2,YELLOW:3,MAGENTA:4}},12:function(t,e,a){"use strict";var n=a(11),i=function(){function t(){this.team=n.a.NONE}return Object.defineProperty(t.prototype,"x",{get:function(){return this.geo.x},set:function(t){this.geo.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.geo.y},set:function(t){this.geo.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.geo.rotation},set:function(t){this.geo.rotation=t},enumerable:!0,configurable:!0}),t.prototype.setChildVisible=function(t,e){this.geo.graphics.getChildAt(t).visible=e},t.prototype.assignTeamColor=function(){this.geo.graphics.currentPath.lineColor=n.a._COLORS[this.team]},t.prototype.renderHit=function(){this.hitTime>0?(this.hitTime--,this.geo.graphics.alpha=this.hitTime%2):0===this.hitTime&&(this.hitTime=-1,this.geo.graphics.alpha=1)},t}();e.a=i},148:function(t,e,a){"use strict";var n,i=a(309),o=a(310),r={Keyboard:0,GamePad:0},c=localStorage.getItem("input.device")||r.Keyboard;e.a={process:function(){var t=c===r.Keyboard?o.a.getEvents():i.a.getEvents();if(n&&"Fighter"===n.type){var e=n.isDockedPlanet;n.hp>0?(e||("number"==typeof t.analogAngle?n.rotation=t.analogAngle:t.TURN_LEFT?n.rotation-=.05:t.TURN_RIGHT&&(n.rotation+=.05)),n.isShooting=t.SHOOT,t.ACCELERATE?(e&&n.undockPlanet(),n.flameOn(),n.accelerate(.2)):n.flameOff()):n=void 0}t.RESTART_GAME&&location.reload()},getFocalPoint:function(){return n},setFocalPoint:function(t){return n=t}}},149:function(t,e,a){"use strict";var n=a(6),i={isDockedPlanet:!1,dockPlanet:function(t){this.isDockedPlanet=!0,this.dx=0,this.dy=0,this.rotation=n.a.getAngleFromTo(t,this),this.planet=t,t.isOccupied()||(t.team=this.team,t.updateFlagColor())},undockPlanet:function(){this.isDockedPlanet=!1,this.planet=void 0}};e.a={componentFlag:"canDockPlanet",DEFAULTS:i,process:function(t){t.isDockedPlanet&&(t.x=105*Math.cos(t.rotation)+t.planet.x,t.y=105*Math.sin(t.rotation)+t.planet.y)}}},150:function(t,e,a){"use strict";var n=a(6),i={enterPlanetOrbit:function(t){this.isOrbitingPlanet=!0,this.dx=0,this.dy=0,this.orbitRotation=n.a.getAngleFromTo(t,this),this.rotation=this.orbitRotation+o,this.planet=t,this.target=void 0,this.flameOff&&this.flameOff()},exitPlanetOrbit:function(){this.isOrbitingPlanet=!1,this.planet=void 0,this.flameOn&&this.flameOn()},isOrbitingPlanet:!0,D_ROTATION:1e-4,orbitDistance:105,orbitRotation:0},o=.5*Math.PI;e.a={componentFlag:"canOrbitPlanet",DEFAULTS:i,process:function(t){t.isOrbitingPlanet&&t.planet&&("SpacePort"===t.type?t.rotation=n.a.getAngleFromTo(t.planet,t):"Freighter"===t.type&&(t.rotation+=t.D_ROTATION),t.orbitRotation+=t.D_ROTATION,t.x=Math.cos(t.orbitRotation)*t.orbitDistance+t.planet.x,t.y=Math.sin(t.orbitRotation)*t.orbitDistance+t.planet.y)}}},151:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=a(153);window.addEventListener("DOMContentLoaded",e.a);var n=t;n&&n.hot&&n.hot.accept("./client/index",function(){Object(e.c)(),Object(e.a)(),Object(e.b)()})}.call(e,a(152)(t))},153:function(t,e,a){"use strict";function n(){var t=Date.now(),e=t-r;if(Object(d.a)(),l.a.process(),p.a.updateAll(),Object(y.a)(),u.a.update(),f.a.update(),p.a.prepareNext(),e>g){var a=l.a.getFocalPoint();f.a.setOrigin(a),s.a.centerOn(a),s.a.render(),r=t-e%g}o=requestAnimationFrame(n)}function i(){r=Date.now(),n()}e.b=i,e.c=function(){cancelAnimationFrame(o)},e.a=function(){h.b.init(),f.a.init(),c.a.load().then(i)};var o,r,c=a(154),s=a(26),l=a(148),h=a(67),p=a(6),u=a(348),f=a(349),y=a(350),d=a(351),g=1e3/60},154:function(t,e,a){"use strict";var n=a(35),i=a(155),o=a.n(i),r=a(207),c=a.n(r),s=/(^sounds\/|\.ogg$)/gi;e.a={load:function(){return new Promise(function(t,e){c.a.getBinaryContent("assets.zip",function(a,n){a?e(a):t(n)})}).then(function(t){return o.a.loadAsync(t)}).then(function(t){return function(e){var a=[],i=[];return t.folder("sounds/").forEach(function(t,e){a.push(e.name.replace(s,"")),i.push(e.async("arraybuffer"))}),Promise.all(i).then(function(t){return t.forEach(function(t,e){return Object(n.a)({name:a[e],arrayBuffer:t})})})}()})}}},160:function(t,e){},26:function(t,e,a){"use strict";function n(){c=innerWidth,l=innerHeight,s=c>>1,h=l>>1,r&&r.resize(c,l)}var i=a(27),o=(a.n(i),a(308));i.settings.SCALE_MODE=i.SCALE_MODES.NEAREST;var r,c,s,l,h,p,u;n();var f=new i.Container,y=new i.Container;f.addChild(y),r=new i.WebGLRenderer(c,l),o.a.init(y);var d=function(){return p=u=void 0};document&&window&&(window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(r.view)}),window.addEventListener("resize",function(){n(),d()})),e.a={addChild:function(t){return y.addChild(t)},removeChild:function(t){return y.removeChild(t)},render:function(){r.render(f)},centerOn:function(t){if(t){y.x=s-t.x,y.y=h-t.y;var e=t.x-p,a=t.y-u;void 0===p&&void 0===u?o.a.reinit(t):o.a.process(t,e,a),p=t.x,u=t.y}else d()},addChildToHUD:function(t){return f.addChild(t)}}},308:function(t,e,a){"use strict";function n(t,e){var a=e.color,n=e.size,i=e.x,o=e.y,r=new c.Graphics;return r.beginFill(a),r.drawRect(0,0,n,n),r.lineWidth=n,r.endFill(),r.x=i,r.y=o,t.addChild(r),r}function i(t){o=innerWidth>>1,r=innerHeight>>1,l.forEach(function(e){e.x=t.x+s.a.float(-o,o),e.y=t.y+s.a.float(-r,r)})}var o,r,c=a(27),s=(a.n(c),a(34)),l=[],h={BRIGHT:{speed:.01,count:8,size:2,color:16777215,x:0,y:0},DIM:{speed:.3,count:20,size:1,color:16711422,x:0,y:0}};e.a={init:function(t){var e;for(e=0;e<h.DIM.count;e++)l.push(n(t,h.DIM));for(e=0;e<h.BRIGHT.count;e++)l.push(n(t,h.BRIGHT));i({x:o,y:r})},reinit:i,process:function(t,e,a){l.forEach(function(n){return function(t,e,a,n){1===t.lineWidth?(e*=h.DIM.speed,a*=h.DIM.speed):(e*=h.BRIGHT.speed,a*=h.BRIGHT.speed),t.x+=e,t.y+=a,t.x<n.x-o?t.x=n.x+o:t.x>n.x+o&&(t.x=n.x-o),t.y<n.y-r?t.y=n.y+r:t.y>n.y+r&&(t.y=n.y-r)}(n,e,a,t)})}}},309:function(t,e,a){"use strict";var n=1e-6,i=function(t){var e=t.left,a=t.right,n=(t.up,t.analogAngle),i=t.button0,o=t.button1,r=t.button2,c=t.button3;return{TURN_LEFT:Boolean(e),TURN_RIGHT:Boolean(a),ACCELERATE:Boolean(r),SHOOT:Boolean(i),RESTART_GAME:Boolean(o&&c),analogAngle:n}};e.a={getEvents:function(t){void 0===t&&(t=0);var e=navigator.getGamepads()[t],a={};if(e){var o=e.axes,r=o[0],c=o[1],s=Math.abs(r)>.1,l=Math.abs(c)>.1,h=void 0;(s||l)&&(s||(r=r>0?n:-n),l||(c=c>0?n:-n),h=Math.atan2(c,r)),a={left:e.axes[0]<-.1,right:e.axes[0]>.1,up:e.axes[1]<-.1,analogAngle:h,button0:e.buttons[0].pressed,button1:e.buttons[1].pressed,button2:e.buttons[2].pressed,button3:e.buttons[3].pressed}}return i(a)}}},310:function(t,e,a){"use strict";function n(t){r[o[t.which]]=!1}function i(t){r[o[t.which]]=!0}var o={37:"left_arrow",38:"up_arrow",39:"right_arrow",40:"down_arrow",70:"f",82:"r"},r={left_arrow:!1,right_arrow:!1,up_arrow:!1,down_arrow:!1,f:!1,r:!1};window&&(window.addEventListener("keydown",i),window.addEventListener("keyup",n)),e.a={getEvents:function(){return{TURN_LEFT:r.left_arrow,TURN_RIGHT:r.right_arrow,ACCELERATE:r.up_arrow,SHOOT:r.f,RESTART_GAME:r.r}}}},311:function(t,e,a){"use strict";var n=a(6),i=a(312),o=a(313),r=a(314),c=a(315),s=a(316),l=a(317),h=a(318),p=a(319),u=a(320),f=a(321),y=a(322),d=a(323),g=a(324),m=a(325),b=a(150),S=a(326),_=a(327),T=a(328),O=a(329),E=a(330),A=a(149),v=a(331),F=[d.a,g.a,c.a,s.a,m.a,b.a,T.a,O.a,A.a,S.a,h.a,l.a,o.a,p.a,u.a,f.a,i.a,_.a,v.a,r.a,E.a,y.a];e.a={init:function(t){F.forEach(function(e){e.DEFAULTS&&t[e.componentFlag]&&Object.assign(t,e.DEFAULTS)})},update:function(t){t.hp>0&&F.forEach(function(e){t[e.componentFlag]&&e.process&&e.process(t)}),t.hp>0?n.a.commit(t):n.a.destroy(t)}}},312:function(t,e,a){"use strict";var n=a(34),i=a(6),o=a(149),r=a(150),c={PRODUCT:{Freighter:{cost:300,time:120},Fighter:{cost:500,time:90}},orderManufacture:function(t){this.isManufacturing=!0,this.manufactureTime=this.PRODUCT[t].time,this.manufactureType=t},isManufacturing:!1,manufactureTime:0,manufactureType:void 0};e.a={componentFlag:"canManufacture",DEFAULTS:c,process:function(t){if(t.isManufacturing&&t.planet.pbase&&t.planet.pbase.materialsFinished>=t.PRODUCT[t.manufactureType].cost)if(t.manufactureTime>0)t.manufactureTime--;else{var e={x:t.x+n.a.float(-1,1),y:t.y+n.a.float(-1,1),team:t.team},a=i.a.create(t.manufactureType,e);"Fighter"===t.manufactureType?(t.type,o.a.DEFAULTS.dockPlanet.call(a,t.planet)):"Freighter"===t.manufactureType&&r.a.DEFAULTS.enterPlanetOrbit.call(a,t.planet),t.isManufacturing=!1,t.manufactureType=void 0}}}},313:function(t,e,a){"use strict";e.a={componentFlag:"canMine",DEFAULTS:{MINE_RATE:25,MINE_TIME:20,mineTime:20},process:function(t){t.mineTime>0?t.mineTime--:(t.mineTime=t.MINE_TIME,t.planet.materialsRaw+=t.MINE_RATE)}}},314:function(t,e,a){"use strict";e.a={componentFlag:"canMetabolize",process:function(t){t.hp--}}},315:function(t,e,a){"use strict";e.a={componentFlag:"canMoveLinearly",DEFAULTS:{dx:0,dy:0},process:function(t){t.isDockedPlanet||(t.x+=t.dx,t.y+=t.dy)}}},316:function(t,e,a){"use strict";var n=a(6),i={TURN_RATE:.07,SPEED:2.5,DIST_HALT2:Math.pow(80,2)},o=Math.pow(200,2);e.a={componentFlag:"canMoveToTarget",DEFAULTS:i,process:function(t){var e=t.target,a=t.DIST_HALT2;if(e){var i=n.a.getDistSquared(t,e);if("Planet"===e.type&&(a=o),i>a){var r=function(t,e){var a=t.rotation,i=n.a.getAngleFromTo(t,e),o=Math.abs(i-a);return o>Math.PI?a>0?t.rotation+=t.TURN_RATE:t.rotation-=t.TURN_RATE:o>t.TURN_RATE?a>i?t.rotation-=t.TURN_RATE:t.rotation+=t.TURN_RATE:t.rotation=i,a=t.rotation}(t,e);t.x+=Math.cos(r)*t.SPEED,t.y+=Math.sin(r)*t.SPEED,t.flameOn&&t.flameOn()}else"Planet"===e.type&&t.canOrbitPlanet&&t.enterPlanetOrbit(e),t.flameOff&&t.flameOff()}}}},317:function(t,e,a){"use strict";e.a={componentFlag:"canHarvest",DEFAULTS:{HARVEST_RATE_RAW:35,HARVEST_RATE_FINISHED:25,HARVEST_TIME:10,harvestTime:0},process:function(t){t.harvestTime>0?t.harvestTime--:(t.harvestTime=t.HARVEST_TIME,t.planet.materialsRaw>0&&t.materialsRaw<t.MAX_RAW_MATERIALS&&(t.MAX_RAW_MATERIALS-t.materialsRaw<t.HARVEST_RATE_RAW?(t.planet.materialsRaw=0,t.materialsRaw+=t.MAX_RAW_MATERIALS-t.materialsRaw):(t.planet.materialsRaw-=t.HARVEST_RATE_RAW,t.materialsRaw+=t.HARVEST_RATE_RAW)),t.planet.materialsFinished>0&&t.materialsFinished<t.MAX_FINISHED_MATERIALS&&(t.MAX_FINISHED_MATERIALS-t.materialsFinished<t.HARVEST_RATE_FINISHED?(t.planet.materialsFinished=0,t.materialsFinished+=t.MAX_FINISHED_MATERIALS-t.materialsFinished):(t.planet.materialsFinished-=t.HARVEST_RATE_FINISHED,t.materialsFinished+=t.HARVEST_RATE_FINISHED)))}}},318:function(t,e,a){"use strict";e.a={componentFlag:"canStoreMaterial",DEFAULTS:{MAX_RAW_MATERIALS:3e3,MAX_FINISHED_MATERIALS:2e3,materialsRaw:0,materialsFinished:0},process:function(){}}},319:function(t,e,a){"use strict";e.a={componentFlag:"canRepair",DEFAULTS:{REPAIR_COST_FINISHED:25,REPAIR_TIME:30,repairTime:0},process:function(t){t.hp<t.maxHp&&t.materialsFinished>t.REPAIR_COST_FINISHED&&t.materialsFinished>0&&(t.repairTime>0?t.repairTime--:(t.hp++,t.materialsFinished-=t.REPAIR_COST_FINISHED,t.repairTime=t.REPAIR_TIME))}}},320:function(t,e,a){"use strict";e.a={componentFlag:"canRefine",DEFAULTS:{REFINE_RATE_RAW_TO_FINISHED:.5},process:function(t){t.materialsFinished<t.MAX_FINISHED_MATERIALS?t.materialsRaw>0&&(t.materialsFinished+=t.REFINE_RATE_RAW_TO_FINISHED,t.materialsFinished>t.MAX_FINISHED_MATERIALS&&(t.planet.materialsFinished+=t.materialsFinished-t.MAX_FINISHED_MATERIALS,t.materialsFinished=t.MAX_FINISHED_MATERIALS),t.materialsRaw--):t.materialsRaw>0&&(t.planet.materialsFinished+=t.REFINE_RATE_RAW_TO_FINISHED,t.materialsRaw--)}}},321:function(t,e,a){"use strict";var n=a(6),i=[{type:"PLab",cost:200},{type:"PComm",cost:300},{type:"SpacePort",cost:1e3,prerequisite:"PColony"},{type:"SpaceDock",cost:500,prerequisite:"SpacePort",occupation:"SpacePort"},{type:"SensorArray",cost:500,prerequisite:"SpacePort",occupation:"SpacePort"}];e.a={componentFlag:"canConstruct",DEFAULTS:{CONSTRUCTION_TIME:100,constructionTime:100},process:function(t){t.materialsFinished>0&&i.forEach(function(t){if(this.constructionTime>0)this.constructionTime--;else{var e=t.type.toLowerCase(),a=!0;t.prerequisite&&(a=Boolean(this.planet[t.prerequisite.toLowerCase()])),!this.planet[e]&&this.materialsFinished>=t.cost&&a&&("SpacePort"===t.occupation?this.planet[e]=n.a.create(t.type,{spaceport:this.planet.spaceport,team:this.team}):this.planet[e]=n.a.create(t.type,{planet:this.planet,team:this.team}),this.materialsFinished-=t.cost,this.constructionTime=this.CONSTRUCTION_TIME)}}.bind(t))}}},322:function(t,e,a){"use strict";function n(){Object(i.b)(this.EXPLOSION_SOUND);for(var t=this.EXPLOSION_FRAGMENTS;t>0;t--)o.a.create("ShotCannonNormal",{x:this.x+r.a.float(-10,10),y:this.y+r.a.float(-10,10),team:o.a.TEAM.NONE,dx:r.a.float(-2,2)+(this.dx||0),dy:r.a.float(-2,2)+(this.dy||0)})}var i=a(35),o=a(6),r=a(34),c={EXPLOSION_FRAGMENTS:6,EXPLOSION_SOUND:"collide",explode:n};e.a={componentFlag:"canExplode",DEFAULTS:c,process:function(t){t.hp<=0&&n.call(t)}}},323:function(t,e,a){"use strict";e.a={componentFlag:"canOccupyPlanet",process:function(t){t.x=t.planet.x,t.y=t.planet.y}}},324:function(t,e,a){"use strict";e.a={componentFlag:"canOccupySpacePort",process:function(t){t.x=t.spaceport.x,t.y=t.spaceport.y,t.rotation=t.spaceport.rotation}}},325:function(t,e,a){"use strict";e.a={componentFlag:"canOrbitStar",DEFAULTS:{D_ROTATION:1e-4,orbitDistance:1800,orbitRotation:0},process:function(t){t.orbitRotation+=t.D_ROTATION,t.x=Math.cos(t.orbitRotation)*t.orbitDistance+t.star.x,t.y=Math.sin(t.orbitRotation)*t.orbitDistance+t.star.y}}},326:function(t,e,a){"use strict";e.a={componentFlag:"canDamage",DEFAULTS:{damageHp:1},process:function(){}}},327:function(t,e,a){"use strict";var n=a(6),i=a(35),o={ShotCannonHeavy:"fire-heavy",ShotCannonNormal:"fire"},r={cannonGetMuzzleFuncs:[],CANNON_LOAD_TIME_MS:100,cannonLastShotTime:0,cannonMatchShooterRotation:!0,cannonTarget:void 0,cannonShotSpeed:4,cannonShotType:"ShotCannonNormal",isShooting:!1};e.a={componentFlag:"canShootCannon",DEFAULTS:r,process:function(t){if(t.isShooting){var e=Date.now();e-t.cannonLastShotTime>=t.CANNON_LOAD_TIME_MS&&(t.cannonGetMuzzleFuncs.forEach(function(t){var e,a=t(this);e=this.cannonMatchShooterRotation?this.rotation:n.a.getAngleFromTo(a,this.cannonTarget);var r=Math.cos(e)*this.cannonShotSpeed,c=Math.sin(e)*this.cannonShotSpeed;n.a.create(this.cannonShotType,{x:a.x+this.x,y:a.y+this.y,team:this.team,dx:r+(this.dx||0),dy:c+(this.dy||0)}),Object(i.b)(o[this.cannonShotType])}.bind(t)),t.cannonLastShotTime=e)}}}},328:function(t,e,a){"use strict";e.a={componentFlag:"canLimitSpeed",DEFAULTS:{MAX_SPEED:40,MAX_SPEED2:1600},process:function(t){var e=Math.pow(t.dx,2)+Math.pow(t.dy,2);if(e>t.MAX_SPEED2){var a=t.MAX_SPEED*Math.pow(e,-.5);t.dx*=a,t.dy*=a}}}},329:function(t,e,a){"use strict";var n={accelerate:function(t){this.dx+=Math.cos(this.rotation)*t,this.dy+=Math.sin(this.rotation)*t}};e.a={componentFlag:"canAccelerate",DEFAULTS:n}},330:function(t,e,a){"use strict";e.a={componentFlag:"canDisplayHit",DEFAULTS:{hitTime:-1},process:function(t){t.renderHit&&t.renderHit()}}},331:function(t,e,a){"use strict";var n=a(6),i=a(35),o={TIME_OFFLOAD_SUPPLY:200,MAX_MATERIALS_FINISHED:500,createPBase:function(){var t=this.planet;Object(i.b)("nav"),t.pbase=n.a.create("PBase",{x:t.x,y:t.y,planet:t,team:this.team}),n.a.destroy(this)},createPColony:function(){var t=this.planet;Object(i.b)("nav"),t.pcolony=n.a.create("PColony",{x:t.x,y:t.y,planet:t,team:this.team}),n.a.destroy(this)},loadOrDumpSupply:function(){var t=this.planet.pbase;if(0===t.materialsFinished){t.materialsFinished+=this.materialsFinished,this.materialsFinished=0;var e=0;t.materialsFinished>t.MAX_FINISHED_MATERIALS?(e=t.materialsFinished-t.MAX_FINISHED_MATERIALS,t.materialsFinished=t.MAX_MATERIALS_FINISHED,this.materialsFinished=e,this.unloadSupply()):n.a.destroy(this)}else if(this.planet.materialsFinished>0&&this.materialsFinished<this.MAX_MATERIALS_FINISHED){var a=this.MAX_MATERIALS_FINISHED-this.materialsFinished;a>=this.planet.materialsFinished?(this.materialsFinished+=this.planet.materialsFinished,this.planet.materialsFinished=0):(this.materialsFinished+=a,this.planet.materialsFinished-=a),this.loadSupply()}}};e.a={componentFlag:"canColonizePlanet",DEFAULTS:o,process:function(t){t.canOrbitPlanet&&t.isOrbitingPlanet&&t.materialsFinished>0&&(void 0===t.supplyTime?t.supplyTime=t.TIME_OFFLOAD_SUPPLY:t.supplyTime>0?t.supplyTime--:0===t.supplyTime&&(t.planet.pbase?t.planet.pcolony?t.loadOrDumpSupply():t.createPColony():t.createPBase()))}}},332:function(t,e,a){"use strict";var n=a(26),i=a(6),o={},r=function(t){return o[t]||[]};e.a={add:function(t){var e=t.type;o[e]?o[e].push(t):o[e]=[t]},remove:function(t){t.hp=0,t.planet&&delete t.planet[t.type.toLowerCase()],delete t.target;var e=r(t.type),a=e.indexOf(t);-1!==a&&e.splice(a,1),n.a.removeChild(t.graphics)},getByType:r,getAbsoluteNearestByType:function(t,e){var a,n=1/0,o=r(e);return o&&o.forEach(function(e){var o=Object(i.b)(t,e);o<n&&(n=o,a=e)}),a}}},333:function(t,e,a){"use strict";function n(t,e,a){var n=t.x>>o,i=t.y>>o;return n+=e||0,i+=a||0,n+i*r}var i=a(6),o=11,r=a(67).a>>o,c=[],s=[];e.a={prepareNext:function(){c=s,s=[]},commit:function(t){if(t.hp>0){var e=n(t,0,0);s[e]instanceof Array?s[e].push(t):s[e]=[t]}return this},getNearest:function(t,e,a){var o=[].concat(c[n(t,-1,-1)],c[n(t,0,-1)],c[n(t,1,-1)],c[n(t,0,-1)],c[n(t,0,0)],c[n(t,0,1)],c[n(t,-1,1)],c[n(t,0,1)],c[n(t,1,1)]).filter(Boolean);return(e||a)&&(o=o.filter(function(t,e,a){var n=!0;return e>0&&(n=n&&Object(i.b)(this,a)<=e),t&&(n=n&&a.type===t),n}.bind(t,e,a))),o}}},334:function(t,e,a){"use strict";var n=a(7),i=a(12),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-2,2,-4,0,-2,-2,-4,-4,-4,-6,2,-4,0,-2,8,0,0,2,2,4,-4,6,-4,4,-2,2],collisionPath:[-4,-6,8,0,-4,6]},flame1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]},flame2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,4,-8,5,-4,6]}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="Fighter",a.geo=Object(n.a)(r.body),a.mass=10,a.hp=6,a.maxHp=6,a.dx=0,a.dy=0,a.rotation=0,a.canExplode=!0,a.cannonGetMuzzleFuncs=[function(t){return t.collision.calcPoints[1]}],a.canLimitSpeed=!0,a.canMoveLinearly=!0,a.canAccelerate=!0,a.canDockPlanet=!0,a.flameOn=function(){a.setChildVisible(0,!0),a.setChildVisible(1,!0)},a.flameOff=function(){a.setChildVisible(0,!1),a.setChildVisible(1,!1)},Object.assign(a,e),a.assignTeamColor(),a.geo.graphics.addChild(Object(n.a)(r.flame1).graphics,Object(n.a)(r.flame2).graphics),a}return o(e,t),e}(i.a);e.a=c},336:function(t,e,a){"use strict";var n=a(7),i=a(12),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={body:{type:"polygon",lineStyle:{width:1,color:15658734,alpha:1},collisionPath:[-44,-4,-38,-8,26,-10,44,0,26,10,-38,8,-44,4],path:[-26,-2,-26,-8,-38,-8,-38,2,-44,4,-44,-4,-38,-2,-38,8,-26,8,-26,-2,24,-2,26,-10,44,0,26,10,24,2,-26,2]},cargopodL:{type:"polygon",lineStyle:{width:1,color:15658734,alpha:1},path:[-24,-2,-24,-12,22,-12,22,-2]},cargopodR:{type:"polygon",lineStyle:{width:1,color:15658734,alpha:1},path:[-24,2,-24,12,22,12,22,2]},flag:{type:"polygon",lineStyle:{width:2,color:255,alpha:1},path:[34,0,42,0]},turret1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[-34,0,-30,-3,-30,3,-34,0]},turret2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[28,-3,32,0,28,3,28,-2]},flame:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-44,-2,-50,0,-44,2]}},c=function(t){function e(e){var a=t.call(this)||this;a.type="Freighter",a.geo=Object(n.a)(r.body),a.hp=10,a.maxHp=10,a.canDisplayHit=!0,a.canOrbitPlanet=!0,a.isOrbitingPlanet=!1,a.orbitDistance=205,a.canExplode=!0,a.canColonizePlanet=!0,a.canMoveToTarget=!0,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=0,a.loadSupply=function(){a.setChildVisible(2,!0),a.setChildVisible(3,!0)},a.unloadSupply=function(){a.setChildVisible(2,!1),a.setChildVisible(3,!1)},a.flameOn=function(){return a.setChildVisible(0,!0)},a.flameOff=function(){return a.setChildVisible(0,!1)},Object.assign(a,e),a.assignTeamColor();var i=Object(n.a)(r.cargopodL),o=Object(n.a)(r.cargopodR),c=Object(n.a)(r.turret1),s=Object(n.a)(r.turret2),l=Object(n.a)(r.flag),h=Object(n.a)(r.flame);return a.geo.graphics.addChild(h.graphics,l.graphics,i.graphics,o.graphics,c.graphics,s.graphics),a.flameOff(),a}return o(e,t),e}(i.a);e.a=c},337:function(t,e,a){"use strict";var n=a(11),i=a(7),o=a(12),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={_name:"Planetary Base",body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-20,20,-20,-20,20,-20,20,20,-20,20]},turret1:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[65,-60,65,-65,60,-65,65,-60]},turret2:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[-65,-60,-65,-65,-60,-65,-65,-60]},turret3:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[65,60,65,65,60,65,65,60]},turret4:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[-65,60,-65,65,-60,65,-65,60]}},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PBase",a.geo=Object(i.a)(c.body),a.team=n.a.NONE,a.hp=20,a.maxHp=20,a.canExplode=!0,a.canHarvest=!0,a.canRepair=!0,a.canRefine=!0,a.canConstruct=!0,a.canOccupyPlanet=!0,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=0,Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a.geo.graphics.addChild(Object(i.a)(c.turret1).graphics,Object(i.a)(c.turret2).graphics,Object(i.a)(c.turret3).graphics,Object(i.a)(c.turret4).graphics),a}return r(e,t),e}(o.a);e.a=s},338:function(t,e,a){"use strict";var n=a(11),i=a(7),o=a(12),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",_name:"Planetary Colony",lineStyle:{width:1,color:255,alpha:1},path:[-30,40,-70,40,-70,-40,-30,-40,-30,40]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PColony",a.geo=Object(i.a)(c),a.team=n.a.NONE,a.hp=30,a.maxHp=30,a.canMine=!0,a.canExplode=!0,a.canOccupyPlanet=!0,a.canRepair=!0,a.REPAIR_COST_FINISHED=10,a.REPAIR_TIME=20,Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a}return r(e,t),e}(o.a);e.a=s},339:function(t,e,a){"use strict";var n=a(11),i=a(7),o=a(12),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",_name:"Planetary Communications Center",lineStyle:{width:1,color:255,alpha:1},path:[40,30,0,30,0,50,40,50,40,30,60,35,30,10,40,30]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PComm",a.geo=Object(i.a)(c),a.team=n.a.NONE,a.hp=20,a.maxHp=20,a.canExplode=!0,a.canRepair=!0,a.canOccupyPlanet=!0,a.REPAIR_COST_FINISHED=2,a.REPAIR_TIME=10,Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a}return r(e,t),e}(o.a);e.a=s},34:function(t,e,a){"use strict";var n=function(t,e){return Math.round(i(t,e))},i=function(t,e){return t+Math.random()*(e-t)};e.a={int:n,float:i,arrayElement:function(t){return t[n(0,t.length-1)]}}},340:function(t,e,a){"use strict";var n=a(11),i=a(7),o=a(12),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",_name:"Planetary Lab",lineStyle:{width:1,color:255,alpha:1},path:[0,-40,0,-70,50,-70,50,-40,0,-40]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PLab",a.geo=Object(i.a)(c),a.team=n.a.NONE,a.hp=20,a.maxHp=20,a.canExplode=!0,a.canOccupyPlanet=!0,a.canManufacture=!0,a.PRODUCT={Freighter:{cost:300,time:120},Fighter:{cost:500,time:90}},Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a}return r(e,t),e}(o.a);e.a=s},341:function(t,e,a){"use strict";var n=a(11),i=a(7),o={body:{type:"circle",radius:100,fill:{color:0,alpha:1},lineStyle:{width:1,color:65280,alpha:1}},flag:{type:"polygon",fill:{color:255,alpha:1},path:[-5,-4,-5,4,5,4,5,-4]}},r=function(){function t(t){this.type="Planet",this.canOrbitStar=!0,this.canStoreMaterial=!0,this.team=n.a.NONE,this.orbitDistance=0,this.orbitRotation=0,this.materialsRaw=0,this.materialsFinished=0,this.hp=2e3,this.mass=100,Object.assign(this,t),this.geo=Object(i.a)(o.body),this.geo.graphics.addChild(Object(i.a)(o.flag).graphics),this.updateFlagColor()}return t.prototype.isOccupied=function(){return Boolean(this.pbase||this.plab||this.pcolony||this.pcomm)},t.prototype.updateFlagColor=function(){var t=this.geo.graphics.children[0];this.team===n.a.NONE?t.visible=!1:(t.visible=!0,t.graphicsData[0].fillColor=n.a._COLORS[this.team])},t.DIST_SURFACE2=11025,t}();e.a=r},342:function(t,e,a){"use strict";var n=a(7),i=a(12),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={body:{type:"polygon",lineStyle:{width:1,color:16711935,alpha:1},path:[-4,1,0,2,4,0,0,-2,-4,-1,-4,1],collisionPath:[-4,2,0,4,8,0,0,-4,-4,-2]},flame:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="Probe",a.geo=Object(n.a)(r.body),a.AUDIO_HIT="hit2",a.hp=2,a.maxHp=2,a.hasDied=!1,a.hitTime=-1,a.patrolIndex=0,a.rotation=0,a.flameOn=function(){return a.setChildVisible(0,!0)},a.flameOff=function(){return a.setChildVisible(0,!1)},Object.assign(a,e),a.assignTeamColor(),a.geo.graphics.addChild(Object(n.a)(r.flame).graphics),a.flameOff(),a}return o(e,t),e}(i.a);e.a=c},343:function(t,e,a){"use strict";var n=a(7),i=a(12),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={_name:"Orbital Sensor Array",type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[6,26,12,28,12,40,18,46,18,34,12,40,6,42]},c=function(t){function e(e){var a=t.call(this)||this;return a.type="SensorArray",a.geo=Object(n.a)(r),a.hp=5,a.maxHp=5,a.canRepair=!0,a.canOccupySpacePort=!0,Object.assign(a,e),a.assignTeamColor(),a}return o(e,t),e}(i.a);e.a=c},344:function(t,e,a){"use strict";var n=a(11),i=a(7),o={cannon_normal:{type:"polygon",fill:{color:16777215,alpha:1},path:[-1,1,1,1,1,-1,-1,-1,-1,1]},cannon_heavy:{type:"polygon",lineStyle:{width:2,color:65535,alpha:1},path:[-3,0,0,0,0,-3,0,0,0,3,0,0,3,0]}},r={cannon_heavy:2,cannon_normal:1},c=function(){return function(t){this.type="Shot",this.canMoveLinearly=!0,this.canDamage=!0,this.canMetabolize=!0,this.shotType="cannon_normal",this.team=n.a.NONE,this.hp=50,this.x=0,this.y=0,this.dx=0,this.dy=0,this.damageHp=1,Object.assign(this,t),this.geo=Object(i.a)(o[this.shotType]),this.damageHp=r[this.shotType]}}();e.a=c},345:function(t,e,a){"use strict";var n=a(7),i=a(12),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={_name:"Space Dock",type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[6,-42,20,-42,20,-22,14,-26,6,-26]},c=function(t){function e(e){var a=t.call(this)||this;return a.type="SpaceDock",a.geo=Object(n.a)(r),a.hp=8,a.maxHp=8,a.canRepair=!0,a.canManufacture=!0,a.PRODUCT={Fighter:{cost:200,time:60},Probe:{cost:15,time:10}},a.canOccupySpacePort=!0,Object.assign(a,e),a.assignTeamColor(),a}return o(e,t),e}(i.a);e.a=c},346:function(t,e,a){"use strict";var n=a(7),i=a(12),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={_name:"Space Port",body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-2,0,-6,-20,-6,-36,-2,-44,6,-44,6,-24,2,-20,2,20,6,24,6,44,-2,44,-6,36,-6,20,-2,0]},turret1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[0,28,4,26,4,30,0,28]},turret2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[0,-28,4,-26,4,-30,0,-28]},turret3:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[4,44,2,48,0,44]},turret4:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[4,-44,2,-48,0,-44]},flame1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,20,-12,22,-6,24]},flame2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,-24,-12,-22,-6,-20]},flame3:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,32,-12,34,-6,36]},flame4:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,-36,-12,-34,-6,-32]}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="SpacePort",a.geo=Object(n.a)(r.body),a.hp=30,a.maxHp=30,a.canRepair=!0,a.canRefine=!0,a.canOrbitPlanet=!0,a.orbitDistance=205,a.canExplode=!0,a.EXPLOSION_FRAGMENTS=12,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=0,Object.assign(a,e),a.assignTeamColor(),a.geo.graphics.addChild(Object(n.a)(r.flame1).graphics,Object(n.a)(r.flame2).graphics,Object(n.a)(r.flame3).graphics,Object(n.a)(r.flame4).graphics,Object(n.a)(r.turret1).graphics,Object(n.a)(r.turret2).graphics,Object(n.a)(r.turret3).graphics,Object(n.a)(r.turret4).graphics),a}return o(e,t),e}(i.a);e.a=c},347:function(t,e,a){"use strict";var n=a(11),i=a(7),o={type:"circle",radius:200,fill:{color:0,alpha:1},lineStyle:{width:1,color:16776960,alpha:1}},r=function(){function t(t){this.type="Star",this.x=0,this.y=0,this.hp=1e4,this.mass=500,this.team=n.a.NONE,Object.assign(this,t),this.geo=Object(i.a)(o)}return t.DIST_SURFACE2=4e4,t}();e.a=r},348:function(t,e,a){"use strict";function n(t,e,a,n,o){var r=t[o];r||(r=function(t,e){var a=new i.Graphics;return a.beginFill(0,0),a.lineStyle(1,t,1),a.drawRect(-e,-e,e,e),a.endFill(),s.addChild(a),a}(e,a),t[o]=r),r.x=n.x*f,r.y=n.y*f}var i=a(27),o=(a.n(i),a(6)),r=a(67),c=a(26),s=new i.Graphics;s.beginFill(0,0),s.lineStyle(1,16777215,.8),s.drawRect(0,0,100,100),s.endFill(),s.x=4,s.y=4,c.a.addChildToHUD(s);var l=[],h=[],p=[],u=[],f=100/r.b.MAX_COORDINATE,y=0,d=n.bind(null,h,65280,2),g=n.bind(null,l,16776960,2),m=n.bind(null,u,11184810,1);e.a={update:function(){var t=Date.now();if(t-y>500){var e=o.a.getByType("Star");e&&(e.length!=l.length&&(l=l.slice(0,e.length-1)),e.forEach(g));var a=o.a.getByType("Planet");a&&(a.length!=h.length&&(h=h.slice(0,a.length-1)),a.forEach(d));var i=o.a.getByType("Fighter");i&&(i.length!=p.length&&(p=p.slice(0,i.length-1)),i.forEach(function(t,e){n(p,o.a.getTeamColor(t.team),1,t,e)}));var r=o.a.getByType("Freighter");r&&(r.length!=u.length&&(u=u.slice(0,r.length-1)),r.forEach(m)),y=t}}}},349:function(t,e,a){"use strict";function n(t){t.nearestEnemy?(r.visible=!0,r.rotation=t.nearestEnemy):r.visible=!1,t.nearestStar?(o.visible=!0,o.rotation=t.nearestStar):o.visible=!1,t.nearestPlanet?(i.visible=!0,i.rotation=t.nearestPlanet):i.visible=!1}var i,o,r,c,s,l,h=a(27),p=(a.n(h),a(26)),u=a(6),f=Math.PI/180,y={fontFamily:"arial",fontSize:8,fill:16316664,align:"center"},d=!0,g=0;e.a={init:function(){i=function(){var t=new h.Graphics;t.beginFill(0,0),t.lineStyle(4,16777215,.08),t.drawCircle(0,0,45),t.endFill(),t.x=0,t.y=0;var e=new h.Graphics;return e.beginFill(0,0),e.lineStyle(4,65280,1),e.arc(0,0,45,-3*f,3*f),e.endFill(),e.x=0,e.y=0,t.addChild(e),t}(),o=function(){var t=new h.Graphics;t.beginFill(0,0),t.lineStyle(4,16777215,.08),t.drawCircle(0,0,50),t.endFill(),t.x=0,t.y=0;var e=new h.Graphics;return e.beginFill(0,0),e.lineStyle(4,16776960,1),e.arc(0,0,50,-6*f,6*f),e.endFill(),e.x=0,e.y=0,t.addChild(e),t}(),r=function(){var t=new h.Graphics;t.beginFill(0,0),t.lineStyle(1,16777215,.08),t.drawCircle(0,0,50),t.endFill(),t.x=0,t.y=0;var e=new h.Graphics;return e.beginFill(0,0),e.lineStyle(2,16711680,1),e.arc(0,0,50,-f,f),e.endFill(),e.x=0,e.y=0,t.addChild(e),t}(),c=function(){var t=new h.Text("Tactical Radar",y);return t.x=-t.width>>1,t.y=-t.height>>1,t}(),(s=new h.Container).addChild(i,o,r,c),s.x=54,s.y=162,s.visible=!0,p.a.addChildToHUD(s)},update:function(){if(l&&d){var t=Date.now();if(t-g>500){var e=u.a.getAbsoluteNearestByType(l,"Planet"),a=u.a.getAbsoluteNearestByType(l,"Star");n({nearestEnemy:void 0,nearestPlanet:e?u.a.getAngleFromTo(l,e):void 0,nearestStar:a?u.a.getAngleFromTo(l,a):void 0}),g=t}}},setOrigin:function(t){t&&(l={x:t.x,y:t.y})},setRotations:n,set isEnabled(t){d=t,s.visible=t},get isEnabled(){return d}}},35:function(t,e,a){"use strict";function n(t){var e=t.name,a=t.arrayBuffer;o.decodeAudioData(a).then(function(t){r[e]=t})}function i(t){var e=o.createBufferSource();e.buffer=r[t],e.connect(o.destination),e.start()}e.a=n,e.b=i;var o=new AudioContext,r={}},350:function(t,e,a){"use strict";function n(t){t.explode(),r.a.destroy(t)}function i(t){"Star"===t.type?function(t){var e=r.a.getDistSquared(this,t);if(e<c){var a=t.x-this.x,i=t.y-this.y,o=this.MASS*t.MASS/Math.pow(e,1.5);this.dx+=a*o,this.dy+=i*o,e<t.DIST_SURFACE2&&n(this)}}.call(this,t):"Planet"===t.type&&function(t){var e=r.a.getDistSquared(this,t);if(e<s){var a=this.MASS*t.MASS/Math.pow(e,1.5),i=t.x-this.x,o=t.y-this.y;if(this.dx+=i*a,this.dy+=o*a,e<t.DIST_SURFACE2){var c=this.dx*this.dx+this.dy*this.dy,u=this.rotation,f=r.a.getAngleFromTo(t,this),y=Math.abs(f-u);y>Math.PI&&(u>0?u-=p:u+=p,y=Math.abs(f-u)),y<l&&c<h?this.dockPlanet(t):n(this)}}}.call(this,t)}function o(t){t&&!t.isDockedPlanet&&t.hp>0&&r.a.getNearest(t).forEach(i.bind(t))}e.a=function(){r.a.getByType("Fighter").forEach(o)};var r=a(6),c=Math.pow(1e3,2),s=Math.pow(800,2),l=Math.PI/4,h=4.41,p=2*Math.PI},351:function(t,e,a){"use strict";function n(t){return!t.pbase||!t.pcolony}function i(t,e){return e.team===t}function o(t){return t.pcolony&&t.plab&&!t.plab.isManufacturing}function r(t,e){if(t){var a=s.a.arrayElement(t).plab;a&&a.orderManufacture(e)}}e.a=function(){var t=Date.now();t-p>h&&(function(t){var e,a=c.a.getByType("Planet"),s=c.a.getByType("Fighter"),h=c.a.getByType("Freighter");h&&(h=h.filter(i.bind(null,t))),a&&((a=a.filter(i.bind(null,t))).filter(n).forEach(function(t,e){if(t)for(var a=t.length-1;a>=0;a--){var n=t[a];if(!n.isOrbitingPlanet&&!n.target||n.target&&"Planet"!==n.target.type){n.target=e,n.planet=void 0;break}}}.bind(null,h)),e=(e=a.filter(o)).length>0?e:void 0,h&&a.length>h.length&&r(e,"Freighter")),s&&(s=s.filter(i.bind(null,t))),l.a.getFocalPoint()||(s.length>0?l.a.setFocalPoint(s[0]):r(e,"Fighter"))}(c.a.TEAM.MAGENTA),p=t)};var c=a(6),s=a(34),l=a(148),h=3e3,p=0},6:function(t,e,a){"use strict";function n(t,e){var a=e.x-t.x,n=e.y-t.y;return a*a+n*n}function i(t){var e=c.a.getByType(t);e&&e.forEach(r.a.update)}e.b=n;var o=a(26),r=a(311),c=a(332),s=a(11),l=a(333),h=a(334),p=a(336),u=a(337),f=a(338),y=a(339),d=a(340),g=a(341),m=a(342),b=a(343),S=a(344),_=a(345),T=a(346),O=a(347),E={Fighter:h.a,Freighter:p.a,PBase:u.a,PColony:f.a,PComm:y.a,PLab:d.a,Planet:g.a,Probe:m.a,SensorArray:b.a,Shot:S.a,SpaceDock:_.a,SpacePort:T.a,Star:O.a},A=["Star","Planet","PBase","PColony","PComm","PLab","SpacePort","SpaceDock","SensorArray","Fighter","Freighter","Shot"];e.a={create:function(t,e){var a;return t in E&&(a=new E[t](e),r.a.init(a),c.a.add(a),o.a.addChild(a.geo.graphics)),a},updateAll:function(){A.forEach(i)},commit:l.a.commit,prepareNext:l.a.prepareNext,getNearest:l.a.getNearest,destroy:c.a.remove,getByType:c.a.getByType,getAbsoluteNearestByType:c.a.getAbsoluteNearestByType,getTeamColor:function(t){return s.a._COLORS[t]},getDistSquared:n,getAngleFromTo:function(t,e){var a=e.x-t.x,n=e.y-t.y;return Math.atan2(n,a)},TEAM:s.a}},67:function(t,e,a){"use strict";function n(){return{x:c.a.float(l,s-l),y:c.a.float(l,s-l)}}function i(t){var e=o.a.getByType("Star");if(e){for(var a=0;a<e.length;a++)if(e[a]!==t&&o.a.getDistSquared(t,e[a])<h)return!1;return!0}return!0}a.d(e,"a",function(){return s});var o=a(6),r=a(11),c=a(34),s=32768,l=6e3,h=l*l;e.b={init:function(){for(var t,e=c.a.int(2,5),a=0;a<e;a++){do{t=n()}while(!i(t));var l=o.a.create("Star",t);if(c.a.float(0,1)<.8)for(var h=c.a.int(1,2),p=0;p<h;p++)o.a.create("Planet",{x:0,y:0,star:l,orbitDistance:1600+p*c.a.int(2,5)*800,orbitRotation:c.a.float(-Math.PI,Math.PI)})}var u=o.a.create("Fighter",{x:c.a.int(0,s),y:c.a.int(0,s),team:r.a.MAGENTA});o.a.create("Freighter",{x:u.x+c.a.int(-100,100),y:u.y+c.a.int(-100,100),target:u,team:r.a.MAGENTA,isOrbitingPlanet:!1,materialsFinished:500}),o.a.create("Freighter",{x:u.x+c.a.int(-100,100),y:u.y+c.a.int(-100,100),target:u,team:r.a.MAGENTA,isOrbitingPlanet:!1,materialsFinished:500})},MAX_COORDINATE:s}},7:function(t,e,a){"use strict";function n(t,e){return{set x(t){t<0?(t=0,this.dx&&(this.dx=0)):t>32768&&(t=32768,this.dx&&(this.dx=0)),this.graphics.x=t,this.collision.pos.x=t},set y(t){t<0?(t=0,this.dy&&(this.dy=0)):t>32768&&(t=32768,this.dy&&(this.dy=0)),this.graphics.y=t,this.collision.pos.y=t},set rotation(t){t>l?t-=l:t<-l&&(t+=l),this.collision instanceof r.a.Circle||(this.collision.setAngle(t),this.graphics.rotation=t)},get x(){return this.graphics.x},get y(){return this.graphics.y},get rotation(){return this.graphics.rotation},graphics:t,collision:e}}e.a=function(t,e){return"circle"===(t=c({},t,{options:e})).type?function(t){var e=new i.Graphics;return t.lineStyle&&e.lineStyle(t.lineStyle.width,t.lineStyle.color,t.lineStyle.alpha),t.fill?e.beginFill(t.fill.color,t.fill.alpha):e.beginFill(0,0),e.drawCircle(0,0,t.radius),e.endFill(),e.x=t.x||0,e.y=t.y||0,n(e,new r.a.Circle(s(e.x,e.y),t.radius))}(t):function(t){var e=new i.Graphics;t.lineStyle&&e.lineStyle(t.lineStyle.width,t.lineStyle.color,t.lineStyle.alpha),t.fill?e.beginFill(t.fill.color,t.fill.alpha):e.beginFill(0,0),e.drawPolygon(t.path),e.endFill(),e.x=t.x||0,e.y=t.y||0;var a=[];if(t.collisionPath)for(var o=0;o<t.collisionPath.length;o+=2)a.push(s(t.collisionPath[o],t.collisionPath[o+1]));return n(e,new r.a.Polygon(s(e.x,e.y),a))}(t)};var i=a(27),o=(a.n(i),a(335)),r=a.n(o),c=this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=function(t,e){return new r.a.Vector(t,e)},l=2*Math.PI}},[151]);