webpackJsonp([0],[,,,function(t,e,a){"use strict";function n(t,e){var a=e.x-t.x,n=e.y-t.y;return a*a+n*n}function o(t){var e=r.a.getByType(t);e&&e.forEach(i.a.update)}e.b=n;var i=a(263),r=a(293),c=a(10),s=a(294),l=a(295),u=a(296),p=a(297),h=a(298),f=a(299),y=a(300),d=a(301),g=a(302),m=a(303),b=a(304),_=a(124),T=a(125),O=a(305),v=a(306),E=a(307),S=a(308),A=a(309),x={Fighter:l.a,Freighter:u.a,PBase:p.a,PColony:h.a,PComm:f.a,PLab:y.a,Planet:_.a,Probe:d.a,SensorArray:g.a,SpaceDock:m.a,SpacePort:b.a,Star:T.a,CannonShot:O.a,HeavyCannonShot:v.a,ClusterRocket:A.a,LaserBolt:E.a,HomingMissile:S.a},P=["Star","Planet","PBase","PColony","PComm","PLab","SpacePort","SpaceDock","SensorArray","Fighter","Freighter","CannonShot","HeavyCannonShot","LaserBolt","HomingMissile","ClusterRocket"];e.a={create:function(t,e){var a;return t in x&&(a=new x[t](e),i.a.init(a),r.a.add(a)),a},updateAll:function(){P.forEach(o)},commit:s.a.commit,prepareNext:s.a.prepareNext,getNearest:s.a.getNearest,getNearestEnemyTarget:s.a.getNearestEnemyTarget,destroy:r.a.remove,getByType:r.a.getByType,getAbsoluteNearestByType:r.a.getAbsoluteNearestByType,getTeamColor:function(t){return c.a._COLORS[t]},getDistSquared:n,getAngleFromTo:function(t,e){var a=e.x-t.x,n=e.y-t.y;return Math.atan2(n,a)},TEAM:c.a}},,,function(t,e,a){"use strict";var n=a(10),o=function(){function t(){this.team=n.a.NONE}return Object.defineProperty(t.prototype,"x",{get:function(){return this.geo.x},set:function(t){this.geo.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.geo.y},set:function(t){this.geo.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.geo.rotation},set:function(t){this.geo.rotation=t},enumerable:!0,configurable:!0}),t.prototype.getChildAt=function(t){return this.geo.graphics.getChildAt(t)},t.prototype.setChildVisible=function(t,e){this.getChildAt(t).visible=e},t.prototype.assignTeamColor=function(){this.geo.graphics.currentPath.lineColor=n.a._COLORS[this.team]},t.prototype.renderHit=function(){this.hitTime>0?(this.hitTime--,this.geo.graphics.alpha=Math.random()):0===this.hitTime&&(this.hitTime=-1,this.geo.graphics.alpha=1)},t}();e.a=o},function(t,e,a){"use strict";e.b=function(t,e){var a=t.x,n=t.y;return Object(o.pointInPolygon)(r(a,n),e.geo.collider)},e.a=function(t,e){void 0===e&&(e={});var a,s=(t=i({},t,{options:e})).lineStyle,l=t.fill,u=t.path,p=t.radius,h=t.x,f=t.y,y=t.collisionPath,d=new n.Graphics;s&&d.lineStyle(s.width,s.color,s.alpha),l?d.beginFill(l.color,l.alpha):d.beginFill(0,0),d.x=h||0,d.y=f||0;var g=r(d.x,d.y);if("circle"===t.type)d.drawCircle(0,0,p),a=new o.Circle(g,p);else{for(var m=[],b=y||u,_=0;_<b.length;_+=2)m.push(r(b[_],b[_+1]));d.drawPolygon(u),a=new o.Polygon(g,m)}return d.endFill(),{set x(t){t<0?t=0:t>32768&&(t=32768),this.graphics.x=t,this.collider.pos.x=t},set y(t){t<0?t=0:t>32768&&(t=32768),this.graphics.y=t,this.collider.pos.y=t},set rotation(t){t>c?t-=c:t<-c&&(t+=c),this.collider instanceof o.Circle||(this.collider.setAngle(t),this.graphics.rotation=t)},get x(){return this.graphics.x},get y(){return this.graphics.y},get rotation(){return this.graphics.rotation},graphics:d,collider:a}};var n=a(19),o=(a.n(n),a(282)),i=(a.n(o),this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}),r=function(t,e){return new o.Vector(t,e)},c=2*Math.PI},,,function(t,e,a){"use strict";e.a={_COLORS:[255,65280,16711680,16776960,16711935],NONE:-1,BLUE:0,GREEN:1,RED:2,YELLOW:3,MAGENTA:4}},,,function(t,e,a){"use strict";var n=function(t,e){return Math.round(o(t,e))},o=function(t,e){return t+Math.random()*(e-t)};e.a={int:n,float:o,arrayElement:function(t){return t[n(0,t.length-1)]}}},,function(t,e,a){"use strict";e.a=function(t){var e=t.name,a=t.arrayBuffer;n.decodeAudioData(a).then(function(t){o[e]=t})},e.b=function(t){var e=n.createBufferSource();e.buffer=o[t],e.connect(n.destination),e.start()};var n=new AudioContext,o={}},,,,,,,,function(t,e,a){"use strict";function n(){r=innerWidth,s=innerHeight,c=r>>1,l=s>>1,i&&i.resize(r,s)}a.d(e,"a",function(){return h});var o=a(19);a.n(o),o.settings.SCALE_MODE=o.SCALE_MODES.NEAREST;var i,r,c,s,l,u=new o.Container,p=new o.Container,h=function(t){return u.addChild(t)};e.b={init:function(){void 0===i&&(n(),addEventListener("resize",n),u.addChild(p),i=new o.WebGLRenderer(r,s),document.body.appendChild(i.view))},setGlobalAlpha:function(t){return u.alpha=t},addChild:function(t){return p.addChild(t)},removeChild:function(t){return p.removeChild(t)},removeAllChildren:function(){for(;p.children[0];)p.removeChild(p.children[0]);for(;u.children[0];)u.removeChild(u.children[0]);u.addChild(p)},render:function(){return i.render(u)},centerOn:function(t){t&&(p.x=c-t.x,p.y=l-t.y)},addChildToHUD:h}},,,,,,,,,,,,,,,,,function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n=32768},,,,,function(t,e,a){"use strict";function n(t){var e=t.color,a=t.size,n=t.x,o=t.y,i=new c.Graphics;return i.beginFill(e),i.drawRect(0,0,a,a),i.lineWidth=a,i.endFill(),i.x=n,i.y=o,i}function o(){f=null}function i(t){if(t){var e=t.x,a=t.y,n=0,o=0;f?(n=e-f.x,o=a-f.y):function(t){p=innerWidth>>1,h=innerHeight>>1,l.forEach(function(e){e.x=t.x+s.a.float(-p,p),e.y=t.y+s.a.float(-h,h)})}(t),l.forEach(function(t,e,a,n){1===n.lineWidth?(t*=u.DIM.speed,e*=u.DIM.speed):(t*=u.BRIGHT.speed,e*=u.BRIGHT.speed),n.x+=t,n.y+=e,n.x<a.x-p?n.x=a.x+p:n.x>a.x+p&&(n.x=a.x-p),n.y<a.y-h?n.y=a.y+h:n.y>a.y+h&&(n.y=a.y-h)}.bind(null,n,o,t)),f={x:e,y:a}}else f=null}var r,c=a(19),s=(a.n(c),a(13)),l=[],u={BRIGHT:{speed:.01,count:8,size:2,color:11184810,x:0,y:0},DIM:{speed:.3,count:20,size:1,color:15790320,x:0,y:0}},p=innerWidth>>1,h=innerHeight>>1,f=null;e.a={init:function(){var t;if(0===l.length){for(t=0;t<u.DIM.count;t++)l.push(n(u.DIM));for(t=0;t<u.BRIGHT.count;t++)l.push(n(u.BRIGHT))}else i(null);return r||(r=addEventListener("resize",o)),l},process:i}},,,,,,,,,,,,,,,,function(t,e,a){"use strict";var n,o=a(6);e.a={getFocus:function(){return n instanceof o.a?{x:n.x,y:n.y}:n},setFocus:function(t){return n=t}}},function(t,e,a){"use strict";var n,o,i=a(61),r=a(257),c=a(258),s=a(123),l=a(259),u=a(260),p=function(t){return n=t};!function(t){t[t.Keyboard=0]="Keyboard",t[t.GamePad=1]="GamePad"}(o||(o={}));var h=localStorage.getItem("input.device")||o.Keyboard;e.a={getDevice:function(){return h===o.Keyboard?c.a:r.a},processGameScreen:function(){var t,e;switch(h){case o.GamePad:t=r.a.getEvents(),e=r.a.getInputState();break;case o.Keyboard:default:t=c.a.getEvents(),e=c.a.getInputState()}if(n)if(n.hp>0)switch(s.a.setIconVisible(!1),i.a.setFocus(n),n.type){case"Fighter":Object(l.a)(n,t)}else Object(u.b)(n),p(null);else i.a.setFocus(Object(u.a)(e)),s.a.setIconVisible(!0)},hasControlledEntity:function(){return Boolean(n)},setControlledEntity:p}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";function n(){r.x=innerWidth-u,r.y=u}var o=a(19),i=(a.n(o),a(23)),r=new o.Graphics,c=[0,0,-1,-1,-.5,-1,-1,-1,-1,-.5,-1,-1].map(function(t){return 16*t}),s=function(t){var e=new o.Graphics;return e.lineStyle(1,34816,1),e.x=0,e.y=0,e.beginFill(0,0),e.lineWidth=1,e.drawPolygon(c),e.endFill(),e.rotation=t,e};r.addChild(s(0),s(.5*Math.PI),s(Math.PI),s(1.5*Math.PI));var l=function(t){return r.visible=t},u=20;e.a={init:function(){Object(i.a)(r),n(),l(!1),addEventListener("resize",n)},symbol:r,setIconVisible:l}},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={body:{type:"circle",radius:100,fill:{color:0,alpha:1},lineStyle:{width:1,color:65280,alpha:1}},flag:{type:"polygon",fill:{color:16777215,alpha:1},path:[-5,-4,-5,4,5,4,5,-4]}},s=function(t){function e(e){var a=t.call(this)||this;return a.type="Planet",a.canOrbitStar=!0,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=0,a.hp=2e3,a.mass=180,a.geo=Object(o.a)(c.body),a.geo.graphics.addChild(Object(o.a)(c.flag).graphics),Object.assign(a,e),a.updateFlagColor(),a}return r(e,t),e.prototype.isOccupied=function(){return Boolean(this.pbase||this.plab||this.pcolony||this.pcomm)},e.prototype.updateFlagColor=function(){var t=this.geo.graphics.children[0];this.team===n.a.NONE?t.visible=!1:(window.foo=t,window.doo=this,t.visible=!0,t.tint=n.a._COLORS[this.team])},e.DIST_SURFACE2=11025,e}(i.a);e.a=s},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={type:"circle",radius:200,fill:{color:0,alpha:1},lineStyle:{width:1,color:16776960,alpha:1}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="Star",a.hp=1e4,a.mass=600,a.geo=Object(n.a)(r),Object.assign(a,e),a}return i(e,t),e.DIST_SURFACE2=4e4,e}(o.a);e.a=c},function(t,e,a){"use strict";function n(){var t=Date.now(),e=t-u,a=!0;S||g.a.update(),e>m&&(S?(f.b.setGlobalAlpha(v),v>0?v-=E:(v=1,a=!1)):(b.x=Math.cos(T)*_,b.y=Math.sin(T)*_,T+=O,f.b.centerOn(b),y.a.process(b)),f.b.render(),u=t-e%m),a?l=requestAnimationFrame(n):c()}function o(){this.alpha=.5,Object(d.b)("switch-flick")}function i(){this.alpha=1}function r(t){var e=t.filename,a=t.onClick,n=t.dy,r=h.Sprite.fromImage(e);if(r.anchor.set(.5),r.y=innerHeight>>1+n,a){var c=function(){Object(d.b)("heavy-switch"),a()};r.buttonMode=!0,r.interactive=!0,r.on("mouseover",o),r.on("mouseout",i),r.on("tap",c),r.on("click",c)}return r}function c(){cancelAnimationFrame(l),f.b.removeAllChildren(),p&&p()}function s(){F=Math.max(Math.min(F,A.length-1),1),x.forEach(function(t,e){e===F?o.call(x[F]):i.bind(t)()})}var l,u,p,h=a(19),f=(a.n(h),a(23)),y=a(45),d=a(15),g=a(315),m=1e3/60,b={x:0,y:0},_=600,T=0,O=Math.PI/180*.02,v=1,E=.02,S=!1,A=[{filename:"assets/title.png",dy:-200},{filename:"assets/new-game.png",dy:-50,onClick:function(){x.forEach(function(t){t.off("tap"),t.off("click"),t.off("mouseout"),t.off("mouseover")}),S=!0}},{filename:"assets/how-to-play.png",dy:50,onClick:function(){return window.open("how-to-play.html","_blank")}},{filename:"assets/about.png",dy:150,onClick:function(){return window.open("http://github.com/jsyang/celestial","_blank")}}],x=[],P=function(){x.forEach(function(t,e){t.x=innerWidth/2,t.y=innerHeight/2+A[e].dy})},F=0;e.a={setFadeOutCallback:function(t){p=t},prevButton:function(){F--,s()},nextButton:function(){F++,s()},clickButton:function(){A[F].onClick(),Object(d.b)("heavy-switch")},start:function(){f.b.init(),y.a.init().forEach(f.b.addChild),(x=A.map(r)).forEach(f.b.addChildToHUD),addEventListener("resize",P),P(),u=Date.now(),n()},stop:c}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";function n(){o.a.init(),o.a.start()}Object.defineProperty(e,"__esModule",{value:!0});var o=a(156),i=a(126),r=a(316),c=location.search.match(/game$/);addEventListener("DOMContentLoaded",function(){var t;c?t=n:(i.a.setFadeOutCallback(n),t=i.a.start),r.a.load().then(t)})},function(t,e,a){"use strict";function n(){var t=Date.now(),e=t-i;if(Object(d.a)(),l.a.processGameScreen(),p.a.updateAll(),Object(y.a)(),h.a.update(),f.a.update(),p.a.prepareNext(),e>m){b&&(_<1?_+=T:(_=1,b=!1),c.b.setGlobalAlpha(_));var a=s.a.getFocus();a&&(f.a.setOrigin(a),c.b.centerOn(a)),r.a.process(a),c.b.render(),i=t-e%m}o=requestAnimationFrame(n)}var o,i,r=a(45),c=a(23),s=a(61),l=a(62),u=a(261),p=a(3),h=a(311),f=a(312),y=a(313),d=a(314),g=a(123),m=1e3/60,b=!0,_=0,T=.02;e.a={init:function(){b=!0,_=0,c.b.init(),g.a.init(),r.a.init().forEach(c.b.addChild),u.a.init(),f.a.init(),h.a.init()},start:function(){i=Date.now(),n()},stop:function(){cancelAnimationFrame(o)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o=1e-6,i=function(t){var e=t.left,a=t.right,n=(t.up,t.analogAngle),o=t.button0,i=t.button1,r=t.button2,c=t.button3;return{TURN_LEFT:Boolean(e),TURN_RIGHT:Boolean(a),ACCELERATE:Boolean(r),SHOOT_SPECIAL:Boolean(i),SHOOT:Boolean(o),RESTART_GAME:Boolean(i&&c),analogAngle:n}},r={left:!1,right:!1,up:!1,analogAngle:0,button0:!1,button1:!1,button2:!1,button3:!1};e.a={getEvents:function(t){void 0===t&&(t=0);var e=navigator.getGamepads()[t];if(e){var a=e.axes,n=a[0],c=a[1],s=Math.abs(n)>.1,l=Math.abs(c)>.1,u=void 0;(s||l)&&(s||(n=n>0?o:-o),l||(c=c>0?o:-o),u=Math.atan2(c,n)),r={left:e.axes[0]<-.1,right:e.axes[0]>.1,up:e.axes[1]<-.1,analogAngle:u,button0:e.buttons[0].pressed,button1:e.buttons[1].pressed,button2:e.buttons[2].pressed,button3:e.buttons[3].pressed}}return i(r)},getInputState:function(){return n({},r)}}},function(t,e,a){"use strict";function n(t){c[r[t.which]]=!1}function o(t){c[r[t.which]]=!0}var i=this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r={37:"left_arrow",38:"up_arrow",39:"right_arrow",40:"down_arrow",69:"e",70:"f",82:"r"},c={left_arrow:!1,right_arrow:!1,up_arrow:!1,down_arrow:!1,e:!1,f:!1,r:!1};window&&(window.addEventListener("keydown",o),window.addEventListener("keyup",n)),e.a={getEvents:function(){return{SHOOT_SPECIAL:Boolean(c.e),TURN_LEFT:Boolean(c.left_arrow),TURN_RIGHT:Boolean(c.right_arrow),ACCELERATE:Boolean(c.up_arrow),SHOOT:Boolean(c.f),RESTART_GAME:Boolean(c.r)}},getInputState:function(){return i({},c)}}},function(t,e,a){"use strict";e.a=function(t,e){var a=t.isDockedPlanet;a||("number"==typeof e.analogAngle?t.rotation=e.analogAngle:e.TURN_LEFT?t.rotation-=n:e.TURN_RIGHT&&(t.rotation+=n),t.isAttacking=e.SHOOT),e.ACCELERATE?(a&&(t.undockPlanet(),t.accelerate(1)),t.flameOn(),t.accelerate(o)):t.flameOff()};var n=.05,o=.2},function(t,e,a){"use strict";a.d(e,"b",function(){return i}),e.a=function(t){return(t.up_arrow||t.up)&&(n.y-=o),(t.down_arrow||t.down)&&(n.y+=o),(t.left_arrow||t.left)&&(n.x-=o),(t.right_arrow||t.right)&&(n.x+=o),n};var n={x:0,y:0},o=40,i=function(t){var e=t.x,a=t.y;return n={x:e,y:a}}},function(t,e,a){"use strict";var n=a(13),o=a(262),i=a(310),r=["BLUE","GREEN","RED","YELLOW","MAGENTA"];e.a={init:function(){for(var t=n.a.int(2,5),e=0;e<t;e++){var a=Object(o.a)(),c=r.pop();c&&Object(i.a)(c,a)}}}},function(t,e,a){"use strict";function n(){return{x:r.a.float(u,c.a-u),y:r.a.float(u,c.a-u)}}function o(t){for(var e=i.a.getByType("Star"),a=0;a<e.length;a++)if(e[a]!==t&&i.a.getDistSquared(t,e[a])<p)return!1;return!0}e.a=function(){var t;do{t=n()}while(!o(t));var e=i.a.create("Star",t),a=e;if(r.a.float(0,1)<l)for(var c=r.a.int(1,s),u=0;u<c;u++)a=i.a.create("Planet",{star:e,orbitDistance:1600+u*r.a.int(2,5)*800,orbitRotation:r.a.float(-Math.PI,Math.PI)});return a};var i=a(3),r=a(13),c=a(40),s=2,l=.8,u=6e3,p=u*u},function(t,e,a){"use strict";var n=a(3),o=a(264),i=a(265),r=a(266),c=a(267),s=a(268),l=a(269),u=a(270),p=a(271),h=a(272),f=a(273),y=a(274),d=a(275),g=a(276),m=a(277),b=a(278),_=a(279),T=a(280),O=a(281),v=a(283),E=a(284),S=a(285),A=a(286),x=a(287),P=a(288),F=a(289),R=a(290),M=a(291),w=a(292),C=[m.a,b.a,P.a,F.a,l.a,u.a,_.a,T.a,x.a,M.a,i.a,O.a,h.a,p.a,c.a,f.a,y.a,d.a,r.a,o.a,v.a,E.a,S.a,A.a,w.a,s.a,R.a,g.a];e.a={init:function(t){C.forEach(function(e){e.DEFAULTS&&t[e.componentFlag]&&Object.keys(e.DEFAULTS).forEach(function(a){void 0===t[a]&&(t[a]=e.DEFAULTS[a])})})},update:function(t){t.hp>0?C.forEach(function(e){t[e.componentFlag]&&e.process&&e.process(t)}):t[g.a.componentFlag]&&g.a.process(t),t.hp>0?n.a.commit(t):n.a.destroy(t)}}},function(t,e,a){"use strict";e.a={componentFlag:"canAttack",DEFAULTS:{attackTurretPositions:[],attackTarget:null,attackWeapon:"Cannon",isAttacking:!1}}},function(t,e,a){"use strict";var n=a(3);e.a={componentFlag:"canAutoTargetEnemy",DEFAULTS:{AUTO_TARGET_ENEMY_TIME:1500,autoTargetSearchDist2:16e4,autoTargetLastSearchTime:0},process:function(t){if(t.canAttack){var e=Date.now();e-t.autoTargetLastSearchTime>=t.AUTO_TARGET_ENEMY_TIME&&(function(t){t.attackTarget=n.a.getNearestEnemyTarget(t,t.autoTargetSearchDist2),t.isAttacking=Boolean(t.attackTarget)}(t),t.autoTargetLastSearchTime=e)}}}},function(t,e,a){"use strict";var n=a(3),o={PRODUCT:{Freighter:{cost:300,time:120},Fighter:{cost:500,time:90}},orderManufacture:function(t){this.isManufacturing=!0,this.manufactureTime=this.PRODUCT[t].time,this.manufactureType=t},isManufacturing:!1,manufactureTime:0,manufactureType:void 0};e.a={componentFlag:"canManufacture",DEFAULTS:o,process:function(t){if(t.isManufacturing){var e=t.planet,a=t.x,o=t.y,i=t.team;if(t.planet.pbase&&t.planet.pbase.materialsFinished>=t.PRODUCT[t.manufactureType].cost)if(t.manufactureTime>0)t.manufactureTime--;else{var r=n.a.create(t.manufactureType,{x:a,y:o,team:i});"Fighter"===t.manufactureType?(t.type,r.dockPlanet(e)):"Freighter"===t.manufactureType&&r.enterPlanetOrbit(e),t.isManufacturing=!1,t.manufactureType=void 0}}}}},function(t,e,a){"use strict";e.a={componentFlag:"canMine",DEFAULTS:{MINE_RATE:25,MINE_TIME:20,mineTime:20},process:function(t){t.mineTime>0?t.mineTime--:(t.mineTime=t.MINE_TIME,t.planet.materialsRaw+=t.MINE_RATE)}}},function(t,e,a){"use strict";e.a={componentFlag:"canMetabolize",process:function(t){t.hp--}}},function(t,e,a){"use strict";var n=a(40);e.a={componentFlag:"canMoveLinearly",DEFAULTS:{dx:0,dy:0},process:function(t){t.isDockedPlanet||(t.x+=t.dx,t.y+=t.dy,0!==t.x&&t.x!==n.a||(t.dx=0),0!==t.y&&t.y!==n.a||(t.dy=0))}}},function(t,e,a){"use strict";var n=a(3),o={TURN_RATE:.07,SPEED:2.5,DIST_HALT2:Math.pow(80,2)},i=Math.pow(200,2);e.a={componentFlag:"canMoveToColonizationTarget",DEFAULTS:o,process:function(t){var e=t.isOrbitingPlanet,a=t.colonizationTarget,o=t.DIST_HALT2;if(!e&&a){var r=n.a.getDistSquared(t,a);if("Planet"===a.type&&(o=i),r>o){var c=function(t){var e=t.rotation,a=n.a.getAngleFromTo(t,t.colonizationTarget),o=Math.abs(a-e);return o>Math.PI?e>0?t.rotation+=t.TURN_RATE:t.rotation-=t.TURN_RATE:o>t.TURN_RATE?e>a?t.rotation-=t.TURN_RATE:t.rotation+=t.TURN_RATE:t.rotation=a,e=t.rotation}(t);t.x+=Math.cos(c)*t.SPEED,t.y+=Math.sin(c)*t.SPEED,t.flameOn&&t.flameOn()}else"Planet"===a.type&&t.canOrbitPlanet&&t.enterPlanetOrbit(a),t.flameOff&&t.flameOff()}}}},function(t,e,a){"use strict";e.a={componentFlag:"canHarvest",DEFAULTS:{HARVEST_RATE_RAW:35,HARVEST_RATE_FINISHED:25,HARVEST_TIME:10,harvestTime:0},process:function(t){t.harvestTime>0?t.harvestTime--:(t.harvestTime=t.HARVEST_TIME,t.planet.materialsRaw>0&&t.materialsRaw<t.MAX_RAW_MATERIALS&&(t.MAX_RAW_MATERIALS-t.materialsRaw<t.HARVEST_RATE_RAW?(t.planet.materialsRaw=0,t.materialsRaw+=t.MAX_RAW_MATERIALS-t.materialsRaw):(t.planet.materialsRaw-=t.HARVEST_RATE_RAW,t.materialsRaw+=t.HARVEST_RATE_RAW)),t.planet.materialsFinished>0&&t.materialsFinished<t.MAX_FINISHED_MATERIALS&&(t.MAX_FINISHED_MATERIALS-t.materialsFinished<t.HARVEST_RATE_FINISHED?(t.planet.materialsFinished=0,t.materialsFinished+=t.MAX_FINISHED_MATERIALS-t.materialsFinished):(t.planet.materialsFinished-=t.HARVEST_RATE_FINISHED,t.materialsFinished+=t.HARVEST_RATE_FINISHED)))}}},function(t,e,a){"use strict";e.a={componentFlag:"canStoreMaterial",DEFAULTS:{MAX_RAW_MATERIALS:3e3,MAX_FINISHED_MATERIALS:2e3,materialsRaw:0,materialsFinished:0},process:function(){}}},function(t,e,a){"use strict";e.a={componentFlag:"canRepair",DEFAULTS:{REPAIR_COST_FINISHED:25,REPAIR_TIME:30,repairTime:0},process:function(t){t.hp<t.maxHp&&t.materialsFinished>t.REPAIR_COST_FINISHED&&t.materialsFinished>0&&(t.repairTime>0?t.repairTime--:(t.hp++,t.materialsFinished-=t.REPAIR_COST_FINISHED,t.repairTime=t.REPAIR_TIME))}}},function(t,e,a){"use strict";e.a={componentFlag:"canRefine",DEFAULTS:{REFINE_RATE_RAW_TO_FINISHED:.5},process:function(t){t.materialsFinished<t.MAX_FINISHED_MATERIALS?t.materialsRaw>0&&(t.materialsFinished+=t.REFINE_RATE_RAW_TO_FINISHED,t.materialsFinished>t.MAX_FINISHED_MATERIALS&&(t.planet.materialsFinished+=t.materialsFinished-t.MAX_FINISHED_MATERIALS,t.materialsFinished=t.MAX_FINISHED_MATERIALS),t.materialsRaw--):t.materialsRaw>0&&(t.planet.materialsFinished+=t.REFINE_RATE_RAW_TO_FINISHED,t.materialsRaw--)}}},function(t,e,a){"use strict";var n=a(3),o=[{type:"PLab",cost:200},{type:"PComm",cost:300},{type:"SpacePort",cost:1e3,prerequisite:"PColony"},{type:"SpaceDock",cost:500,prerequisite:"SpacePort",occupation:"SpacePort"},{type:"SensorArray",cost:500,prerequisite:"SpacePort",occupation:"SpacePort"}];e.a={componentFlag:"canConstruct",DEFAULTS:{CONSTRUCTION_TIME:3e3,constructionTime:3e3},process:function(t){t.materialsFinished>0&&(t.constructionTime>0?t.constructionTime--:(o.forEach(function(t){var e=this.team,a=this.planet,o=t.type.toLowerCase(),i=!0;t.prerequisite&&(i=Boolean(this.planet[t.prerequisite.toLowerCase()])),!this.planet[o]&&this.materialsFinished>=t.cost&&i&&("SpacePort"===t.occupation?this.planet[o]=n.a.create(t.type,{spaceport:this.planet.spaceport,planet:a,team:e}):this.planet[o]=n.a.create(t.type,{planet:a,team:e}),this.materialsFinished-=t.cost)}.bind(t)),t.constructionTime=t.CONSTRUCTION_TIME))}}},function(t,e,a){"use strict";function n(){var t=this.EXPLOSION_SOUND,e=this.EXPLOSION_FRAGMENTS,a=this.x,n=this.y,c=this.dx,s=this.dy,l=this.explosionOriginDx,u=this.explosionOriginDy;Object(o.b)(t);for(var p=e;p>0;p--)i.a.create("CannonShot",{x:l+a+r.a.float(-10,10),y:u+n+r.a.float(-10,10),team:i.a.TEAM.NONE,dx:r.a.float(-2,2)+(c||0),dy:r.a.float(-2,2)+(s||0)});this.hasExploded=!0}var o=a(15),i=a(3),r=a(13),c={explosionOriginDx:0,explosionOriginDy:0,EXPLOSION_FRAGMENTS:6,hasExploded:!1,explode:n};e.a={componentFlag:"canExplode",DEFAULTS:c,process:function(t){var e=t.hasExploded,a=t.canExplode;t.hp<=0&&!e&&a&&n.call(t)}}},function(t,e,a){"use strict";e.a={componentFlag:"canOccupyPlanet",process:function(t){t.x=t.planet.x,t.y=t.planet.y}}},function(t,e,a){"use strict";var n=a(3);e.a={componentFlag:"canOccupySpacePort",process:function(t){var e=t.spaceport,a=e.x,o=e.y,i=e.rotation;e.hp>0?(t.x=a,t.y=o,t.rotation=i):(t.explode&&t.explode(),n.a.destroy(t))}}},function(t,e,a){"use strict";e.a={componentFlag:"canOrbitStar",DEFAULTS:{D_ROTATION:1e-4,orbitDistance:1800,orbitRotation:0},process:function(t){t.orbitRotation+=t.D_ROTATION,t.x=Math.cos(t.orbitRotation)*t.orbitDistance+t.star.x,t.y=Math.sin(t.orbitRotation)*t.orbitDistance+t.star.y}}},function(t,e,a){"use strict";var n=a(3),o={enterPlanetOrbit:function(t){this.isOrbitingPlanet=!0,this.dx=0,this.dy=0,this.orbitRotation=n.a.getAngleFromTo(t,this),this.rotation=this.orbitRotation+i,this.planet=t,this.target=void 0,this.flameOff&&this.flameOff()},exitPlanetOrbit:function(){this.isOrbitingPlanet=!1,this.planet=void 0,this.flameOn&&this.flameOn()},isOrbitingPlanet:!0,D_ROTATION:1e-4,orbitDistance:105,orbitRotation:0},i=.5*Math.PI;e.a={componentFlag:"canOrbitPlanet",DEFAULTS:o,process:function(t){t.isOrbitingPlanet&&t.planet&&("SpacePort"===t.type?t.rotation=n.a.getAngleFromTo(t.planet,t):"Freighter"===t.type&&(t.rotation+=t.D_ROTATION),t.orbitRotation+=t.D_ROTATION,t.x=Math.cos(t.orbitRotation)*t.orbitDistance+t.planet.x,t.y=Math.sin(t.orbitRotation)*t.orbitDistance+t.planet.y)}}},function(t,e,a){"use strict";var n=a(15),o=a(3),i=a(7);e.a={componentFlag:"canDamage",DEFAULTS:{damageHp:1},process:function(t){o.a.getNearest(t).some(function(t){return!(t.team===this.team||"Planet"===t.type||"Star"===t.type||!Object(i.b)(this,t)||(Object(n.b)(t.AUDIO_HIT||"hit"),t.hp-=this.damageHp,t.hitTime=10,o.a.destroy(this),0))}.bind(t))}}},,function(t,e,a){"use strict";var n=a(3),o=a(15);e.a={componentFlag:"canShootCannon",DEFAULTS:{lastShotTime_Cannon:0,reloadTime_Cannon:100},process:function(t){var e=t.isAttacking,a=t.attackWeapon;if(e&&"Cannon"===a){var i=Date.now();i-t.lastShotTime_Cannon>=t.reloadTime_Cannon&&(t.attackTurretPositions.forEach(function(t){var e=this.team,a=t(this),o=a.rotation,i=a.x,r=a.y,c=4*Math.cos(o),s=4*Math.sin(o),l=this.dx||0,u=this.dy||0;n.a.create("CannonShot",{team:e,x:i+this.x-l,y:r+this.y-u,dx:c+l,dy:s+u})}.bind(t)),Object(o.b)("fire"),t.lastShotTime_Cannon=i)}}}},function(t,e,a){"use strict";var n=a(3),o=a(15);e.a={componentFlag:"canShootLaserBolt",DEFAULTS:{lastShotTime_LaserBolt:0,reloadTime_LaserBolt:1e3},process:function(t){var e=t.isAttacking,a=t.attackWeapon;if(e&&"LaserBolt"===a){var i=Date.now();i-t.lastShotTime_LaserBolt>=t.reloadTime_LaserBolt&&(t.attackTurretPositions.forEach(function(t){for(var e=this.team,a=t(this),o=a.rotation,i=a.x,r=a.y,c=10*Math.cos(o),s=10*Math.sin(o),l=this.dx||0,u=this.dy||0,p=20;p>0;p--)n.a.create("LaserBolt",{team:e,rotation:o,x:i+this.x-l+c*p,y:r+this.y-u+s*p})}.bind(t)),Object(o.b)("laser"),t.lastShotTime_LaserBolt=i)}}}},function(t,e,a){"use strict";var n=a(3),o=a(15);e.a={componentFlag:"canShootHomingMissile",DEFAULTS:{lastShotTime_HomingMissile:0,ammo_HomingMissile:40,ammoMax_HomingMissile:40},process:function(t){var e=t.isAttacking,a=t.ammo_HomingMissile,i=t.attackWeapon;if(e&&"HomingMissile"===i){var r=Date.now();r-t.lastShotTime_HomingMissile>=200&&(a>0?(t.attackTarget=n.a.getNearestEnemyTarget(t,64e4),t.attackTurretPositions.forEach(function(t){var e=this.attackTarget,a=this.team,o=t(this),i=o.rotation,r=o.x,c=o.y,s=4*Math.cos(i),l=4*Math.sin(i),u=this.dx||0,p=this.dy||0;n.a.create("HomingMissile",{team:a,attackTarget:e,rotation:i,x:r+this.x-u,y:c+this.y-p,dx:s+u,dy:l+p})}.bind(t)),t.lastShotTime_HomingMissile=r,t.ammo_HomingMissile--,Object(o.b)("missile")):Object(o.b)("empty"))}}}},function(t,e,a){"use strict";var n=a(3),o=a(15);e.a={componentFlag:"canShootClusterRocket",DEFAULTS:{lastShotTime_ClusterRocket:0,reloadTime_ClusterRocket:600,ammo_ClusterRocket:8,ammoMax_ClusterRocket:8},process:function(t){var e=t.isAttacking,a=t.attackWeapon,i=t.ammo_ClusterRocket;if(e&&"ClusterRocket"===a){var r=Date.now();r-t.lastShotTime_ClusterRocket>=t.reloadTime_ClusterRocket&&(i>0?(t.attackTurretPositions.forEach(function(t){var e=this.team,a=t(this),o=a.rotation,i=a.x,r=a.y,c=2.5*Math.cos(o),s=2.5*Math.sin(o),l=this.dx||0,u=this.dy||0;n.a.create("ClusterRocket",{rotation:o,team:e,x:i+this.x-l,y:r+this.y-u,dx:c+l,dy:s+u})}.bind(t)),t.lastShotTime_ClusterRocket=r,t.ammo_ClusterRocket--,Object(o.b)("bomb-release")):Object(o.b)("empty"))}}}},function(t,e,a){"use strict";e.a={componentFlag:"canLimitSpeed",DEFAULTS:{MAX_SPEED:40,MAX_SPEED2:1600},process:function(t){var e=Math.pow(t.dx,2)+Math.pow(t.dy,2);if(e>t.MAX_SPEED2){var a=t.MAX_SPEED*Math.pow(e,-.5);t.dx*=a,t.dy*=a}}}},function(t,e,a){"use strict";var n={accelerate:function(t){this.dx+=Math.cos(this.rotation)*t,this.dy+=Math.sin(this.rotation)*t}};e.a={componentFlag:"canAccelerate",DEFAULTS:n}},function(t,e,a){"use strict";var n=.16;e.a={componentFlag:"canAccelerateToAttackTarget",DEFAULTS:{delayBeforeTracking:5},process:function(t){if(t.delayBeforeTracking>0)t.delayBeforeTracking--;else{var e=t.attackTarget;if(e){var a=e.x,o=e.y;t.x>a?t.dx-=n:t.dx+=n,t.y>o?t.dy-=n:t.dy+=n,t.rotation=Math.atan2(t.dy,t.dx)}}}}},function(t,e,a){"use strict";e.a={componentFlag:"canDisplayHit",DEFAULTS:{hitTime:-1},process:function(t){t.renderHit&&t.renderHit()}}},function(t,e,a){"use strict";var n=a(3),o={isDockedPlanet:!1,dockPlanet:function(t){this.isDockedPlanet=!0,this.dx=0,this.dy=0,this.rotation=n.a.getAngleFromTo(t,this),this.planet=t,t.isOccupied()||(t.team=this.team,t.updateFlagColor())},undockPlanet:function(){this.isDockedPlanet=!1,this.planet=void 0}};e.a={componentFlag:"canDockPlanet",DEFAULTS:o,process:function(t){t.isDockedPlanet&&(t.x=105*Math.cos(t.rotation)+t.planet.x,t.y=105*Math.sin(t.rotation)+t.planet.y)}}},function(t,e,a){"use strict";var n=a(3),o=a(15);e.a={componentFlag:"canColonizePlanet",DEFAULTS:{TIME_OFFLOAD_SUPPLY:200,MAX_MATERIALS_FINISHED:500,colonizationTarget:null},process:function(t){t.colonizationTarget&&t.isOrbitingPlanet&&t.planet&&t.materialsFinished>0&&(void 0===t.supplyTime?t.supplyTime=t.TIME_OFFLOAD_SUPPLY:t.supplyTime>0?t.supplyTime--:0===t.supplyTime&&(t.planet.pbase?t.planet.pcolony?t.planet.spaceport?(function(t){var e=t.planet.pbase;if(0===e.materialsFinished){e.materialsFinished+=t.materialsFinished,t.materialsFinished=0;var a=0;e.materialsFinished>e.MAX_FINISHED_MATERIALS?(a=e.materialsFinished-e.MAX_FINISHED_MATERIALS,e.materialsFinished=e.MAX_MATERIALS_FINISHED,t.materialsFinished=a,t.unloadSupply()):(t.canExplode=!1,n.a.destroy(t))}else if(t.planet.materialsFinished>0&&t.materialsFinished<t.MAX_MATERIALS_FINISHED){var o=t.MAX_MATERIALS_FINISHED-t.materialsFinished;o>=t.planet.materialsFinished?(t.materialsFinished+=t.planet.materialsFinished,t.planet.materialsFinished=0):(t.materialsFinished+=o,t.planet.materialsFinished-=o),t.loadSupply()}}(t),t.colonizationTarget=null):function(t){var e=t.planet,a=t.team,i=t.orbitRotation;Object(o.b)("nav"),e.spaceport=n.a.create("SpacePort",{x:e.x,y:e.y,orbitRotation:i,planet:e,team:a}),e.spaceport.enterPlanetOrbit(e),t.canExplode=!1,n.a.destroy(t)}(t):function(t){var e=t.planet,a=t.team;Object(o.b)("nav"),e.pcolony=n.a.create("PColony",{x:e.x,y:e.y,planet:e,team:a}),t.canExplode=!1,n.a.destroy(t)}(t):function(t){var e=t.planet,a=t.team;Object(o.b)("nav"),e.pbase=n.a.create("PBase",{x:e.x,y:e.y,planet:e,team:a}),t.canExplode=!1,n.a.destroy(t)}(t)))}}},function(t,e,a){"use strict";var n=a(23),o=a(3),i={},r=function(t){return i[t]||[]};e.a={add:function(t){var e=t.type;i[e]?i[e].push(t):i[e]=[t],n.b.addChild(t.geo.graphics)},remove:function(t){t.hp=0;var e=t.type.toLowerCase();t.planet&&delete t.planet[e],t.spaceport&&delete t.spaceport[e],delete t.target;var a=r(t.type),o=a.indexOf(t);-1!==o&&a.splice(o,1),n.b.removeChild(t.geo.graphics)},getByType:r,getAbsoluteNearestByType:function(t,e){var a,n=1/0,i=r(e);return i&&i.forEach(function(e){var i=Object(o.b)(t,e);i<n&&(n=i,a=e)}),a}}},function(t,e,a){"use strict";function n(t,e,a){var n=t.x>>r,o=t.y>>r;return n+=e||0,o+=a||0,n+o*c}function o(t){return[].concat(s[n(t,-1,-1)],s[n(t,0,-1)],s[n(t,1,-1)],s[n(t,-1,0)],s[n(t,0,0)],s[n(t,1,0)],s[n(t,0,1)],s[n(t,-1,1)],s[n(t,1,1)]).filter(Boolean)}var i=a(3),r=9,c=a(40).a>>r,s=[],l=[],u={Freighter:!0,Fighter:!0,PBase:!0,PColony:!0,PComm:!0,PLab:!0,Probe:!0,SensorArray:!0,SpaceDock:!0,SpacePort:!0},p=function(t){return t.type in u};e.a={prepareNext:function(){s=l,l=[]},commit:function(t){if(t.hp>0){var e=n(t,0,0);l[e]instanceof Array?l[e].push(t):l[e]=[t]}return this},getNearest:function(t,e,a){var n=o(t);return(e||a)&&(n=n.filter(function(t,e,a){var n=!0;return e>0&&(n=n&&Object(i.b)(this,a)<=e),t&&(n=n&&a.type===t),n}.bind(t,e,a))),n},getNearestEnemyTarget:function(t,e){var a,n=o(t).filter(function(e){return e.team!==t.team&&p(e)}),r=1/0;return n&&n.forEach(function(n){var o=Object(i.b)(t,n);o<=e&&o<r&&(r=o,a=n)}),a}}},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-2,2,-4,0,-2,-2,-4,-4,-4,-6,2,-4,0,-2,8,0,0,2,2,4,-4,6,-4,4,-2,2],collisionPath:[-4,-6,8,0,-4,6]},flame1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]},flame2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,4,-8,5,-4,6]}},c=[function(t){var e=t.geo.collider.calcPoints[1];return{x:e.x,y:e.y,rotation:t.rotation}}],s=function(t){function e(e){var a=t.call(this)||this;return a.type="Fighter",a.geo=Object(n.a)(r.body,{collisionPath:r.body.collisionPath}),a.mass=10,a.hp=4,a.maxHp=4,a.rotation=0,a.canExplode=!0,a.canAttack=!0,a.attackWeapon="LaserBolt",a.attackTurretPositions=c,a.canShootLaserBolt=!0,a.canShootCannon=!0,a.canShootClusterRocket=!0,a.canShootHomingMissile=!0,a.canLimitSpeed=!0,a.canMoveLinearly=!0,a.canAccelerate=!0,a.canDockPlanet=!0,a.flameOn=function(){a.setChildVisible(0,!0),a.setChildVisible(1,!0)},a.flameOff=function(){a.setChildVisible(0,!1),a.setChildVisible(1,!1)},Object.assign(a,e),a.assignTeamColor(),a.geo.graphics.addChild(Object(n.a)(r.flame1).graphics,Object(n.a)(r.flame2).graphics),a.flameOff(),a}return i(e,t),e}(o.a);e.a=s},function(t,e,a){"use strict";var n=a(7),o=a(3),i=a(6),r=a(10),c=a(13),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),l={body:{type:"polygon",lineStyle:{width:1,color:15658734,alpha:1},collisionPath:[-44,-4,-38,-8,26,-10,44,0,26,10,-38,8,-44,4],path:[-26,-2,-26,-8,-38,-8,-38,2,-44,4,-44,-4,-38,-2,-38,8,-26,8,-26,-2,24,-2,26,-10,44,0,26,10,24,2,-26,2]},cargopodL:{type:"polygon",lineStyle:{width:1,color:15658734,alpha:1},path:[-24,-2,-24,-12,22,-12,22,-2]},cargopodR:{type:"polygon",lineStyle:{width:1,color:15658734,alpha:1},path:[-24,2,-24,12,22,12,22,2]},flag:{type:"polygon",lineStyle:{width:2,color:255,alpha:1},path:[34,0,42,0]},turret1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[-34,0,-30,-3,-30,3,-34,0]},turret2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[28,-3,32,0,28,3,28,-2]},flame:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-44,-2,-50,0,-44,2]}},u=function(t,e,a){var n=t.attackTarget,i=n.dx||0,r=n.dy||0,s={x:n.x+20*i,y:n.y+20*r},l=o.a.getAngleFromTo({x:e+t.x,y:a+t.y},s);return l+=c.a.float(-.15,.15)},p=[function(t){var e=-34*Math.cos(t.rotation),a=-34*Math.sin(t.rotation);return{x:e,y:a,rotation:u(t,e,a)}},function(t){var e=32*Math.cos(t.rotation),a=32*Math.sin(t.rotation);return{x:e,y:a,rotation:u(t,e,a)}}],h=function(t){function e(e){var a=t.call(this)||this;return a.type="Freighter",a.geo=Object(n.a)(l.body),a.hp=10,a.maxHp=10,a.canDisplayHit=!0,a.canOrbitPlanet=!0,a.isOrbitingPlanet=!1,a.orbitDistance=205,a.canExplode=!0,a.canColonizePlanet=!0,a.canMoveToColonizationTarget=!0,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=500,a.canAutoTargetEnemy=!0,a.autoTargetSearchDist2=16e4,a.canAttack=!0,a.attackTurretPositions=p,a.canShootCannon=!0,a.reloadTime_Cannon=400,a.loadSupply=function(){a.setChildVisible(2,!0),a.setChildVisible(3,!0)},a.unloadSupply=function(){a.setChildVisible(2,!1),a.setChildVisible(3,!1)},a.flameOn=function(){return a.setChildVisible(0,!0)},a.flameOff=function(){return a.setChildVisible(0,!1)},Object.assign(a,e),a.geo.graphics.addChild(Object(n.a)(l.flame).graphics,Object(n.a)(l.flag).graphics,Object(n.a)(l.cargopodL).graphics,Object(n.a)(l.cargopodR).graphics,Object(n.a)(l.turret1).graphics,Object(n.a)(l.turret2).graphics),a.assignTeamColor(),a.flameOff(),a}return s(e,t),e.prototype.assignTeamColor=function(){this.getChildAt(1).currentPath.lineColor=r.a._COLORS[this.team]},e}(i.a);e.a=h},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=a(3),c=a(13),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),l={_name:"Planetary Base",body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-20,20,-20,-20,20,-20,20,20,-20,20]},turret1:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[65,-60,65,-65,60,-65,65,-60]},turret2:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[-65,-60,-65,-65,-60,-65,-65,-60]},turret3:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[65,60,65,65,60,65,65,60]},turret4:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[-65,60,-65,65,-60,65,-65,60]}},u=function(t,e,a){var n=t.attackTarget,o=n.dx||0,i=n.dy||0,s={x:n.x+20*o,y:n.y+20*i},l=r.a.getAngleFromTo({x:e+t.x,y:a+t.y},s);return l+=c.a.float(-.15,.15)},p=[function(t){return{x:65,y:65,rotation:u(t,65,65)}},function(t){return{x:65,y:-65,rotation:u(t,65,-65)}},function(t){return{x:-65,y:-65,rotation:u(t,-65,-65)}},function(t){return{x:-65,y:65,rotation:u(t,-65,65)}}],h=function(t){function e(e){var a=t.call(this)||this;return a.type="PBase",a.geo=Object(o.a)(l.body),a.hp=20,a.maxHp=20,a.canDisplayHit=!0,a.canExplode=!0,a.canHarvest=!0,a.canRepair=!0,a.canRefine=!0,a.canConstruct=!0,a.canOccupyPlanet=!0,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=0,a.canAutoTargetEnemy=!0,a.autoTargetSearchDist2=36e4,a.canAttack=!0,a.attackTurretPositions=p,a.canShootCannon=!0,a.reloadTime_Cannon=400,Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a.geo.graphics.addChild(Object(o.a)(l.turret1).graphics,Object(o.a)(l.turret2).graphics,Object(o.a)(l.turret3).graphics,Object(o.a)(l.turret4).graphics),a}return s(e,t),e}(i.a);e.a=h},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",_name:"Planetary Colony",lineStyle:{width:1,color:255,alpha:1},path:[-30,40,-70,40,-70,-40,-30,-40,-30,40]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PColony",a.geo=Object(o.a)(c),a.hp=15,a.maxHp=15,a.canDisplayHit=!0,a.canMine=!0,a.canExplode=!0,a.explosionOriginDx=-50,a.explosionOriginDy=0,a.canOccupyPlanet=!0,a.canRepair=!0,a.REPAIR_COST_FINISHED=10,a.REPAIR_TIME=20,Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a}return r(e,t),e}(i.a);e.a=s},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",_name:"Planetary Communications Center",lineStyle:{width:1,color:255,alpha:1},path:[40,30,0,30,0,50,40,50,40,30,60,35,30,10,40,30]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PComm",a.geo=Object(o.a)(c),a.team=n.a.NONE,a.hp=7,a.maxHp=7,a.canDisplayHit=!0,a.canExplode=!0,a.explosionOriginDx=31,a.explosionOriginDy=33,a.canRepair=!0,a.canOccupyPlanet=!0,a.REPAIR_COST_FINISHED=2,a.REPAIR_TIME=10,Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a}return r(e,t),e}(i.a);e.a=s},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",_name:"Planetary Lab",lineStyle:{width:1,color:255,alpha:1},path:[0,-40,0,-70,50,-70,50,-40,0,-40]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="PLab",a.geo=Object(o.a)(c),a.team=n.a.NONE,a.hp=10,a.maxHp=10,a.canDisplayHit=!0,a.canExplode=!0,a.explosionOriginDx=20,a.explosionOriginDy=-52,a.canOccupyPlanet=!0,a.canManufacture=!0,a.PRODUCT={Freighter:{cost:300,time:120},Fighter:{cost:500,time:90}},Object.assign(a,e),a.geo.graphics.currentPath.lineColor=n.a._COLORS[a.team],a}return r(e,t),e}(i.a);e.a=s},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={body:{type:"polygon",lineStyle:{width:1,color:16711935,alpha:1},path:[-4,1,0,2,4,0,0,-2,-4,-1,-4,1],collisionPath:[-4,2,0,4,8,0,0,-4,-4,-2]},flame:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="Probe",a.geo=Object(n.a)(r.body,{collisionPath:r.body.collisionPath}),a.AUDIO_HIT="hit2",a.hp=2,a.maxHp=2,a.hasDied=!1,a.hitTime=-1,a.patrolIndex=0,a.rotation=0,a.flameOn=function(){return a.setChildVisible(0,!0)},a.flameOff=function(){return a.setChildVisible(0,!1)},Object.assign(a,e),a.assignTeamColor(),a.geo.graphics.addChild(Object(n.a)(r.flame).graphics),a.flameOff(),a}return i(e,t),e}(o.a);e.a=c},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={_name:"Orbital Sensor Array",type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[6,26,12,28,12,40,18,46,18,34,12,40,6,42]},c=function(t){function e(e){var a=t.call(this)||this;return a.type="SensorArray",a.geo=Object(n.a)(r),a.hp=5,a.maxHp=5,a.canExplode=!0,a.canDisplayHit=!0,a.canRepair=!0,a.canOccupySpacePort=!0,Object.assign(a,e),a.assignTeamColor(),a}return i(e,t),e}(o.a);e.a=c},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={_name:"Space Dock",type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[6,-42,20,-42,20,-22,14,-26,6,-26]},c=function(t){function e(e){var a=t.call(this)||this;return a.type="SpaceDock",a.geo=Object(n.a)(r),a.hp=8,a.maxHp=8,a.canExplode=!0,a.canDisplayHit=!0,a.canRepair=!0,a.canManufacture=!0,a.PRODUCT={Fighter:{cost:200,time:60},Probe:{cost:15,time:10}},a.canOccupySpacePort=!0,Object.assign(a,e),a.assignTeamColor(),a}return i(e,t),e}(o.a);e.a=c},function(t,e,a){"use strict";var n=a(7),o=a(6),i=a(3),r=a(13),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),s={_name:"Space Port",body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-2,0,-6,-20,-6,-36,-2,-44,6,-44,6,-24,2,-20,2,20,6,24,6,44,-2,44,-6,36,-6,20,-2,0]},turret1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[0,28,4,26,4,30,0,28]},turret2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[0,-28,4,-26,4,-30,0,-28]},turret3:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[4,44,2,48,0,44]},turret4:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[4,-44,2,-48,0,-44]},flame1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,20,-12,22,-6,24]},flame2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,-24,-12,-22,-6,-20]},flame3:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,32,-12,34,-6,36]},flame4:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,-36,-12,-34,-6,-32]}},l=function(t,e,a){var n=t.attackTarget,o=n.dx||0,c=n.dy||0,s={x:n.x+20*o,y:n.y+20*c},l=i.a.getAngleFromTo({x:e+t.x,y:a+t.y},s);return l+=r.a.float(-.15,.15)},u=Math.PI/2,p=[function(t){var e=28*Math.cos(t.rotation-u),a=28*Math.sin(t.rotation-u);return{x:e,y:a,rotation:l(t,e,a)}},function(t){var e=-28*Math.cos(t.rotation-u),a=-28*Math.sin(t.rotation-u);return{x:e,y:a,rotation:l(t,e,a)}},function(t){var e=46*Math.cos(t.rotation-u),a=46*Math.sin(t.rotation-u);return{x:e,y:a,rotation:l(t,e,a)}},function(t){var e=-46*Math.cos(t.rotation-u),a=-46*Math.sin(t.rotation-u);return{x:e,y:a,rotation:l(t,e,a)}}],h=function(t){function e(e){var a=t.call(this)||this;return a.type="SpacePort",a.geo=Object(n.a)(s.body),a.hp=30,a.maxHp=30,a.canRepair=!0,a.canRefine=!0,a.canOrbitPlanet=!0,a.orbitDistance=205,a.canAutoTargetEnemy=!0,a.canDisplayHit=!0,a.canExplode=!0,a.canAttack=!0,a.attackTurretPositions=p,a.canShootCannon=!0,a.reloadTime_Cannon=300,a.canStoreMaterial=!0,a.materialsRaw=0,a.materialsFinished=0,Object.assign(a,e),a.assignTeamColor(),a.geo.graphics.addChild(Object(n.a)(s.flame1).graphics,Object(n.a)(s.flame2).graphics,Object(n.a)(s.flame3).graphics,Object(n.a)(s.flame4).graphics,Object(n.a)(s.turret1).graphics,Object(n.a)(s.turret2).graphics,Object(n.a)(s.turret3).graphics,Object(n.a)(s.turret4).graphics),a}return c(e,t),e}(o.a);e.a=h},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",fill:{color:16777215,alpha:1},path:[-1,1,1,1,1,-1,-1,-1,-1,1]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="CannonShot",a.canMoveLinearly=!0,a.canDamage=!0,a.canMetabolize=!0,a.team=n.a.NONE,a.hp=60,a.damageHp=1,a.geo=Object(o.a)(c),Object.assign(a,e),a}return r(e,t),e}(i.a);e.a=s},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c={type:"polygon",lineStyle:{width:2,color:65535,alpha:1},path:[-3,0,0,0,0,-3,0,0,0,3,0,0,3,0]},s=function(t){function e(e){var a=t.call(this)||this;return a.type="HeavyCannonShot",a.canMoveLinearly=!0,a.canDamage=!0,a.canMetabolize=!0,a.team=n.a.NONE,a.hp=60,a.damageHp=2,a.geo=Object(o.a)(c),Object.assign(a,e),a}return r(e,t),e}(i.a);e.a=s},function(t,e,a){"use strict";var n=a(10),o=a(7),i=a(6),r=a(13),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),s={type:"polygon",lineStyle:{width:1,color:16776960,alpha:1},path:[5,0,-5,0]},l=function(t){function e(e){var a=t.call(this)||this;return a.type="LaserBolt",a.canMoveLinearly=!0,a.canDamage=!0,a.canMetabolize=!0,a.team=n.a.NONE,a.hp=r.a.int(2,3),a.damageHp=30,a.geo=Object(o.a)(s),Object.assign(a,e),a}return c(e,t),e}(i.a);e.a=l},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={missileBody:{type:"polygon",lineStyle:{width:1,color:15597568,alpha:1},path:[0,0,6,0]},missileFlame:{type:"polygon",lineStyle:{width:1,color:16711680,alpha:1},path:[0,0,-3,0]}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="HomingMissile",a.canMoveLinearly=!0,a.canLimitSpeed=!0,a.MAX_SPEED=55,a.MAX_SPEED2=3025,a.canAccelerateToAttackTarget=!0,a.canDamage=!0,a.canMetabolize=!0,a.canAttack=!0,a.hp=60,a.damageHp=6,a.geo=Object(n.a)(r.missileBody),a.geo.graphics.addChild(Object(n.a)(r.missileFlame).graphics),Object.assign(a,e),a}return i(e,t),e}(o.a);e.a=c},function(t,e,a){"use strict";var n=a(7),o=a(6),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r={missileBody:{type:"polygon",lineStyle:{width:2,color:4474111,alpha:1},path:[0,0,8,0]},missileFlame:{type:"polygon",lineStyle:{width:1,color:16776960,alpha:1},path:[0,0,-2,0]}},c=function(t){function e(e){var a=t.call(this)||this;return a.type="ClusterRocket",a.canExplode=!0,a.EXPLOSION_FRAGMENTS=20,a.canMoveLinearly=!0,a.canDamage=!0,a.canMetabolize=!0,a.canAttack=!0,a.hp=45,a.damageHp=.5,a.geo=Object(n.a)(r.missileBody),a.geo.graphics.addChild(Object(n.a)(r.missileFlame).graphics),Object.assign(a,e),a}return i(e,t),e}(o.a);e.a=c},function(t,e,a){"use strict";e.a=function(t,e){var a=n.a[t];if("Star"===e.type){var c=i.a.float(-Math.PI,Math.PI),s={x:e.x+1e3*Math.cos(c),y:e.y+1e3*Math.sin(c)},l=o.a.create("Fighter",{x:s.x+i.a.int(-100,100),y:s.y+i.a.int(-100,100),team:a});o.a.create("Freighter",{x:s.x+i.a.int(-100,100),y:s.y+i.a.int(-100,100),team:a,target:l,isOrbitingPlanet:!1,materialsFinished:500}),o.a.create("Freighter",{x:s.x+i.a.int(-100,100),y:s.y+i.a.int(-100,100),team:a,target:l,isOrbitingPlanet:!1,materialsFinished:500}),o.a.create("Freighter",{x:s.x+i.a.int(-100,100),y:s.y+i.a.int(-100,100),team:a,target:l,isOrbitingPlanet:!1,materialsFinished:500}),o.a.create("Freighter",{x:s.x+i.a.int(-100,100),y:s.y+i.a.int(-100,100),team:a,target:l,isOrbitingPlanet:!1,materialsFinished:500})}else{var u={team:a,planet:e};(l=o.a.create("Fighter",{team:a})).dockPlanet(e),e.pbase=o.a.create("PBase",u),e.pcolony=o.a.create("PColony",u),e.plab=o.a.create("PLab",u),e.pcomm=o.a.create("PComm",u),e.spaceport=o.a.create("SpacePort",u);var p=r({},u,{spaceport:e.spaceport});e.spacedock=o.a.create("SpaceDock",p),e.sensorarray=o.a.create("SensorArray",p),e.team=a,e.updateFlagColor()}};var n=a(10),o=a(3),i=a(13),r=this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}},function(t,e,a){"use strict";function n(t,e,a,n,i){var r=t[i];r||(r=function(t,e){var a=new o.Graphics;return a.beginFill(0,0),a.lineStyle(1,t,1),a.drawRect(-e,-e,e,e),a.endFill(),s.addChild(a),a}(e,a),t[i]=r),r.x=n.x*f,r.y=n.y*f}var o=a(19),i=(a.n(o),a(3)),r=a(23),c=a(40),s=new o.Graphics;s.beginFill(0,1),s.lineStyle(1,16777215,.3),s.drawRect(0,0,100,100),s.endFill(),s.x=4,s.y=4;var l=[],u=[],p=[],h=[],f=100/c.a,y=0,d=n.bind(null,u,65280,2),g=n.bind(null,l,16776960,2),m=n.bind(null,h,11184810,1);e.a={init:function(){r.b.addChildToHUD(s)},update:function(){var t=Date.now();if(t-y>500){var e=i.a.getByType("Star");e&&(e.length!=l.length&&(l=l.slice(0,e.length-1)),e.forEach(g));var a=i.a.getByType("Planet");a&&(a.length!=u.length&&(u=u.slice(0,a.length-1)),a.forEach(d));var o=i.a.getByType("Fighter");o&&(o.length!=p.length&&(p=p.slice(0,o.length-1)),o.forEach(function(t,e){n(p,i.a.getTeamColor(t.team),1,t,e)}));var r=i.a.getByType("Freighter");r&&(r.length!=h.length&&(h=h.slice(0,r.length-1)),r.forEach(m)),y=t}}}},function(t,e,a){"use strict";function n(t){var e=t.trackWidth,a=t.trackColor,n=t.trackRadius,o=t.dialColor,i=t.dialSize,r=new u.Graphics;r.beginFill(0,0),r.lineStyle(e,a,f),r.drawCircle(0,0,n),r.endFill(),r.x=0,r.y=0;var c=new u.Graphics;c.beginFill(0,0),c.lineStyle(e,o,1);var s=.5*i;return c.arc(0,0,n,-s*y,s*y),c.endFill(),c.x=0,c.y=0,r.addChild(c),r}function o(t){t.nearestEnemy?(r.visible=!0,r.rotation=t.nearestEnemy):r.visible=!1,t.nearestStar?(s.visible=!0,s.rotation=t.nearestStar):s.visible=!1,t.nearestPlanet?(c.visible=!0,c.rotation=t.nearestPlanet):c.visible=!1}var i,r,c,s,l,u=a(19),p=(a.n(u),a(23)),h=a(3),f=.08,y=Math.PI/180,d=!0,g=0;e.a={init:function(){c=n({trackWidth:4,trackRadius:45,trackColor:16777215,dialColor:65280,dialSize:6}),s=n({trackWidth:4,trackRadius:50,trackColor:16777215,dialColor:16776960,dialSize:12}),r=n({trackWidth:1,trackRadius:50,trackColor:16777215,dialColor:16711680,dialSize:2});var t=new u.Text("Tactical Radar",{fontFamily:"arial",fontSize:8,fill:16316664,align:"center"});t.x=-t.width>>1,t.y=-t.height>>1,(i=new u.Container).addChild(c,s,r,t),i.x=54,i.y=162,i.visible=!0,p.b.addChildToHUD(i)},update:function(){if(l&&d){var t=Date.now();if(t-g>500){var e=h.a.getAbsoluteNearestByType(l,"Planet"),a=h.a.getAbsoluteNearestByType(l,"Star");o({nearestEnemy:void 0,nearestPlanet:e&&h.a.getAngleFromTo(l,e),nearestStar:a&&h.a.getAngleFromTo(l,a)}),g=t}}},setOrigin:function(t){var e=t.x,a=t.y;return l={x:e,y:a}},setRotations:o,set isEnabled(t){d=t,i.visible=t},get isEnabled(){return d}}},function(t,e,a){"use strict";function n(t){t.explode(t),r.a.destroy(t)}function o(t){"Star"===t.type?function(t){var e=r.a.getDistSquared(this,t);if(e<l){var a=t.x-this.x,o=t.y-this.y,i=this.mass*t.mass/Math.pow(e,1.5);this.dx+=a*i,this.dy+=o*i,e<s.a.DIST_SURFACE2&&n(this)}}.call(this,t):"Planet"===t.type&&function(t){var e=r.a.getDistSquared(this,t);if(e<u){var a=this.mass*t.mass/Math.pow(e,1.5),o=t.x-this.x,i=t.y-this.y;if(this.dx+=o*a,this.dy+=i*a,e<c.a.DIST_SURFACE2){var s=this.dx*this.dx+this.dy*this.dy,l=this.rotation,y=r.a.getAngleFromTo(t,this),d=Math.abs(y-l);d>Math.PI&&(l>0?l-=f:l+=f,d=Math.abs(y-l)),d<p&&s<h?this.dockPlanet(t):n(this)}}}.call(this,t)}function i(t){!t.isDockedPlanet&&t.hp>0&&r.a.getNearest(t).forEach(o.bind(t))}e.a=function(){r.a.getByType("Fighter").forEach(i)};var r=a(3),c=a(124),s=a(125),l=Math.pow(1e3,2),u=Math.pow(800,2),p=Math.PI/4,h=4.41,f=2*Math.PI},function(t,e,a){"use strict";function n(t){return!t.pbase||!t.pcolony}function o(t,e){return e.team===t}function i(t){return t.pcolony&&t.plab&&!t.plab.isManufacturing}function r(t,e){if(t){var a=u.a.arrayElement(t).plab;a&&a.orderManufacture(e)}}function c(t){var e,a=o.bind(null,t),c=s.a.getByType("Planet").filter(a),u=s.a.getByType("Freighter").filter(a);u&&(u=u.filter(o.bind(null,t))),c&&((c=c.filter(o.bind(null,t))).filter(n).forEach(function(t,e){if(t)for(var a=t.length-1;a>=0;a--){var n=t[a];if(!Boolean(n.colonizationTarget)){n.isOrbitingPlanet&&n.exitPlanetOrbit(),n.colonizationTarget=e;break}}}.bind(null,u)),e=(e=c.filter(i)).length>0?e:void 0,u&&c.length>u.length&&r(e,"Freighter"));var f=s.a.getByType("Fighter").filter(a);if(0===f.length)r(e,"Fighter");else if(t===s.a.TEAM.MAGENTA&&!l.a.hasControlledEntity()){var y=f[0];l.a.setControlledEntity(y),p.a.setFocus(y),h.a.init()}}e.a=function(){var t=Date.now();t-y>f&&(d.forEach(c),y=t)};var s=a(3),l=a(62),u=a(13),p=a(61),h=a(45),f=3e3,y=0,d=[s.a.TEAM.GREEN,s.a.TEAM.BLUE,s.a.TEAM.YELLOW,s.a.TEAM.RED,s.a.TEAM.MAGENTA]},function(t,e,a){"use strict";var n=a(62),o=a(126),i=0,r=1e3/15;e.a={update:function(){var t=Date.now(),e=t-i;if(e>r){var a=n.a.getDevice().getInputState();a.up||a.up_arrow?o.a.prevButton():a.down||a.down_arrow?o.a.nextButton():(a.f||a.button0)&&o.a.clickButton(),i=t-e%r}}}},function(t,e,a){"use strict";var n=a(15),o=a(317),i=a.n(o),r=a(369),c=a.n(r),s=/(^sounds\/|\.ogg$)/gi;e.a={load:function(){return new Promise(function(t,e){c.a.getBinaryContent("assets.zip",function(a,n){a?e(a):t(n)})}).then(function(t){return i.a.loadAsync(t)}).then(function(t){return function(e){var a=[],o=[];return t.folder("sounds/").forEach(function(t,e){a.push(e.name.replace(s,"")),o.push(e.async("arraybuffer"))}),Promise.all(o).then(function(t){return t.forEach(function(t,e){return Object(n.a)({name:a[e],arrayBuffer:t})})})}()})}}},,,,,,function(t,e){}],[155]);