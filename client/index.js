(function () {function Uf(a){return a&&a.__esModule?{d:a.default}:{d:a}}var B=this;var mx,nx;var ce,po,qo;var ox={},ro=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,qx=Object.prototype.propertyIsEnumerable;function rx(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function sx(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(r){return e[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}ox=sx()?Object.assign:function(r,e){for(var t,n,o=rx(r),a=1;a<arguments.length;a++){for(var $ in t=Object(arguments[a]))px.call(t,$)&&(o[$]=t[$]);if(ro){n=ro(t);for(var s=0;s<n.length;s++)qx.call(t,n[s])&&(o[n[s]]=t[n[s]])}}return o};var tx=ux(ox);function ux(e){return e&&e.__esModule?e:{default:e}}Object.assign||(Object.assign=tx.default);var vx=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!B.performance||!B.performance.now){var wx=Date.now();B.performance||(B.performance={}),B.performance.now=function(){return Date.now()-wx}}for(var xx=Date.now(),so=["ms","moz","webkit","o"],Ni=0;Ni<so.length&&!B.requestAnimationFrame;++Ni){var Oi=so[Ni];B.requestAnimationFrame=B[Oi+"RequestAnimationFrame"],B.cancelAnimationFrame=B[Oi+"CancelAnimationFrame"]||B[Oi+"CancelRequestAnimationFrame"]}B.requestAnimationFrame||(B.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var e=Date.now(),$=vx+xx-e;return $<0&&($=0),xx=e,setTimeout(function(){xx=Date.now(),a(performance.now())},$)}),B.cancelAnimationFrame||(B.cancelAnimationFrame=function(a){return clearTimeout(a)});Math.sign||(Math.sign=function(n){return 0===(n=Number(n))||isNaN(n)?n:n>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array);var Pi,Wc,yx,zx,de,g,ub,ee,Xc,to,uo,vo,wo,z,Ax,xo,Qi,Yc,E={},Bx=!0;E.__esModule=Bx;var tja=(Pi="4.8.2",E.VERSION=Pi),uja=(Wc=2*Math.PI,E.PI_2=Wc),vja=(yx=180/Math.PI,E.RAD_TO_DEG=yx),wja=(zx=Math.PI/180,E.DEG_TO_RAD=zx),xja=(de={UNKNOWN:0,WEBGL:1,CANVAS:2},E.RENDERER_TYPE=de),yja=(g={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},E.BLEND_MODES=g),zja=(ub={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},E.DRAW_MODES=ub),Aja=(ee={LINEAR:0,NEAREST:1},E.SCALE_MODES=ee),Bja=(Xc={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},E.WRAP_MODES=Xc),Cja=(to={AUTO:0,MANUAL:1},E.GC_MODES=to),Dja=(uo=/\.(\w{3,4})(?:$|\?|#)/i,E.URL_FILE_EXTENSION=uo),Eja=(vo=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,E.DATA_URI=vo),Fja=(wo=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,E.SVG_SIZE=wo),Gja=(z={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},E.SHAPES=z),Hja=(Ax={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},E.PRECISION=Ax),Ija=(xo={STATIC:0,DYNAMIC:1},E.TRANSFORM_MODE=xo),Jja=(Qi={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},E.TEXT_GRADIENT=Qi),Kja=(Yc={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50},E.UPDATE_PRIORITY=Yc);var fe={},Cx=!0;function Dx(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}fe.__esModule=Cx;var Ex=function(){function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Dx(this,t),this.x=o,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,o){this.x=t||0,this.y=o||(0!==o?this.x:0)},t}(),Fx=Ex;fe.default=Fx;var Vf={},Gx=!0;Vf.__esModule=Gx;var Hx=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();function Ix(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Jx=function(){function t(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Ix(this,t),this._x=o,this._y=s,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,i||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,o=e||(0!==e?i:0);this._x===i&&this._y===o||(this._x=i,this._y=o,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Hx(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}(),Kx=Jx;Vf.default=Kx;var ge={},Lx=!0;ge.__esModule=Lx;var Mx=function(){function t(t,s){for(var i=0;i<s.length;i++){var h=s[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(s,i,h){return i&&t(s.prototype,i),h&&t(s,h),s}}(),yo=Nx(fe);function Nx(t){return t&&t.__esModule?t:{default:t}}function Ox(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var Px=function(){function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Ox(this,t),this.a=s,this.b=i,this.c=h,this.d=r,this.tx=a,this.ty=e,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,s,i,h,r,a){return this.a=t,this.b=s,this.c=i,this.d=h,this.tx=r,this.ty=a,this},t.prototype.toArray=function(t,s){this.array||(this.array=new Float32Array(9));var i=s||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,s){s=s||new yo.default;var i=t.x,h=t.y;return s.x=this.a*i+this.c*h+this.tx,s.y=this.b*i+this.d*h+this.ty,s},t.prototype.applyInverse=function(t,s){s=s||new yo.default;var i=1/(this.a*this.d+this.c*-this.b),h=t.x,r=t.y;return s.x=this.d*i*h+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,s.y=this.a*i*r+-this.b*i*h+(-this.ty*this.a+this.tx*this.b)*i,s},t.prototype.translate=function(t,s){return this.tx+=t,this.ty+=s,this},t.prototype.scale=function(t,s){return this.a*=t,this.d*=s,this.c*=t,this.b*=s,this.tx*=t,this.ty*=s,this},t.prototype.rotate=function(t){var s=Math.cos(t),i=Math.sin(t),h=this.a,r=this.c,a=this.tx;return this.a=h*s-this.b*i,this.b=h*i+this.b*s,this.c=r*s-this.d*i,this.d=r*i+this.d*s,this.tx=a*s-this.ty*i,this.ty=a*i+this.ty*s,this},t.prototype.append=function(t){var s=this.a,i=this.b,h=this.c,r=this.d;return this.a=t.a*s+t.b*h,this.b=t.a*i+t.b*r,this.c=t.c*s+t.d*h,this.d=t.c*i+t.d*r,this.tx=t.tx*s+t.ty*h+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,s,i,h,r,a,e,n,o){return this.a=Math.cos(e+o)*r,this.b=Math.sin(e+o)*r,this.c=-Math.sin(e-n)*a,this.d=Math.cos(e-n)*a,this.tx=t-(i*this.a+h*this.c),this.ty=s-(i*this.b+h*this.d),this},t.prototype.prepend=function(t){var s=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,h=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=h*t.a+this.d*t.c,this.d=h*t.b+this.d*t.d}return this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var s=this.a,i=this.b,h=this.c,r=this.d,a=-Math.atan2(-h,r),e=Math.atan2(i,s),n=Math.abs(a+e);return n<1e-5||Math.abs(Wc-n)<1e-5?(t.rotation=e,s<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=e),t.scale.x=Math.sqrt(s*s+i*i),t.scale.y=Math.sqrt(h*h+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,s=this.b,i=this.c,h=this.d,r=this.tx,a=t*h-s*i;return this.a=h/a,this.b=-s/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-h*r)/a,this.ty=-(t*this.ty-s*r)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var s=new t;return s.a=this.a,s.b=this.b,s.c=this.c,s.d=this.d,s.tx=this.tx,s.ty=this.ty,s},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Mx(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}(),Qx=Px;ge.default=Qx;var Wf={},Rx=!0;Wf.__esModule=Rx;var Sx=Tx(ge);function Tx($){return $&&$.__esModule?$:{default:$}}var fc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],gc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],hc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ic=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],zo=[],Ri=[];function Xf($){return $<0?-1:$>0?1:0}function Ux(){for(var $=0;$<16;$++){var r=[];Ri.push(r);for(var a=0;a<16;a++)for(var p=Xf(fc[$]*fc[a]+hc[$]*gc[a]),v=Xf(gc[$]*fc[a]+ic[$]*gc[a]),u=Xf(fc[$]*hc[a]+hc[$]*ic[a]),N=Xf(gc[$]*hc[a]+ic[$]*ic[a]),O=0;O<16;O++)if(fc[O]===p&&gc[O]===v&&hc[O]===u&&ic[O]===N){r.push(O);break}}for(var t=0;t<16;t++){var n=new Sx.default;n.set(fc[t],gc[t],hc[t],ic[t],0,0),zo.push(n)}}Ux();var Ba={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function($){return fc[$]},uY:function($){return gc[$]},vX:function($){return hc[$]},vY:function($){return ic[$]},inv:function($){return 8&$?15&$:7&-$},add:function($,r){return Ri[$][r]},sub:function($,r){return Ri[$][Ba.inv(r)]},rotate180:function($){return 4^$},isVertical:function($){return 2==(3&$)},byDirection:function($,r){return 2*Math.abs($)<=Math.abs(r)?r>=0?Ba.S:Ba.N:2*Math.abs(r)<=Math.abs($)?$>0?Ba.E:Ba.W:r>0?$>0?Ba.SE:Ba.SW:$>0?Ba.NE:Ba.NW},matrixAppendRotationInv:function($,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,v=zo[Ba.inv(r)];v.tx=a,v.ty=p,$.append(v)}},Vx=Ba;Wf.default=Vx;var he={},Wx=!0;he.__esModule=Wx;var Xx=function(){function t(t,i){for(var h=0;h<i.length;h++){var e=i[h];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,h,e){return h&&t(i.prototype,h),e&&t(i,e),i}}();function Yx(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Zx=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Yx(this,t),this.x=Number(i),this.y=Number(h),this.width=Number(e),this.height=Number(s),this.type=z.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,i){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height},t.prototype.pad=function(t,i){t=t||0,i=i||(0!==i?t:0),this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var i=Math.min(this.x,t.x),h=Math.max(this.x+this.width,t.x+t.width),e=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);this.x=i,this.width=h-i,this.y=e,this.height=s-e},Xx(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}(),$x=Zx;he.default=$x;var Si={},_x=!0;Si.__esModule=_x;var ay=by(he);function by(t){return t&&t.__esModule?t:{default:t}}function cy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var dy=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,$=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;cy(this,t),this.x=e,this.y=r,this.radius=$,this.type=z.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,$=this.x-t,a=this.y-e;return($*=$)+(a*=a)<=r},t.prototype.getBounds=function(){return new ay.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),ey=dy;Si.default=ey;var Ti={},fy=!0;Ti.__esModule=fy;var gy=hy(he);function hy(e){return e&&e.__esModule?e:{default:e}}function iy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var jy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,$=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;iy(this,e),this.x=t,this.y=o,this.width=i,this.height=$,this.type=z.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var o=(e-this.x)/this.width,i=(t-this.y)/this.height;return(o*=o)+(i*=i)<=1},e.prototype.getBounds=function(){return new gy.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),ky=jy;Ti.default=ky;var Ui={},ly=!0;Ui.__esModule=ly;var my=ny(fe);function ny(t){return t&&t.__esModule?t:{default:t}}function oy(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var py=function(){function t(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];if(oy(this,t),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof my.default){for(var e=[],$=0,n=r.length;$<n;$++)e.push(r[$].x,r[$].y);r=e}this.closed=!0,this.points=r,this.type=z.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,i){for(var r=!1,o=this.points.length/2,e=0,$=o-1;e<o;$=e++){var n=this.points[2*e],a=this.points[2*e+1],s=this.points[2*$],S=this.points[2*$+1];a>i!=S>i&&t<(i-a)/(S-a)*(s-n)+n&&(r=!r)}return r},t}(),qy=py;Ui.default=qy;var Vi={},ry=!0;Vi.__esModule=ry;function sy(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var ty=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;sy(this,t),this.x=i,this.y=s,this.width=h,this.height=r,this.radius=e,this.type=z.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){if(i>=this.y+this.radius&&i<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var s=t-(this.x+this.radius),h=i-(this.y+this.radius),r=this.radius*this.radius;if(s*s+h*h<=r)return!0;if((s=t-(this.x+this.width-this.radius))*s+h*h<=r)return!0;if(s*s+(h=i-(this.y+this.height-this.radius))*h<=r)return!0;if((s=t-(this.x+this.radius))*s+h*h<=r)return!0}return!1},t}(),uy=ty;Vi.default=uy;var O={},vy=!0;O.__esModule=vy;Object.defineProperty(O,"Point",{enumerable:!0,get:function(){return ab(fe).default}});Object.defineProperty(O,"ObservablePoint",{enumerable:!0,get:function(){return ab(Vf).default}});Object.defineProperty(O,"Matrix",{enumerable:!0,get:function(){return ab(ge).default}});Object.defineProperty(O,"GroupD8",{enumerable:!0,get:function(){return ab(Wf).default}});Object.defineProperty(O,"Circle",{enumerable:!0,get:function(){return ab(Si).default}});Object.defineProperty(O,"Ellipse",{enumerable:!0,get:function(){return ab(Ti).default}});Object.defineProperty(O,"Polygon",{enumerable:!0,get:function(){return ab(Ui).default}});Object.defineProperty(O,"Rectangle",{enumerable:!0,get:function(){return ab(he).default}});function ab(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(O,"RoundedRectangle",{enumerable:!0,get:function(){return ab(Vi).default}});var wy={},xy=function(e,r){var t=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);if(!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");return t};wy=xy;var Ao={},yy=function(t,r,e){var a;if(e){var i=e.tempAttribState,b=e.attribState;for(a=0;a<i.length;a++)i[a]=!1;for(a=0;a<r.length;a++)i[r[a].attribute.location]=!0;for(a=0;a<b.length;a++)b[a]!==i[a]&&(b[a]=i[a],e.attribState[a]?t.enableVertexAttribArray(a):t.disableVertexAttribArray(a))}else for(a=0;a<r.length;a++){var o=r[a];t.enableVertexAttribArray(o.attribute.location)}};Ao=yy;var zy={},Ay=new ArrayBuffer(0),La=function(e,t,r,f){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=f||e.STATIC_DRAW,this.data=Ay,r&&this.upload(r),this._updateID=0};La.prototype.upload=function(e,t,r){r||this.bind();var f=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?f.bufferSubData(this.type,t,e):f.bufferData(this.type,e,this.drawType),this.data=e},La.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},La.createVertexBuffer=function(e,t,r){return new La(e,e.ARRAY_BUFFER,t,r)},La.createIndexBuffer=function(e,t,r){return new La(e,e.ELEMENT_ARRAY_BUFFER,t,r)},La.create=function(e,t,r,f){return new La(e,t,r,f)},La.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},zy=La;var Yf={},Q=function(t,e,i,r,a){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=a||t.UNSIGNED_BYTE};Q.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var By=!1;Q.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!By){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");By=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},Q.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},Q.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},Q.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},Q.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},Q.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},Q.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Q.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Q.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},Q.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},Q.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},Q.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},Q.fromSource=function(t,e,i){var r=new Q(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},Q.fromData=function(t,e,i,r){var a=new Q(t);return a.uploadData(e,i,r),a},Yf=Q;var Cy={},sa=function(e,r,t){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=r||100,this.height=t||100};sa.prototype.enableTexture=function(e){var r=this.gl;this.texture=e||new Yf(r),this.texture.bind(),this.bind(),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.texture.texture,0)},sa.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},sa.prototype.clear=function(e,r,t,a){this.bind();var i=this.gl;i.clearColor(e,r,t,a),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},sa.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},sa.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},sa.prototype.resize=function(e,r){var t=this.gl;this.width=e,this.height=r,this.texture&&this.texture.uploadData(null,e,r),this.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e,r))},sa.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},sa.createRGBA=function(e,r,t,a){var i=Yf.fromData(e,null,r,t);i.enableNearestScaling(),i.enableWrapClamp();var f=new sa(e,r,t);return f.enableTexture(i),f.unbind(),f},sa.createFloat32=function(e,r,t,a){var i=new Yf.fromData(e,a,r,t);i.enableNearestScaling(),i.enableWrapClamp();var f=new sa(e,r,t);return f.enableTexture(i),f.unbind(),f},Cy=sa;var Bo={},Dy=function(r,e,o,a){var n=Co(r,r.VERTEX_SHADER,e),t=Co(r,r.FRAGMENT_SHADER,o),g=r.createProgram();if(r.attachShader(g,n),r.attachShader(g,t),a)for(var l in a)r.bindAttribLocation(g,a[l],l);return r.linkProgram(g),r.getProgramParameter(g,r.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(g,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),""!==r.getProgramInfoLog(g)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(g)),r.deleteProgram(g),g=null),r.deleteShader(n),r.deleteShader(t),g},Co=function(r,e,o){var a=r.createShader(e);return r.shaderSource(a,o),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS)?a:(console.log(r.getShaderInfoLog(a)),null)};Bo=Dy;var Wi={},Ey=function($,L){if(!Xi){var T=Object.keys(Do);Xi={};for(var _=0;_<T.length;++_){var v=T[_];Xi[$[v]]=Do[v]}}return Xi[L]},Xi=null,Do={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};Wi=Ey;var Eo={},Fy=function(r){return Gy[r]},Gy={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};Eo=Fy;var Fo={},Hy=function(r,t){for(var e={},$=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES),a=0;a<$;a++){var i=r.getActiveAttrib(t,a),l=Wi(r,i.type);e[i.name]={type:l,size:Eo(l),location:r.getAttribLocation(t,i.name),pointer:Iy}}return e},Iy=function(r,t,e,$){gl.vertexAttribPointer(this.location,this.size,r||gl.FLOAT,t||!1,e||0,$||0)};Fo=Hy;var Go={},Jy=function(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Yi(2*e);case"bvec3":return Yi(3*e);case"bvec4":return Yi(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);}},Yi=function(r){for(var e=new Array(r),a=0;a<e.length;a++)e[a]=!1;return e};Go=Jy;var Ho={},Ky=function(e,r){for(var a={},$=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),t=0;t<$;t++){var i=e.getActiveUniform(r,t),o=i.name.replace(/\[.*?\]/,""),p=Wi(e,i.type);a[o]={type:p,size:i.size,location:e.getUniformLocation(r,o),value:Go(p,i.size)}}return a};Ho=Ky;var Zi={},Ly=function(r,t){return"precision"!==r.substring(0,9)?"precision "+t+" float;\n"+r:r};Zi=Ly;var Io={},My=function(n,i){var t={data:{}};t.gl=n;for(var r=Object.keys(i),f=0;f<r.length;f++){var o=r[f],e=o.split("."),u=e[e.length-1],v=Ry(e,t),c=i[o];v.data[u]=c,v.gl=n,Object.defineProperty(v,u,{get:Ny(u),set:Qy(u,c)})}return t},Ny=function(n){return function(){return this.data[n].value}},Oy={float:function(n,i,t){n.uniform1f(i,t)},vec2:function(n,i,t){n.uniform2f(i,t[0],t[1])},vec3:function(n,i,t){n.uniform3f(i,t[0],t[1],t[2])},vec4:function(n,i,t){n.uniform4f(i,t[0],t[1],t[2],t[3])},int:function(n,i,t){n.uniform1i(i,t)},ivec2:function(n,i,t){n.uniform2i(i,t[0],t[1])},ivec3:function(n,i,t){n.uniform3i(i,t[0],t[1],t[2])},ivec4:function(n,i,t){n.uniform4i(i,t[0],t[1],t[2],t[3])},bool:function(n,i,t){n.uniform1i(i,t)},bvec2:function(n,i,t){n.uniform2i(i,t[0],t[1])},bvec3:function(n,i,t){n.uniform3i(i,t[0],t[1],t[2])},bvec4:function(n,i,t){n.uniform4i(i,t[0],t[1],t[2],t[3])},mat2:function(n,i,t){n.uniformMatrix2fv(i,!1,t)},mat3:function(n,i,t){n.uniformMatrix3fv(i,!1,t)},mat4:function(n,i,t){n.uniformMatrix4fv(i,!1,t)},sampler2D:function(n,i,t){n.uniform1i(i,t)}},Py={float:function(n,i,t){n.uniform1fv(i,t)},vec2:function(n,i,t){n.uniform2fv(i,t)},vec3:function(n,i,t){n.uniform3fv(i,t)},vec4:function(n,i,t){n.uniform4fv(i,t)},int:function(n,i,t){n.uniform1iv(i,t)},ivec2:function(n,i,t){n.uniform2iv(i,t)},ivec3:function(n,i,t){n.uniform3iv(i,t)},ivec4:function(n,i,t){n.uniform4iv(i,t)},bool:function(n,i,t){n.uniform1iv(i,t)},bvec2:function(n,i,t){n.uniform2iv(i,t)},bvec3:function(n,i,t){n.uniform3iv(i,t)},bvec4:function(n,i,t){n.uniform4iv(i,t)},sampler2D:function(n,i,t){n.uniform1iv(i,t)}};function Qy(n,i){return function(t){this.data[n].value=t;var r=this.data[n].location;1===i.size?Oy[i.type](this.gl,r,t):Py[i.type](this.gl,r,t)}}function Ry(n,i){for(var t=i,r=0;r<n.length-1;r++){var f=t[n[r]]||{data:{}};t[n[r]]=f,t=f}return t}Io=My;var Sy={},$i=function(r,e,t,$,a){this.gl=r,$&&(e=Zi(e,$),t=Zi(t,$)),this.program=Bo(r,e,t,a),this.attributes=Fo(r,this.program),this.uniformData=Ho(r,this.program),this.uniforms=Io(r,this.uniformData)};$i.prototype.bind=function(){return this.gl.useProgram(this.program),this},$i.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},Sy=$i;var Ty={};function da(t,e){if(this.nativeVaoExtension=null,da.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}da.prototype.constructor=da,Ty=da,da.FORCE_NATIVE=!1,da.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},da.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},da.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var i=this.attributes[r];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return Ao(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},da.prototype.addAttribute=function(t,e,r,i,a,n){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:a||0,start:n||0}),this.dirty=!0,this},da.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},da.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},da.prototype.draw=function(t,e,r){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(t,r,e||this.getSize()),this},da.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},da.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)};var Uy={};Uy={compileProgram:Bo,defaultValue:Go,extractAttributes:Fo,extractUniforms:Ho,generateUniformAccessObject:Io,setPrecision:Zi,mapSize:Eo,mapType:Wi};var ea={},Jo={createContext:wy,setVertexAttribArrays:Ao,GLBuffer:zy,GLFramebuffer:Cy,GLShader:Sy,GLTexture:Yf,VertexArrayObject:Ty,shader:Uy};ea&&(ea=Jo),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=Jo);var ie={},Vy=!0;ie.__esModule=Vy;function Wy(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Xy=function(){function i(){Wy(this,i),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(i){return this.minX>this.maxX||this.minY>this.maxY?O.Rectangle.EMPTY:((i=i||new O.Rectangle(0,0,1,1)).x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},i.prototype.addPoint=function(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},i.prototype.addQuad=function(i){var t=this.minX,m=this.minY,a=this.maxX,n=this.maxY,s=i[0],h=i[1];t=s<t?s:t,m=h<m?h:m,a=s>a?s:a,n=h>n?h:n,t=(s=i[2])<t?s:t,m=(h=i[3])<m?h:m,a=s>a?s:a,n=h>n?h:n,t=(s=i[4])<t?s:t,m=(h=i[5])<m?h:m,a=s>a?s:a,n=h>n?h:n,t=(s=i[6])<t?s:t,m=(h=i[7])<m?h:m,a=s>a?s:a,n=h>n?h:n,this.minX=t,this.minY=m,this.maxX=a,this.maxY=n},i.prototype.addFrame=function(i,t,m,a,n){var s=i.worldTransform,h=s.a,x=s.b,r=s.c,o=s.d,Y=s.tx,e=s.ty,X=this.minX,$=this.minY,f=this.maxX,d=this.maxY,u=h*t+r*m+Y,p=x*t+o*m+e;X=u<X?u:X,$=p<$?p:$,f=u>f?u:f,d=p>d?p:d,X=(u=h*a+r*m+Y)<X?u:X,$=(p=x*a+o*m+e)<$?p:$,f=u>f?u:f,d=p>d?p:d,X=(u=h*t+r*n+Y)<X?u:X,$=(p=x*t+o*n+e)<$?p:$,f=u>f?u:f,d=p>d?p:d,X=(u=h*a+r*n+Y)<X?u:X,$=(p=x*a+o*n+e)<$?p:$,f=u>f?u:f,d=p>d?p:d,this.minX=X,this.minY=$,this.maxX=f,this.maxY=d},i.prototype.addVertices=function(i,t,m,a){for(var n=i.worldTransform,s=n.a,h=n.b,x=n.c,r=n.d,o=n.tx,Y=n.ty,e=this.minX,X=this.minY,$=this.maxX,f=this.maxY,d=m;d<a;d+=2){var u=t[d],p=t[d+1],c=s*u+x*p+o,l=r*p+h*u+Y;e=c<e?c:e,X=l<X?l:X,$=c>$?c:$,f=l>f?l:f}this.minX=e,this.minY=X,this.maxX=$,this.maxY=f},i.prototype.addBounds=function(i){var t=this.minX,m=this.minY,a=this.maxX,n=this.maxY;this.minX=i.minX<t?i.minX:t,this.minY=i.minY<m?i.minY:m,this.maxX=i.maxX>a?i.maxX:a,this.maxY=i.maxY>n?i.maxY:n},i.prototype.addBoundsMask=function(i,t){var m=i.minX>t.minX?i.minX:t.minX,a=i.minY>t.minY?i.minY:t.minY,n=i.maxX<t.maxX?i.maxX:t.maxX,s=i.maxY<t.maxY?i.maxY:t.maxY;if(m<=n&&a<=s){var h=this.minX,x=this.minY,r=this.maxX,o=this.maxY;this.minX=m<h?m:h,this.minY=a<x?a:x,this.maxX=n>r?n:r,this.maxY=s>o?s:o}},i.prototype.addBoundsArea=function(i,t){var m=i.minX>t.x?i.minX:t.x,a=i.minY>t.y?i.minY:t.y,n=i.maxX<t.x+t.width?i.maxX:t.x+t.width,s=i.maxY<t.y+t.height?i.maxY:t.y+t.height;if(m<=n&&a<=s){var h=this.minX,x=this.minY,r=this.maxX,o=this.maxY;this.minX=m<h?m:h,this.minY=a<x?a:x,this.maxX=n>r?n:r,this.maxY=s>o?s:o}},i}(),Yy=Xy;ie.default=Yy;var jc={},Zy=Object.prototype.hasOwnProperty,fa="~";function vb(){}function Ko(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function $(){this._events=new vb,this._eventsCount=0}Object.create&&(vb.prototype=Object.create(null),new vb().__proto__||(fa=!1)),$.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)Zy.call(e,t)&&n.push(fa?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},$.prototype.listeners=function(e,t){var n=fa?fa+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var $=0,s=r.length,v=new Array(s);$<s;$++)v[$]=r[$].fn;return v},$.prototype.emit=function(e,t,n,r,$,s){var v=fa?fa+e:e;if(!this._events[v])return!1;var i,a,o=this._events[v],f=arguments.length;if(o.fn){switch(o.once&&this.removeListener(e,o.fn,void 0,!0),f){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,t),!0;case 3:return o.fn.call(o.context,t,n),!0;case 4:return o.fn.call(o.context,t,n,r),!0;case 5:return o.fn.call(o.context,t,n,r,$),!0;case 6:return o.fn.call(o.context,t,n,r,$,s),!0;}for(a=1,i=new Array(f-1);a<f;a++)i[a-1]=arguments[a];o.fn.apply(o.context,i)}else{var h,c=o.length;for(a=0;a<c;a++)switch(o[a].once&&this.removeListener(e,o[a].fn,void 0,!0),f){case 1:o[a].fn.call(o[a].context);break;case 2:o[a].fn.call(o[a].context,t);break;case 3:o[a].fn.call(o[a].context,t,n);break;case 4:o[a].fn.call(o[a].context,t,n,r);break;default:if(!i)for(h=1,i=new Array(f-1);h<f;h++)i[h-1]=arguments[h];o[a].fn.apply(o[a].context,i);}}return!0},$.prototype.on=function(e,t,n){var r=new Ko(t,n||this),$=fa?fa+e:e;return this._events[$]?this._events[$].fn?this._events[$]=[this._events[$],r]:this._events[$].push(r):(this._events[$]=r,this._eventsCount++),this},$.prototype.once=function(e,t,n){var r=new Ko(t,n||this,!0),$=fa?fa+e:e;return this._events[$]?this._events[$].fn?this._events[$]=[this._events[$],r]:this._events[$].push(r):(this._events[$]=r,this._eventsCount++),this},$.prototype.removeListener=function(e,t,n,r){var $=fa?fa+e:e;if(!this._events[$])return this;if(!t)return 0==--this._eventsCount?this._events=new vb:delete this._events[$],this;var s=this._events[$];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new vb:delete this._events[$]);else{for(var v=0,i=[],a=s.length;v<a;v++)(s[v].fn!==t||r&&!s[v].once||n&&s[v].context!==n)&&i.push(s[v]);i.length?this._events[$]=1===i.length?i[0]:i:0==--this._eventsCount?this._events=new vb:delete this._events[$]}return this},$.prototype.removeAllListeners=function(e){var t;return e?(t=fa?fa+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new vb:delete this._events[t])):(this._events=new vb,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prototype.setMaxListeners=function(){return this},$.prefixed=fa,$.EventEmitter=$,jc=$;var _i,Zc={},Lja=arguments[0];!function(i){var e=/iPhone/i,t=/iPod/i,n=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,d=/Android/i,r=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,s=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,b=/Windows Phone/i,a=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,p=/BB10/i,l=/Opera Mini/i,$=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,c=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),f=function(i,e){return i.test(e)},w=function(i){var w=i||navigator.userAgent,A=w.split("[FBAN");if(void 0!==A[1]&&(w=A[0]),void 0!==(A=w.split("Twitter"))[1]&&(w=A[0]),this.apple={phone:f(e,w),ipod:f(t,w),tablet:!f(e,w)&&f(n,w),device:f(e,w)||f(t,w)||f(n,w)},this.amazon={phone:f(r,w),tablet:!f(r,w)&&f(s,w),device:f(r,w)||f(s,w)},this.android={phone:f(r,w)||f(o,w),tablet:!f(r,w)&&!f(o,w)&&(f(s,w)||f(d,w)),device:f(r,w)||f(s,w)||f(o,w)||f(d,w)},this.windows={phone:f(b,w),tablet:f(a,w),device:f(b,w)||f(a,w)},this.other={blackberry:f(h,w),blackberry10:f(p,w),opera:f(l,w),firefox:f(v,w),chrome:f($,w),device:f(h,w)||f(p,w)||f(l,w)||f(v,w)||f($,w)},this.seven_inch=f(c,w),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},A=function(){var i=new w;return i.Class=w,i};Zc&&"undefined"==typeof window?Zc=w:Zc&&"undefined"!=typeof window?Zc=A():"function"==typeof _i&&_i.amd?_i("isMobile",[],i.isMobile=A()):i.isMobile=A()}(Zc);var aj={},$y=!0;aj.__esModule=$y;var _y=bz;aj.default=_y;var Lo=az(Zc);function az(e){return e&&e.__esModule?e:{default:e}}function bz(e){return Lo.default.tablet||Lo.default.phone?4:e}var bj={},cz=!0;bj.__esModule=cz;var dz=ez;function ez(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}bj.default=dz;var H={},fz=!0;H.__esModule=fz;var gz=Mo(aj),hz=Mo(bj);function Mo(e){return e&&e.__esModule?e:{default:e}}var iz={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,gz.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,hz.default)(),MESH_CANVAS_PADDING:0};H.default=iz;var je={},jz=!0;je.__esModule=jz;function kz(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var ke=function(){function r(){kz(this,r),this.worldTransform=new O.Matrix,this.localTransform=new O.Matrix,this._worldID=0,this._parentID=0}return r.prototype.updateLocalTransform=function(){},r.prototype.updateTransform=function(r){var a=r.worldTransform,t=this.worldTransform,$=this.localTransform;t.a=$.a*a.a+$.b*a.c,t.b=$.a*a.b+$.b*a.d,t.c=$.c*a.a+$.d*a.c,t.d=$.c*a.b+$.d*a.d,t.tx=$.tx*a.a+$.ty*a.c+a.tx,t.ty=$.tx*a.b+$.ty*a.d+a.ty,this._worldID++},r}(),lz=ke;je.default=lz,ke.prototype.updateWorldTransform=ke.prototype.updateTransform,ke.IDENTITY=new ke;var Zf={},mz=!0;Zf.__esModule=mz;var nz=function(){function t(t,o){for(var s=0;s<o.length;s++){var e=o[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(o,s,e){return s&&t(o.prototype,s),e&&t(o,e),o}}(),oz=pz(je);function pz(t){return t&&t.__esModule?t:{default:t}}function qz(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function rz(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?t:o}function sz(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var tz=function(t){function o(){qz(this,o);var s=rz(this,t.call(this));return s.position=new O.ObservablePoint(s.onChange,s,0,0),s.scale=new O.ObservablePoint(s.onChange,s,1,1),s.pivot=new O.ObservablePoint(s.onChange,s,0,0),s.skew=new O.ObservablePoint(s.updateSkew,s,0,0),s._rotation=0,s._cx=1,s._sx=0,s._cy=0,s._sy=1,s._localID=0,s._currentLocalID=0,s}return sz(o,t),o.prototype.onChange=function(){this._localID++},o.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},o.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},o.prototype.updateTransform=function(t){var o=this.localTransform;if(this._localID!==this._currentLocalID&&(o.a=this._cx*this.scale._x,o.b=this._sx*this.scale._x,o.c=this._cy*this.scale._y,o.d=this._sy*this.scale._y,o.tx=this.position._x-(this.pivot._x*o.a+this.pivot._y*o.c),o.ty=this.position._y-(this.pivot._x*o.b+this.pivot._y*o.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var s=t.worldTransform,e=this.worldTransform;e.a=o.a*s.a+o.b*s.c,e.b=o.a*s.b+o.b*s.d,e.c=o.c*s.a+o.d*s.c,e.d=o.c*s.b+o.d*s.d,e.tx=o.tx*s.a+o.ty*s.c+s.tx,e.ty=o.tx*s.b+o.ty*s.d+s.ty,this._parentID=t._worldID,this._worldID++}},o.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},nz(o,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),o}(oz.default),uz=tz;Zf.default=uz;var $f={},vz=!0;$f.__esModule=vz;var wz=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),xz=yz(je);function yz(t){return t&&t.__esModule?t:{default:t}}function zz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Az(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Bz(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Cz=function(t){function e(){zz(this,e);var r=Az(this,t.call(this));return r.position=new O.Point(0,0),r.scale=new O.Point(1,1),r.skew=new O.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new O.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return Bz(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,o=this.worldTransform;o.a=e.a*r.a+e.b*r.c,o.b=e.a*r.b+e.b*r.d,o.c=e.c*r.a+e.d*r.c,o.d=e.c*r.b+e.d*r.d,o.tx=e.tx*r.a+e.ty*r.c+r.tx,o.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},wz(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(xz.default),Dz=Cz;$f.default=Dz;var _f={},Ez=!0;_f.__esModule=Ez;var Fz=function(){function t(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,r,s){return r&&t(e.prototype,r),s&&t(e,s),e}}(),Gz=le(jc),Hz=le(H),Iz=le(Zf),Jz=le($f),Kz=le(ie);function le(t){return t&&t.__esModule?t:{default:t}}function Lz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Nz(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var cj=function(t){function e(){Lz(this,e);var r=Mz(this,t.call(this)),s=Hz.default.TRANSFORM_MODE===xo.STATIC?Iz.default:Jz.default;return r.tempDisplayObjectParent=null,r.transform=new s,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new Kz.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return Nz(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new O.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new O.Rectangle),t=this._localBoundsRect);var s=this.getBounds(!1,t);return this.parent=r,this.transform=e,s},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,s){return e&&(t=e.toGlobal(t,r,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=s||1,this.rotation=n,this.skew.x=a,this.skew.y=i,this.pivot.x=o,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Fz(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(Gz.default),Oz=cj;_f.default=Oz,cj.prototype.displayObjectUpdateTransform=cj.prototype.updateTransform;var dj={},Pz=!0;function Qz(i){i.__plugins={},i.registerPlugin=function(n,t){i.__plugins[n]=t},i.prototype.initPlugins=function(){for(var n in this.plugins=this.plugins||{},i.__plugins)this.plugins[n]=new i.__plugins[n](this)},i.prototype.destroyPlugins=function(){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;this.plugins=null}}dj.__esModule=Pz;var Rz={mixin:function(i){Qz(i)}};dj.default=Rz;var me={},Sz=!0;me.__esModule=Sz;var Tz=No;me.mixin=Tz;var Uz=Wz;me.delayMixin=Uz;var Vz=Xz;function No(i,r){if(i&&r)for(var $=Object.keys(r),e=0;e<$.length;++e){var x=$[e];Object.defineProperty(i,x,Object.getOwnPropertyDescriptor(r,x))}}me.performMixins=Vz;var ne=[];function Wz(i,r){ne.push(i,r)}function Xz(){for(var i=0;i<ne.length;i+=2)No(ne[i],ne[i+1]);ne.length=0}var Yz={};Yz=function(r,t,e){var n,o=r.length;if(!(t>=o||0===e)){var $=o-(e=t+e>o?o-t:e);for(n=t;n<$;++n)r[n]=r[n+e];r.length=$}};var ej={},Zz=!0;ej.__esModule=Zz;var $z=_z;ej.default=$z;function _z(){for(var $=[],r=[],o=0;o<32;o++)$[o]=o,r[o]=o;$[g.NORMAL_NPM]=g.NORMAL,$[g.ADD_NPM]=g.ADD,$[g.SCREEN_NPM]=g.SCREEN,r[g.NORMAL]=g.NORMAL_NPM,r[g.ADD]=g.ADD_NPM,r[g.SCREEN]=g.SCREEN_NPM;var a=[];return a.push(r),a.push($),a}var fj={};function ag(r,e,$){$=$||2;var n,t,a,v,i,y,p,x=e&&e.length,o=x?e[0]*$:r.length,l=Oo(r,0,o,$,!0),q=[];if(!l)return q;if(x&&(l=eA(r,e,l,$)),r.length>80*$){n=a=r[0],t=v=r[1];for(var u=$;u<o;u+=$)(i=r[u])<n&&(n=i),(y=r[u+1])<t&&(t=y),i>a&&(a=i),y>v&&(v=y);p=0!==(p=Math.max(a-n,v-t))?1/p:0}return pe(l,q,$,n,t,p),q}function Oo(r,e,$,n,t){var a,v;if(t===ij(r,e,$,n)>0)for(a=e;a<$;a+=n)v=Ro(a,r[a],r[a+1],v);else for(a=$-n;a>=e;a-=n)v=Ro(a,r[a],r[a+1],v);return v&&kc(v,v.next)&&(re(v),v=v.next),v}function oe(r,e){if(!r)return r;e||(e=r);var $,n=r;do{if($=!1,n.steiner||!kc(n,n.next)&&0!==Y(n.prev,n,n.next))n=n.next;else{if(re(n),(n=e=n.prev)===n.next)break;$=!0}}while($||n!==e);return e}function pe(r,e,$,n,t,a,v){if(r){!v&&a&&iA(r,n,t,a);for(var i,y,p=r;r.prev!==r.next;)if(i=r.prev,y=r.next,a?bA(r,n,t,a):aA(r))e.push(i.i/$),e.push(r.i/$),e.push(y.i/$),re(r),r=y.next,p=y.next;else if((r=y)===p){v?1===v?pe(r=cA(r,e,$),e,$,n,t,a,2):2===v&&dA(r,e,$,n,t,a):pe(oe(r),e,$,n,t,a,1);break}}}function aA(r){var e=r.prev,$=r,n=r.next;if(Y(e,$,n)>=0)return!1;for(var t=r.next.next;t!==r.prev;){if($c(e.x,e.y,$.x,$.y,n.x,n.y,t.x,t.y)&&Y(t.prev,t,t.next)>=0)return!1;t=t.next}return!0}function bA(r,e,$,n){var t=r.prev,a=r,v=r.next;if(Y(t,a,v)>=0)return!1;for(var i=t.x<a.x?t.x<v.x?t.x:v.x:a.x<v.x?a.x:v.x,y=t.y<a.y?t.y<v.y?t.y:v.y:a.y<v.y?a.y:v.y,p=t.x>a.x?t.x>v.x?t.x:v.x:a.x>v.x?a.x:v.x,x=t.y>a.y?t.y>v.y?t.y:v.y:a.y>v.y?a.y:v.y,o=gj(i,y,e,$,n),l=gj(p,x,e,$,n),q=r.prevZ,u=r.nextZ;q&&q.z>=o&&u&&u.z<=l;){if(q!==r.prev&&q!==r.next&&$c(t.x,t.y,a.x,a.y,v.x,v.y,q.x,q.y)&&Y(q.prev,q,q.next)>=0)return!1;if(q=q.prevZ,u!==r.prev&&u!==r.next&&$c(t.x,t.y,a.x,a.y,v.x,v.y,u.x,u.y)&&Y(u.prev,u,u.next)>=0)return!1;u=u.nextZ}for(;q&&q.z>=o;){if(q!==r.prev&&q!==r.next&&$c(t.x,t.y,a.x,a.y,v.x,v.y,q.x,q.y)&&Y(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;u&&u.z<=l;){if(u!==r.prev&&u!==r.next&&$c(t.x,t.y,a.x,a.y,v.x,v.y,u.x,u.y)&&Y(u.prev,u,u.next)>=0)return!1;u=u.nextZ}return!0}function cA(r,e,$){var n=r;do{var t=n.prev,a=n.next.next;!kc(t,a)&&Po(t,n,n.next,a)&&qe(t,a)&&qe(a,t)&&(e.push(t.i/$),e.push(n.i/$),e.push(a.i/$),re(n),re(n.next),n=r=a),n=n.next}while(n!==r);return n}function dA(r,e,$,n,t,a){var v=r;do{for(var i=v.next.next;i!==v.prev;){if(v.i!==i.i&&lA(v,i)){var y=Qo(v,i);return v=oe(v,v.next),y=oe(y,y.next),pe(v,e,$,n,t,a),void pe(y,e,$,n,t,a)}i=i.next}v=v.next}while(v!==r)}function eA(r,e,$,n){var t,a,v,i=[];for(t=0,a=e.length;t<a;t++)(v=Oo(r,e[t]*n,t<a-1?e[t+1]*n:r.length,n,!1))===v.next&&(v.steiner=!0),i.push(kA(v));for(i.sort(fA),t=0;t<i.length;t++)gA(i[t],$),$=oe($,$.next);return $}function fA(r,e){return r.x-e.x}function gA(r,e){if(e=hA(r,e)){var $=Qo(e,r);oe($,$.next)}}function hA(r,e){var $,n=e,t=r.x,a=r.y,v=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var i=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(i<=t&&i>v){if(v=i,i===t){if(a===n.y)return n;if(a===n.next.y)return n.next}$=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!$)return null;if(t===v)return $.prev;var y,p=$,x=$.x,o=$.y,l=1/0;for(n=$.next;n!==p;)t>=n.x&&n.x>=x&&t!==n.x&&$c(a<o?t:v,a,x,o,a<o?v:t,a,n.x,n.y)&&((y=Math.abs(a-n.y)/(t-n.x))<l||y===l&&n.x>$.x)&&qe(n,r)&&($=n,l=y),n=n.next;return $}function iA(r,e,$,n){var t=r;do{null===t.z&&(t.z=gj(t.x,t.y,e,$,n)),t.prevZ=t.prev,t.nextZ=t.next,t=t.next}while(t!==r);t.prevZ.nextZ=null,t.prevZ=null,jA(t)}function jA(r){var e,$,n,t,a,v,i,y,p=1;do{for($=r,r=null,a=null,v=0;$;){for(v++,n=$,i=0,e=0;e<p&&(i++,n=n.nextZ);e++);for(y=p;i>0||y>0&&n;)0!==i&&(0===y||!n||$.z<=n.z)?(t=$,$=$.nextZ,i--):(t=n,n=n.nextZ,y--),a?a.nextZ=t:r=t,t.prevZ=a,a=t;$=n}a.nextZ=null,p*=2}while(v>1);return r}function gj(r,e,$,n,t){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-$)*t)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*t)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function kA(r){var e=r,$=r;do{e.x<$.x&&($=e),e=e.next}while(e!==r);return $}function $c(r,e,$,n,t,a,v,i){return(t-v)*(e-i)-(r-v)*(a-i)>=0&&(r-v)*(n-i)-($-v)*(e-i)>=0&&($-v)*(a-i)-(t-v)*(n-i)>=0}function lA(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!mA(r,e)&&qe(r,e)&&qe(e,r)&&nA(r,e)}function Y(r,e,$){return(e.y-r.y)*($.x-e.x)-(e.x-r.x)*($.y-e.y)}function kc(r,e){return r.x===e.x&&r.y===e.y}function Po(r,e,$,n){return!!(kc(r,e)&&kc($,n)||kc(r,n)&&kc($,e))||Y(r,e,$)>0!=Y(r,e,n)>0&&Y($,n,r)>0!=Y($,n,e)>0}function mA(r,e){var $=r;do{if($.i!==r.i&&$.next.i!==r.i&&$.i!==e.i&&$.next.i!==e.i&&Po($,$.next,r,e))return!0;$=$.next}while($!==r);return!1}function qe(r,e){return Y(r.prev,r,r.next)<0?Y(r,e,r.next)>=0&&Y(r,r.prev,e)>=0:Y(r,e,r.prev)<0||Y(r,r.next,e)<0}function nA(r,e){var $=r,n=!1,t=(r.x+e.x)/2,a=(r.y+e.y)/2;do{$.y>a!=$.next.y>a&&$.next.y!==$.y&&t<($.next.x-$.x)*(a-$.y)/($.next.y-$.y)+$.x&&(n=!n),$=$.next}while($!==r);return n}function Qo(r,e){var $=new hj(r.i,r.x,r.y),n=new hj(e.i,e.x,e.y),t=r.next,a=e.prev;return r.next=e,e.prev=r,$.next=t,t.prev=$,n.next=$,$.prev=n,a.next=n,n.prev=a,n}function Ro(r,e,$,n){var t=new hj(r,e,$);return n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function re(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function hj(r,e,$){this.i=r,this.x=e,this.y=$,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ij(r,e,$,n){for(var t=0,a=e,v=$-n;a<$;a+=n)t+=(r[v]-r[a])*(r[a+1]+r[v+1]),v=a;return t}(fj=ag).default=ag,ag.deviation=function(r,e,$,n){var t=e&&e.length,a=t?e[0]*$:r.length,v=Math.abs(ij(r,0,a,$));if(t)for(var i=0,y=e.length;i<y;i++){var p=e[i]*$,x=i<y-1?e[i+1]*$:r.length;v-=Math.abs(ij(r,p,x,$))}var o=0;for(i=0;i<n.length;i+=3){var l=n[i]*$,q=n[i+1]*$,u=n[i+2]*$;o+=Math.abs((r[l]-r[u])*(r[q+1]-r[l+1])-(r[l]-r[q])*(r[u+1]-r[l+1]))}return 0===v&&0===o?0:Math.abs((o-v)/v)},ag.flatten=function(r){for(var e=r[0][0].length,$={vertices:[],holes:[],dimensions:e},n=0,t=0;t<r.length;t++){for(var a=0;a<r[t].length;a++)for(var v=0;v<e;v++)$.vertices.push(r[t][a][v]);t>0&&(n+=r[t-1].length,$.holes.push(n))}return $};var ga,Ca,i={},oA=!0;i.__esModule=oA;var bg=(Vo=void 0,bd=i.isMobile=Vo,Wo=i.removeItems=bd,cg=i.EventEmitter=Wo,Xo=i.pluginTarget=cg,Yo=i.mixins=Xo,ga=i.earcut=Yo,Ca=i.TextureCache=ga,i.BaseTextureCache=Ca);i.premultiplyBlendMode=bg;var wb=GA;i.uid=wb;var ha=HA;i.hex2rgb=ha;var jj=IA;i.hex2string=jj;var kj=JA;i.rgb2hex=kj;var _c=KA;i.getResolutionOfUrl=_c;var lj=LA;i.decomposeDataUri=lj;var mj=MA;i.getUrlFileExtension=mj;var So=NA;i.getSvgSize=So;var pA=OA;i.skipHello=pA;var To=PA;i.sayHello=To;var qA=QA;i.isWebGLSupported=qA;var lc=RA;i.sign=lc;var rA=SA;i.destroyTextureCache=rA;var sA=TA;i.clearTextureCache=sA;var tA=VA;i.correctBlendMode=tA;var nj=WA;i.premultiplyTint=nj;var uA=XA;i.premultiplyRgba=uA;var vA=YA;i.premultiplyTintToRgba=vA;var wA=ad(H),xA=ad(jc),yA=ad(dj),zA=Uo(me),AA=Uo(Zc),BA=ad(Yz),CA=ad(ej),DA=ad(fj);function Uo(e){if(e&&e.__esModule)return e;var $={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&($[r]=e[r]);return $.default=e,$}function ad(e){return e&&e.__esModule?e:{default:e}}var EA=0,FA=!1,Vo=AA;i.isMobile=Vo;var bd=BA.default;i.removeItems=bd;var Wo=xA.default;i.EventEmitter=Wo;var cg=yA.default;i.pluginTarget=cg;var Xo=zA;i.mixins=Xo;var Yo=DA.default;function GA(){return++EA}function HA(e,$){return($=$||[])[0]=(e>>16&255)/255,$[1]=(e>>8&255)/255,$[2]=(255&e)/255,$}function IA(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)}function JA(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}function KA(e,$){var r=wA.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==$?$:1}function LA(e){var $=vo.exec(e);if($)return{mediaType:$[1]?$[1].toLowerCase():void 0,subType:$[2]?$[2].toLowerCase():void 0,charset:$[3]?$[3].toLowerCase():void 0,encoding:$[4]?$[4].toLowerCase():void 0,data:$[5]}}function MA(e){var $=uo.exec(e);if($)return $[1].toLowerCase()}function NA(e){var $=wo.exec(e),r={};return $&&(r[$[1]]=Math.round(parseFloat($[3])),r[$[5]]=Math.round(parseFloat($[7]))),r}function OA(){FA=!0}function PA(e){if(!FA){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var $=["\n %c %c %c PixiJS "+Pi+" - \u2730 "+e+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,$)}else window.console&&window.console.log("PixiJS "+Pi+" - "+e+" - http://www.pixijs.com/");FA=!0}}function QA(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var $=document.createElement("canvas"),r=$.getContext("webgl",e)||$.getContext("experimental-webgl",e),o=!(!r||!r.getContextAttributes().stencil);if(r){var t=r.getExtension("WEBGL_lose_context");t&&t.loseContext()}return r=null,o}catch(l){return!1}}function RA(e){return 0===e?0:e<0?-1:1}i.earcut=Yo;var dg=(ga=Object.create(null),i.TextureCache=ga),eg=(Ca=Object.create(null),i.BaseTextureCache=Ca);function SA(){var e=void 0;for(e in dg)dg[e].destroy();for(e in eg)eg[e].destroy()}function TA(){var e=void 0;for(e in dg)delete dg[e];for(e in eg)delete eg[e]}var UA=(bg=(0,CA.default)(),i.premultiplyBlendMode=bg);function VA(e,$){return UA[$?1:0][e]}function WA(e,$){if(1===$)return(255*$<<24)+e;if(0===$)return 0;var r=e>>16&255,o=e>>8&255,t=255&e;return(255*$<<24)+((r=r*$+.5|0)<<16)+((o=o*$+.5|0)<<8)+(t=t*$+.5|0)}function XA(e,$,r,o){return r=r||new Float32Array(4),o||void 0===o?(r[0]=e[0]*$,r[1]=e[1]*$,r[2]=e[2]*$):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=$,r}function YA(e,$,r,o){return(r=r||new Float32Array(4))[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(o||void 0===o)&&(r[0]*=$,r[1]*=$,r[2]*=$),r[3]=$,r}var mc={},ZA=!0;mc.__esModule=ZA;var $A=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_A=aB(_f);function aB(e){return e&&e.__esModule?e:{default:e}}function bB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cB(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dB(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oj=function(e){function t(){bB(this,t);var r=cB(this,e.call(this));return r.children=[],r}return dB(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);(0,bd)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,bd)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,bd)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,s=void 0;if(i>0&&i<=n){s=this.children.splice(r,i);for(var h=0;h<s.length;++h)s[h].parent=null,s[h].transform&&(s[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var o=0;o<s.length;++o)s[o].emit("removed",this);return s}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,s=this.children.length;i<s;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(t)},$A(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(_A.default),eB=oj;mc.default=eB,oj.prototype.containerUpdateTransform=oj.prototype.updateTransform;var fB=function(){var o=this,e={exports:this};return function(n){var r="object"==typeof o&&o&&!o.nodeType&&o,t="object"==typeof e&&e&&!e.nodeType&&e,i="object"==typeof B&&B;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var u,f,c=2147483647,l=36,a=1,s=26,p=38,h=700,d=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=l-a,j=Math.floor,A=String.fromCharCode;function $(o){throw new RangeError(C[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(b,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,i=o.length;t<i;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<i?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=A((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=A(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function T(o,e,n){var r=0;for(o=n?j(o/h):o>>1,o+=j(o/e);o>y*s>>1;r+=l)o=j(o/y);return j(r+(y+1)*o/(o+p))}function m(o){var e,n,r,t,i,u,f,p,h,w,x,b=[],C=o.length,y=0,A=v,I=d;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&$("not-basic"),b.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<C;){for(i=y,u=1,f=l;t>=C&&$("invalid-input"),((p=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||p>j((c-y)/u))&&$("overflow"),y+=p*u,!(p<(h=f<=I?a:f>=I+s?s:f-I));f+=l)u>j(c/(w=l-h))&&$("overflow"),u*=w;I=T(y-i,e=b.length+1,0==i),j(y/e)>c-A&&$("overflow"),A+=j(y/e),y%=e,b.splice(y++,0,A)}return O(b)}function z(o){var e,n,r,t,i,u,f,p,h,w,x,b,C,y,I,E=[];for(b=(o=F(o)).length,e=v,n=0,i=d,u=0;u<b;++u)(x=o[u])<128&&E.push(A(x));for(r=t=E.length,t&&E.push(g);r<b;){for(f=c,u=0;u<b;++u)(x=o[u])>=e&&x<f&&(f=x);for(f-e>j((c-n)/(C=r+1))&&$("overflow"),n+=(f-e)*C,e=f,u=0;u<b;++u)if((x=o[u])<e&&++n>c&&$("overflow"),x==e){for(p=n,h=l;!(p<(w=h<=i?a:h>=i+s?s:h-i));h+=l)I=p-w,y=l-w,E.push(A(S(w+I%y,0))),p=j(I/y);E.push(A(S(p,0))),i=T(n,C,r==t),n=0,++r}++n,++e}return E.join("")}if(u={version:"1.4.1",ucs2:{decode:F,encode:O},decode:m,encode:z,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+z(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?m(o.slice(4).toLowerCase()):o})}},r&&t){if(e.exports==r)t.exports=u;else for(f in u)u.hasOwnProperty(f)&&(r[f]=u[f]);}else n.punycode=u}(this),e.exports}.call({});var Ma={};Ma={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};var gB,hB,iB=false;function jB(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function kB(){if(iB)return;iB=true;gB={};gB=function(r,e,t,n){e=e||"&",t=t||"=";var a={};if("string"!=typeof r||0===r.length)return a;var o=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var $=0;$<p;++$){var y,v,c,i,u=r[$].replace(o,"%20"),f=u.indexOf(t);f>=0?(y=u.substr(0,f),v=u.substr(f+1)):(y=u,v=""),c=decodeURIComponent(y),i=decodeURIComponent(v),jB(a,c)?hB(a[c])?a[c].push(i):a[c]=[a[c],i]:a[c]=i}return a};hB=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}}var lB,se,mB,nB,oB=false;function Zo(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}function pB(){if(oB)return;oB=true;lB={};se=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return"";}};lB=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?Zo(nB(r),function(n){var i=encodeURIComponent(se(n))+t;return mB(r[n])?Zo(r[n],function(r){return i+encodeURIComponent(se(r))}).join(e):i+encodeURIComponent(se(r[n]))}).join(e):n?encodeURIComponent(se(n))+t+encodeURIComponent(se(r)):""};mB=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};nB=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e}}var pj,$o,Mja=(pj=(kB(),gB),pj);var Nja=($o=(pB(),lB),$o);var nc={},qB=te;nc.parse=qB;var rB=EB;nc.resolve=rB;var sB=FB;nc.resolveObject=sB;var tB=DB;nc.format=tB;var uB=ta;function ta(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}nc.Url=uB;var vB=/^([a-z0-9.+-]+:)/i,wB=/:[0-9]*$/,xB=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,yB=["<",">","\"","`"," ","\r","\n","\t"],zB=["{","}","|","\\","^","`"].concat(yB),qj=["'"].concat(zB),_o=["%","/","?",";","#"].concat(qj),ap=["/","?","#"],AB=255,bp=/^[+a-z0-9A-Z_-]{0,63}$/,BB=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,CB={javascript:!0,"javascript:":!0},rj={javascript:!0,"javascript:":!0},cd={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function te(t,r,s){if(t&&Ma.isObject(t)&&t instanceof ta)return t;var a=new ta;return a.parse(t,r,s),a}function DB(t){return Ma.isString(t)&&(t=te(t)),t instanceof ta?t.format():ta.prototype.format.call(t)}function EB(t,r){return te(t,!1,!0).resolve(r)}function FB(t,r){return t?te(t,!1,!0).resolveObject(r):r}ta.prototype.parse=function(t,r,s){if(!Ma.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),e=-1!==a&&a<t.indexOf("#")?"?":"#",h=t.split(e);h[0]=h[0].replace(/\\/g,"/");var o=t=h.join(e);if(o=o.trim(),!s&&1===t.split("#").length){var $=xB.exec(o);if($)return this.path=o,this.href=o,this.pathname=$[1],$[2]?(this.search=$[2],this.query=r?pj(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var n=vB.exec(o);if(n){var i=(n=n[0]).toLowerCase();this.protocol=i,o=o.substr(n.length)}if(s||n||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===o.substr(0,2);!l||n&&rj[n]||(o=o.substr(2),this.slashes=!0)}if(!rj[n]&&(l||n&&!cd[n])){for(var p,u,c=-1,v=0;v<ap.length;v++){-1!==(b=o.indexOf(ap[v]))&&(-1===c||b<c)&&(c=b)}-1!==(u=-1===c?o.lastIndexOf("@"):o.lastIndexOf("@",c))&&(p=o.slice(0,u),o=o.slice(u+1),this.auth=decodeURIComponent(p)),c=-1;for(v=0;v<_o.length;v++){var b;-1!==(b=o.indexOf(_o[v]))&&(-1===c||b<c)&&(c=b)}-1===c&&(c=o.length),this.host=o.slice(0,c),o=o.slice(c),this.parseHost(),this.hostname=this.hostname||"";var f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f)for(var m=this.hostname.split(/\./),J=(v=0,m.length);v<J;v++){var g=m[v];if(g&&!g.match(bp)){for(var y="",P=0,d=g.length;P<d;P++)g.charCodeAt(P)>127?y+="x":y+=g[P];if(!y.match(bp)){var x=m.slice(0,v),q=m.slice(v+1),O=g.match(BB);O&&(x.push(O[1]),q.unshift(O[2])),q.length&&(o="/"+q.join(".")+o),this.hostname=x.join(".");break}}}this.hostname.length>AB?this.hostname="":this.hostname=this.hostname.toLowerCase(),f||(this.hostname=fB.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!CB[i])for(v=0,J=qj.length;v<J;v++){var C=qj[v];if(-1!==o.indexOf(C)){var A=encodeURIComponent(C);A===C&&(A=escape(C)),o=o.split(C).join(A)}}var w=o.indexOf("#");-1!==w&&(this.hash=o.substr(w),o=o.slice(0,w));var E=o.indexOf("?");if(-1!==E?(this.search=o.substr(E),this.query=o.substr(E+1),r&&(this.query=pj(this.query)),o=o.slice(0,E)):r&&(this.search="",this.query={}),o&&(this.pathname=o),cd[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var I=this.search||"";this.path=j+I}return this.href=this.format(),this},ta.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=this.protocol||"",s=this.pathname||"",a=this.hash||"",e=!1,h="";this.host?e=t+this.host:this.hostname&&(e=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&Ma.isObject(this.query)&&Object.keys(this.query).length&&(h=$o(this.query));var o=this.search||h&&"?"+h||"";return r&&":"!==r.substr(-1)&&(r+=":"),this.slashes||(!r||cd[r])&&!1!==e?(e="//"+(e||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):e||(e=""),a&&"#"!==a.charAt(0)&&(a="#"+a),o&&"?"!==o.charAt(0)&&(o="?"+o),r+e+(s=s.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+a},ta.prototype.resolve=function(t){return this.resolveObject(te(t,!1,!0)).format()},ta.prototype.resolveObject=function(t){if(Ma.isString(t)){var r=new ta;r.parse(t,!1,!0),t=r}for(var s=new ta,a=Object.keys(this),e=0;e<a.length;e++){var h=a[e];s[h]=this[h]}if(s.hash=t.hash,""===t.href)return s.href=s.format(),s;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),$=0;$<o.length;$++){var n=o[$];"protocol"!==n&&(s[n]=t[n])}return cd[s.protocol]&&s.hostname&&!s.pathname&&(s.path=s.pathname="/"),s.href=s.format(),s}if(t.protocol&&t.protocol!==s.protocol){if(!cd[t.protocol]){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];s[p]=t[p]}return s.href=s.format(),s}if(s.protocol=t.protocol,t.host||rj[t.protocol])s.pathname=t.pathname;else{for(var u=(t.pathname||"").split("/");u.length&&!(t.host=u.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==u[0]&&u.unshift(""),u.length<2&&u.unshift(""),s.pathname=u.join("/")}if(s.search=t.search,s.query=t.query,s.host=t.host||"",s.auth=t.auth,s.hostname=t.hostname||t.host,s.port=t.port,s.pathname||s.search){var c=s.pathname||"",v=s.search||"";s.path=c+v}return s.slashes=s.slashes||t.slashes,s.href=s.format(),s}var b=s.pathname&&"/"===s.pathname.charAt(0),f=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=f||b||s.host&&t.pathname,J=m,g=s.pathname&&s.pathname.split("/")||[],y=(u=t.pathname&&t.pathname.split("/")||[],s.protocol&&!cd[s.protocol]);if(y&&(s.hostname="",s.port=null,s.host&&(""===g[0]?g[0]=s.host:g.unshift(s.host)),s.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),t.host=null),m=m&&(""===u[0]||""===g[0])),f)s.host=t.host||""===t.host?t.host:s.host,s.hostname=t.hostname||""===t.hostname?t.hostname:s.hostname,s.search=t.search,s.query=t.query,g=u;else if(u.length)g||(g=[]),g.pop(),g=g.concat(u),s.search=t.search,s.query=t.query;else if(!Ma.isNullOrUndefined(t.search)){if(y)s.hostname=s.host=g.shift(),(O=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=O.shift(),s.host=s.hostname=O.shift());return s.search=t.search,s.query=t.query,Ma.isNull(s.pathname)&&Ma.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.href=s.format(),s}if(!g.length)return s.pathname=null,s.search?s.path="/"+s.search:s.path=null,s.href=s.format(),s;for(var P=g.slice(-1)[0],d=(s.host||t.host||g.length>1)&&("."===P||".."===P)||""===P,x=0,q=g.length;q>=0;q--)"."===(P=g[q])?g.splice(q,1):".."===P?(g.splice(q,1),x++):x&&(g.splice(q,1),x--);if(!m&&!J)for(;x--;x)g.unshift("..");!m||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),d&&"/"!==g.join("/").substr(-1)&&g.push("");var O,j=""===g[0]||g[0]&&"/"===g[0].charAt(0);y&&(s.hostname=s.host=j?"":g.length?g.shift():"",(O=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=O.shift(),s.host=s.hostname=O.shift()));return(m=m||s.host&&g.length)&&!j&&g.unshift(""),g.length?s.pathname=g.join("/"):(s.pathname=null,s.path=null),Ma.isNull(s.pathname)&&Ma.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.auth=t.auth||s.auth,s.slashes=s.slashes||t.slashes,s.href=s.format(),s},ta.prototype.parseHost=function(){var t=this.host,r=wB.exec(t);r&&(":"!==(r=r[0])&&(this.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(this.hostname=t)};var fg={},GB=!0;fg.__esModule=GB;var HB=KB;fg.default=HB;var IB=JB(nc);function JB(r){return r&&r.__esModule?r:{default:r}}var sj=void 0;function KB(r){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===r.indexOf("data:"))return"";$=$||window.location,sj||(sj=document.createElement("a")),sj.href=r;var e=!(r=IB.default.parse(sj.href)).port&&""===$.port||r.port===$.port;return r.hostname===$.hostname&&e&&r.protocol===$.protocol?"":"anonymous"}var r={},tj=32,LB=tj;r.INT_BITS=LB;var MB=2147483647;r.INT_MAX=MB;var NB=-1<<tj-1;r.INT_MIN=NB;var OB=function(e){return(e>0)-(e<0)};r.sign=OB;var PB=function(e){var $=e>>tj-1;return(e^$)-$};r.abs=PB;var QB=function(e,$){return $^(e^$)&-(e<$)};r.min=QB;var RB=function(e,$){return e^(e^$)&-(e<$)};r.max=RB;var SB=function(e){return!(e&e-1||!e)};r.isPow2=SB;var TB=function(e){var $,r;return $=(e>65535)<<4,$|=r=((e>>>=$)>255)<<3,$|=r=((e>>>=r)>15)<<2,($|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1};r.log2=TB;var UB=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};r.log10=UB;var VB=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24};function cp(e){var $=32;return(e&=-e)&&$--,65535&e&&($-=16),16711935&e&&($-=8),252645135&e&&($-=4),858993459&e&&($-=2),1431655765&e&&($-=1),$}r.popCount=VB;var WB=cp;r.countTrailingZeros=WB;var XB=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1};r.nextPow2=XB;var YB=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)};r.prevPow2=YB;var ZB=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};r.parity=ZB;var ue=new Array(256);!function(e){for(var $=0;$<256;++$){var r=$,t=$,o=7;for(r>>>=1;r;r>>>=1)t<<=1,t|=1&r,--o;e[$]=t<<o&255}}(ue);var $B=function(e){return ue[255&e]<<24|ue[e>>>8&255]<<16|ue[e>>>16&255]<<8|ue[e>>>24&255]};r.reverse=$B;var _B=function(e,$){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($&=65535)|$<<8))|$<<4))|$<<2))|$<<1))<<1};r.interleave2=_B;var aC=function(e,$){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>$&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16};r.deinterleave2=aC;var bC=function(e,$,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=($=1227133513&(($=3272356035&(($=251719695&(($=4278190335&(($&=1023)|$<<16))|$<<8))|$<<4))|$<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2};r.interleave3=bC;var cC=function(e,$){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>$&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22};r.deinterleave3=cC;var dC=function(e){var $=e|e-1;return $+1|(~$&-~$)-1>>>cp(e)+1};r.nextCombination=dC;var xb={},eC=!0;xb.__esModule=eC;var gg=hg(H),fC=hg(jc),gC=hg(fg),dp=hg(r);function hg(e){return e&&e.__esModule?e:{default:e}}function hC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function jC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var kC=function(e){function t(i,r,a){hC(this,t);var o=iC(this,e.call(this));return o.uid=(0,wb)(),o.touched=0,o.resolution=a||gg.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==r?r:gg.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=gg.default.MIPMAP_TEXTURES,o.wrapMode=gg.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return jC(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=dp.default.isPow2(this.realWidth)&&dp.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var r=this;if(e.onload=function(){r._updateImageType(),e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,lj)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var i=e.subType.split("+")[0];if(!(t=(0,mj)("."+i)))throw new Error("Invalid image type in data URI.")}else(t=(0,mj)(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,lj)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var i=(0,So)(e),r=i.width,a=i.height;if(!r||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(a*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,wb)(),o.getContext("2d").drawImage(this.source,0,0,r,a,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,t.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete ga[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,i,r,a){var o=Ca[e];if(!o){var s=new Image;void 0===i&&0!==e.indexOf("data:")?s.crossOrigin=(0,gC.default)(e):i&&(s.crossOrigin="string"==typeof i?i:"anonymous"),(o=new t(s,r)).imageUrl=e,a&&(o.sourceScale=a),o.resolution=(0,_c)(e),s.src=e,t.addToCache(o,e)}return o},t.fromCanvas=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,wb)());var a=Ca[e._pixiId];return a||(a=new t(e,i),t.addToCache(a,e._pixiId)),a},t.from=function(e,i,r){if("string"==typeof e)return t.fromImage(e,void 0,i,r);if(e instanceof HTMLImageElement){var a=e.src,o=Ca[a];return o||((o=new t(e,i)).imageUrl=a,r&&(o.sourceScale=r),o.resolution=(0,_c)(a),t.addToCache(o,a)),o}return e instanceof HTMLCanvasElement?t.fromCanvas(e,i):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Ca[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),Ca[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Ca[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Ca[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete Ca[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t}(fC.default),lC=kC;xb.default=lC;var uj={},mC=!0;function nC(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}uj.__esModule=mC;var oC=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];nC(this,t),this.fn=n,this.context=e,this.priority=i,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,n){return n=n||null,this.fn===t&&this.context===n},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var n=this.next;return this.next=t?null:n,this.previous=null,n},t}(),pC=oC;uj.default=pC;var vj={},qC=!0;vj.__esModule=qC;var rC=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),wj=ep(H),xj=ep(uj);function ep(e){return e&&e.__esModule?e:{default:e}}function sC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var tC=function(){function e(){var t=this;sC(this,e),this._head=new xj.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/wj.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yc.NORMAL;return this._addListener(new xj.default(e,t,r))},e.prototype.addOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yc.NORMAL;return this._addListener(new xj.default(e,t,r,!0))},e.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*wj.default.TARGET_FPMS*this.speed;for(var r=this._head,s=r.next;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},rC(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,wj.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}(),uC=tC;vj.default=uC;var dd={},vC=!0;dd.__esModule=vC;var yj=(yb=void 0,dd.shared=yb);dd.Ticker=yj;var fp=wC(vj);function wC($){return $&&$.__esModule?$:{default:$}}var zj=new fp.default;zj.autoStart=!0,zj.destroy=function(){};var yb=zj;dd.shared=yb,yj=fp.default,dd.Ticker=yj;var ig={},xC=!0;ig.__esModule=xC;var yC=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),Aj=gp(xb),zC=gp(fg);function gp(e){return e&&e.__esModule?e:{default:e}}function AC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function CC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Bj=function(e){function t(r,a){if(AC(this,t),!r)throw new Error("No video source element specified.");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var i=BC(this,e.call(this,r,a));return i.width=r.videoWidth,i.height=r.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),r.addEventListener("play",i._onPlayStart.bind(i)),r.addEventListener("pause",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(r.addEventListener("canplay",i._onCanPlay),r.addEventListener("canplaythrough",i._onCanPlay)),i}return CC(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(yb.add(this.update,this,Yc.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(yb.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&yb.remove(this.update,this),this.source&&this.source._pixiId&&(Aj.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),e.prototype.destroy.call(this)},t.fromVideo=function(e,r){e._pixiId||(e._pixiId="video_"+(0,wb)());var a=Ca[e._pixiId];return a||(a=new t(e,r),Aj.default.addToCache(a,e._pixiId)),a},t.fromUrl=function(e,r,a){var i=document.createElement("video");i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var o=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===a&&0!==o.indexOf("data:")?i.crossOrigin=(0,zC.default)(o):a&&(i.crossOrigin="string"==typeof a?a:"anonymous"),Array.isArray(e))for(var s=0;s<e.length;++s)i.appendChild(hp(e[s].src||e[s],e[s].mime));else i.appendChild(hp(o,e.mime));return i.load(),t.fromVideo(i,r)},yC(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(yb.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(yb.add(this.update,this,Yc.HIGH),this._isAutoUpdating=!0))}}]),t}(Aj.default),DC=Bj;function hp(e,t){t||(t="video/"+(e=e.split("?").shift().toLowerCase()).substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=t,r}ig.default=DC,Bj.fromUrls=Bj.fromUrl;var jg={},EC=!0;jg.__esModule=EC;var na=FC(Wf);function FC(t){return t&&t.__esModule?t:{default:t}}function GC(t,$){if(!(t instanceof $))throw new TypeError("Cannot call a class as a function")}var HC=function(){function t(){GC(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,$,r){var i=$.width,u=$.height;if(r){var a=t.width/2/i,e=t.height/2/u,s=t.x/i+a,h=t.y/u+e;r=na.default.add(r,na.default.NW),this.x0=s+a*na.default.uX(r),this.y0=h+e*na.default.uY(r),r=na.default.add(r,2),this.x1=s+a*na.default.uX(r),this.y1=h+e*na.default.uY(r),r=na.default.add(r,2),this.x2=s+a*na.default.uX(r),this.y2=h+e*na.default.uY(r),r=na.default.add(r,2),this.x3=s+a*na.default.uX(r),this.y3=h+e*na.default.uY(r)}else this.x0=t.x/i,this.y0=t.y/u,this.x1=(t.x+t.width)/i,this.y1=t.y/u,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/u,this.x3=t.x/i,this.y3=(t.y+t.height)/u;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}(),IC=HC;jg.default=IC;var Na={},JC=!0;Na.__esModule=JC;var KC=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),bb=ve(xb),ip=ve(ig),LC=ve(jg),MC=ve(jc),NC=ve(H);function ve(e){return e&&e.__esModule?e:{default:e}}function OC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function QC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cb=function(e){function t(r,a,i,$,u,n){OC(this,t);var s=PC(this,e.call(this));if(s.noFrame=!1,a||(s.noFrame=!0,a=new O.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),s.baseTexture=r,s._frame=a,s.trim=$,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=i||a,s._rotate=Number(u||0),!0===u)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(s.noFrame&&(a=new O.Rectangle(0,0,r.width,r.height),r.on("update",s.onBaseTextureUpdated,s)),s.frame=a):r.once("loaded",s.onBaseTextureLoaded,s),s.defaultAnchor=n?new O.Point(n.x,n.y):new O.Point(0,0),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}return QC(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new O.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(ga[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new LC.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,r,a,i){var $=ga[e];return $||($=new t(bb.default.fromImage(e,r,a,i)),t.addToCache($,e)),$},t.fromFrame=function(e){var t=ga[e];if(!t)throw new Error("The frameId \""+e+"\" does not exist in the texture cache");return t},t.fromCanvas=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(bb.default.fromCanvas(e,r,a))},t.fromVideo=function(e,r){return"string"==typeof e?t.fromVideoUrl(e,r):new t(ip.default.fromVideo(e,r))},t.fromVideoUrl=function(e,r){return new t(ip.default.fromUrl(e,r))},t.from=function(e){if("string"==typeof e){var r=ga[e];return r||(null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e))}return e instanceof HTMLImageElement?new t(bb.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,NC.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof bb.default?new t(e):e},t.fromLoader=function(e,r,a){var i=new bb.default(e,void 0,(0,_c)(r)),$=new t(i);return i.imageUrl=r,a||(a=r),bb.default.addToCache($.baseTexture,a),t.addToCache($,a),a!==r&&(bb.default.addToCache($.baseTexture,r),t.addToCache($,r)),$},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),ga[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),ga[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=ga[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete ga[e],t}}else if(e&&e.textureCacheIds){for(var a=0;a<e.textureCacheIds.length;++a)ga[e.textureCacheIds[a]]===e&&delete ga[e.textureCacheIds[a]];return e.textureCacheIds.length=0,e}return null},KC(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,a=e.width,i=e.height,$=t+a>this.baseTexture.width,u=r+i>this.baseTexture.height;if($||u){var n=$&&u?"and":"or",s="X: "+t+" + "+a+" = "+(t+a)+" > "+this.baseTexture.width,o="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+s+" "+n+" "+o)}this.valid=a&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(MC.default),RC=cb;function SC(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new cb(new bb.default(e))}function kg(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}Na.default=RC,cb.EMPTY=new cb(new bb.default()),kg(cb.EMPTY),kg(cb.EMPTY.baseTexture),cb.WHITE=SC(),kg(cb.WHITE),kg(cb.WHITE.baseTexture);var we={},TC=!0;we.__esModule=TC;var UC=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),lg=jp(Na),VC=jp(mc);function jp(t){return t&&t.__esModule?t:{default:t}}function WC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XC(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function YC(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xe=new O.Point,ZC=function(t){function e(r){WC(this,e);var i=XC(this,t.call(this));return i._anchor=new O.ObservablePoint(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=g.NORMAL,i.shader=null,i.cachedTint=16777215,i.texture=r||lg.default.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.pluginName="sprite",i}return YC(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,lc)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,lc)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,a=e.d,s=e.tx,o=e.ty,h=this.vertexData,u=t.trim,$=t.orig,_=this._anchor,c=0,l=0,d=0,w=0;u?(c=(l=u.x-_._x*$.width)+u.width,d=(w=u.y-_._y*$.height)+u.height):(c=(l=-_._x*$.width)+$.width,d=(w=-_._y*$.height)+$.height),h[0]=r*l+n*w+s,h[1]=a*w+i*l+o,h[2]=r*c+n*w+s,h[3]=a*w+i*c+o,h[4]=r*c+n*d+s,h[5]=a*d+i*c+o,h[6]=r*l+n*d+s,h[7]=a*d+i*l+o}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,a=n.a,s=n.b,o=n.c,h=n.d,u=n.tx,$=n.ty,_=-i._x*r.width,c=_+r.width,l=-i._y*r.height,d=l+r.height;e[0]=a*_+o*l+u,e[1]=h*l+s*_+$,e[2]=a*c+o*l+u,e[3]=h*l+s*c+$,e[4]=a*c+o*d+u,e[5]=h*d+s*c+$,e[6]=a*_+o*d+u,e[7]=h*d+s*_+$},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new O.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,xe);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return xe.x>=i&&xe.x<i+e&&(n=-r*this.anchor.y,xe.y>=n&&xe.y<n+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t){return new e(lg.default.from(t))},e.fromFrame=function(t){var r=ga[t];if(!r)throw new Error("The frameId \""+t+"\" does not exist in the texture cache");return new e(r)},e.fromImage=function(t,r,i){return new e(lg.default.fromImage(t,r,i))},UC(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,lc)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,lc)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||lg.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(VC.default),$C=ZC;we.default=$C;var mg={},_C=!0;mg.__esModule=_C;var aD=lp(xb),kp=lp(H);function lp(e){return e&&e.__esModule?e:{default:e}}function bD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dD(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var eD=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,u=arguments[2],a=arguments[3];bD(this,t);var o=cD(this,e.call(this,null,u));return o.resolution=a||kp.default.RESOLUTION,o.width=Math.ceil(r),o.height=Math.ceil(i),o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==u?u:kp.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return dD(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(aD.default),fD=eD;mg.default=fD;var ye={},gD=!0;ye.__esModule=gD;var Cj=mp(mg),hD=mp(Na);function mp(e){return e&&e.__esModule?e:{default:e}}function iD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function jD(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function kD(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var lD=function(e){function r(t,u){iD(this,r);var a=null;if(!(t instanceof Cj.default)){var $=arguments[1],n=arguments[2],o=arguments[3],i=arguments[4];console.warn("Please use RenderTexture.create("+$+", "+n+") instead of the ctor directly."),a=arguments[0],u=null,t=new Cj.default($,n,o,i)}var s=jD(this,e.call(this,t,u));return s.legacyRenderer=a,s.valid=!0,s._updateUvs(),s}return kD(r,e),r.prototype.resize=function(e,r,t){e=Math.ceil(e),r=Math.ceil(r),this.valid=e>0&&r>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=r,t||this.baseTexture.resize(e,r),this._updateUvs()},r.create=function(e,t,u,a){return new r(new Cj.default(e,t,u,a))},r}(hD.default),mD=lD;ye.default=mD;var ng={},nD=!0;ng.__esModule=nD;var oD=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),Dj=og(H),pD=og(mc),qD=og(ye),rD=og(jc);function og(e){return e&&e.__esModule?e:{default:e}}function sD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function uD(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ej=new O.Matrix,vD=function(e){function t(r,s,n,i){sD(this,t);var a=tD(this,e.call(this));return(0,To)(r),"number"==typeof s&&(s=Object.assign({width:s,height:n||Dj.default.RENDER_OPTIONS.height},i)),s=Object.assign({},Dj.default.RENDER_OPTIONS,s),a.options=s,a.type=de.UNKNOWN,a.screen=new O.Rectangle(0,0,s.width,s.height),a.view=s.view||document.createElement("canvas"),a.resolution=s.resolution||Dj.default.RESOLUTION,a.transparent=s.transparent,a.autoResize=s.autoResize||!1,a.blendModes=null,a.preserveDrawingBuffer=s.preserveDrawingBuffer,a.clearBeforeRender=s.clearBeforeRender,a.roundPixels=s.roundPixels,a._backgroundColor=0,a._backgroundColorRgba=[0,0,0,0],a._backgroundColorString="#000000",a.backgroundColor=s.backgroundColor||a._backgroundColor,a._tempDisplayObjectParent=new pD.default,a._lastObjectRendered=a._tempDisplayObjectParent,a}return uD(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,r,s){s=s||e.getLocalBounds();var n=qD.default.create(0|s.width,0|s.height,t,r);return Ej.tx=-s.x,Ej.ty=-s.y,this.render(e,n,!1,Ej,!!e.parent),n},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=de.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},oD(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,jj)(e),(0,ha)(e,this._backgroundColorRgba)}}]),t}(rD.default),wD=vD;ng.default=wD;var Fj={},xD=!0;Fj.__esModule=xD;function yD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var zD=function(){function e(r){yD(this,e),this.renderer=r}return e.prototype.pushMask=function(e){var r=this.renderer;r.context.save();var t=e.alpha,a=e.transform.worldTransform,o=r.resolution;r.context.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o),e._texture||(this.renderGraphicsShape(e),r.context.clip()),e.worldAlpha=t},e.prototype.renderGraphicsShape=function(e){var r=this.renderer.context,t=e.graphicsData.length;if(0!==t){r.beginPath();for(var a=0;a<t;a++){var o=e.graphicsData[a],i=o.shape;if(o.type===z.POLY){var n=i.points;r.moveTo(n[0],n[1]);for(var s=1;s<n.length/2;s++)r.lineTo(n[2*s],n[2*s+1]);n[0]===n[n.length-2]&&n[1]===n[n.length-1]&&r.closePath()}else if(o.type===z.RECT)r.rect(i.x,i.y,i.width,i.height),r.closePath();else if(o.type===z.CIRC)r.arc(i.x,i.y,i.radius,0,2*Math.PI),r.closePath();else if(o.type===z.ELIP){var $=2*i.width,c=2*i.height,l=i.x-$/2,h=i.y-c/2,v=$/2*.5522848,p=c/2*.5522848,u=l+$,d=h+c,m=l+$/2,f=h+c/2;r.moveTo(l,f),r.bezierCurveTo(l,f-p,m-v,h,m,h),r.bezierCurveTo(m+v,h,u,f-p,u,f),r.bezierCurveTo(u,f+p,m+v,d,m,d),r.bezierCurveTo(m-v,d,l,f+p,l,f),r.closePath()}else if(o.type===z.RREC){var D=i.x,T=i.y,C=i.width,x=i.height,y=i.radius,_=Math.min(C,x)/2|0;y=y>_?_:y,r.moveTo(D,T+y),r.lineTo(D,T+x-y),r.quadraticCurveTo(D,T+x,D+y,T+x),r.lineTo(D+C-y,T+x),r.quadraticCurveTo(D+C,T+x,D+C,T+x-y),r.lineTo(D+C,T+y),r.quadraticCurveTo(D+C,T,D+C-y,T),r.lineTo(D+y,T),r.quadraticCurveTo(D,T,D,T+y),r.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}(),AD=zD;Fj.default=AD;var pg={},BD=!0;pg.__esModule=BD;var CD=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),DD=ED(H);function ED(t){return t&&t.__esModule?t:{default:t}}function FD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var GD=function(){function t(e,s,n){FD(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||DD.default.RESOLUTION,this.resize(e,s)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},CD(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}(),HD=GD;pg.default=HD;var qg={},ID=!0;qg.__esModule=ID;var JD=KD;function np(e){var a=document.createElement("canvas");a.width=6,a.height=1;var t=a.getContext("2d");return t.fillStyle=e,t.fillRect(0,0,6,1),a}function KD(){if("undefined"==typeof document)return!1;var e=np("#ff00ff"),a=np("#ffff00"),t=document.createElement("canvas");t.width=6,t.height=1;var r=t.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(e,0,0),r.drawImage(a,2,0);var d=r.getImageData(2,0,1,1);if(!d)return!1;var $=d.data;return 255===$[0]&&0===$[1]&&0===$[2]}qg.default=JD;var Gj={},LD=!0;Gj.__esModule=LD;var MD=PD;Gj.default=MD;var ND=OD(qg);function OD($){return $&&$.__esModule?$:{default:$}}function PD(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,ND.default)()?($[g.NORMAL]="source-over",$[g.ADD]="lighter",$[g.MULTIPLY]="multiply",$[g.SCREEN]="screen",$[g.OVERLAY]="overlay",$[g.DARKEN]="darken",$[g.LIGHTEN]="lighten",$[g.COLOR_DODGE]="color-dodge",$[g.COLOR_BURN]="color-burn",$[g.HARD_LIGHT]="hard-light",$[g.SOFT_LIGHT]="soft-light",$[g.DIFFERENCE]="difference",$[g.EXCLUSION]="exclusion",$[g.HUE]="hue",$[g.SATURATION]="saturate",$[g.COLOR]="color",$[g.LUMINOSITY]="luminosity"):($[g.NORMAL]="source-over",$[g.ADD]="lighter",$[g.MULTIPLY]="source-over",$[g.SCREEN]="source-over",$[g.OVERLAY]="source-over",$[g.DARKEN]="source-over",$[g.LIGHTEN]="source-over",$[g.COLOR_DODGE]="source-over",$[g.COLOR_BURN]="source-over",$[g.HARD_LIGHT]="source-over",$[g.SOFT_LIGHT]="source-over",$[g.DIFFERENCE]="source-over",$[g.EXCLUSION]="source-over",$[g.HUE]="source-over",$[g.SATURATION]="source-over",$[g.COLOR]="source-over",$[g.LUMINOSITY]="source-over"),$[g.NORMAL_NPM]=$[g.NORMAL],$[g.ADD_NPM]=$[g.ADD],$[g.SCREEN_NPM]=$[g.SCREEN],$}var oc={},QD=!0;oc.__esModule=QD;var RD=ze(ng),SD=ze(Fj),TD=ze(pg),UD=ze(Gj),VD=ze(H);function ze(e){return e&&e.__esModule?e:{default:e}}function WD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function YD(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var op=function(e){function t(a,n,r){WD(this,t);var o=XD(this,e.call(this,"Canvas",a,n,r));return o.type=de.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.context=o.rootContext,o.refresh=!0,o.maskManager=new SD.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,UD.default)(),o._activeBlendMode=null,o.renderingToScreen=!1,o.resize(o.options.width,o.options.height),o}return YD(t,e),t.prototype.render=function(e,t,a,n,r){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new TD.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var i=this.context;if(t||(this._lastObjectRendered=e),!r){var s=e.parent,$=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy($),this._tempDisplayObjectParent.transform._worldID=-1):$.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s}i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=1,this._activeBlendMode=g.NORMAL,i.globalCompositeOperation=this.blendModes[g.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(i.fillStyle="black",i.clear()),(void 0!==a?a:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?i.clearRect(0,0,this.width,this.height):(i.fillStyle=this._backgroundColorString,i.fillRect(0,0,this.width,this.height)));var v=this.context;this.context=i,e.renderCanvas(this),this.context=v,i.restore(),this.resolution=o,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,a){e.prototype.resize.call(this,t,a),this.smoothProperty&&(this.rootContext[this.smoothProperty]=VD.default.SCALE_MODE===ee.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(RD.default),ZD=op;oc.default=ZD,cg.mixin(op);var Ae={},$D=!0;Ae.__esModule=$D;var _D=aE(qg);function aE(e){return e&&e.__esModule?e:{default:e}}var Da={getTintedTexture:function(e,t){var a=e._texture,i="#"+("00000"+(0|(t=Da.roundColor(t))).toString(16)).substr(-6);a.tintCache=a.tintCache||{};var r=a.tintCache[i],n=void 0;if(r){if(r.tintId===a._updateID)return a.tintCache[i];n=a.tintCache[i]}else n=Da.canvas||document.createElement("canvas");if(Da.tintMethod(a,t,n),n.tintId=a._updateID,Da.convertTintToImage){var l=new Image;l.src=n.toDataURL(),a.tintCache[i]=l}else a.tintCache[i]=n,Da.canvas=null;return n},tintWithMultiply:function(e,t,a){var i=a.getContext("2d"),r=e._frame.clone(),n=e.baseTexture.resolution;r.x*=n,r.y*=n,r.width*=n,r.height*=n,a.width=Math.ceil(r.width),a.height=Math.ceil(r.height),i.save(),i.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="multiply",i.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.restore()},tintWithOverlay:function(e,t,a){var i=a.getContext("2d"),r=e._frame.clone(),n=e.baseTexture.resolution;r.x*=n,r.y*=n,r.width*=n,r.height*=n,a.width=Math.ceil(r.width),a.height=Math.ceil(r.height),i.save(),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.restore()},tintWithPerPixel:function(e,t,a){var i=a.getContext("2d"),r=e._frame.clone(),n=e.baseTexture.resolution;r.x*=n,r.y*=n,r.width*=n,r.height*=n,a.width=Math.ceil(r.width),a.height=Math.ceil(r.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.restore();for(var l=(0,ha)(t),o=l[0],v=l[1],h=l[2],$=i.getImageData(0,0,r.width,r.height),s=$.data,d=0;d<s.length;d+=4)s[d+0]*=o,s[d+1]*=v,s[d+2]*=h;i.putImageData($,0,0)},roundColor:function(e){var t=Da.cacheStepsPerColorChannel,a=(0,ha)(e);return a[0]=Math.min(255,a[0]/t*t),a[1]=Math.min(255,a[1]/t*t),a[2]=Math.min(255,a[2]/t*t),(0,kj)(a)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,_D.default)(),tintMethod:0};Da.tintMethod=Da.canUseMultiply?Da.tintWithMultiply:Da.tintWithPerPixel;var bE=Da;Ae.default=bE;var Hj={},cE=!0;Hj.__esModule=cE;var dE=pp(oc),eE=pp(Ae);function pp(e){return e&&e.__esModule?e:{default:e}}function fE(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var qp=new O.Matrix,rp=function(){function e(r){fE(this,e),this.renderer=r}return e.prototype.render=function(e){var r=e._texture,t=this.renderer,a=r._frame.width,n=r._frame.height,o=e.transform.worldTransform,$=0,i=0;if(!(r.orig.width<=0||r.orig.height<=0)&&r.baseTexture.source&&(t.setBlendMode(e.blendMode),r.valid)){t.context.globalAlpha=e.worldAlpha;var s=r.baseTexture.scaleMode===ee.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==s&&(t.context[t.smoothProperty]=s),r.trim?($=r.trim.width/2+r.trim.x-e.anchor.x*r.orig.width,i=r.trim.height/2+r.trim.y-e.anchor.y*r.orig.height):($=(.5-e.anchor.x)*r.orig.width,i=(.5-e.anchor.y)*r.orig.height),r.rotate&&(o.copy(qp),o=qp,O.GroupD8.matrixAppendRotationInv(o,r.rotate,$,i),$=0,i=0),$-=a/2,i-=n/2,t.roundPixels?(t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution|0,o.ty*t.resolution|0),$|=0,i|=0):t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution,o.ty*t.resolution);var u=r.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=eE.default.getTintedTexture(e,e.tint)),t.context.drawImage(e.tintedTexture,0,0,a*u,n*u,$*t.resolution,i*t.resolution,a*t.resolution,n*t.resolution)):t.context.drawImage(r.baseTexture.source,r._frame.x*u,r._frame.y*u,a*u,n*u,$*t.resolution,i*t.resolution,a*t.resolution,n*t.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}(),gE=rp;Hj.default=gE,dE.default.registerPlugin("sprite",rp);var pc={},hE=!0;function iE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}pc.__esModule=hE;var jE=function(){function e(t){iE(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}(),kE=jE;pc.default=kE;var ed={},lE=!0;ed.__esModule=lE;var mE=nE(pc);function nE(e){return e&&e.__esModule?e:{default:e}}function oE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pE(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rE=function(e){function t(){return oE(this,t),pE(this,e.apply(this,arguments))}return qE(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(mE.default),sE=rE;ed.default=sE;var Ij={},tE=!0;Ij.__esModule=tE;var uE=yE;Ij.default=uE;var vE=wE(ea);function wE(r){return r&&r.__esModule?r:{default:r}}var xE=vE.default.shader.defaultValue;function yE(r,e,$){var o=sp(r,$),a=sp(e,$);return Object.assign(o,a)}function sp(r){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),$={},o=void 0,a=r.replace(/\s+/g," ").split(/\s*;\s*/),t=0;t<a.length;t++){var n=a[t].trim();if(n.indexOf("uniform")>-1){var i=n.split(" "),l=i[1],u=i[2],f=1;u.indexOf("[")>-1&&(o=u.split(/\[|]/),u=o[0],f*=Number(o[1])),u.match(e)||($[u]={value:xE(l,f),name:u,type:l})}}return $}var rg={},zE=!0;rg.__esModule=zE;var AE=function(){function t(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(r,e,a){return e&&t(r.prototype,e),a&&t(r,a),r}}(),BE=tp(Ij),CE=tp(H);function tp(t){return t&&t.__esModule?t:{default:t}}function DE(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var Jj={},EE=function(){function t(r,e,a){for(var i in DE(this,t),this.vertexSrc=r||t.defaultVertexSrc,this.fragmentSrc=e||t.defaultFragmentSrc,this._blendMode=g.NORMAL,this.uniformData=a||(0,BE.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[i]=this.uniformData[i].value,this.uniformData[i].type&&(this.uniformData[i].type=this.uniformData[i].type.toLowerCase());this.glShaders={},Jj[this.vertexSrc+this.fragmentSrc]||(Jj[this.vertexSrc+this.fragmentSrc]=(0,wb)()),this.glShaderKey=Jj[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=CE.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,r,e,a,i){t.applyFilter(this,r,e,a)},AE(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}(),FE=EE;rg.default=FE;var fd,gd,sg,F,Be,qc,Kj,up,GE=false;function Lj(){throw new Error("setTimeout has not been defined")}function Mj(){throw new Error("clearTimeout has not been defined")}function vp(r){if(fd===setTimeout)return setTimeout(r,0);if((fd===Lj||!fd)&&setTimeout)return fd=setTimeout,setTimeout(r,0);try{return fd(r,0)}catch($){try{return fd.call(null,r,0)}catch($){return fd.call(this,r,0)}}}function HE(r){if(gd===clearTimeout)return clearTimeout(r);if((gd===Mj||!gd)&&clearTimeout)return gd=clearTimeout,clearTimeout(r);try{return gd(r)}catch($){try{return gd.call(null,r)}catch($){return gd.call(this,r)}}}function IE(){Kj&&Be&&(Kj=!1,Be.length?qc=Be.concat(qc):up=-1,qc.length&&wp())}function wp(){if(!Kj){var r=vp(IE);Kj=!0;for(var $=qc.length;$;){for(Be=qc,qc=[];++up<$;)Be&&Be[up].run();up=-1,$=qc.length}Be=null,Kj=!1,HE(r)}}function xp(r,$){this.fun=r,this.array=$}function db(){}function tg(){if(GE)return;GE=true;sg={};F=sg={};!function(){try{fd="function"==typeof setTimeout?setTimeout:Lj}catch(r){fd=Lj}try{gd="function"==typeof clearTimeout?clearTimeout:Mj}catch(r){gd=Mj}}();qc=[];Kj=!1;up=-1;F.nextTick=function(r){var $=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)$[e-1]=arguments[e];qc.push(new xp(r,$)),1!==qc.length||Kj||vp(wp)},xp.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=db,F.addListener=db,F.once=db,F.off=db,F.removeListener=db,F.removeAllListeners=db,F.emit=db,F.prependListener=db,F.prependOnceListener=db,F.listeners=function(r){return[]},F.binding=function(r){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(r){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}}var Ea={},JE=(tg(),sg);function yp(r,e){for(var t=0,$=r.length-1;$>=0;$--){var l=r[$];"."===l?r.splice($,1):".."===l?(r.splice($,1),t++):t&&(r.splice($,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}var KE=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Nj=function(r){return KE.exec(r).slice(1)},Oj=function(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var $=t>=0?arguments[t]:JE.cwd();if("string"!=typeof $)throw new TypeError("Arguments to path.resolve must be strings");$&&(r=$+"/"+r,e="/"===$.charAt(0))}return(e?"/":"")+(r=yp(Pj(r.split("/"),function(r){return!!r}),!e).join("/"))||"."};Ea.resolve=Oj;var zp=function(r){var e=Ap(r),t="/"===SE(r,-1);return(r=yp(Pj(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&t&&(r+="/"),(e?"/":"")+r};Ea.normalize=zp;var Ap=function(r){return"/"===r.charAt(0)};Ea.isAbsolute=Ap;var LE=function(){var r=Array.prototype.slice.call(arguments,0);return zp(Pj(r,function(r,e){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))};Ea.join=LE;var ME=function(r,e){function t(r){for(var e=0;e<r.length&&""===r[e];e++);for(var t=r.length-1;t>=0&&""===r[t];t--);return e>t?[]:r.slice(e,t-e+1)}r=Oj(r).substr(1),e=Oj(e).substr(1);for(var $=t(r.split("/")),l=t(e.split("/")),n=Math.min($.length,l.length),o=n,s=0;s<n;s++)if($[s]!==l[s]){o=s;break}var a=[];for(s=o;s<$.length;s++)a.push("..");return(a=a.concat(l.slice(o))).join("/")};Ea.relative=ME;var NE="/";Ea.sep=NE;var OE=":";Ea.delimiter=OE;var PE=function(r){var e=Nj(r),t=e[0],$=e[1];return t||$?($&&($=$.substr(0,$.length-1)),t+$):"."};Ea.dirname=PE;var QE=function(r,e){var t=Nj(r)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t};Ea.basename=QE;var RE=function(r){return Nj(r)[3]};function Pj(r,e){if(r.filter)return r.filter(e);for(var t=[],$=0;$<r.length;$++)e(r[$],$,r)&&t.push(r[$]);return t}Ea.extname=RE;var SE="b"==="ab".substr(-1)?function(r,e,t){return r.substr(e,t)}:function(r,e,t){return e<0&&(e=r.length+e),r.substr(e,t)};var ug={},TE=!0;ug.__esModule=TE;var UE=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),Bp=VE(ge);function VE(t){return t&&t.__esModule?t:{default:t}}function WE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cp=new Bp.default,XE=function(){function t(e,r){WE(this,t),this._texture=e,this.mapCoord=new Bp.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===r?.5:r}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,a=0;a<t.length;a+=2){var u=t[a],i=t[a+1];e[a]=u*r.a+i*r.c+r.tx,e[a+1]=u*r.b+i*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var a=e.orig,u=e.trim;u&&(Cp.set(a.width/u.width,0,0,a.height/u.height,-u.x/u.width,-u.y/u.height),this.mapCoord.append(Cp));var i=e.baseTexture,$=this.uClampFrame,s=this.clampMargin/i.resolution,n=this.clampOffset;return $[0]=(e._frame.x+s+n)/i.width,$[1]=(e._frame.y+s+n)/i.height,$[2]=(e._frame.x+e._frame.width-s+n)/i.width,$[3]=(e._frame.y+e._frame.height-s+n)/i.height,this.uClampOffset[0]=n/i.realWidth,this.uClampOffset[1]=n/i.realHeight,!0},UE(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}(),YE=XE;ug.default=YE;var vg={},ZE=!0;vg.__esModule=ZE;var $E=Dp(rg),_E=Dp(ug);function Dp(r){return r&&r.__esModule?r:{default:r}}function aF(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function bF(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function cF(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var dF=function(r){function e(t){aF(this,e);var a=new O.Matrix,o=bF(this,r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,o.maskSprite=t,o.maskMatrix=a,o}return cF(e,r),e.prototype.apply=function(r,e,t){var a=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new _E.default(o,0)),o.transform.update(),this.uniforms.mask=o,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.transform.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,r.applyFilter(this,e,t))},e}($E.default),eF=dF;vg.default=eF;var Qj={},fF=!0;Qj.__esModule=fF;var gF=Ep(pc),hF=Ep(vg);function Ep(e){return e&&e.__esModule?e:{default:e}}function iF(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function jF(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function kF(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var lF=function(e){function r(t){iF(this,r);var s=jF(this,e.call(this,t));return s.scissor=!1,s.scissorData=null,s.scissorRenderTarget=null,s.enableScissor=!0,s.alphaMaskPool=[],s.alphaMaskIndex=0,s}return kF(r,e),r.prototype.pushMask=function(e,r){if(r.texture)this.pushSpriteMask(e,r);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&r.isFastRect()){var t=r.worldTransform,s=Math.atan2(t.b,t.a);(s=Math.round(s*(180/Math.PI)))%90?this.pushStencilMask(r):this.pushScissorMask(e,r)}else this.pushStencilMask(r)},r.prototype.popMask=function(e,r){r.texture?this.popSpriteMask(e,r):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,r):this.popStencilMask(e,r)},r.prototype.pushSpriteMask=function(e,r){var t=this.alphaMaskPool[this.alphaMaskIndex];t||(t=this.alphaMaskPool[this.alphaMaskIndex]=[new hF.default(r)]),t[0].resolution=this.renderer.resolution,t[0].maskSprite=r,e.filterArea=r.getBounds(!0),this.renderer.filterManager.pushFilter(e,t),this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},r.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},r.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},r.prototype.pushScissorMask=function(e,r){r.renderable=!0;var t=this.renderer._activeRenderTarget,s=r.getBounds();s.fit(t.size),r.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var a=this.renderer.resolution;this.renderer.gl.scissor(s.x*a,(t.root?t.size.height-s.y-s.height:s.y)*a,s.width*a,s.height*a),this.scissorRenderTarget=t,this.scissorData=r,this.scissor=!0},r.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},r}(gF.default),mF=lF;Qj.default=mF;var Rj={},nF=!0;Rj.__esModule=nF;var Fp=oF(pc);function oF(e){return e&&e.__esModule?e:{default:e}}function pF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function rF(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sF=function(e){function t(r){pF(this,t);var n=qF(this,e.call(this,r));return n.stencilMaskStack=null,n}return rF(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){Fp.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(Fp.default),tF=sF;Rj.default=tF;var hd={},uF=!0;hd.__esModule=uF;var Gp=vF(H);function vF(e){return e&&e.__esModule?e:{default:e}}function wF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var xF=function(){function e(t,i,r,a,s,n){wF(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new O.Rectangle(0,0,1,1),this.resolution=s||Gp.default.RESOLUTION,this.projectionMatrix=new O.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new O.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==a?a:Gp.default.SCALE_MODE,this.root=n,this.root?(this.frameBuffer=new ea.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=ea.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===ee.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(e,t){var i=this.projectionMatrix;t=t||e,i.identity(),this.root?(i.a=1/e.width*2,i.d=-1/e.height*2,i.tx=-1-t.x*i.a,i.ty=1-t.y*i.d):(i.a=1/e.width*2,i.d=1/e.height*2,i.tx=-1-t.x*i.a,i.ty=-1-t.y*i.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},e.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}(),yF=xF;hd.default=yF;var Ce={},zF=!0;Ce.__esModule=zF;var AF=BF;function BF(e){for(var $=6*e,r=new Uint16Array($),l=0,t=0;l<$;l+=6,t+=4)r[l+0]=t+0,r[l+1]=t+1,r[l+2]=t+2,r[l+3]=t+0,r[l+4]=t+2,r[l+5]=t+3;return r}Ce.default=AF;var wg={},CF=!0;wg.__esModule=CF;var Sj=Hp(ea),DF=Hp(Ce);function Hp(e){return e&&e.__esModule?e:{default:e}}function EF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var FF=function(){function e(t,i){EF(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,DF.default)(1),this.vertexBuffer=Sj.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=Sj.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new Sj.default.VertexArrayObject(t,i)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}(),GF=FF;wg.default=GF;var rc={},HF=!0;rc.__esModule=HF;var Ip=IF(H);function IF(e){return e&&e.__esModule?e:{default:e}}function JF(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function KF(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function LF(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function Jp(e,r){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var n=e.slice(0);return n.unshift("precision "+r+" float;"),n}}else if("precision"!==e.trim().substring(0,9))return"precision "+r+" float;\n"+e;return e}var MF=function(e){function r(n,t,$,i,o){return JF(this,r),KF(this,e.call(this,n,Jp(t,o||Ip.default.PRECISION_VERTEX),Jp($,o||Ip.default.PRECISION_FRAGMENT),void 0,i))}return LF(r,e),r}(ea.GLShader),NF=MF;rc.default=NF;var De={},OF=!0;De.__esModule=OF;var PF=SF;De.calculateScreenSpaceMatrix=PF;var QF=TF;De.calculateNormalizedScreenSpaceMatrix=QF;var RF=UF;De.calculateSpriteMatrix=RF;function SF(t,e,a){var r=t.identity();return r.translate(e.x/a.width,e.y/a.height),r.scale(a.width,a.height),r}function TF(t,e,a){var r=t.identity();r.translate(e.x/a.width,e.y/a.height);var c=a.width/e.width,$=a.height/e.height;return r.scale(c,$),r}function UF(t,e,a,r){var c=r._texture.orig,$=t.set(a.width,0,0,a.height,e.x,e.y),i=r.worldTransform.copy(O.Matrix.TEMP_MATRIX);return i.invert(),$.prepend(i),$.scale(1/c.width,1/c.height),$.translate(r.anchor.x,r.anchor.y),$}var Tj={},VF=!0;Tj.__esModule=VF;var WF=Ee(pc),XF=Ee(hd),YF=Ee(wg),Kp=Ee(rc),Uj=ZF(De),Lp=Ee(r);function ZF(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function Ee(e){return e&&e.__esModule?e:{default:e}}function $F(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _F(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function Mp(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Np=function(){function e(){Mp(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new O.Rectangle,this.destinationFrame=new O.Rectangle,this.filters=[]}return e.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},e}(),Vj="screen",aG=function(e){function r(t){Mp(this,r);var a=$F(this,e.call(this,t));return a.gl=a.renderer.gl,a.quad=new YF.default(a.gl,t.state.attribState),a.shaderCache={},a.pool={},a.filterData=null,a.managedFilters=[],a.renderer.on("prerender",a.onPrerender,a),a._screenWidth=t.view.width,a._screenHeight=t.view.height,a}return _F(r,e),r.prototype.pushFilter=function(e,r){var t=this.renderer,a=this.filterData;if(!a){a=this.renderer._activeRenderTarget.filterStack;var i=new Np;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=t._activeRenderTarget,this.renderer._activeRenderTarget.filterData=a={index:0,stack:[i]},this.filterData=a}var s=a.stack[++a.index],n=a.stack[0].destinationFrame;s||(s=a.stack[a.index]=new Np);var o=e.filterArea&&0===e.filterArea.x&&0===e.filterArea.y&&e.filterArea.width===t.screen.width&&e.filterArea.height===t.screen.height,l=r[0].resolution,d=0|r[0].padding,h=o?t.screen:e.filterArea||e.getBounds(!0),u=s.sourceFrame,$=s.destinationFrame;u.x=(h.x*l|0)/l,u.y=(h.y*l|0)/l,u.width=(h.width*l|0)/l,u.height=(h.height*l|0)/l,o||(a.stack[0].renderTarget.transform||r[0].autoFit&&u.fit(n),u.pad(d)),$.width=u.width,$.height=u.height;var p=this.getPotRenderTarget(t.gl,u.width,u.height,l);s.target=e,s.filters=r,s.resolution=l,s.renderTarget=p,p.setFrame($,u),t.bindRenderTarget(p),p.clear()},r.prototype.popFilter=function(){var e=this.filterData,r=e.stack[e.index-1],t=e.stack[e.index];this.quad.map(t.renderTarget.size,t.sourceFrame).upload();var a=t.filters;if(1===a.length)a[0].apply(this,t.renderTarget,r.renderTarget,!1,t),this.freePotRenderTarget(t.renderTarget);else{var i=t.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,t.resolution);s.setFrame(t.destinationFrame,t.sourceFrame),s.clear();var n=0;for(n=0;n<a.length-1;++n){a[n].apply(this,i,s,!0,t);var o=i;i=s,s=o}a[n].apply(this,i,r.renderTarget,!1,t),this.freePotRenderTarget(i),this.freePotRenderTarget(s)}t.clear(),e.index--,0===e.index&&(this.filterData=null)},r.prototype.applyFilter=function(e,r,t,a){var i=this.renderer,s=i.gl,n=e.glShaders[i.CONTEXT_UID];n||(e.glShaderKey?(n=this.shaderCache[e.glShaderKey])||(n=new Kp.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=n,this.managedFilters.push(e)):(n=e.glShaders[i.CONTEXT_UID]=new Kp.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),i.bindVao(null),this.quad.initVao(n)),i.bindVao(this.quad.vao),i.bindRenderTarget(t),a&&(s.disable(s.SCISSOR_TEST),i.clear(),s.enable(s.SCISSOR_TEST)),t===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(n);var o=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=o,this.syncUniforms(n,e),i.state.setBlendMode(e.blendMode),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,r.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),s.bindTexture(s.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)},r.prototype.syncUniforms=function(e,r){var t=r.uniformData,a=r.uniforms,i=1,s=void 0;if(e.uniforms.filterArea){s=this.filterData.stack[this.filterData.index];var n=e.uniforms.filterArea;n[0]=s.renderTarget.size.width,n[1]=s.renderTarget.size.height,n[2]=s.sourceFrame.x,n[3]=s.sourceFrame.y,e.uniforms.filterArea=n}if(e.uniforms.filterClamp){s=s||this.filterData.stack[this.filterData.index];var o=e.uniforms.filterClamp;o[0]=0,o[1]=0,o[2]=(s.sourceFrame.width-1)/s.renderTarget.size.width,o[3]=(s.sourceFrame.height-1)/s.renderTarget.size.height,e.uniforms.filterClamp=o}for(var l in t){var d=t[l].type;if("sampler2d"===d&&0!==a[l]){if(a[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(a[l].baseTexture,i);else{e.uniforms[l]=i;var h=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],h.activeTexture(h.TEXTURE0+i),a[l].texture.bind()}i++}else if("mat3"===d)void 0!==a[l].a?e.uniforms[l]=a[l].toArray(!0):e.uniforms[l]=a[l];else if("vec2"===d){if(void 0!==a[l].x){var u=e.uniforms[l]||new Float32Array(2);u[0]=a[l].x,u[1]=a[l].y,e.uniforms[l]=u}else e.uniforms[l]=a[l];}else"float"===d?e.uniforms.data[l].value!==t[l]&&(e.uniforms[l]=a[l]):e.uniforms[l]=a[l]}},r.prototype.getRenderTarget=function(e,r){var t=this.filterData.stack[this.filterData.index],a=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,r||t.resolution);return a.setFrame(t.destinationFrame,t.sourceFrame),a},r.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},r.prototype.calculateScreenSpaceMatrix=function(e){var r=this.filterData.stack[this.filterData.index];return Uj.calculateScreenSpaceMatrix(e,r.sourceFrame,r.renderTarget.size)},r.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var r=this.filterData.stack[this.filterData.index];return Uj.calculateNormalizedScreenSpaceMatrix(e,r.sourceFrame,r.renderTarget.size,r.destinationFrame)},r.prototype.calculateSpriteMatrix=function(e,r){var t=this.filterData.stack[this.filterData.index];return Uj.calculateSpriteMatrix(e,t.sourceFrame,t.renderTarget.size,r)},r.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.renderer,t=this.managedFilters;r.off("prerender",this.onPrerender,this);for(var a=0;a<t.length;a++)e||t[a].glShaders[r.CONTEXT_UID].destroy(),delete t[a].glShaders[r.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},r.prototype.getPotRenderTarget=function(e,r,t,a){var i=Vj;t*=a,(r*=a)===this._screenWidth&&t===this._screenHeight||(i=(65535&(r=Lp.default.nextPow2(r)))<<16|65535&(t=Lp.default.nextPow2(t))),this.pool[i]||(this.pool[i]=[]);var s=this.pool[i].pop();if(!s){var n=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),s=new XF.default(e,r,t,null,1),e.bindTexture(e.TEXTURE_2D,n._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=a,s.defaultFrame.width=s.size.width=r/a,s.defaultFrame.height=s.size.height=t/a,s.filterPoolKey=i,s},r.prototype.emptyPool=function(){for(var e in this.pool){var r=this.pool[e];if(r)for(var t=0;t<r.length;t++)r[t].destroy(!0)}this.pool={}},r.prototype.freePotRenderTarget=function(e){this.pool[e.filterPoolKey].push(e)},r.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var e=this.pool[Vj];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0);this.pool[Vj]=[]}},r}(WF.default),bG=aG;Tj.default=bG;var Wj={},cG=!0;Wj.__esModule=cG;var dG=eG(hd);function eG(e){return e&&e.__esModule?e:{default:e}}function fG(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var gG=function(){function e(r){fG(this,e),this.renderer=r,this.gl=r.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,r){var t=this.gl,a=!!e._glRenderTargets;if(!e.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===r){r=0;for(var i=0;i<s.length;++i)if(s[i]===e){r=i;break}}s[r]=e,t.activeTexture(t.TEXTURE0+r);var n=e._glTextures[this.renderer.CONTEXT_UID];if(n)a?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):n.upload(e.source);else{if(a){var u=new dG.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);u.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=u,n=u.texture}else(n=new ea.GLTexture(this.gl,null,null,null,null)).bind(r),n.premultiplyAlpha=!0,n.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=n,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&n.enableMipmap(),e.wrapMode===Xc.CLAMP?n.enableWrapClamp():e.wrapMode===Xc.REPEAT?n.enableWrapRepeat():n.enableWrapMirrorRepeat()):n.enableWrapClamp(),e.scaleMode===ee.NEAREST?n.enableNearestScaling():n.enableLinearScaling()}return n},e.prototype.destroyTexture=function(e,r){if((e=e.baseTexture||e).hasLoaded){var t=this.renderer.CONTEXT_UID,a=e._glTextures,s=e._glRenderTargets;if(a[t]&&(this.renderer.unbindTexture(e),a[t].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete a[t],!r)){var i=this._managedTextures.indexOf(e);-1!==i&&(0,bd)(this._managedTextures,i,1)}s&&s[t]&&(s[t].destroy(),delete s[t])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var r=this._managedTextures[e];r._glTextures[this.renderer.CONTEXT_UID]&&delete r._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var r=this._managedTextures[e];this.destroyTexture(r,!0),r.off("update",this.updateTexture,this),r.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}(),hG=gG;Wj.default=hG;var Xj={},iG=!0;Xj.__esModule=iG;var Yj=jG(H);function jG(e){return e&&e.__esModule?e:{default:e}}function kG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var lG=function(){function e(t){kG(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Yj.default.GC_MAX_IDLE,this.checkCountMax=Yj.default.GC_MAX_CHECK_COUNT,this.mode=Yj.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==to.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,n=0;n<t.length;n++){var $=t[n];!$._glRenderTargets&&this.count-$.touched>this.maxIdle&&(e.destroyTexture($,!0),t[n]=null,r=!0)}if(r){for(var a=0,o=0;o<t.length;o++)null!==t[o]&&(t[a++]=t[o]);t.length=a}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},e}(),mG=lG;Xj.default=mG;var Zj={},nG=!0;Zj.__esModule=nG;var oG=pG;Zj.default=oG;function pG(_){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return N[g.NORMAL]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.ADD]=[_.ONE,_.DST_ALPHA],N[g.MULTIPLY]=[_.DST_COLOR,_.ONE_MINUS_SRC_ALPHA],N[g.SCREEN]=[_.ONE,_.ONE_MINUS_SRC_COLOR],N[g.OVERLAY]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.DARKEN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.LIGHTEN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.COLOR_DODGE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.COLOR_BURN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.HARD_LIGHT]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.SOFT_LIGHT]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.DIFFERENCE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.EXCLUSION]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.HUE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.SATURATION]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.COLOR]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.LUMINOSITY]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.NORMAL_NPM]=[_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA],N[g.ADD_NPM]=[_.SRC_ALPHA,_.DST_ALPHA,_.ONE,_.DST_ALPHA],N[g.SCREEN_NPM]=[_.SRC_ALPHA,_.ONE_MINUS_SRC_COLOR,_.ONE,_.ONE_MINUS_SRC_COLOR],N}var $j={},qG=!0;$j.__esModule=qG;var rG=sG(Zj);function sG(t){return t&&t.__esModule?t:{default:t}}function tG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _j=0,ak=1,bk=2,ck=3,dk=4,uG=function(){function t(e){tG(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,rG.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[_j]),this.setDepthTest(t[ak]),this.setFrontFace(t[bk]),this.setCullFace(t[ck]),this.setBlendMode(t[dk])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[_j]!==t&&(this.activeState[_j]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[dk]){this.activeState[dk]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[ak]!==t&&(this.activeState[ak]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[ck]!==t&&(this.activeState[ck]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[bk]!==t&&(this.activeState[bk]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var a=1;a<this.maxAttribs;a++)this.gl.disableVertexAttribArray(a)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}(),vG=uG;$j.default=vG;var ek={},wG=!0;ek.__esModule=wG;var xG=yG;ek.default=xG;function yG($){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a[ub.POINTS]=$.POINTS,a[ub.LINES]=$.LINES,a[ub.LINE_LOOP]=$.LINE_LOOP,a[ub.LINE_STRIP]=$.LINE_STRIP,a[ub.TRIANGLES]=$.TRIANGLES,a[ub.TRIANGLE_STRIP]=$.TRIANGLE_STRIP,a[ub.TRIANGLE_FAN]=$.TRIANGLE_FAN,a}var fk={},zG=!0;fk.__esModule=zG;var AG=BG;function BG(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}fk.default=AG;var id={},CG=!0;id.__esModule=CG;var Op=oa(ng),DG=oa(Qj),EG=oa(Rj),FG=oa(Tj),GG=oa(hd),HG=oa(ed),IG=oa(Wj),JG=oa(xb),KG=oa(Xj),LG=oa($j),MG=oa(ek),NG=oa(fk),xg=oa(ea);function oa(e){return e&&e.__esModule?e:{default:e}}function OG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PG(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function QG(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var RG=0,Pp=function(e){function t(r,a,n){OG(this,t);var i=PG(this,e.call(this,"WebGL",r,a,n));return i.legacy=i.options.legacy,i.legacy&&(xg.default.VertexArrayObject.FORCE_NATIVE=!0),i.type=de.WEBGL,i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),i.view.addEventListener("webglcontextlost",i.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i._contextOptions={alpha:i.transparent,antialias:i.options.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:i.options.preserveDrawingBuffer,powerPreference:i.options.powerPreference},i._backgroundColorRgba[3]=i.transparent?0:1,i.maskManager=new DG.default(i),i.stencilManager=new EG.default(i),i.emptyRenderer=new HG.default(i),i.currentRenderer=i.emptyRenderer,i.textureManager=null,i.filterManager=null,i.initPlugins(),i.options.context&&(0,NG.default)(i.options.context),i.gl=i.options.context||xg.default.createContext(i.view,i._contextOptions),i.CONTEXT_UID=RG++,i.state=new LG.default(i.gl),i.renderingToScreen=!0,i.boundTextures=null,i._activeShader=null,i._activeVao=null,i._activeRenderTarget=null,i._initContext(),i.drawModes=(0,MG.default)(i.gl),i._nextTextureLocation=0,i.setBlendMode(0),i}return QG(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new IG.default(this),this.filterManager=new FG.default(this),this.textureGC=new KG.default(this),this.state.resetToDefault(),this.rootRenderTarget=new GG.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new xg.default.GLTexture.fromData(e,null,1,1),a={_glTextures:{}};a._glTextures[this.CONTEXT_UID]={};for(var n=0;n<t;n++){var i=new JG.default;i._glTextures[this.CONTEXT_UID]=r,this.boundTextures[n]=a,this.emptyTextures[n]=i,this.bindTexture(null,n)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,r,a,n){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!n){var i=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=i}this.bindRenderTexture(t,a),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){Op.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var a=e.baseTexture;a._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(a,0),this.unbindTexture(a),(r=a._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,r){if((e=(e=e||this.emptyTextures[t]).baseTexture||e).touched=this.textureGC.count,r)t=t||0;else{for(var a=0;a<this.boundTextures.length;a++)if(this.boundTextures[a]===e)return a;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,i=e._glTextures[this.CONTEXT_UID];return i?(this.boundTextures[t]=e,n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,i.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new xg.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(Op.default),SG=Pp;id.default=SG,cg.mixin(Pp);var gk={},TG=!0;gk.__esModule=TG;var UG=YG;gk.default=UG;var VG=WG(rc);function WG(e){return e&&e.__esModule?e:{default:e}}var XG=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");function YG(e,r){var a=XG;a=(a=a.replace(/%count%/gi,r)).replace(/%forloop%/gi,ZG(r));for(var o=new VG.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",a),t=[],v=0;v<r;v++)t[v]=v;return o.bind(),o.uniforms.uSamplers=t,o}function ZG(e){var r="";r+="\n",r+="\n";for(var a=0;a<e;a++)a>0&&(r+="\nelse "),a<e-1&&(r+="if(textureId == "+a+".0)"),r+="\n{",r+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",r+="\n}";return r+="\n",r+="\n"}var hk={},$G=!0;hk.__esModule=$G;var _G=dH;hk.default=_G;var aH=bH(ea);function bH(e){return e&&e.__esModule?e:{default:e}}var cH=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function dH(e,r){var t=!r;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(t){var a=document.createElement("canvas");a.width=1,a.height=1,r=aH.default.createContext(a)}for(var $=r.createShader(r.FRAGMENT_SHADER);;){var o=cH.replace(/%forloop%/gi,eH(e));if(r.shaderSource($,o),r.compileShader($),r.getShaderParameter($,r.COMPILE_STATUS))break;e=e/2|0}return t&&r.getExtension("WEBGL_lose_context")&&r.getExtension("WEBGL_lose_context").loseContext(),e}function eH(e){for(var r="",t=0;t<e;++t)t>0&&(r+="\nelse "),t<e-1&&(r+="if(test == "+t+".0){}");return r}var ik={},fH=!0;function gH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}ik.__esModule=fH;var hH=function(){function t(e){gH(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}(),iH=hH;ik.default=iH;var jk={},jH=!0;jk.__esModule=jH;var kH=eb(ed),lH=eb(id),mH=eb(Ce),nH=eb(gk),oH=eb(hk),pH=eb(ik),yg=eb(H),kk=eb(ea),lk=eb(r);function eb(e){return e&&e.__esModule?e:{default:e}}function qH(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function rH(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function sH(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var fb=0,Qp=0,Rp=function(e){function r(t){qH(this,r);var i=rH(this,e.call(this,t));i.vertSize=5,i.vertByteSize=4*i.vertSize,i.size=yg.default.SPRITE_BATCH_SIZE,i.buffers=[];for(var a=1;a<=lk.default.nextPow2(i.size);a*=2)i.buffers.push(new pH.default(4*a*i.vertByteSize));i.indices=(0,mH.default)(i.size),i.shader=null,i.currentIndex=0,i.groups=[];for(var s=0;s<i.size;s++)i.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return i.sprites=[],i.vertexBuffers=[],i.vaos=[],i.vaoMax=2,i.vertexCount=0,i.renderer.on("prerender",i.onPrerender,i),i}return sH(r,e),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),yg.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,oH.default)(this.MAX_TEXTURES,e)),this.shader=(0,nH.default)(e,this.MAX_TEXTURES),this.indexBuffer=kk.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var r=this.shader.attributes,t=0;t<this.vaoMax;t++){var i=this.vertexBuffers[t]=kk.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),a=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(i,r.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(i,r.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(i,r.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);r.aTextureId&&a.addAttribute(i,r.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[t]=a}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},r.prototype.onPrerender=function(){this.vertexCount=0},r.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},r.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,r=this.MAX_TEXTURES,t=lk.default.nextPow2(this.currentIndex),i=lk.default.log2(t),a=this.buffers[i],s=this.sprites,$=this.groups,n=a.float32View,u=a.uint32View,d=this.boundTextures,o=this.renderer.boundTextures,l=this.renderer.textureGC.count,v=0,h=void 0,f=void 0,_=1,W=0,p=$[0],x=void 0,c=void 0,T=bg[s[0]._texture.baseTexture.premultipliedAlpha?1:0][s[0].blendMode];p.textureCount=0,p.start=0,p.blend=T,fb++;var b=void 0;for(b=0;b<r;++b){var I=o[b];I._enabled!==fb?(d[b]=I,I._virtalBoundId=b,I._enabled=fb):d[b]=this.renderer.emptyTextures[b]}for(fb++,b=0;b<this.currentIndex;++b){var B=s[b];s[b]=null,h=B._texture.baseTexture;var S=bg[Number(h.premultipliedAlpha)][B.blendMode];if(T!==S&&(T=S,f=null,W=r,fb++),f!==h&&(f=h,h._enabled!==fb)){if(W===r&&(fb++,p.size=b-p.start,W=0,(p=$[_++]).blend=T,p.textureCount=0,p.start=b),h.touched=l,-1===h._virtalBoundId)for(var C=0;C<r;++C){var R=(C+Qp)%r,E=d[R];if(E._enabled!==fb){Qp++,E._virtalBoundId=-1,h._virtalBoundId=R,d[R]=h;break}}h._enabled=fb,p.textureCount++,p.ids[W]=h._virtalBoundId,p.textures[W++]=h}if(x=B.vertexData,c=B._texture._uvs.uvsUint32,this.renderer.roundPixels){var y=this.renderer.resolution;n[v]=(x[0]*y|0)/y,n[v+1]=(x[1]*y|0)/y,n[v+5]=(x[2]*y|0)/y,n[v+6]=(x[3]*y|0)/y,n[v+10]=(x[4]*y|0)/y,n[v+11]=(x[5]*y|0)/y,n[v+15]=(x[6]*y|0)/y,n[v+16]=(x[7]*y|0)/y}else n[v]=x[0],n[v+1]=x[1],n[v+5]=x[2],n[v+6]=x[3],n[v+10]=x[4],n[v+11]=x[5],n[v+15]=x[6],n[v+16]=x[7];u[v+2]=c[0],u[v+7]=c[1],u[v+12]=c[2],u[v+17]=c[3];var A=Math.min(B.worldAlpha,1),M=A<1&&h.premultipliedAlpha?(0,nj)(B._tintRGB,A):B._tintRGB+(255*A<<24);u[v+3]=u[v+8]=u[v+13]=u[v+18]=M,n[v+4]=n[v+9]=n[v+14]=n[v+19]=h._virtalBoundId,v+=20}if(p.size=b-p.start,yg.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(a.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var g=this.shader.attributes,w=this.vertexBuffers[this.vertexCount]=kk.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),G=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(w,g.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(w,g.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(w,g.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);g.aTextureId&&G.addAttribute(w,g.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=G}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(a.vertices,0,!1),this.vertexCount++}for(b=0;b<r;++b)o[b]._virtalBoundId=-1;for(b=0;b<_;++b){for(var U=$[b],z=U.textureCount,D=0;D<z;D++)f=U.textures[D],o[U.ids[D]]!==f&&this.renderer.bindTexture(f,U.ids[D],!0),f._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),e.drawElements(e.TRIANGLES,6*U.size,e.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},r.prototype.start=function(){this.renderer.bindShader(this.shader),yg.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var r=0;r<this.vaoMax;r++)this.vertexBuffers[r]&&this.vertexBuffers[r].destroy(),this.vaos[r]&&this.vaos[r].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var t=0;t<this.buffers.length;++t)this.buffers[t].destroy()},r}(kH.default),tH=Rp;jk.default=tH,lH.default.registerPlugin("sprite",Rp);var zg={},uH=!0;zg.__esModule=uH;var vH=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function wH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var mk={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Qi.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},xH=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],yH=function(){function t(e){wH(this,t),this.styleID=0,this.reset(),ok(this,e,e)}return t.prototype.clone=function(){var e={};return ok(e,this,mk),new t(e)},t.prototype.reset=function(){ok(this,mk,mk)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&xH.indexOf(n)<0&&(n="\""+n+"\""),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},vH(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=nk(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=nk(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){AH(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=nk(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}(),zH=yH;function Sp(t){return"number"==typeof t?(0,jj)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function nk(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Sp(t[e]);return t}return Sp(t)}function AH(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function ok(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}zg.default=zH;var Ag={},BH=!0;function CH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Ag.__esModule=BH;var gb=function(){function e(t,r,n,a,i,s,o,f,c){CH(this,e),this.text=t,this.style=r,this.width=n,this.height=a,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=f,this.fontProperties=c}return e.measureText=function(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;n=null==n?r.wordWrap:n;var i=r.toFontString(),s=e.measureFont(i),o=a.getContext("2d");o.font=i;for(var f=(n?e.wordWrap(t,r,a):t).split(/(?:\r\n|\r|\n)/),c=new Array(f.length),l=0,h=0;h<f.length;h++){var $=o.measureText(f[h]).width+(f[h].length-1)*r.letterSpacing;c[h]=$,l=Math.max(l,$)}var d=l+r.strokeThickness;r.dropShadow&&(d+=r.dropShadowDistance);var v=r.lineHeight||s.fontSize+r.strokeThickness,u=Math.max(v,s.fontSize+r.strokeThickness)+(f.length-1)*(v+r.leading);return r.dropShadow&&(u+=r.dropShadowDistance),new e(t,r,d,u,f,c,v+r.leading,l,s)},e.wordWrap=function(t,r){for(var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas).getContext("2d"),a=0,i="",s="",o={},f=r.letterSpacing,c=r.whiteSpace,l=e.collapseSpaces(c),h=e.collapseNewlines(c),$=!l,d=r.wordWrapWidth+f,v=e.tokenize(t),u=0;u<v.length;u++){var g=v[u];if(e.isNewline(g)){if(!h){s+=e.addLine(i),$=!l,i="",a=0;continue}g=" "}if(l){var p=e.isBreakingSpace(g),x=e.isBreakingSpace(i[i.length-1]);if(p&&x)continue}var S=e.getFromCache(g,f,o,n);if(S>d){if(""!==i&&(s+=e.addLine(i),i="",a=0),e.canBreakWords(g,r.breakWords))for(var R=g.split(""),_=0;_<R.length;_++){for(var k=R[_],w=1;R[_+w];){var M=R[_+w],T=k[k.length-1];if(e.canBreakChars(T,M,g,_,r.breakWords))break;k+=M,w++}_+=k.length-1;var Z=e.getFromCache(k,f,o,n);Z+a>d&&(s+=e.addLine(i),$=!1,i="",a=0),i+=k,a+=Z}else{i.length>0&&(s+=e.addLine(i),i="",a=0);var L=u===v.length-1;s+=e.addLine(g,!L),$=!1,i="",a=0}}else S+a>d&&($=!1,s+=e.addLine(i),i="",a=0),(i.length>0||!e.isBreakingSpace(g)||$)&&(i+=g,a+=S)}return s+=e.addLine(i,!1)},e.addLine=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=e.trimRight(t),t=r?t+"\n":t},e.getFromCache=function(e,t,r,n){var a=r[e];if(void 0===a){var i=e.length*t;a=n.measureText(e).width+i,r[e]=a}return a},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var r=t.length-1;r>=0;r--){var n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],n="";if("string"!=typeof t)return r;for(var a=0;a<t.length;a++){var i=t[a];e.isBreakingSpace(i)||e.isNewline(i)?(""!==n&&(r.push(n),n=""),r.push(i)):n+=i}return""!==n&&r.push(n),r},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,r,n,a){return!0},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={},n=e._canvas,a=e._context;a.font=t;var i=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(a.measureText(i).width),o=Math.ceil(a.measureText(e.BASELINE_SYMBOL).width),f=2*o;o=o*e.BASELINE_MULTIPLIER|0,n.width=s,n.height=f,a.fillStyle="#f00",a.fillRect(0,0,s,f),a.font=t,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(i,0,o);var c=a.getImageData(0,0,s,f).data,l=c.length,h=4*s,$=0,d=0,v=!1;for($=0;$<o;++$){for(var u=0;u<h;u+=4)if(255!==c[d+u]){v=!0;break}if(v)break;d+=h}for(r.ascent=o-$,d=l-h,v=!1,$=f;$>o;--$){for(var g=0;g<h;g+=4)if(255!==c[d+g]){v=!0;break}if(v)break;d-=h}return r.descent=$-o,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?delete e._fonts[t]:e._fonts={}},e}(),DH=gb;Ag.default=DH;var Bg=document.createElement("canvas");Bg.width=Bg.height=10,gb._canvas=Bg,gb._context=Bg.getContext("2d"),gb._fonts={},gb.METRICS_STRING="|\xC9q",gb.BASELINE_SYMBOL="M",gb.BASELINE_MULTIPLIER=1.4,gb._newlines=[10,13],gb._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var pk={},EH=!0;pk.__esModule=EH;var FH=GH;function GH(t){var l=t.width,o=t.height,e=t.getContext("2d"),$=e.getImageData(0,0,l,o).data,r=$.length,a={top:null,left:null,right:null,bottom:null},u=null,L=void 0,n=void 0,i=void 0;for(L=0;L<r;L+=4)0!==$[L+3]&&(n=L/4%l,i=~~(L/4/l),null===a.top&&(a.top=i),null===a.left?a.left=n:n<a.left&&(a.left=n),null===a.right?a.right=n+1:a.right<n&&(a.right=n+1),null===a.bottom?a.bottom=i:a.bottom<i&&(a.bottom=i));return null!==a.top&&(l=a.right-a.left,o=a.bottom-a.top+1,u=e.getImageData(a.left,a.top,l,o)),{height:o,width:l,data:u}}pk.default=FH;var qk={},HH=!0;qk.__esModule=HH;var IH=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),JH=jd(we),Tp=jd(Na),Up=jd(H),Vp=jd(zg),KH=jd(Ag),LH=jd(pk);function jd(t){return t&&t.__esModule?t:{default:t}}function MH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NH(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function OH(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var PH={texture:!0,children:!1,baseTexture:!0},QH=function(t){function e(r,i,a){MH(this,e),(a=a||document.createElement("canvas")).width=3,a.height=3;var s=Tp.default.fromCanvas(a,Up.default.SCALE_MODE,"text");s.orig=new O.Rectangle,s.trim=new O.Rectangle;var n=NH(this,t.call(this,s));return Tp.default.addToCache(n._texture,n._texture.baseTexture.textureCacheIds[0]),n.canvas=a,n.context=n.canvas.getContext("2d"),n.resolution=Up.default.RESOLUTION,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=r,n.style=i,n.localStyleID=-1,n}return OH(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r=this.context,i=KH.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),a=i.width,s=i.height,n=i.lines,o=i.lineHeight,l=i.lineWidths,h=i.maxLineWidth,$=i.fontProperties;this.canvas.width=Math.ceil((Math.max(1,a)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=e.stroke,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;var u=void 0,d=void 0;if(e.dropShadow){r.fillStyle=e.dropShadowColor,r.globalAlpha=e.dropShadowAlpha,r.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(r.shadowColor=e.dropShadowColor);for(var c=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,f=0;f<n.length;f++)u=e.strokeThickness/2,d=e.strokeThickness/2+f*o+$.ascent,"right"===e.align?u+=h-l[f]:"center"===e.align&&(u+=(h-l[f])/2),e.fill&&(this.drawLetterSpacing(n[f],u+c+e.padding,d+p+e.padding),e.stroke&&e.strokeThickness&&(r.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(n[f],u+c+e.padding,d+p+e.padding,!0),r.strokeStyle=e.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(e,n);for(var v=0;v<n.length;v++)u=e.strokeThickness/2,d=e.strokeThickness/2+v*o+$.ascent,"right"===e.align?u+=h-l[v]:"center"===e.align&&(u+=(h-l[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(n[v],u+e.padding,d+e.padding,!0),e.fill&&this.drawLetterSpacing(n[v],u+e.padding,d+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this._style.letterSpacing;if(0!==a)for(var s=String.prototype.split.call(t,""),n=e,o=0,l="";o<t.length;)l=s[o++],i?this.context.strokeText(l,n,r):this.context.fillText(l,n,r),n+=this.context.measureText(l).width+a;else i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,LH.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,i=this._style,a=i.trim?0:i.padding,s=r.baseTexture;s.hasLoaded=!0,s.resolution=this.resolution,s.realWidth=t.width,s.realHeight=t.height,s.width=t.width/this.resolution,s.height=t.height/this.resolution,r.trim.width=r._frame.width=t.width/this.resolution,r.trim.height=r._frame.height=t.height/this.resolution,r.trim.x=-a,r.trim.y=-a,r.orig.width=r._frame.width-2*a,r.orig.height=r._frame.height-2*a,this._onTextureUpdate(),s.emit("update",s),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,i=void 0,a=void 0,s=void 0,n=this.canvas.width/this.resolution,o=this.canvas.height/this.resolution,l=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var $=l.length+1,u=1;u<$;++u)h.push(u/$);if(l.unshift(t.fill[0]),h.unshift(0),l.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===Qi.LINEAR_VERTICAL){r=this.context.createLinearGradient(n/2,0,n/2,o),i=(l.length+1)*e.length,a=0;for(var d=0;d<e.length;d++){a+=1;for(var c=0;c<l.length;c++)s="number"==typeof h[c]?h[c]/e.length+d/e.length:a/i,r.addColorStop(s,l[c]),a++}}else{r=this.context.createLinearGradient(0,o/2,n,o/2),i=l.length+1,a=1;for(var p=0;p<l.length;p++)s="number"==typeof h[p]?h[p]:a/i,r.addColorStop(s,l[p]),a++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},PH,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},IH(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,lc)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,lc)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof Vp.default?this._style=t:this._style=new Vp.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(JH.default),RH=QH;qk.default=RH;var Cg={},SH=!0;function TH(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Cg.__esModule=SH;var UH=function(){function t(i,l,e,s,h,n,o,a,r){TH(this,t),this.lineWidth=i,this.lineAlignment=r,this.nativeLines=o,this.lineColor=l,this.lineAlpha=e,this._lineTint=l,this.fillColor=s,this.fillAlpha=h,this._fillTint=s,this.fill=n,this.holes=[],this.shape=a,this.type=a.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}(),VH=UH;Cg.default=VH;var rk={},WH=!0;rk.__esModule=WH;var XH=YH;function YH(e,$,r,l,x,o,t,u,b){var a=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],p=0,v=0,s=0,d=0,_=0;a.push(e,$);for(var f=1,i=0;f<=b;++f)s=(v=(p=1-(i=f/b))*p)*p,_=(d=i*i)*i,a.push(s*e+3*v*i*r+3*p*d*x+_*t,s*$+3*v*i*l+3*p*d*o+_*u);return a}rk.default=XH;var sk={},ZH=!0;sk.__esModule=ZH;var $H=zb(mc),_H=zb(ye),tk=zb(Na),aI=zb(Cg),bI=zb(we),cI=zb(ie),dI=zb(rk),eI=zb(oc);function zb(t){return t&&t.__esModule?t:{default:t}}function fI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gI(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function hI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Wp=void 0,Fe=new O.Matrix,Ge=new O.Point,iI=new Float32Array(4),jI=new Float32Array(4),uk=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];fI(this,e);var a=gI(this,t.call(this));return a.fillAlpha=1,a.lineWidth=0,a.nativeLines=r,a.lineColor=0,a.lineAlignment=.5,a.graphicsData=[],a.tint=16777215,a._prevTint=16777215,a.blendMode=g.NORMAL,a.currentPath=null,a._webGL={},a.isMask=!1,a.boundsPadding=0,a._localBounds=new cI.default,a.dirty=0,a.fastRectDirty=-1,a.clearDirty=0,a.boundsDirty=-1,a.cachedSpriteDirty=!1,a._spriteRect=null,a._fastRect=!1,a._prevRectTint=null,a._prevRectFillColor=null,a}return hI(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,r,a,i,n){var p=t-(2*r+i),s=e-(2*a+n),h=(r-2)*t*2,o=(a-2)*e*2,l=4*(p*p+s*s),$=4*(p*h+s*o),u=h*h+o*o,c=2*Math.sqrt(l+$+u),v=Math.sqrt(l),d=2*l*v,f=2*Math.sqrt(u),_=$/v;return(d*c+v*$*(c-f)+(4*u*l-$*$)*Math.log((2*v+_+c)/(_+f)))/(4*d)},e.prototype._bezierCurveLength=function(t,e,r,a,i,n,p,s){for(var h=0,o=0,l=0,$=0,u=0,c=0,v=0,d=0,f=0,_=0,g=0,H=t,k=e,y=1;y<=10;++y)_=H-(d=(v=(c=(u=1-(o=y/10))*u)*u)*t+3*c*o*r+3*u*(l=o*o)*i+($=l*o)*p),g=k-(f=v*e+3*c*o*a+3*u*l*n+$*s),H=d,k=f,h+=Math.sqrt(_*_+g*g);return h},e.prototype._segmentsCount=function(t){var r=Math.ceil(t/e.CURVES.maxLength);return r<e.CURVES.minSegments?r=e.CURVES.minSegments:r>e.CURVES.maxSegments&&(r=e.CURVES.maxSegments),r},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.lineAlignment=a,this.currentPath)if(this.currentPath.shape.points.length){var i=new O.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var r=new O.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){var r=this.currentPath.shape.points,a=r[r.length-2],i=r[r.length-1];return a===t&&i===e||(r.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,r,a,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,p=0,s=0;0===n.length&&this.moveTo(0,0);for(var h=n[n.length-2],o=n[n.length-1],l=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,o,t,r,a,i)):20,$=1;$<=l;++$){var u=$/l;p=h+(t-h)*u,s=o+(r-o)*u,n.push(p+(t+(a-t)*u-p)*u,s+(r+(i-r)*u-s)*u)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,r,a,i,n,p){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,h=s[s.length-2],o=s[s.length-1];s.length-=2;var l=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,o,t,r,a,i,n,p)):20;return(0,dI.default)(h,o,t,r,a,i,n,p,l,s),this.dirty++,this},e.prototype.arcTo=function(t,e,r,a,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var n=this.currentPath.shape.points,p=n[n.length-2],s=n[n.length-1]-e,h=p-t,o=a-e,l=r-t,$=Math.abs(s*l-h*o);if($<1e-8||0===i)n[n.length-2]===t&&n[n.length-1]===e||n.push(t,e);else{var u=s*s+h*h,c=o*o+l*l,v=s*o+h*l,d=i*Math.sqrt(u)/$,f=i*Math.sqrt(c)/$,_=d*v/u,g=f*v/c,H=d*l+f*h,k=d*o+f*s,y=h*(f+_),m=s*(f+_),P=l*(d+g),R=o*(d+g),C=Math.atan2(m-k,y-H),b=Math.atan2(R-k,P-H);this.arc(H+t,k+e,i,C,b,h*o>l*s)}return this.dirty++,this},e.prototype.arc=function(t,r,a,i,n){var p=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===n)return this;!p&&n<=i?n+=Wc:p&&i<=n&&(i+=Wc);var s=n-i,h=e.CURVES.adaptive?this._segmentsCount(Math.abs(s)*a):40*Math.ceil(Math.abs(s)/Wc);if(0===s)return this;var o=t+Math.cos(i)*a,l=r+Math.sin(i)*a,$=this.currentPath?this.currentPath.shape.points:null;if($){var u=Math.abs($[$.length-2]-o),c=Math.abs($[$.length-1]-l);u<.001&&c<.001||$.push(o,l)}else this.moveTo(o,l),$=this.currentPath.shape.points;for(var v=s/(2*h),d=2*v,f=Math.cos(v),_=Math.sin(v),g=h-1,H=g%1/g,k=0;k<=g;++k){var y=v+i+d*(k+H*k),m=Math.cos(y),P=-Math.sin(y);$.push((f*m+_*P)*a+t,(f*-P+_*m)*a+r)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,a){return this.drawShape(new O.Rectangle(t,e,r,a)),this},e.prototype.drawRoundedRect=function(t,e,r,a,i){return this.drawShape(new O.RoundedRectangle(t,e,r,a,i)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new O.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,a){return this.drawShape(new O.Ellipse(t,e,r,a)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof O.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var a=0;a<e.length;++a)e[a]=arguments[a]}var i=new O.Polygon(e);return i.closed=r,this.drawShape(i),this},e.prototype.drawStar=function(t,e,r,a,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i=i||a/2;for(var p=-1*Math.PI/2+n,s=2*r,h=Wc/s,o=[],l=0;l<s;l++){var $=l%2?i:a,u=l*h+p;o.push(t+$*Math.cos(u),e+$*Math.sin(u))}return this.drawPolygon(o)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===z.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new bI.default(new tk.default(tk.default.WHITE)));var r=this._spriteRect,a=this.graphicsData[0].fillColor;if(16777215===this.tint)r.tint=a;else if(this.tint!==this._prevRectTint||a!==this._prevRectFillColor){var i=iI,n=jI;(0,ha)(a,i),(0,ha)(this.tint,n),i[0]*=n[0],i[1]*=n[1],i[2]*=n[2],r.tint=(0,kj)(i),this._prevRectTint=this.tint,this._prevRectFillColor=a}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ge);for(var e=this.graphicsData,r=0;r<e.length;++r){var a=e[r];if(a.fill&&a.shape&&a.shape.contains(Ge.x,Ge.y)){if(a.holes)for(var i=0;i<a.holes.length;i++){if(a.holes[i].contains(Ge.x,Ge.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,a=-1/0;if(this.graphicsData.length)for(var i=0,n=0,p=0,s=0,h=0,o=0;o<this.graphicsData.length;o++){var l=this.graphicsData[o],$=l.type,u=l.lineWidth;if(i=l.shape,$===z.RECT||$===z.RREC)n=i.x-u/2,p=i.y-u/2,t=n<t?n:t,e=n+(s=i.width+u)>e?n+s:e,r=p<r?p:r,a=p+(h=i.height+u)>a?p+h:a;else if($===z.CIRC)n=i.x,p=i.y,t=n-(s=i.radius+u/2)<t?n-s:t,e=n+s>e?n+s:e,r=p-(h=i.radius+u/2)<r?p-h:r,a=p+h>a?p+h:a;else if($===z.ELIP)n=i.x,p=i.y,t=n-(s=i.width+u/2)<t?n-s:t,e=n+s>e?n+s:e,r=p-(h=i.height+u/2)<r?p-h:r,a=p+h>a?p+h:a;else for(var c=i.points,v=0,d=0,f=0,_=0,g=0,H=0,k=0,y=0,m=0;m+2<c.length;m+=2)n=c[m],p=c[m+1],v=c[m+2],d=c[m+3],f=Math.abs(v-n),_=Math.abs(d-p),h=u,(s=Math.sqrt(f*f+_*_))<1e-9||(t=(k=(v+n)/2)-(g=(h/s*_+f)/2)<t?k-g:t,e=k+g>e?k+g:e,r=(y=(d+p)/2)-(H=(h/s*f+_)/2)<r?y-H:r,a=y+H>a?y+H:a)}else t=0,e=0,r=0,a=0;var P=this.boundsPadding;this._localBounds.minX=t-P,this._localBounds.maxX=e+P,this._localBounds.minY=r-P,this._localBounds.maxY=a+P},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new aI.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===z.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),a=_H.default.create(r.width,r.height,t,e);Wp||(Wp=new eI.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(Fe),Fe.invert(),Fe.tx-=r.x,Fe.ty-=r.y,Wp.render(this,a,!0,Fe);var i=tk.default.fromCanvas(a.baseTexture._canvasRenderTarget.canvas,t,"graphics");return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var a in this._webGL)for(var i=0;i<this._webGL[a].data.length;++i)this._webGL[a].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}($H.default),kI=uk;sk.default=kI,uk._SPRITE_TEXTURE=null,uk.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048};var vk={},lI=!0;vk.__esModule=lI;var wk=mI(ea);function mI(e){return e&&e.__esModule?e:{default:e}}function nI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var oI=function(){function e(t,i,r){nI(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=wk.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=wk.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new wk.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}(),pI=oI;vk.default=pI;var xk={},qI=!0;xk.__esModule=qI;var rI=sI(rc);function sI(e){return e&&e.__esModule?e:{default:e}}function tI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function uI(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function vI(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var wI=function(e){function r(t){return tI(this,r),uI(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return vI(r,e),r}(rI.default),xI=wI;xk.default=xI;var kd={},yI=!0;kd.__esModule=yI;var zI=function(e,t,$){e.nativeLines?BI(e,$):AI(e,t)};kd.default=zI;function AI(e,t){var $=e.points;if(0!==$.length){var h=new O.Point($[0],$[1]),r=new O.Point($[$.length-2],$[$.length-1]);if(h.x===r.x&&h.y===r.y){($=$.slice()).pop(),$.pop();var s=(r=new O.Point($[$.length-2],$[$.length-1])).x+.5*(h.x-r.x),v=r.y+.5*(h.y-r.y);$.unshift(s,v),$.push(s,v)}var a=t.points,u=t.indices,p=$.length/2,i=$.length,n=a.length/6,l=e.lineWidth/2,o=(0,ha)(e.lineColor),P=e.lineAlpha,W=o[0]*P,Y=o[1]*P,f=o[2]*P,x=$[0],g=$[1],_=$[2],d=$[3],M=0,b=0,c=-(g-d),q=x-_,m=0,y=0,L=0,w=0,A=Math.sqrt(c*c+q*q);c/=A,q/=A,c*=l,q*=l;var C=e.lineAlignment,N=2*(1-C),j=2*C;a.push(x-c*N,g-q*N,W,Y,f,P),a.push(x+c*j,g+q*j,W,Y,f,P);for(var k=1;k<p-1;++k){x=$[2*(k-1)],g=$[2*(k-1)+1],_=$[2*k],d=$[2*k+1],M=$[2*(k+1)],b=$[2*(k+1)+1],c=-(g-d),q=x-_,c/=A=Math.sqrt(c*c+q*q),q/=A,c*=l,q*=l,m=-(d-b),y=_-M,m/=A=Math.sqrt(m*m+y*y),y/=A;var z=-q+g-(-q+d),B=-c+_-(-c+x),D=(-c+x)*(-q+d)-(-c+_)*(-q+g),E=-(y*=l)+b-(-y+d),F=-(m*=l)+_-(-m+M),G=(-m+M)*(-y+d)-(-m+_)*(-y+b),H=z*F-E*B;if(Math.abs(H)<.1)H+=10.1,a.push(_-c*N,d-q*N,W,Y,f,P),a.push(_+c*j,d+q*j,W,Y,f,P);else{var I=(B*G-F*D)/H,J=(E*D-z*G)/H;(I-_)*(I-_)+(J-d)*(J-d)>196*l*l?(L=c-m,w=q-y,L/=A=Math.sqrt(L*L+w*w),w/=A,L*=l,w*=l,a.push(_-L*N,d-w*N),a.push(W,Y,f,P),a.push(_+L*j,d+w*j),a.push(W,Y,f,P),a.push(_-L*j*N,d-w*N),a.push(W,Y,f,P),i++):(a.push(_+(I-_)*N,d+(J-d)*N),a.push(W,Y,f,P),a.push(_-(I-_)*j,d-(J-d)*j),a.push(W,Y,f,P))}}x=$[2*(p-2)],g=$[2*(p-2)+1],_=$[2*(p-1)],c=-(g-(d=$[2*(p-1)+1])),q=x-_,c/=A=Math.sqrt(c*c+q*q),q/=A,c*=l,q*=l,a.push(_-c*N,d-q*N),a.push(W,Y,f,P),a.push(_+c*j,d+q*j),a.push(W,Y,f,P),u.push(n);for(var K=0;K<i;++K)u.push(n++);u.push(n-1)}}function BI(e,t){var $=0,h=e.points;if(0!==h.length){var r=t.points,s=h.length/2,v=(0,ha)(e.lineColor),a=e.lineAlpha,u=v[0]*a,p=v[1]*a,i=v[2]*a;for($=1;$<s;$++){var n=h[2*($-1)],l=h[2*($-1)+1],o=h[2*$],P=h[2*$+1];r.push(n,l),r.push(u,p,i,a),r.push(o,P),r.push(u,p,i,a)}}}var yk={},CI=!0;yk.__esModule=CI;var DI=GI;yk.default=DI;var EI=Xp(kd),FI=Xp(fj);function Xp($){return $&&$.__esModule?$:{default:$}}function GI($,e,i){$.points=$.shape.points.slice();var r=$.points;if($.fill&&r.length>=6){for(var p=[],l=$.holes,u=0;u<l.length;u++){var a=l[u];p.push(r.length/2),r=r.concat(a.points)}var f=e.points,t=e.indices,o=r.length/2,n=(0,ha)($.fillColor),s=$.fillAlpha,B=n[0]*s,v=n[1]*s,_=n[2]*s,d=(0,FI.default)(r,p,2);if(!d)return;for(var h=f.length/6,c=0;c<d.length;c+=3)t.push(d[c]+h),t.push(d[c]+h),t.push(d[c+1]+h),t.push(d[c+2]+h),t.push(d[c+2]+h);for(var b=0;b<o;b++)f.push(r[2*b],r[2*b+1],B,v,_,s)}$.lineWidth>0&&(0,EI.default)($,e,i)}var zk={},HI=!0;zk.__esModule=HI;var II=LI;zk.default=II;var JI=KI(kd);function KI($){return $&&$.__esModule?$:{default:$}}function LI($,e,d){var i=$.shape,r=i.x,u=i.y,l=i.width,t=i.height;if($.fill){var a=(0,ha)($.fillColor),p=$.fillAlpha,s=a[0]*p,n=a[1]*p,o=a[2]*p,F=e.points,Y=e.indices,h=F.length/6;F.push(r,u),F.push(s,n,o,p),F.push(r+l,u),F.push(s,n,o,p),F.push(r,u+t),F.push(s,n,o,p),F.push(r+l,u+t),F.push(s,n,o,p),Y.push(h,h,h+1,h+2,h+3,h+3)}if($.lineWidth){var v=$.points;$.points=[r,u,r+l,u,r+l,u+t,r,u+t,r,u],(0,JI.default)($,e,d),$.points=v}}var Ak={},MI=!0;Ak.__esModule=MI;var NI=QI;Ak.default=NI;var OI=Yp(fj),PI=Yp(kd);function Yp($){return $&&$.__esModule?$:{default:$}}function QI($,e,r){var a=$.shape,t=a.x,u=a.y,i=a.width,l=a.height,v=a.radius,M=[];if(M.push(t,u+v),Dg(t,u+l-v,t,u+l,t+v,u+l,M),Dg(t+i-v,u+l,t+i,u+l,t+i,u+l-v,M),Dg(t+i,u+v,t+i,u,t+i-v,u,M),Dg(t+v,u,t,u,t,u+v+1e-10,M),$.fill){for(var J=(0,ha)($.fillColor),Y=$.fillAlpha,n=J[0]*Y,d=J[1]*Y,o=J[2]*Y,p=e.points,s=e.indices,f=p.length/6,_=(0,OI.default)(M,null,2),c=0,h=_.length;c<h;c+=3)s.push(_[c]+f),s.push(_[c]+f),s.push(_[c+1]+f),s.push(_[c+2]+f),s.push(_[c+2]+f);for(var g=0,q=M.length;g<q;g++)p.push(M[g],M[++g],n,d,o,Y)}if($.lineWidth){var x=$.points;$.points=M,(0,PI.default)($,e,r),$.points=x}}function ld($,e,r){return $+(e-$)*r}function Dg($,e,r,a,t,u){for(var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=0,v=0,M=0,J=0,Y=0,n=0,d=0,o=0;d<=20;++d)l=ld($,r,o=d/20),v=ld(e,a,o),M=ld(r,t,o),J=ld(a,u,o),Y=ld(l,M,o),n=ld(v,J,o),i.push(Y,n);return i}var Bk={},RI=!0;Bk.__esModule=RI;var SI=VI;Bk.default=SI;var TI=UI(kd);function UI($){return $&&$.__esModule?$:{default:$}}function VI($,r,i){var e=$.shape,t=e.x,a=e.y,s=void 0,u=void 0;if($.type===z.CIRC?(s=e.radius,u=e.radius):(s=e.width,u=e.height),0!==s&&0!==u){var l=Math.floor(30*Math.sqrt(e.radius))||Math.floor(15*Math.sqrt(e.width+e.height)),o=2*Math.PI/l;if($.fill){var p=(0,ha)($.fillColor),n=$.fillAlpha,h=p[0]*n,d=p[1]*n,R=p[2]*n,A=r.points,v=r.indices,J=A.length/6;v.push(J);for(var U=0;U<l+1;U++)A.push(t,a,h,d,R,n),A.push(t+Math.sin(o*U)*s,a+Math.cos(o*U)*u,h,d,R,n),v.push(J++,J++);v.push(J-1)}if($.lineWidth){var f=$.points;$.points=[];for(var _=0;_<l;_++)$.points.push(t+Math.sin(o*-_)*s,a+Math.cos(o*-_)*u);$.points.push($.points[0],$.points[1]),(0,TI.default)($,r,i),$.points=f}}}var Ck={},WI=!0;Ck.__esModule=WI;var Zp=Ab(ed),XI=Ab(id),YI=Ab(vk),ZI=Ab(xk),$I=Ab(yk),_I=Ab(zk),aJ=Ab(Ak),bJ=Ab(Bk);function Ab(e){return e&&e.__esModule?e:{default:e}}function cJ(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function dJ(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function eJ(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var $p=function(e){function r(t){cJ(this,r);var a=dJ(this,e.call(this,t));return a.graphicsDataPool=[],a.primitiveShader=null,a.gl=t.gl,a.CONTEXT_UID=0,a}return eJ(r,e),r.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new ZI.default(this.gl)},r.prototype.destroy=function(){Zp.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},r.prototype.render=function(e){var r=this.renderer,t=r.gl,a=void 0,o=e._webGL[this.CONTEXT_UID];o&&e.dirty===o.dirty||(this.updateGraphics(e),o=e._webGL[this.CONTEXT_UID]);var $=this.primitiveShader;r.bindShader($),r.state.setBlendMode(e.blendMode);for(var i=0,P=o.data.length;i<P;i++){var n=(a=o.data[i]).shader;r.bindShader(n),n.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),n.uniforms.tint=(0,ha)(e.tint),n.uniforms.alpha=e.worldAlpha,r.bindVao(a.vao),a.nativeLines?t.drawArrays(t.LINES,0,a.points.length/6):a.vao.draw(t.TRIANGLE_STRIP,a.indices.length)}},r.prototype.updateGraphics=function(e){var r=this.renderer.gl,t=e._webGL[this.CONTEXT_UID];if(t||(t=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:r,clearDirty:-1,dirty:-1}),t.dirty=e.dirty,e.clearDirty!==t.clearDirty){t.clearDirty=e.clearDirty;for(var a=0;a<t.data.length;a++)this.graphicsDataPool.push(t.data[a]);t.data.length=0,t.lastIndex=0}for(var o=void 0,$=void 0,i=t.lastIndex;i<e.graphicsData.length;i++){var P=e.graphicsData[i];o=this.getWebGLData(t,0),P.nativeLines&&P.lineWidth&&($=this.getWebGLData(t,0,!0),t.lastIndex++),P.type===z.POLY&&(0,$I.default)(P,o,$),P.type===z.RECT?(0,_I.default)(P,o,$):P.type===z.CIRC||P.type===z.ELIP?(0,bJ.default)(P,o,$):P.type===z.RREC&&(0,aJ.default)(P,o,$),t.lastIndex++}this.renderer.bindVao(null);for(var n=0;n<t.data.length;n++)(o=t.data[n]).dirty&&o.upload()},r.prototype.getWebGLData=function(e,r,t){var a=e.data[e.data.length-1];return(!a||a.nativeLines!==t||a.points.length>32e4)&&((a=this.graphicsDataPool.pop()||new YI.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=t,a.reset(r),e.data.push(a)),a.dirty=!0,a},r}(Zp.default),fJ=$p;Ck.default=fJ,XI.default.registerPlugin("graphics",$p);var Dk={},gJ=!0;Dk.__esModule=gJ;var hJ=iJ(oc);function iJ(e){return e&&e.__esModule?e:{default:e}}function jJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _p=function(){function e(t){jJ(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,r=t.context,l=e.worldAlpha,a=e.transform.worldTransform,i=t.resolution;r.setTransform(a.a*i,a.b*i,a.c*i,a.d*i,a.tx*i,a.ty*i),e.canvasTintDirty===e.dirty&&e._prevTint===e.tint||this.updateGraphicsTint(e),t.setBlendMode(e.blendMode);for(var o=0;o<e.graphicsData.length;o++){var n=e.graphicsData[o],s=n.shape,h=n._fillTint,$=n._lineTint;if(r.lineWidth=n.lineWidth,n.type===z.POLY){r.beginPath(),this.renderPolygon(s.points,s.closed,r);for(var p=0;p<n.holes.length;p++)this.renderPolygon(n.holes[p].points,!0,r);n.fill&&(r.globalAlpha=n.fillAlpha*l,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),n.lineWidth&&(r.globalAlpha=n.lineAlpha*l,r.strokeStyle="#"+("00000"+(0|$).toString(16)).substr(-6),r.stroke())}else if(n.type===z.RECT)(n.fillColor||0===n.fillColor)&&(r.globalAlpha=n.fillAlpha*l,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fillRect(s.x,s.y,s.width,s.height)),n.lineWidth&&(r.globalAlpha=n.lineAlpha*l,r.strokeStyle="#"+("00000"+(0|$).toString(16)).substr(-6),r.strokeRect(s.x,s.y,s.width,s.height));else if(n.type===z.CIRC)r.beginPath(),r.arc(s.x,s.y,s.radius,0,2*Math.PI),r.closePath(),n.fill&&(r.globalAlpha=n.fillAlpha*l,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),n.lineWidth&&(r.globalAlpha=n.lineAlpha*l,r.strokeStyle="#"+("00000"+(0|$).toString(16)).substr(-6),r.stroke());else if(n.type===z.ELIP){var d=2*s.width,f=2*s.height,u=s.x-d/2,v=s.y-f/2;r.beginPath();var c=d/2*.5522848,g=f/2*.5522848,w=u+d,y=v+f,C=u+d/2,b=v+f/2;r.moveTo(u,b),r.bezierCurveTo(u,b-g,C-c,v,C,v),r.bezierCurveTo(C+c,v,w,b-g,w,b),r.bezierCurveTo(w,b+g,C+c,y,C,y),r.bezierCurveTo(C-c,y,u,b+g,u,b),r.closePath(),n.fill&&(r.globalAlpha=n.fillAlpha*l,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),n.lineWidth&&(r.globalAlpha=n.lineAlpha*l,r.strokeStyle="#"+("00000"+(0|$).toString(16)).substr(-6),r.stroke())}else if(n.type===z.RREC){var S=s.x,T=s.y,_=s.width,j=s.height,A=s.radius,P=Math.min(_,j)/2|0;A=A>P?P:A,r.beginPath(),r.moveTo(S,T+A),r.lineTo(S,T+j-A),r.quadraticCurveTo(S,T+j,S+A,T+j),r.lineTo(S+_-A,T+j),r.quadraticCurveTo(S+_,T+j,S+_,T+j-A),r.lineTo(S+_,T+A),r.quadraticCurveTo(S+_,T,S+_-A,T),r.lineTo(S+A,T),r.quadraticCurveTo(S,T,S,T+A),r.closePath(),(n.fillColor||0===n.fillColor)&&(r.globalAlpha=n.fillAlpha*l,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),n.lineWidth&&(r.globalAlpha=n.lineAlpha*l,r.strokeStyle="#"+("00000"+(0|$).toString(16)).substr(-6),r.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint,e.canvasTintDirty=e.dirty;for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,l=(255&e.tint)/255,a=0;a<e.graphicsData.length;++a){var i=e.graphicsData[a],o=0|i.fillColor,n=0|i.lineColor;i._fillTint=((o>>16&255)/255*t*255<<16)+((o>>8&255)/255*r*255<<8)+(255&o)/255*l*255,i._lineTint=((n>>16&255)/255*t*255<<16)+((n>>8&255)/255*r*255<<8)+(255&n)/255*l*255}},e.prototype.renderPolygon=function(e,t,r){r.moveTo(e[0],e[1]);for(var l=1;l<e.length/2;++l)r.lineTo(e[2*l],e[2*l+1]);t&&r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}(),kJ=_p;Dk.default=kJ,hJ.default.registerPlugin("graphics",_p);var Ek={},lJ=!0;Ek.__esModule=lJ;var mJ=function(){function t(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,r,s){return r&&t(e.prototype,r),s&&t(e,s),e}}();function nJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var oJ=function(){function t(e,r){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;nJ(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=r,this.resolution=this._updateResolution(s||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return mJ(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,_c)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,s=t.BATCH_SIZE,a=this.baseTexture.sourceScale;r-e<s&&r<this._frameKeys.length;){var o=this._frameKeys[r],i=this._frames[o],n=i.frame;if(n){var l=null,h=null,u=!1!==i.trimmed&&i.sourceSize?i.sourceSize:i.frame,c=new b.Rectangle(0,0,Math.floor(u.w*a)/this.resolution,Math.floor(u.h*a)/this.resolution);l=i.rotated?new b.Rectangle(Math.floor(n.x*a)/this.resolution,Math.floor(n.y*a)/this.resolution,Math.floor(n.h*a)/this.resolution,Math.floor(n.w*a)/this.resolution):new b.Rectangle(Math.floor(n.x*a)/this.resolution,Math.floor(n.y*a)/this.resolution,Math.floor(n.w*a)/this.resolution,Math.floor(n.h*a)/this.resolution),!1!==i.trimmed&&i.spriteSourceSize&&(h=new b.Rectangle(Math.floor(i.spriteSourceSize.x*a)/this.resolution,Math.floor(i.spriteSourceSize.y*a)/this.resolution,Math.floor(n.w*a)/this.resolution,Math.floor(n.h*a)/this.resolution)),this.textures[o]=new b.Texture(this.baseTexture,l,c,h,i.rotated?2:0,i.anchor),b.Texture.addToCache(this.textures[o],o)}r++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var r=t[e],s=Array.isArray(r),a=0;for(r=s?r:r[Symbol.iterator]();;){var o;if(s){if(a>=r.length)break;o=r[a++]}else{if((a=r.next()).done)break;o=a.value}var i=o;this.animations[e].push(this.textures[i])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}(),pJ=oJ;Ek.default=pJ;var Eg={},qJ=!0;Eg.__esModule=qJ;var rJ=wJ;Eg.autoDetectRenderer=rJ;var sJ=vJ(i),tJ=aq(oc),uJ=aq(id);function aq(r){return r&&r.__esModule?r:{default:r}}function vJ(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var $ in r)Object.prototype.hasOwnProperty.call(r,$)&&(e[$]=r[$]);return e.default=r,e}function wJ(r,e,$,a){var t=r&&r.forceCanvas;return void 0!==a&&(t=a),!t&&sJ.isWebGLSupported()?new uJ.default(r,e,$):new tJ.default(r,e,$)}var Fg={},xJ=!0;Fg.__esModule=xJ;var yJ=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),zJ=bq(mc),AJ=bq(H);function bq(e){return e&&e.__esModule?e:{default:e}}function BJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var CJ=function(){function e(t,r,i,n,a){BJ(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:r||AJ.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!a},i)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,Eg.autoDetectRenderer)(t),this.stage=new zJ.default,this._ticker=null,this.ticker=t.sharedTicker?yb:new yj,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e,t){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},yJ(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Yc.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}(),DJ=CJ;Fg.default=DJ;var EJ,FJ,GJ,HJ,IJ,JJ,KJ,LJ,MJ,NJ,OJ,PJ,QJ,RJ,SJ,TJ,UJ,VJ,WJ,XJ,YJ,ZJ,$J,_J,aK,bK,cK,dK,eK,fK,gK,hK,iK,jK,kK,b={},lK=!0;b.__esModule=lK;var mK=(dq=void 0,eq=b.settings=dq,fq=b.utils=eq,gq=b.ticker=fq,hq=b.CanvasRenderer=gq,kK=b.WebGLRenderer=hq,jK=b.glCore=kK,iK=b.Bounds=jK,hK=b.DisplayObject=iK,gK=b.Container=hK,fK=b.Transform=gK,eK=b.TransformStatic=fK,dK=b.TransformBase=eK,cK=b.Sprite=dK,bK=b.CanvasSpriteRenderer=cK,aK=b.CanvasTinter=bK,_J=b.SpriteRenderer=aK,$J=b.Text=_J,ZJ=b.TextStyle=$J,YJ=b.TextMetrics=ZJ,XJ=b.Graphics=YJ,WJ=b.GraphicsData=XJ,VJ=b.GraphicsRenderer=WJ,UJ=b.CanvasGraphicsRenderer=VJ,TJ=b.Spritesheet=UJ,SJ=b.Texture=TJ,RJ=b.TextureMatrix=SJ,QJ=b.BaseTexture=RJ,PJ=b.RenderTexture=QJ,OJ=b.BaseRenderTexture=PJ,NJ=b.VideoBaseTexture=OJ,MJ=b.TextureUvs=NJ,LJ=b.CanvasRenderTarget=MJ,KJ=b.Shader=LJ,JJ=b.WebGLManager=KJ,IJ=b.ObjectRenderer=JJ,HJ=b.RenderTarget=IJ,GJ=b.Quad=HJ,FJ=b.SpriteMaskFilter=GJ,EJ=b.Filter=FJ,b.Application=EJ);b.autoDetectRenderer=mK;Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(b,e,{enumerable:!0,get:function(){return E[e]}})});Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(b,e,{enumerable:!0,get:function(){return O[e]}})});Object.defineProperty(b,"glCore",{enumerable:!0,get:function(){return l(ea).default}});Object.defineProperty(b,"Bounds",{enumerable:!0,get:function(){return l(ie).default}});Object.defineProperty(b,"DisplayObject",{enumerable:!0,get:function(){return l(_f).default}});Object.defineProperty(b,"Container",{enumerable:!0,get:function(){return l(mc).default}});Object.defineProperty(b,"Transform",{enumerable:!0,get:function(){return l($f).default}});Object.defineProperty(b,"TransformStatic",{enumerable:!0,get:function(){return l(Zf).default}});Object.defineProperty(b,"TransformBase",{enumerable:!0,get:function(){return l(je).default}});Object.defineProperty(b,"Sprite",{enumerable:!0,get:function(){return l(we).default}});Object.defineProperty(b,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return l(Hj).default}});Object.defineProperty(b,"CanvasTinter",{enumerable:!0,get:function(){return l(Ae).default}});Object.defineProperty(b,"SpriteRenderer",{enumerable:!0,get:function(){return l(jk).default}});Object.defineProperty(b,"Text",{enumerable:!0,get:function(){return l(qk).default}});Object.defineProperty(b,"TextStyle",{enumerable:!0,get:function(){return l(zg).default}});Object.defineProperty(b,"TextMetrics",{enumerable:!0,get:function(){return l(Ag).default}});Object.defineProperty(b,"Graphics",{enumerable:!0,get:function(){return l(sk).default}});Object.defineProperty(b,"GraphicsData",{enumerable:!0,get:function(){return l(Cg).default}});Object.defineProperty(b,"GraphicsRenderer",{enumerable:!0,get:function(){return l(Ck).default}});Object.defineProperty(b,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return l(Dk).default}});Object.defineProperty(b,"Spritesheet",{enumerable:!0,get:function(){return l(Ek).default}});Object.defineProperty(b,"Texture",{enumerable:!0,get:function(){return l(Na).default}});Object.defineProperty(b,"TextureMatrix",{enumerable:!0,get:function(){return l(ug).default}});Object.defineProperty(b,"BaseTexture",{enumerable:!0,get:function(){return l(xb).default}});Object.defineProperty(b,"RenderTexture",{enumerable:!0,get:function(){return l(ye).default}});Object.defineProperty(b,"BaseRenderTexture",{enumerable:!0,get:function(){return l(mg).default}});Object.defineProperty(b,"VideoBaseTexture",{enumerable:!0,get:function(){return l(ig).default}});Object.defineProperty(b,"TextureUvs",{enumerable:!0,get:function(){return l(jg).default}});Object.defineProperty(b,"CanvasRenderTarget",{enumerable:!0,get:function(){return l(pg).default}});Object.defineProperty(b,"Shader",{enumerable:!0,get:function(){return l(rc).default}});Object.defineProperty(b,"WebGLManager",{enumerable:!0,get:function(){return l(pc).default}});Object.defineProperty(b,"ObjectRenderer",{enumerable:!0,get:function(){return l(ed).default}});Object.defineProperty(b,"RenderTarget",{enumerable:!0,get:function(){return l(hd).default}});Object.defineProperty(b,"Quad",{enumerable:!0,get:function(){return l(wg).default}});Object.defineProperty(b,"SpriteMaskFilter",{enumerable:!0,get:function(){return l(vg).default}});Object.defineProperty(b,"Filter",{enumerable:!0,get:function(){return l(rg).default}});Object.defineProperty(b,"Application",{enumerable:!0,get:function(){return l(Fg).default}});Object.defineProperty(b,"autoDetectRenderer",{enumerable:!0,get:function(){return Eg.autoDetectRenderer}});var nK=cq(i),oK=cq(dd),pK=l(H),qK=l(oc),rK=l(id);function cq(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var $ in e)Object.prototype.hasOwnProperty.call(e,$)&&(r[$]=e[$]);return r.default=e,r}function l(e){return e&&e.__esModule?e:{default:e}}var dq=pK.default;b.settings=dq;var eq=nK;b.utils=eq;var fq=oK;b.ticker=fq;var gq=qK.default;b.CanvasRenderer=gq;var hq=rK.default;b.WebGLRenderer=hq;var Fk={},sK=!0;Fk.__esModule=sK;var tK=uK;Fk.default=tK;var iq={};function f(e){if(!iq[e]){var r=new Error().stack;void 0===r?console.warn("Deprecation Warning: ",e):(r=r.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(r),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(r))),iq[e]=!0}}function uK(e){var r=e.mesh,t=e.particles,n=e.extras,a=e.filters,s=e.prepare,o=e.loaders,i=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return f("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return f("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return f("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),r.Mesh}},Rope:{get:function(){return f("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),r.Rope}},ParticleContainer:{get:function(){return f("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),t.ParticleContainer}},MovieClip:{get:function(){return f("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return f("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return f("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return f("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return f("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return f("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return f("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return f("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return f("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return f("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return f("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(r){f("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=r}},FILTER_RESOLUTION:{get:function(){return f("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(r){f("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=r}},RESOLUTION:{get:function(){return f("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(r){f("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=r}},MIPMAP_TEXTURES:{get:function(){return f("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(r){f("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=r}},SPRITE_BATCH_SIZE:{get:function(){return f("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(r){f("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=r}},SPRITE_MAX_TEXTURES:{get:function(){return f("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(r){f("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=r}},RETINA_PREFIX:{get:function(){return f("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(r){f("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=r}},DEFAULT_RENDER_OPTIONS:{get:function(){return f("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],p=function(r){var t=u[r];Object.defineProperty(e[t.parent],"DEFAULT",{get:function(){return f("PIXI."+t.parent+".DEFAULT has been deprecated, please use PIXI.settings."+t.target),e.settings[t.target]},set:function(r){f("PIXI."+t.parent+".DEFAULT has been deprecated, please use PIXI.settings."+t.target),e.settings[t.target]=r}})},T=0;T<u.length;T++)p(T);Object.defineProperties(e.settings,{PRECISION:{get:function(){return f("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(r){f("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=r}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return f("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),n&&Object.defineProperties(n,{TextureTransform:{get:function(){return f("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),e.TextureMatrix}}}),e.DisplayObject.prototype.generateTexture=function(e,r,t){return f("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,r,t)},e.Graphics.prototype.generateTexture=function(e,r){return f("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,r)},e.GroupD8.isSwapWidthHeight=function(r){return f("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),e.GroupD8.isVertical(r)},e.RenderTexture.prototype.render=function(e,r,t,n){this.legacyRenderer.render(e,this,t,r,!n),f("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return f("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return f("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return f("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return f("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,f("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(e){this.text=e,f("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,f("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(r){return f("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(r)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return f("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return f("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return f("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,f("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(r){return f("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(r)},e.Text.getFontStyle=function(r){return f("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(r=r||{})instanceof e.TextStyle||(r=new e.TextStyle(r)),r.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){f("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){f("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var r=e.split(" "),t=-1;this._fontSize=26;for(var n=0;n<r.length;++n)if(r[n].match(/(px|pt|em|%)/)){t=n,this._fontSize=r[n];break}this._fontWeight="normal";for(var a=0;a<t;++a)if(r[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=r[a];break}if(t>-1&&t<r.length-1){this._fontFamily="";for(var s=t+1;s<r.length;++s)this._fontFamily+=r[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,f("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(r,t){e.Texture.addToCache(r,t),f("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(r){return f("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(r),e.Texture.removeFromCache(r)},Object.defineProperties(a,{AbstractFilter:{get:function(){return f("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return f("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}},VoidFilter:{get:function(){return f("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),a.AlphaFilter}}}),e.utils.uuid=function(){return f("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return f("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(f("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=e},get:function(){return c}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(e,r){return f("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),r&&this.registerUploadHook(r),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){f("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return f("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){f("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return f("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.Loader){var l=o.Resource,d=o.Loader;Object.defineProperties(l.prototype,{isJson:{get:function(){return f("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===l.TYPE.JSON}},isXml:{get:function(){return f("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===l.TYPE.XML}},isImage:{get:function(){return f("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===l.TYPE.IMAGE}},isAudio:{get:function(){return f("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===l.TYPE.AUDIO}},isVideo:{get:function(){return f("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===l.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return f("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return f("The after() method is deprecated, please use use()."),this.use}}})}i.interactiveTarget&&Object.defineProperty(i.interactiveTarget,"defaultCursor",{set:function(e){f("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return f("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),i.InteractionManager&&(Object.defineProperty(i.InteractionManager,"defaultCursorStyle",{set:function(e){f("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return f("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(i.InteractionManager,"currentCursorStyle",{set:function(e){f("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return f("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}var Gg={},vK=!0;Gg.__esModule=vK;var wK={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};Gg.default=wK;var Gk={},xK=!0;Gk.__esModule=xK;var He=zK(b),jq=kq(Zc),yK=kq(Gg);function kq(e){return e&&e.__esModule?e:{default:e}}function zK(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function AK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}He.utils.mixins.delayMixin(He.DisplayObject.prototype,yK.default);var BK=9,Hg=100,CK=0,DK=0,lq=2,mq=1,EK=-1e3,FK=-1e3,GK=2,Hk=function(){function e(t){AK(this,e),!jq.default.tablet&&!jq.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=Hg+"px",i.style.height=Hg+"px",i.style.position="absolute",i.style.top=CK+"px",i.style.left=DK+"px",i.style.zIndex=lq,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=mq+"px",t.style.height=mq+"px",t.style.position="absolute",t.style.top=EK+"px",t.style.left=FK+"px",t.style.zIndex=GK,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,i=e.height/this.renderer.height,r=this.div;r.style.left=e.left+"px",r.style.top=e.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,He.utils.removeItems(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{r=a._accessibleDiv;var n=a.hitArea,o=a.worldTransform;a.hitArea?(r.style.left=(o.tx+n.x*o.a)*t+"px",r.style.top=(o.ty+n.y*o.d)*i+"px",r.style.width=n.width*o.a*t+"px",r.style.height=n.height*o.d*i+"px"):(n=a.getBounds(),this.capHitArea(n),r.style.left=n.x*t+"px",r.style.top=n.y*i+"px",r.style.width=n.width*t+"px",r.style.height=n.height*i+"px",r.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(r.title=a.accessibleTitle),r.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&r.setAttribute("aria-label",a.accessibleHint))}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=Hg+"px",t.style.height=Hg+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=lq,t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){e.keyCode===BK&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}(),HK=Hk;Gk.default=HK,He.WebGLRenderer.registerPlugin("accessibility",Hk),He.CanvasRenderer.registerPlugin("accessibility",Hk);var Ig={},IK=!0;Ig.__esModule=IK;Object.defineProperty(Ig,"accessibleTarget",{enumerable:!0,get:function(){return nq(Gg).default}});function nq(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(Ig,"AccessibilityManager",{enumerable:!0,get:function(){return nq(Gk).default}});var Ik={},JK=!0;Ik.__esModule=JK;var Ie=KK(b);function KK(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function LK(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var oq=new Ie.Rectangle,pq=4,qq=function(){function e(r){LK(this,e),this.renderer=r,r.extract=this}return e.prototype.image=function(e){var r=new Image;return r.src=this.base64(e),r},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var r=this.renderer,t=void 0,a=void 0,n=void 0,$=!1,o=void 0,i=!1;e&&(e instanceof Ie.RenderTexture?o=e:(o=this.renderer.generateTexture(e),i=!0)),o?(a=(t=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,n=o.frame,$=!1):(a=(t=this.renderer.rootRenderTarget).resolution,$=!0,(n=oq).width=t.size.width,n.height=t.size.height);var s=n.width*a,d=n.height*a,c=new Ie.CanvasRenderTarget(s,d,1);if(t){r.bindRenderTarget(t);var v=new Uint8Array(pq*s*d),u=r.gl;u.readPixels(n.x*a,n.y*a,s,d,u.RGBA,u.UNSIGNED_BYTE,v);var l=c.context.getImageData(0,0,s,d);l.data.set(v),c.context.putImageData(l,0,0),$&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-d))}return i&&o.destroy(!0),c.canvas},e.prototype.pixels=function(e){var r=this.renderer,t=void 0,a=void 0,n=void 0,$=void 0,o=!1;e&&(e instanceof Ie.RenderTexture?$=e:($=this.renderer.generateTexture(e),o=!0)),$?(a=(t=$.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,n=$.frame):(a=(t=this.renderer.rootRenderTarget).resolution,(n=oq).width=t.size.width,n.height=t.size.height);var i=n.width*a,s=n.height*a,d=new Uint8Array(pq*i*s);if(t){r.bindRenderTarget(t);var c=r.gl;c.readPixels(n.x*a,n.y*a,i,s,c.RGBA,c.UNSIGNED_BYTE,d)}return o&&$.destroy(!0),d},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}(),MK=qq;Ik.default=MK,Ie.WebGLRenderer.registerPlugin("extract",qq);var Jk={},NK=!0;Jk.__esModule=NK;var Je=OK(b);function OK(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function PK(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var rq=new Je.Rectangle,sq=function(){function e(r){PK(this,e),this.renderer=r,r.extract=this}return e.prototype.image=function(e){var r=new Image;return r.src=this.base64(e),r},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var r=this.renderer,t=void 0,a=void 0,n=void 0,o=void 0;e&&(o=e instanceof Je.RenderTexture?e:r.generateTexture(e)),o?(t=o.baseTexture._canvasRenderTarget.context,a=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(t=r.rootContext,(n=rq).width=this.renderer.width,n.height=this.renderer.height);var $=n.width*a,i=n.height*a,s=new Je.CanvasRenderTarget($,i,1),c=t.getImageData(n.x*a,n.y*a,$,i);return s.context.putImageData(c,0,0),s.canvas},e.prototype.pixels=function(e){var r=this.renderer,t=void 0,a=void 0,n=void 0,o=void 0;return e&&(o=e instanceof Je.RenderTexture?e:r.generateTexture(e)),o?(t=o.baseTexture._canvasRenderTarget.context,a=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(t=r.rootContext,(n=rq).width=r.width,n.height=r.height),t.getImageData(0,0,n.width*a,n.height*a).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}(),QK=sq;Jk.default=QK,Je.CanvasRenderer.registerPlugin("extract",sq);var Jg={},RK=!0;Jg.__esModule=RK;Object.defineProperty(Jg,"webgl",{enumerable:!0,get:function(){return tq(Ik).default}});function tq(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(Jg,"canvas",{enumerable:!0,get:function(){return tq(Jk).default}});var Kk={},SK=!0;Kk.__esModule=SK;var TK=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Bb=UK(b);function UK(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function VK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WK(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function XK(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var YK=function(t){function e(r,i){VK(this,e);var n=WK(this,t.call(this,r[0]instanceof Bb.Texture?r[0]:r[0].texture));return n._textures=null,n._durations=null,n.textures=r,n._autoUpdate=!1!==i,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return XK(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&Bb.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&Bb.ticker.shared.add(this.update,this,Bb.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(Bb.Texture.fromFrame(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(Bb.Texture.fromImage(t[i]));return new e(r)},TK(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof Bb.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(Bb.Sprite),ZK=YK;Kk.default=ZK;var Lk={},$K=!0;Lk.__esModule=$K;var _K=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),hb=cL(b),aL=bL(Ae);function bL(t){return t&&t.__esModule?t:{default:t}}function cL(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function dL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function fL(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ke=new hb.Point,gL=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;dL(this,e);var a=eL(this,t.call(this,r));return a.tileTransform=new hb.TransformStatic,a._width=n,a._height=i,a._canvasPattern=null,a.uvTransform=r.transform||new hb.TextureMatrix(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return fL(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,i=t.resolution,a=e.baseTexture,o=a.resolution,s=this.tilePosition.x/this.tileScale.x%e._frame.width*o,h=this.tilePosition.y/this.tileScale.y%e._frame.height*o;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new hb.CanvasRenderTarget(e._frame.width,e._frame.height,o);16777215!==this.tint?(this.tintedTexture=aL.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(a.source,-e._frame.x*o,-e._frame.y*o),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/o,this.tileScale.y/o);var u=this.anchor.x*-this._width,l=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(s,h),r.fillRect(-s+u,-h+l,this._width/this.tileScale.x*o,this._height/this.tileScale.y*o)):(r.translate(s+u,h+l),r.fillRect(-s,-h,this._width/this.tileScale.x*o,this._height/this.tileScale.y*o))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new hb.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ke);var e=this._width,r=this._height,n=-e*this.anchor._x;if(Ke.x>=n&&Ke.x<n+e){var i=-r*this.anchor._y;if(Ke.y>=i&&Ke.y<i+r)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,r,n){return new e(hb.Texture.from(t),r,n)},e.fromFrame=function(t,r,n){var i=hb.utils.TextureCache[t];if(!i)throw new Error("The frameId \""+t+"\" does not exist in the texture cache "+this);return new e(i,r,n)},e.fromImage=function(t,r,n,i,a){return new e(hb.Texture.fromImage(t,i,a),r,n)},_K(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(hb.Sprite),hL=gL;Lk.default=hL;var Mk={},iL=!0;Mk.__esModule=iL;var Cb=jL(b);function jL(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r.default=e,r}function kL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function lL(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function mL(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var Kg=new Cb.Matrix,uq=function(e){function r(o){kL(this,r);var t=lL(this,e.call(this,o));return t.shader=null,t.simpleShader=null,t.quad=null,t}return mL(r,e),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new Cb.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new Cb.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new Cb.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},r.prototype.render=function(e){var r=this.renderer,o=this.quad;r.bindVao(o.vao);var t=o.vertices;t[0]=t[6]=e._width*-e.anchor.x,t[1]=t[3]=e._height*-e.anchor.y,t[2]=t[4]=e._width*(1-e.anchor.x),t[5]=t[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((t=o.uvs)[0]=t[6]=-e.anchor.x,t[1]=t[3]=-e.anchor.y,t[2]=t[4]=1-e.anchor.x,t[5]=t[7]=1-e.anchor.y),o.upload();var n=e._texture,a=n.baseTexture,i=e.tileTransform.localTransform,l=e.uvTransform,u=a.isPowerOfTwo&&n.frame.width===a.width&&n.frame.height===a.height;u&&(a._glTextures[r.CONTEXT_UID]?u=a.wrapMode!==Xc.CLAMP:a.wrapMode===Xc.CLAMP&&(a.wrapMode=Xc.REPEAT));var $=u?this.simpleShader:this.shader;r.bindShader($);var s=n.width,c=n.height,d=e._width,p=e._height;Kg.set(i.a*s/d,i.b*s/p,i.c*c/d,i.d*c/p,i.tx/d,i.ty/p),Kg.invert(),u?Kg.prepend(l.mapCoord):($.uniforms.uMapCoord=l.mapCoord.toArray(!0),$.uniforms.uClampFrame=l.uClampFrame,$.uniforms.uClampOffset=l.uClampOffset),$.uniforms.uTransform=Kg.toArray(!0),$.uniforms.uColor=Cb.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,$.uniforms.uColor,a.premultipliedAlpha),$.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),$.uniforms.uSampler=r.bindTexture(n),r.setBlendMode(Cb.utils.correctBlendMode(e.blendMode,a.premultipliedAlpha)),o.vao.draw(this.renderer.gl.TRIANGLES,6,0)},r}(Cb.ObjectRenderer),nL=uq;Mk.default=nL,Cb.WebGLRenderer.registerPlugin("tilingSprite",uq);var Nk={},oL=!0;Nk.__esModule=oL;var pL=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Db=sL(b),qL=vq(Vf),rL=vq(H);function vq(t){return t&&t.__esModule?t:{default:t}}function sL(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function tL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function vL(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wq=function(t){function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};tL(this,e);var n=uL(this,t.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0!==i.tint?i.tint:16777215,align:i.align||"left",name:null,size:0},n.font=i.font,n._text=r,n._maxWidth=0,n._maxLineHeight=0,n._letterSpacing=0,n._anchor=new qL.default(function(){n.dirty=!0},n,0,0),n.dirty=!1,n.updateText(),n}return vL(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,i=new Db.Point,n=[],a=[],s=this.text.replace(/(?:\r\n|\r)/g,"\n"),o=s.length,h=this._maxWidth*t.size/this._font.size,u=null,l=0,$=0,f=0,c=-1,g=0,p=0,_=0,v=0;v<o;v++){var x=s.charCodeAt(v),y=s.charAt(v);if(/(?:\s)/.test(y)&&(c=v,g=l),"\r"!==y&&"\n"!==y){var O=t.chars[x];O&&(u&&O.kerning[u]&&(i.x+=O.kerning[u]),n.push({texture:O.texture,line:f,charCode:x,position:new Db.Point(i.x+O.xOffset+this._letterSpacing/2,i.y+O.yOffset)}),i.x+=O.xAdvance+this._letterSpacing,l=i.x,_=Math.max(_,O.yOffset+O.texture.height),u=x,-1!==c&&h>0&&i.x>h&&(++p,Db.utils.removeItems(n,1+c-p,1+v-c),v=c,c=-1,a.push(g),$=Math.max($,g),f++,i.x=0,i.y+=t.lineHeight,u=null))}else a.push(l),$=Math.max($,l),++f,++p,i.x=0,i.y+=t.lineHeight,u=null}var d=s.charAt(s.length-1);"\r"!==d&&"\n"!==d&&(/(?:\s)/.test(d)&&(l=g),a.push(l),$=Math.max($,l));for(var q=[],m=0;m<=f;m++){var D=0;"right"===this._font.align?D=$-a[m]:"center"===this._font.align&&(D=($-a[m])/2),q.push(D)}for(var b=n.length,A=this.tint,T=0;T<b;T++){var k=this._glyphs[T];k?k.texture=n[T].texture:(k=new Db.Sprite(n[T].texture),this._glyphs.push(k)),k.position.x=(n[T].position.x+q[n[T].line])*r,k.position.y=n[T].position.y*r,k.scale.x=k.scale.y=r,k.tint=A,k.parent||this.addChild(k)}for(var I=b;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=$*r,this._textHeight=(i.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var w=0;w<b;w++)this._glyphs[w].x-=this._textWidth*this.anchor.x,this._glyphs[w].y-=this._textHeight*this.anchor.y;this._maxLineHeight=_*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,r){var i={},n=t.getElementsByTagName("info")[0],a=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),o=(0,_c)(s[0].getAttribute("file"),rL.default.RESOLUTION),h={};i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(a.getAttribute("lineHeight"),10)/o,i.chars={},r instanceof Db.Texture&&(r=[r]);for(var u=0;u<s.length;u++){var l=s[u].getAttribute("id"),$=s[u].getAttribute("file");h[l]=r instanceof Array?r[u]:r[$]}for(var f=t.getElementsByTagName("char"),c=0;c<f.length;c++){var g=f[c],p=parseInt(g.getAttribute("id"),10),_=g.getAttribute("page")||0,v=new Db.Rectangle(parseInt(g.getAttribute("x"),10)/o+h[_].frame.x/o,parseInt(g.getAttribute("y"),10)/o+h[_].frame.y/o,parseInt(g.getAttribute("width"),10)/o,parseInt(g.getAttribute("height"),10)/o);i.chars[p]={xOffset:parseInt(g.getAttribute("xoffset"),10)/o,yOffset:parseInt(g.getAttribute("yoffset"),10)/o,xAdvance:parseInt(g.getAttribute("xadvance"),10)/o,kerning:{},texture:new Db.Texture(h[_].baseTexture,v),page:_}}for(var x=t.getElementsByTagName("kerning"),y=0;y<x.length;y++){var O=x[y],d=parseInt(O.getAttribute("first"),10)/o,q=parseInt(O.getAttribute("second"),10)/o,m=parseInt(O.getAttribute("amount"),10)/o;i.chars[q]&&(i.chars[q].kerning[d]=m)}return e.fonts[i.font]=i,i},pL(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(Db.Container),wL=wq;Nk.default=wL,wq.fonts={};var xL,yL,zL,Oa={},AL=!0;Oa.__esModule=AL;var xq=(zL=void 0,yL=Oa.AnimatedSprite=zL,xL=Oa.TilingSprite=yL,Oa.TilingSpriteRenderer=xL);Oa.BitmapText=xq;Object.defineProperty(Oa,"AnimatedSprite",{enumerable:!0,get:function(){return Lg(Kk).default}});Object.defineProperty(Oa,"TilingSprite",{enumerable:!0,get:function(){return Lg(Lk).default}});Object.defineProperty(Oa,"TilingSpriteRenderer",{enumerable:!0,get:function(){return Lg(Mk).default}});function Lg(e){return e&&e.__esModule?e:{default:e}}var md=BL(b),Ok=yq(Na),Pk=yq(xb);function yq(a){return a&&a.__esModule?a:{default:a}}function BL(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}function CL(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var Fa=md.DisplayObject,zq=new md.Matrix;Fa.prototype._cacheAsBitmap=!1,Fa.prototype._cacheData=!1;var DL=function a(){CL(this,a),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Fa.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var e=void 0;a?(this._cacheData||(this._cacheData=new DL),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),Fa.prototype._renderCachedWebGL=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))},Fa.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,a.currentRenderer.flush();var t=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;t.pad(r)}var i=a._activeRenderTarget,n=a.filterManager.filterStack,s=md.RenderTexture.create(0|t.width,0|t.height),h="cacheAsBitmap_"+(0,wb)();this._cacheData.textureCacheId=h,Pk.default.addToCache(s.baseTexture,h),Ok.default.addToCache(s,h);var c=zq;c.tx=-t.x,c.ty=-t.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,a.render(this,s,!0,c,!0),a.bindRenderTarget(i),a.filterManager.filterStack=n,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var o=new md.Sprite(s);o.transform.worldTransform=this.transform.worldTransform,o.anchor.x=-t.x/t.width,o.anchor.y=-t.y/t.height,o.alpha=e,o._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o)}},Fa.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))},Fa.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),t=this.alpha;this.alpha=1;var r=a.context,i=md.RenderTexture.create(0|e.width,0|e.height),n="cacheAsBitmap_"+(0,wb)();this._cacheData.textureCacheId=n,Pk.default.addToCache(i.baseTexture,n),Ok.default.addToCache(i,n);var s=zq;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,i,!0,s,!1),a.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var h=new md.Sprite(i);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h._bounds=this._bounds,h.alpha=t,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},Fa.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},Fa.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Fa.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Pk.default.removeFromCache(this._cacheData.textureCacheId),Ok.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Fa.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1,this.destroy(a)};var Aq=EL(b);function EL(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}Aq.DisplayObject.prototype.name=null,Aq.Container.prototype.getChildByName=function(r){for(var e=0;e<this.children.length;e++)if(this.children[e].name===r)return this.children[e];return null};var Bq=FL(b);function FL(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e.default=r,e}Bq.DisplayObject.prototype.getGlobalPosition=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bq.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};Object.defineProperty(Oa,"BitmapText",{enumerable:!0,get:function(){return Lg(Nk).default}});var Qk={},GL=!0;Qk.__esModule=GL;var HL=IL(b);function IL(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function JL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function KL(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function LL(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var ML=function(e){function r(){return JL(this,r),KL(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}","varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n"))}return LL(r,e),r}(HL.Filter),NL=ML;Qk.default=NL;var Rk={},OL=!0;Rk.__esModule=OL;var PL=function(){function e(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,o,n){return o&&e(r.prototype,o),n&&e(r,n),r}}(),QL=RL(b);function RL(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r.default=e,r}function SL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function TL(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function UL(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var VL=function(e){function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();SL(this,r);var t=TL(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return t.noise=o,t.seed=n,t}return UL(r,e),PL(r,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),r}(QL.Filter),WL=VL;Rk.default=WL;var Sk={},XL=!0;Sk.__esModule=XL;var YL=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),Tk=ZL(b);function ZL(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function $L(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _L(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function aM(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var bM=function(e){function r(t,n){$L(this,r);var a=new Tk.Matrix;t.renderable=!1;var o=_L(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return o.maskSprite=t,o.maskMatrix=a,o.uniforms.mapSampler=t._texture,o.uniforms.filterMatrix=a,o.uniforms.scale={x:1,y:1},null==n&&(n=20),o.scale=new Tk.Point(n,n),o}return aM(r,e),r.prototype.apply=function(e,r,t){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,e.applyFilter(this,r,t)},YL(r,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),r}(Tk.Filter),cM=bM;Sk.default=cM;var Mg={},dM=!0;Mg.__esModule=dM;var eM=gM;Mg.default=eM;var fM=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");function gM(e,r){var t=Math.ceil(e/2),o=fM,a="",d=void 0;d=r?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var $=0;$<e;$++){var i=d.replace("%index%",$);a+=i=i.replace("%sampleIndex%",$-(t-1)+".0"),a+="\n"}return o=(o=o.replace("%blur%",a)).replace("%size%",e)}var Ng={},hM=!0;Ng.__esModule=hM;var iM=lM;Ng.default=iM;var jM={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},kM=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");function lM(e){for(var r=jM[e],$=r.length,a=kM,u="",l=void 0,o=0;o<e;o++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o);l=o,o>=$&&(l=e-o-1),u+=s=s.replace("%value%",r[l]),u+="\n"}return a=(a=a.replace("%blur%",u)).replace("%size%",e)}var Og={},mM=!0;Og.__esModule=mM;var nM=oM;function oM(e){for(var $=e.getParameter(e.MAX_VARYING_VECTORS),r=15;r>$;)r-=2;return r}Og.default=nM;var Pg={},pM=!0;Pg.__esModule=pM;var qM=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),Cq=sM(b),Dq=Uk(Mg),Eq=Uk(Ng),rM=Uk(Og);function Uk(e){return e&&e.__esModule?e:{default:e}}function sM(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function tM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function uM(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function vM(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var wM=function(e){function r(t,a,$,n){tM(this,r),n=n||5;var u=(0,Dq.default)(n,!0),i=(0,Eq.default)(n),o=uM(this,e.call(this,u,i));return o.resolution=$||Cq.settings.RESOLUTION,o._quality=0,o.quality=a||4,o.strength=t||8,o.firstRun=!0,o}return vM(r,e),r.prototype.apply=function(e,r,t,a){if(this.firstRun){var $=e.renderer.gl,n=(0,rM.default)($);this.vertexSrc=(0,Dq.default)(n,!0),this.fragmentSrc=(0,Eq.default)(n),this.firstRun=!1}if(this.uniforms.strength=1/t.size.width*(t.size.width/r.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,t,a);else{for(var u=e.getRenderTarget(!0),i=r,o=u,l=0;l<this.passes-1;l++){e.applyFilter(this,i,o,!0);var s=o;o=i,i=s}e.applyFilter(this,i,t,a),e.returnRenderTarget(u)}},qM(r,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),r}(Cq.Filter),xM=wM;Pg.default=xM;var Qg={},yM=!0;Qg.__esModule=yM;var zM=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),Fq=BM(b),Gq=Vk(Mg),Hq=Vk(Ng),AM=Vk(Og);function Vk(e){return e&&e.__esModule?e:{default:e}}function BM(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function CM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function DM(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function EM(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var FM=function(e){function r(t,a,$,n){CM(this,r),n=n||5;var u=(0,Gq.default)(n,!1),i=(0,Hq.default)(n),c=DM(this,e.call(this,u,i));return c.resolution=$||Fq.settings.RESOLUTION,c._quality=0,c.quality=a||4,c.strength=t||8,c.firstRun=!0,c}return EM(r,e),r.prototype.apply=function(e,r,t,a){if(this.firstRun){var $=e.renderer.gl,n=(0,AM.default)($);this.vertexSrc=(0,Gq.default)(n,!1),this.fragmentSrc=(0,Hq.default)(n),this.firstRun=!1}if(this.uniforms.strength=1/t.size.height*(t.size.height/r.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,t,a);else{for(var u=e.getRenderTarget(!0),i=r,c=u,o=0;o<this.passes-1;o++){e.applyFilter(this,i,c,!0);var l=c;c=i,i=l}e.applyFilter(this,i,t,a),e.returnRenderTarget(u)}},zM(r,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),r}(Fq.Filter),GM=FM;Qg.default=GM;var Wk={},HM=!0;Wk.__esModule=HM;var IM=function(){function r(r,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(e,t,l){return t&&r(e.prototype,t),l&&r(e,l),e}}(),Iq=LM(b),JM=Jq(Pg),KM=Jq(Qg);function Jq(r){return r&&r.__esModule?r:{default:r}}function LM(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function MM(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function NM(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function OM(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var PM=function(r){function e(t,l,i,u){MM(this,e);var n=NM(this,r.call(this));return n.blurXFilter=new JM.default(t,l,i,u),n.blurYFilter=new KM.default(t,l,i,u),n.padding=0,n.resolution=i||Iq.settings.RESOLUTION,n.quality=l||4,n.blur=t||8,n}return OM(e,r),e.prototype.apply=function(r,e,t){var l=r.getRenderTarget(!0);this.blurXFilter.apply(r,e,l,!0),this.blurYFilter.apply(r,l,t,!1),r.returnRenderTarget(l)},IM(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(r){this.blurYFilter._blendMode=r}}]),e}(Iq.Filter),QM=PM;Wk.default=QM;var Xk={},RM=!0;Xk.__esModule=RM;var SM=function(){function t(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(r,e,o){return e&&t(r.prototype,e),o&&t(r,o),r}}(),TM=UM(b);function UM(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}function VM(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function WM(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}function XM(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var Yk=function(t){function r(){VM(this,r);var e=WM(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return XM(r,t),r.prototype._loadMatrix=function(t){var r=t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},r.prototype._multiply=function(t,r,e){return t[0]=r[0]*e[0]+r[1]*e[5]+r[2]*e[10]+r[3]*e[15],t[1]=r[0]*e[1]+r[1]*e[6]+r[2]*e[11]+r[3]*e[16],t[2]=r[0]*e[2]+r[1]*e[7]+r[2]*e[12]+r[3]*e[17],t[3]=r[0]*e[3]+r[1]*e[8]+r[2]*e[13]+r[3]*e[18],t[4]=r[0]*e[4]+r[1]*e[9]+r[2]*e[14]+r[3]*e[19]+r[4],t[5]=r[5]*e[0]+r[6]*e[5]+r[7]*e[10]+r[8]*e[15],t[6]=r[5]*e[1]+r[6]*e[6]+r[7]*e[11]+r[8]*e[16],t[7]=r[5]*e[2]+r[6]*e[7]+r[7]*e[12]+r[8]*e[17],t[8]=r[5]*e[3]+r[6]*e[8]+r[7]*e[13]+r[8]*e[18],t[9]=r[5]*e[4]+r[6]*e[9]+r[7]*e[14]+r[8]*e[19]+r[9],t[10]=r[10]*e[0]+r[11]*e[5]+r[12]*e[10]+r[13]*e[15],t[11]=r[10]*e[1]+r[11]*e[6]+r[12]*e[11]+r[13]*e[16],t[12]=r[10]*e[2]+r[11]*e[7]+r[12]*e[12]+r[13]*e[17],t[13]=r[10]*e[3]+r[11]*e[8]+r[12]*e[13]+r[13]*e[18],t[14]=r[10]*e[4]+r[11]*e[9]+r[12]*e[14]+r[13]*e[19]+r[14],t[15]=r[15]*e[0]+r[16]*e[5]+r[17]*e[10]+r[18]*e[15],t[16]=r[15]*e[1]+r[16]*e[6]+r[17]*e[11]+r[18]*e[16],t[17]=r[15]*e[2]+r[16]*e[7]+r[17]*e[12]+r[18]*e[17],t[18]=r[15]*e[3]+r[16]*e[8]+r[17]*e[13]+r[18]*e[18],t[19]=r[15]*e[4]+r[16]*e[9]+r[17]*e[14]+r[18]*e[19]+r[19],t},r.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},r.prototype.brightness=function(t,r){var e=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.greyscale=function(t,r){var e=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},r.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var e=Math.cos(t),o=Math.sin(t),n=1/3,a=(0,Math.sqrt)(n),i=[e+(1-e)*n,n*(1-e)-a*o,n*(1-e)+a*o,0,0,n*(1-e)+a*o,e+n*(1-e),n*(1-e)-a*o,0,0,n*(1-e)-a*o,n*(1-e)+a*o,e+n*(1-e),0,0,0,0,0,1,0];this._loadMatrix(i,r)},r.prototype.contrast=function(t,r){var e=(t||0)+1,o=-.5*(e-1),n=[e,0,0,0,o,0,e,0,0,o,0,0,e,0,o,0,0,0,1,0];this._loadMatrix(n,r)},r.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments[1],e=2*t/3+1,o=-.5*(e-1),n=[e,o,o,0,0,o,e,o,0,0,o,o,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},r.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},r.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},r.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},r.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},r.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},r.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},r.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},r.prototype.colorTone=function(t,r,e,o,n){var a=((e=e||16770432)>>16&255)/255,i=(e>>8&255)/255,l=(255&e)/255,u=((o=o||3375104)>>16&255)/255,s=(o>>8&255)/255,c=(255&o)/255,p=[.3,.59,.11,0,0,a,i,l,t=t||.2,0,u,s,c,r=r||.15,0,a-u,i-s,l-c,0,0];this._loadMatrix(p,n)},r.prototype.night=function(t,r){var e=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.predator=function(t,r){var e=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},SM(r,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),r}(TM.Filter),YM=Yk;Xk.default=YM,Yk.prototype.grayscale=Yk.prototype.greyscale;var Zk={},ZM=!0;Zk.__esModule=ZM;var $M=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),_M=aN(b);function aN(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function bN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cN(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function dN(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var eN=function(e){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;bN(this,r);var o=cN(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return o.alpha=t,o.glShaderKey="alpha",o}return dN(r,e),$M(r,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),r}(_M.Filter),fN=eN;Zk.default=fN;var Pa={},gN=!0;Pa.__esModule=gN;Object.defineProperty(Pa,"FXAAFilter",{enumerable:!0,get:function(){return Eb(Qk).default}});Object.defineProperty(Pa,"NoiseFilter",{enumerable:!0,get:function(){return Eb(Rk).default}});Object.defineProperty(Pa,"DisplacementFilter",{enumerable:!0,get:function(){return Eb(Sk).default}});Object.defineProperty(Pa,"BlurFilter",{enumerable:!0,get:function(){return Eb(Wk).default}});Object.defineProperty(Pa,"BlurXFilter",{enumerable:!0,get:function(){return Eb(Pg).default}});Object.defineProperty(Pa,"BlurYFilter",{enumerable:!0,get:function(){return Eb(Qg).default}});Object.defineProperty(Pa,"ColorMatrixFilter",{enumerable:!0,get:function(){return Eb(Xk).default}});function Eb(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(Pa,"AlphaFilter",{enumerable:!0,get:function(){return Eb(Zk).default}});var Rg={},hN=!0;Rg.__esModule=hN;var iN=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),jN=kN(b);function kN(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function lN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var mN=function(){function t(){lN(this,t),this.global=new jN.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},iN(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}(),nN=mN;Rg.default=nN;var Sg={},oN=!0;function pN(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}Sg.__esModule=oN;var qN=function(){function t(){pN(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}(),rN=qN;Sg.default=rN;var Tg={},sN=!0;Tg.__esModule=sN;var tN=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function uN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Kq=function(){function t(e){uN(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},tN(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}(),vN=Kq;Tg.default=vN,Kq.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var Ug={},wN=!0;Ug.__esModule=wN;var xN={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ug.default=xN;var $k={},yN=!0;$k.__esModule=yN;var zN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fb=DN(b),Lq=Le(Rg),AN=Le(Sg),_k=Le(Tg),BN=Le(jc),CN=Le(Ug);function Le(t){return t&&t.__esModule?t:{default:t}}function DN(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function EN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FN(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function GN(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Fb.utils.mixins.delayMixin(Fb.DisplayObject.prototype,CN.default);var Vg=1,Wg={target:null,data:{global:null}},al=function(t){function e(n,i){EN(this,e);var o=FN(this,t.call(this));return i=i||{},o.renderer=n,o.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,o.interactionFrequency=i.interactionFrequency||10,o.mouse=new Lq.default,o.mouse.identifier=Vg,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[Vg]=o.mouse,o.interactionDataPool=[],o.eventData=new AN.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new Fb.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return GN(e,t),e.prototype.hitTest=function(t,e){return Wg.target=null,Wg.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(Wg,e,null,!0),Wg.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(Fb.ticker.shared.add(this.update,this,Fb.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(Fb.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&"touch"!==n.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":zN(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e);}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.mapPositionToPoint=function(t,e,n){var i=void 0;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var o=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*o,t.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*o},e.prototype.processInteractive=function(t,e,n,i,o){if(!e||!e.visible)return!1;var r=t.data.global,s=!1,a=o=e.interactive||o,c=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(r,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,c=!1)),a=!1):e._mask&&i&&(e._mask.containsPoint(r)||(i=!1,c=!1)),c&&e.interactiveChildren&&e.children)for(var p=e.children,h=p.length-1;h>=0;h--){var v=p[h],u=this.processInteractive(t,v,n,i,a);if(u){if(!v.parent)continue;a=!1,u&&(t.target&&(i=!1),s=!0)}}return o&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(r)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,r);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===o.pointerType)this.emit("touchstart",s);else if("mouse"===o.pointerType||"pen"===o.pointerType){var a=2===o.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var i=t.data,o=t.data.identifier;if(n)if(e.trackedPointers[o]||(e.trackedPointers[o]=new _k.default(o)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var r=2===i.button;r?e.trackedPointers[o].rightDown=!0:e.trackedPointers[o].leftDown=!0,this.dispatchEvent(e,r?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var i=this.normalizeToPointerData(t),o=i.length,r=t.target!==this.interactionDOMElement?"outside":"",s=0;s<o;s++){var a=i[s],c=this.getInteractionDataForPointerId(a),p=this.configureInteractionEventForDOMEvent(this.eventData,a,c);if(p.data.originalEvent=t,this.processInteractive(p,this.renderer._lastObjectRendered,n,e||!r),this.emit(e?"pointercancel":"pointerup"+r,p),"mouse"===a.pointerType||"pen"===a.pointerType){var h=2===a.button;this.emit(h?"rightup"+r:"mouseup"+r,p)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+r,p),this.releaseInteractionDataForPointerId(a.pointerId,c))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var i=t.data,o=t.data.identifier,r=e.trackedPointers[o],s="touch"===i.pointerType,a="mouse"===i.pointerType||"pen"===i.pointerType,c=!1;if(a){var p=2===i.button,h=_k.default.FLAGS,v=p?h.RIGHT_DOWN:h.LEFT_DOWN,u=void 0!==r&&r.flags&v;n?(this.dispatchEvent(e,p?"rightup":"mouseup",t),u&&(this.dispatchEvent(e,p?"rightclick":"click",t),c=!0)):u&&this.dispatchEvent(e,p?"rightupoutside":"mouseupoutside",t),r&&(p?r.rightDown=!1:r.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),r&&(a&&!c||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),r.over=!1))):r&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),r&&r.none&&delete e.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,r);s.data.originalEvent=t;var a="touch"!==o.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===o.pointerType&&this.emit("touchmove",s),"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var i=t.data,o="touch"===i.pointerType,r="mouse"===i.pointerType||"pen"===i.pointerType;r&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),o&&this.dispatchEvent(e,"touchmove",t),r&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var i=t.data,o=t.data.identifier,r="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[o];n&&!s&&(s=e.trackedPointers[o]=new _k.default(o)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),r&&this.dispatchEvent(e,"mouseover",t)),r&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),r&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[o]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n=void 0;return e===Vg||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:((n=this.interactionDataPool.pop()||new Lq.default).identifier=e,this.activeInteractionData[e]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,i=t.changedTouches.length;n<i;n++){var o=t.changedTouches[n];void 0===o.button&&(o.button=t.touches.length?1:0),void 0===o.buttons&&(o.buttons=t.touches.length?1:0),void 0===o.isPrimary&&(o.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===o.width&&(o.width=o.radiusX||1),void 0===o.height&&(o.height=o.radiusY||1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="touch"),void 0===o.pointerId&&(o.pointerId=o.identifier||0),void 0===o.pressure&&(o.pressure=o.force||.5),o.twist=0,o.tangentialPressure=0,void 0===o.layerX&&(o.layerX=o.offsetX=o.clientX),void 0===o.layerY&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,e.push(o)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=Vg),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(BN.default),HN=al;$k.default=HN,Fb.WebGLRenderer.registerPlugin("interaction",al),Fb.CanvasRenderer.registerPlugin("interaction",al);var sc={},IN=!0;sc.__esModule=IN;Object.defineProperty(sc,"InteractionData",{enumerable:!0,get:function(){return Me(Rg).default}});Object.defineProperty(sc,"InteractionManager",{enumerable:!0,get:function(){return Me($k).default}});Object.defineProperty(sc,"interactiveTarget",{enumerable:!0,get:function(){return Me(Ug).default}});Object.defineProperty(sc,"InteractionTrackingData",{enumerable:!0,get:function(){return Me(Tg).default}});function Me(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(sc,"InteractionEvent",{enumerable:!0,get:function(){return Me(Sg).default}});var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});var Mq=function(){function n(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function Nq(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var Ne=function(){function n(i,t,e){void 0===t&&(t=!1),Nq(this,n),this._fn=i,this._once=t,this._thisArg=e,this._next=this._prev=this._owner=null}return Mq(n,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),n}();function Oq(n,i){return n._head?(n._tail._next=i,i._prev=n._tail,n._tail=i):(n._head=i,n._tail=i),i._owner=n,i}var Pq=function(){function n(){Nq(this,n),this._head=this._tail=void 0}return Mq(n,[{key:"handlers",value:function(){var n=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=this._head;if(n)return!!i;for(var t=[];i;)t.push(i),i=i._next;return t}},{key:"has",value:function(n){if(!(n instanceof Ne))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return n._owner===this}},{key:"dispatch",value:function(){var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,arguments),n=n._next;return!0}},{key:"add",value:function(n){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#add(): First arg must be a Function.");return Oq(this,new Ne(n,!1,i))}},{key:"once",value:function(n){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#once(): First arg must be a Function.");return Oq(this,new Ne(n,!0,i))}},{key:"detach",value:function(n){if(!(n instanceof Ne))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return n._owner!==this?this:(n._prev&&(n._prev._next=n._next),n._next&&(n._next._prev=n._prev),n===this._head?(this._head=n._next,null===n._next&&(this._tail=null)):n===this._tail&&(this._tail=n._prev,this._tail._next=null),n._owner=null,this)}},{key:"detachAll",value:function(){var n=this._head;if(!n)return this;for(this._head=this._tail=null;n;)n._owner=null,n=n._next;return this}}]),n}();Pq.MiniSignalBinding=Ne;var Qq=Pq;Xg.default=Qq,Xg=Qq;var Rq={};Rq=function(r,e){e=e||{};for(var o={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=o.parser[e.strictMode?"strict":"loose"].exec(r),s={},a=14;a--;)s[o.key[a]]=t[a]||"";return s[o.q.name]={},s[o.key[12]].replace(o.q.parser,function(r,e,t){e&&(s[o.q.name][e]=t)}),s};var Oe={},JN=!0;Oe.__esModule=JN;var KN=MN;Oe.eachSeries=KN;var LN=ON;function tc(){}function MN(e,n,r,t){var u=0,o=e.length;!function a(i){i||u===o?r&&r(i):t?setTimeout(function(){n(e[u++],a)},1):n(e[u++],a)}()}function NN(e){return function(){if(null===e)throw new Error("Callback was already called.");var n=e;e=null,n.apply(this,arguments)}}function ON(e,n){if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var r=0,t={_tasks:[],concurrency:n,saturated:tc,unsaturated:tc,buffer:n/4,empty:tc,drain:tc,error:tc,started:!1,paused:!1,push:function(e,n){u(e,!1,n)},kill:function(){r=0,t.drain=tc,t.started=!1,t._tasks=[]},unshift:function(e,n){u(e,!0,n)},process:function(){for(;!t.paused&&r<t.concurrency&&t._tasks.length;){var n=t._tasks.shift();0===t._tasks.length&&t.empty(),(r+=1)===t.concurrency&&t.saturated(),e(n.data,NN(o(n)))}},length:function(){return t._tasks.length},running:function(){return r},idle:function(){return t._tasks.length+r===0},pause:function(){!0!==t.paused&&(t.paused=!0)},resume:function(){if(!1!==t.paused){t.paused=!1;for(var e=1;e<=t.concurrency;e++)t.process()}}};function u(e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(t.started=!0,null==e&&t.idle())setTimeout(function(){return t.drain()},1);else{var u={data:e,callback:"function"==typeof r?r:tc};n?t._tasks.unshift(u):t._tasks.push(u),setTimeout(function(){return t.process()},1)}}function o(e){return function(){r-=1,e.callback.apply(e,arguments),null!=arguments[0]&&t.error(arguments[0],e.data),r<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}}return t}Oe.queue=LN;var Pe={},PN=!0;Pe.__esModule=PN;var QN=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),RN=Sq(Rq),Yg=Sq(Xg);function Sq(e){return e&&e.__esModule?e:{default:e}}function SN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var TN=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),bl=null,UN=0,Tq=200,VN=204,WN=1223,XN=2;function YN(){}var e=function(){function e(t,r,s){if(SN(this,e),"string"!=typeof t||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");s=s||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===s.crossOrigin?"anonymous":s.crossOrigin,this.loadType=s.loadType||this._determineLoadType(),this.xhrType=s.xhrType,this.metadata=s.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=YN,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new Yg.default,this.onProgress=new Yg.default,this.onComplete=new Yg.default,this.onAfterMiddleware=new Yg.default}return e.setExtensionLoadType=function(t,r){Uq(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){Uq(e._xhrTypeMap,t,r)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var r=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(r)},1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:TN&&this.crossOrigin?this._loadXdr():this._loadXhr();}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var s=document.createElement("source");return s.src=t,s.type=r,s},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(cl(e)+" Request failed. Status: "+e.status+", text: \""+e.statusText+"\"")},e.prototype._xhrOnAbort=function(){this.abort(cl(this.xhr)+" Request was aborted by the user.")},e.prototype._xdrOnTimeout=function(){this.abort(cl(this.xhr)+" Request timed out.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",s=void 0===t.status?Tq:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(r=t.responseText),s===UN&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?s=Tq:s===WN&&(s=VN),(s/100|0)===XN){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(a){return void this.abort("Error trying to parse loaded json: "+a)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=e.TYPE.XML}catch(a){return void this.abort("Error trying to parse loaded xml: "+a)}else this.data=t.response||r;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,bl||(bl=document.createElement("a")),bl.href=e;var r=!(e=(0,RN.default)(bl.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,s=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&s===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var s=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(s>-1?s:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain";}},QN(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}(),ZN=e;function Uq(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function cl(e){return e.toString().replace("object ","")}Pe.default=ZN,e.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},e.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},e.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},e.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var $N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_N=function(){function e(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,i,t){return i&&e(r.prototype,i),t&&e(r,t),r}}(),Qe=el(Xg),aO=el(Rq),dl=cO(Oe),bO=el(Pe);function cO(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r.default=e,r}function el(e){return e&&e.__esModule?e:{default:e}}function dO(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var eO=100,fO=/(#[\w-]+)?$/,gO=function(){function e(){var r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;dO(this,e),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,i){return r._loadResource(e,i)},this._queue=dl.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Qe.default,this.onError=new Qe.default,this.onLoad=new Qe.default,this.onStart=new Qe.default,this.onComplete=new Qe.default}return e.prototype.add=function(e,r,i,t){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"===(void 0===e?"undefined":$N(e))&&(t=r||e.callback||e.onComplete,i=e,r=e.url,e=e.name||e.key||e.url),"string"!=typeof r&&(t=i,i=r,r=e),"string"!=typeof r)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(t=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error("Resource named \""+e+"\" already exists.");if(r=this._prepareUrl(r),this.resources[e]=new bO.default(e,r,i),"function"==typeof t&&this.resources[e].onAfterMiddleware.once(t),this.loading){for(var s=i.parentResource,n=[],a=0;a<s.children.length;++a)s.children[a].isComplete||n.push(s.children[a]);var u=s.progressChunk*(n.length+1)/(n.length+2);s.children.push(this.resources[e]),s.progressChunk=u;for(var l=0;l<n.length;++l)n[l].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},e.prototype._prepareUrl=function(e){var r=(0,aO.default)(e,{strictMode:!0}),i=void 0;if(i=r.protocol||!r.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var t=fO.exec(i)[0];-1!==(i=i.substr(0,i.length-t.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=t}return i},e.prototype._loadResource=function(e,r){var i=this;e._dequeue=r,dl.eachSeries(this._beforeMiddleware,function(r,t){r.call(i,e,function(){t(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=eO,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),dl.eachSeries(this._afterMiddleware,function(i,t){i.call(r,e,t)},function(){e.onAfterMiddleware.dispatch(e),r.progress+=e.progressChunk,r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},_N(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}(),hO=gO;var Zg={},iO=!0;Zg.__esModule=iO;var jO=lO;Zg.encodeBinary=jO;var kO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function lO(e){for(var r="",a=0;a<e.length;){for(var o=[0,0,0],$=[0,0,0,0],d=0;d<o.length;++d)a<e.length?o[d]=255&e.charCodeAt(a++):o[d]=0;switch($[0]=o[0]>>2,$[1]=(3&o[0])<<4|o[1]>>4,$[2]=(15&o[1])<<2|o[2]>>6,$[3]=63&o[2],a-(e.length-1)){case 2:$[3]=64,$[2]=64;break;case 1:$[3]=64;}for(var t=0;t<$.length;++t)r+=kO.charAt($[t])}return r}var nd={},Re=hO,mO=Pe.default;Re.Resource=mO,Re.async=Oe,Re.base64=Zg,(nd=Re).default=Re;var Se={},nO=!0;Se.__esModule=nO;var Vq=Wq;Se.parse=Vq;var oO=function(){return function(e,a){if(e.data&&e.type===nd.Resource.TYPE.XML){if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var r=e.isDataUrl?"":pO.dirname(e.url);e.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),(r=r.replace(this.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var t=e.data.getElementsByTagName("page"),$={},c=function(r){$[r.metadata.pageFile]=r.texture,Object.keys($).length===t.length&&(Wq(e,$),a())},s=0;s<t.length;++s){var g=t[s].getAttribute("file"),i=r+g,l=!1;for(var o in this.resources){var n=this.resources[o];if(n.url===i){n.metadata.pageFile=g,n.texture?c(n):n.onAfterMiddleware.add(c),l=!0;break}}if(!l){var p={crossOrigin:e.crossOrigin,loadType:nd.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:g},e.metadata.imageMetadata),parentResource:e};this.add(i,p,c)}}}else a();}else a()}};Se.default=oO;var pO=qO(Ea);function qO(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a.default=e,a}function Wq(e,a){e.bitmapFont=xq.registerFont(e.data,a)}var Te={},rO=!0;Te.__esModule=rO;var sO=function(){return function(e,r){var a=e.name+"_image";if(e.data&&e.type===nd.Resource.TYPE.JSON&&e.data.frames&&!this.resources[a]){var u={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},$=Yq(e,this.baseUrl);this.add(a,$,u,function(a){if(a.error)r(a.error);else{var u=new b.Spritesheet(a.texture.baseTexture,e.data,e.url);u.parse(function(){e.spritesheet=u,e.textures=u.textures,r()})}})}else r()}};Te.default=sO;var Xq=Yq;Te.getResourcePath=Xq;var tO=uO(nc);function uO(e){return e&&e.__esModule?e:{default:e}}function Yq(e,r){return e.isDataUrl?e.data.meta.image:tO.default.resolve(e.url.replace(r,""),e.data.meta.image)}var $g={},vO=!0;$g.__esModule=vO;var wO=function(){return function(e,r){e.data&&e.type===nd.Resource.TYPE.IMAGE&&(e.texture=xO.default.fromLoader(e.data,e.url,e.name)),r()}};$g.default=wO;var xO=yO(Na);function yO(e){return e&&e.__esModule?e:{default:e}}var zO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AO=CO;var fl=Zq(Pe),BO=Zq(Zg);function Zq(e){return e&&e.__esModule?e:{default:e}}var $q=window.URL||window.webkitURL;function CO(){return function(e,r){if(e.data){if(e.xhr&&e.xhrType===fl.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var a=($=$q.createObjectURL(e.data),e.blob=e.data,e.data=new Image,e.data.src=$,e.type=fl.default.TYPE.IMAGE,e.data.onload=function(){$q.revokeObjectURL($),e.data.onload=null,r()},{v:void 0});if("object"===(void 0===a?"undefined":zO(a)))return a.v}}else{var o=e.xhr.getResponseHeader("content-type");if(o&&0===o.indexOf("image"))return e.data=new Image,e.data.src="data:"+o+";base64,"+BO.default.encodeBinary(e.xhr.responseText),e.type=fl.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,r()})}var $;r()}else r()}}var gl={},DO=!0;gl.__esModule=DO;var _q=Ue(nd),hl=Ue(jc),EO=Ue($g),FO=Ue(Te),GO=Ue(Se);function Ue(e){return e&&e.__esModule?e:{default:e}}function HO(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function IO(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function JO(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var il=function(e){function r(t,$){HO(this,r);var a=IO(this,e.call(this,t,$));hl.default.call(a);for(var o=0;o<r._pixiMiddleware.length;++o)a.use(r._pixiMiddleware[o]());return a.onStart.add(function(e){return a.emit("start",e)}),a.onProgress.add(function(e,r){return a.emit("progress",e,r)}),a.onError.add(function(e,r,t){return a.emit("error",e,r,t)}),a.onLoad.add(function(e,r){return a.emit("load",e,r)}),a.onComplete.add(function(e,r){return a.emit("complete",e,r)}),a}return JO(r,e),r.addPixiMiddleware=function(e){r._pixiMiddleware.push(e)},r.prototype.destroy=function(){this.removeAllListeners(),this.reset()},r}(_q.default),KO=il;for(var ar in gl.default=KO,hl.default.prototype)il.prototype[ar]=hl.default.prototype[ar];il._pixiMiddleware=[AO,EO.default,FO.default,GO.default];var br=_q.default.Resource;br.setExtensionXhrType("fnt",br.XHR_RESPONSE_TYPE.DOCUMENT);var LO,MO,NO,OO,PO,QO,S={},RO=!0;S.__esModule=RO;var cr=(dr=void 0,QO=S.Loader=dr,PO=S.bitmapFontParser=QO,OO=S.parseBitmapFontData=PO,NO=S.spritesheetParser=OO,MO=S.getResourcePath=NO,LO=S.textureParser=MO,S.Resource=LO);S.shared=cr;Object.defineProperty(S,"bitmapFontParser",{enumerable:!0,get:function(){return Ve(Se).default}}),Object.defineProperty(S,"parseBitmapFontData",{enumerable:!0,get:function(){return Vq}});Object.defineProperty(S,"spritesheetParser",{enumerable:!0,get:function(){return Ve(Te).default}}),Object.defineProperty(S,"getResourcePath",{enumerable:!0,get:function(){return Xq}});Object.defineProperty(S,"textureParser",{enumerable:!0,get:function(){return Ve($g).default}});Object.defineProperty(S,"Resource",{enumerable:!0,get:function(){return nd.Resource}});var SO=Ve(Fg),jl=Ve(gl);function Ve(e){return e&&e.__esModule?e:{default:e}}var dr=jl.default;S.Loader=dr;var kl=new jl.default;kl.destroy=function(){},cr=kl,S.shared=cr;var We=SO.default.prototype;We._loader=null,Object.defineProperty(We,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?kl:new jl.default}return this._loader}}),We._parentDestroy=We.destroy,We.destroy=function(e,r){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e,r)};var uc={},TO=!0;uc.__esModule=TO;var UO=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),Gb=XO(b),VO=WO(Na);function WO(e){return e&&e.__esModule?e:{default:e}}function XO(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function YO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZO(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ll=new Gb.Point,er=new Gb.Polygon,fr=function(e){function t(r,o,s,n,i){YO(this,t);var a=ZO(this,e.call(this));return a._texture=r||VO.default.EMPTY,a.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),a.vertices=o||new Float32Array([0,0,100,0,100,100,0,100]),a.indices=n||new Uint16Array([0,1,3,2]),a.dirty=0,a.indexDirty=0,a.vertexDirty=0,a.autoUpdate=!0,a.blendMode=Gb.BLEND_MODES.NORMAL,a.canvasPadding=Gb.settings.MESH_CANVAS_PADDING,a.drawMode=i||t.DRAW_MODES.TRIANGLE_MESH,a.shader=null,a.tintRgb=new Float32Array([1,1,1]),a._glDatas={},a._uvTransform=new Gb.TextureMatrix(a._texture),a.uploadUvTransform=!1,a.pluginName="mesh",a}return $O(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ll);for(var r=this.vertices,o=er.points,s=this.indices,n=this.indices.length,i=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<n;a+=i){var u=2*s[a],$=2*s[a+1],l=2*s[a+2];if(o[0]=r[u],o[1]=r[u+1],o[2]=r[$],o[3]=r[$+1],o[4]=r[l],o[5]=r[l+1],er.contains(ll.x,ll.y))return!0}return!1},t.prototype.destroy=function(t){for(var r in this._glDatas){var o=this._glDatas[r];o.destroy?o.destroy():(o.vertexBuffer&&(o.vertexBuffer.destroy(),o.vertexBuffer=null),o.indexBuffer&&(o.indexBuffer.destroy(),o.indexBuffer=null),o.uvBuffer&&(o.uvBuffer.destroy(),o.uvBuffer=null),o.vao&&(o.vao.destroy(),o.vao=null))}this._glDatas=null,e.prototype.destroy.call(this,t)},UO(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return Gb.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=Gb.utils.hex2rgb(e,this.tintRgb)}}]),t}(Gb.Container),_O=fr;uc.default=_O,fr.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1};var ml={},aP=!0;ml.__esModule=aP;var od=cP(b),_g=gr(ea),bP=gr(uc);function gr(r){return r&&r.__esModule?r:{default:r}}function cP(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function dP(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function eP(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function fP(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var gP=od.Matrix.IDENTITY,hr=function(r){function e(t){dP(this,e);var a=eP(this,r.call(this,t));return a.shader=null,a}return fP(e,r),e.prototype.onContextChange=function(){var r=this.renderer.gl;this.shader=new od.Shader(r,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(r){var e=this.renderer,t=e.gl,a=r._texture;if(a.valid){var o=r._glDatas[e.CONTEXT_UID];o||(e.bindVao(null),(o={shader:this.shader,vertexBuffer:_g.default.GLBuffer.createVertexBuffer(t,r.vertices,t.STREAM_DRAW),uvBuffer:_g.default.GLBuffer.createVertexBuffer(t,r.uvs,t.STREAM_DRAW),indexBuffer:_g.default.GLBuffer.createIndexBuffer(t,r.indices,t.STATIC_DRAW),vao:null,dirty:r.dirty,indexDirty:r.indexDirty,vertexDirty:r.vertexDirty}).vao=new _g.default.VertexArrayObject(t).addIndex(o.indexBuffer).addAttribute(o.vertexBuffer,o.shader.attributes.aVertexPosition,t.FLOAT,!1,8,0).addAttribute(o.uvBuffer,o.shader.attributes.aTextureCoord,t.FLOAT,!1,8,0),r._glDatas[e.CONTEXT_UID]=o),e.bindVao(o.vao),r.dirty!==o.dirty&&(o.dirty=r.dirty,o.uvBuffer.upload(r.uvs)),r.indexDirty!==o.indexDirty&&(o.indexDirty=r.indexDirty,o.indexBuffer.upload(r.indices)),r.vertexDirty!==o.vertexDirty&&(o.vertexDirty=r.vertexDirty,o.vertexBuffer.upload(r.vertices)),e.bindShader(o.shader),o.shader.uniforms.uSampler=e.bindTexture(a),e.state.setBlendMode(od.utils.correctBlendMode(r.blendMode,a.baseTexture.premultipliedAlpha)),o.shader.uniforms.uTransform&&(r.uploadUvTransform?o.shader.uniforms.uTransform=r._uvTransform.mapCoord.toArray(!0):o.shader.uniforms.uTransform=gP.toArray(!0)),o.shader.uniforms.translationMatrix=r.worldTransform.toArray(!0),o.shader.uniforms.uColor=od.utils.premultiplyRgba(r.tintRgb,r.worldAlpha,o.shader.uniforms.uColor,a.baseTexture.premultipliedAlpha);var i=r.drawMode===bP.default.DRAW_MODES.TRIANGLE_MESH?t.TRIANGLE_STRIP:t.TRIANGLES;o.vao.draw(i,r.indices.length,0)}},e}(od.ObjectRenderer),hP=hr;ml.default=hP,od.WebGLRenderer.registerPlugin("mesh",hr);var nl={},iP=!0;nl.__esModule=iP;var jP=mP(b),kP=lP(uc);function lP(e){return e&&e.__esModule?e:{default:e}}function mP(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function nP(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var ir=function(){function e(r){nP(this,e),this.renderer=r}return e.prototype.render=function(e){var r=this.renderer,t=r.context,a=e.worldTransform,o=r.resolution;r.roundPixels?t.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o|0,a.ty*o|0):t.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o),r.context.globalAlpha=e.worldAlpha,r.setBlendMode(e.blendMode),e.drawMode===kP.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var r=e.vertices.length/2,t=0;t<r-2;t++){var a=2*t;this._renderDrawTriangle(e,a,a+2,a+4)}},e.prototype._renderTriangles=function(e){for(var r=e.indices,t=r.length,a=0;a<t;a+=3){var o=2*r[a],n=2*r[a+1],i=2*r[a+2];this._renderDrawTriangle(e,o,n,i)}},e.prototype._renderDrawTriangle=function(e,r,t,a){var o=this.renderer.context,n=e.uvs,i=e.vertices,s=e._texture;if(s.valid){var d=s.baseTexture,l=d.source,$=d.width,h=d.height,q=void 0,v=void 0,u=void 0,c=void 0,x=void 0,f=void 0;if(e.uploadUvTransform){var p=e._uvTransform.mapCoord;q=(n[r]*p.a+n[r+1]*p.c+p.tx)*d.width,v=(n[t]*p.a+n[t+1]*p.c+p.tx)*d.width,u=(n[a]*p.a+n[a+1]*p.c+p.tx)*d.width,c=(n[r]*p.b+n[r+1]*p.d+p.ty)*d.height,x=(n[t]*p.b+n[t+1]*p.d+p.ty)*d.height,f=(n[a]*p.b+n[a+1]*p.d+p.ty)*d.height}else q=n[r]*d.width,v=n[t]*d.width,u=n[a]*d.width,c=n[r+1]*d.height,x=n[t+1]*d.height,f=n[a+1]*d.height;var _=i[r],L=i[t],M=i[a],g=i[r+1],T=i[t+1],w=i[a+1],y=e.canvasPadding/this.renderer.resolution;if(y>0){var b=y/Math.abs(e.worldTransform.a),m=y/Math.abs(e.worldTransform.d),R=(_+L+M)/3,P=(g+T+w)/3,C=_-R,D=g-P,S=Math.sqrt(C*C+D*D);_=R+C/S*(S+b),g=P+D/S*(S+m),D=T-P,L=R+(C=L-R)/(S=Math.sqrt(C*C+D*D))*(S+b),T=P+D/S*(S+m),D=w-P,M=R+(C=M-R)/(S=Math.sqrt(C*C+D*D))*(S+b),w=P+D/S*(S+m)}o.save(),o.beginPath(),o.moveTo(_,g),o.lineTo(L,T),o.lineTo(M,w),o.closePath(),o.clip();var A=q*x+c*u+v*f-x*u-c*v-q*f,E=_*x+c*M+L*f-x*M-c*L-_*f,F=q*L+_*u+v*M-L*u-_*v-q*M,O=q*x*M+c*L*u+_*v*f-_*x*u-c*v*M-q*L*f,W=g*x+c*w+T*f-x*w-c*T-g*f,k=q*T+g*u+v*w-T*u-g*v-q*w,B=q*x*w+c*T*u+g*v*f-g*x*u-c*v*w-q*T*f;o.transform(E/A,W/A,F/A,k/A,O/A,B/A),o.drawImage(l,0,0,$*d.resolution,h*d.resolution,0,0,$,h),o.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var r=this.renderer.context,t=e.vertices,a=t.length/2;r.beginPath();for(var o=1;o<a-2;++o){var n=2*o,i=t[n],s=t[n+1],d=t[n+2],l=t[n+3],$=t[n+4],h=t[n+5];r.moveTo(i,s),r.lineTo(d,l),r.lineTo($,h)}r.fillStyle="#FF0000",r.fill(),r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}(),oP=ir;nl.default=oP,jP.CanvasRenderer.registerPlugin("mesh",ir);var ah={},pP=!0;ah.__esModule=pP;var ol=qP(uc);function qP(e){return e&&e.__esModule?e:{default:e}}function rP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sP(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function tP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var uP=function(e){function t(r,s,i){rP(this,t);var o=sP(this,e.call(this,r));return o._ready=!0,o.verticesX=s||10,o.verticesY=i||10,o.drawMode=ol.default.DRAW_MODES.TRIANGLES,o.refresh(),o}return tP(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],s=[],i=[],o=this.verticesX-1,a=this.verticesY-1,$=e.width/o,n=e.height/a,u=0;u<t;u++){var h=u%this.verticesX,j=u/this.verticesX|0;r.push(h*$,j*n),s.push(h/o,j/a)}for(var c=o*a,l=0;l<c;l++){var p=l%o,v=l/o|0,f=v*this.verticesX+p,_=v*this.verticesX+p+1,N=(v+1)*this.verticesX+p,K=(v+1)*this.verticesX+p+1;i.push(f,_,N),i.push(_,K,N)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(s),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){ol.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(ol.default),vP=uP;ah.default=vP;var pl={},wP=!0;pl.__esModule=wP;var xP=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),yP=zP(ah);function zP(t){return t&&t.__esModule?t:{default:t}}function AP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BP(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function CP(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bh=10,DP=function(t){function e(i,r,h,o,s){AP(this,e);var n=BP(this,t.call(this,i,4,4));return n._origWidth=i.orig.width,n._origHeight=i.orig.height,n._width=n._origWidth,n._height=n._origHeight,n._leftWidth=void 0!==r?r:bh,n._rightWidth=void 0!==o?o:bh,n._topHeight=void 0!==h?h:bh,n._bottomHeight=void 0!==s?s:bh,n.refresh(!0),n}return CP(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var i=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);var h=this._texture.baseTexture,o=h.source,s=h.width*h.resolution,n=h.height*h.resolution;this.drawSegment(e,o,s,n,0,1,10,11),this.drawSegment(e,o,s,n,2,3,12,13),this.drawSegment(e,o,s,n,4,5,14,15),this.drawSegment(e,o,s,n,8,9,18,19),this.drawSegment(e,o,s,n,10,11,20,21),this.drawSegment(e,o,s,n,12,13,22,23),this.drawSegment(e,o,s,n,16,17,26,27),this.drawSegment(e,o,s,n,18,19,28,29),this.drawSegment(e,o,s,n,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,r,h,o,s,n){var a=this.uvs,g=this.vertices,_=(a[s]-a[h])*i,u=(a[n]-a[o])*r,$=g[s]-g[h],l=g[n]-g[o];_<1&&(_=1),u<1&&(u=1),$<1&&($=1),l<1&&(l=1),t.drawImage(e,a[h]*i,a[o]*r,_,u,g[h],g[o],$,l)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,h=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=h*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-h*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},xP(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(yP.default),EP=DP;pl.default=EP;var ql={},FP=!0;ql.__esModule=FP;var GP=HP(uc);function HP(e){return e&&e.__esModule?e:{default:e}}function IP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JP(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function KP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var LP=function(e){function t(r,n){IP(this,t);var o=JP(this,e.call(this,r));return o.points=n,o.vertices=new Float32Array(4*n.length),o.uvs=new Float32Array(4*n.length),o.colors=new Float32Array(2*n.length),o.indices=new Uint16Array(2*n.length),o.autoUpdate=!0,o.refresh(),o}return KP(t,e),t.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,n=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var o=e.length,s=1;s<o;s++){var i=4*s,a=s/(o-1);t[i]=a,t[i+1]=0,t[i+2]=a,t[i+3]=1,n[i=2*s]=1,n[i+1]=1,r[i=2*s]=i,r[i+1]=i+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],r=void 0,n=0,o=0,s=this.vertices,i=e.length,a=0;a<i;a++){var p=e[a],h=4*a;o=-((r=a<e.length-1?e[a+1]:p).x-t.x),n=r.y-t.y;var l=10*(1-a/(i-1));l>1&&(l=1);var $=Math.sqrt(n*n+o*o),u=this._texture.height/2;n/=$,o/=$,n*=u,o*=u,s[h]=p.x+n,s[h+1]=p.y+o,s[h+2]=p.x-n,s[h+3]=p.y-o,t=p}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(GP.default),MP=LP;ql.default=MP;var Hb={},NP=!0;Hb.__esModule=NP;Object.defineProperty(Hb,"Mesh",{enumerable:!0,get:function(){return pd(uc).default}});Object.defineProperty(Hb,"MeshRenderer",{enumerable:!0,get:function(){return pd(ml).default}});Object.defineProperty(Hb,"CanvasMeshRenderer",{enumerable:!0,get:function(){return pd(nl).default}});Object.defineProperty(Hb,"Plane",{enumerable:!0,get:function(){return pd(ah).default}});Object.defineProperty(Hb,"NineSlicePlane",{enumerable:!0,get:function(){return pd(pl).default}});function pd(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(Hb,"Rope",{enumerable:!0,get:function(){return pd(ql).default}});var rl={},OP=!0;rl.__esModule=OP;var PP=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),jr=QP(b);function QP(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function RP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SP(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function TP(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var UP=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,i=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];RP(this,e);var n=SP(this,t.call(this));return o>16384&&(o=16384),o>r&&(o=r),n._properties=[!1,!0,!1,!1,!1],n._maxSize=r,n._batchSize=o,n._glBuffers={},n._bufferUpdateIDs=[],n._updateID=0,n.interactiveChildren=!1,n.blendMode=jr.BLEND_MODES.NORMAL,n.autoResize=s,n.roundPixels=!0,n.baseTexture=null,n.setProperties(i),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}return TP(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,i=!0,o=0,s=0,n=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var u=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)i&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),i=!1),o=h.anchor.x*(-u.width*h.scale.x)+h.position.x+.5,s=h.anchor.y*(-u.height*h.scale.y)+h.position.y+.5,n=u.width*h.scale.x,a=u.height*h.scale.y;else{i||(i=!0),h.displayObjectUpdateTransform();var p=h.worldTransform;t.roundPixels?e.setTransform(p.a,p.b,p.c,p.d,p.tx*t.resolution|0,p.ty*t.resolution|0):e.setTransform(p.a,p.b,p.c,p.d,p.tx*t.resolution,p.ty*t.resolution),o=h.anchor.x*-u.width+.5,s=h.anchor.y*-u.height+.5,n=u.width,a=u.height}var c=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,u.x*c,u.y*c,u.width*c,u.height*c,o*t.resolution,s*t.resolution,n*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},PP(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,ha)(t,this.tintRgb)}}]),e}(jr.Container),VP=UP;rl.default=VP;var sl={},WP=!0;sl.__esModule=WP;var XP=YP(rc);function YP(e){return e&&e.__esModule?e:{default:e}}function ZP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var aQ=function(e){function t(o){return ZP(this,t),$P(this,e.call(this,o,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return _P(t,e),t}(XP.default),bQ=aQ;sl.default=bQ;var tl={},cQ=!0;tl.__esModule=cQ;var ch=kr(ea),dQ=kr(Ce);function kr(t){return t&&t.__esModule?t:{default:t}}function eQ(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var fQ=function(){function t(i,e,a,r){eQ(this,t),this.gl=i,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<e.length;++s){var n=e[s];n={attribute:n.attribute,size:n.size,uploadFunction:n.uploadFunction,unsignedByte:n.unsignedByte,offset:n.offset},a[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,i=0;this.indices=(0,dQ.default)(this.size),this.indexBuffer=ch.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var e=0;e<this.dynamicProperties.length;++e){var a=this.dynamicProperties[e];a.offset=i,i+=a.size,this.dynamicStride+=a.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=ch.default.GLBuffer.createVertexBuffer(t,r,t.STREAM_DRAW);var s=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var u=this.staticProperties[n];u.offset=s,s+=u.size,this.staticStride+=u.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=ch.default.GLBuffer.createVertexBuffer(t,c,t.STATIC_DRAW),this.vao=new ch.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var f=0;f<this.dynamicProperties.length;++f){var o=this.dynamicProperties[f];o.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,o.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*o.offset):this.vao.addAttribute(this.dynamicBuffer,o.attribute,t.FLOAT,!1,4*this.dynamicStride,4*o.offset)}for(var d=0;d<this.staticProperties.length;++d){var h=this.staticProperties[d];h.unsignedByte?this.vao.addAttribute(this.staticBuffer,h.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*h.offset):this.vao.addAttribute(this.staticBuffer,h.attribute,t.FLOAT,!1,4*this.staticStride,4*h.offset)}},t.prototype.uploadDynamic=function(t,i,e){for(var a=0;a<this.dynamicProperties.length;a++){var r=this.dynamicProperties[a];r.uploadFunction(t,i,e,r.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,i,e){for(var a=0;a<this.staticProperties.length;a++){var r=this.staticProperties[a];r.uploadFunction(t,i,e,r.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}(),gQ=fQ;tl.default=gQ;var ul={},hQ=!0;ul.__esModule=hQ;var Xe=jQ(b),iQ=mr(sl),lr=mr(tl);function mr(e){return e&&e.__esModule?e:{default:e}}function jQ(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function kQ(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function lQ(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function mQ(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var nr=function(e){function r(t){kQ(this,r);var a=lQ(this,e.call(this,t));return a.shader=null,a.indexBuffer=null,a.properties=null,a.tempMatrix=new Xe.Matrix,a.CONTEXT_UID=0,a}return mQ(r,e),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new iQ.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},r.prototype.start=function(){this.renderer.bindShader(this.shader)},r.prototype.render=function(e){var r=e.children,t=e._maxSize,a=e._batchSize,i=this.renderer,o=r.length;if(0!==o){o>t&&(o=t);var n=e._glBuffers[i.CONTEXT_UID];n||(n=e._glBuffers[i.CONTEXT_UID]=this.generateBuffers(e));var u=r[0]._texture.baseTexture;this.renderer.setBlendMode(Xe.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha));var s=i.gl,l=e.worldTransform.copy(this.tempMatrix);l.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=Xe.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(u);for(var $=!1,p=0,d=0;p<o;p+=a,d+=1){var c=o-p;if(c>a&&(c=a),d>=n.length){if(!e.autoResize)break;n.push(this._generateOneMoreBuffer(e))}var f=n[d];f.uploadDynamic(r,p,c);var h=e._bufferUpdateIDs[d]||0;($=$||f._updateID<h)&&(f._updateID=e._updateID,f.uploadStatic(r,p,c)),i.bindVao(f.vao),f.vao.draw(s.TRIANGLES,6*c)}}},r.prototype.generateBuffers=function(e){for(var r=this.renderer.gl,t=[],a=e._maxSize,i=e._batchSize,o=e._properties,n=0;n<a;n+=i)t.push(new lr.default(r,this.properties,o,i));return t},r.prototype._generateOneMoreBuffer=function(e){var r=this.renderer.gl,t=e._batchSize,a=e._properties;return new lr.default(r,this.properties,a,t)},r.prototype.uploadVertices=function(e,r,t,a,i,o){for(var n=0,u=0,s=0,l=0,$=0;$<t;++$){var p=e[r+$],d=p._texture,c=p.scale.x,f=p.scale.y,h=d.trim,y=d.orig;h?(n=(u=h.x-p.anchor.x*y.width)+h.width,s=(l=h.y-p.anchor.y*y.height)+h.height):(n=y.width*(1-p.anchor.x),u=y.width*-p.anchor.x,s=y.height*(1-p.anchor.y),l=y.height*-p.anchor.y),a[o]=u*c,a[o+1]=l*f,a[o+i]=n*c,a[o+i+1]=l*f,a[o+2*i]=n*c,a[o+2*i+1]=s*f,a[o+3*i]=u*c,a[o+3*i+1]=s*f,o+=4*i}},r.prototype.uploadPosition=function(e,r,t,a,i,o){for(var n=0;n<t;n++){var u=e[r+n].position;a[o]=u.x,a[o+1]=u.y,a[o+i]=u.x,a[o+i+1]=u.y,a[o+2*i]=u.x,a[o+2*i+1]=u.y,a[o+3*i]=u.x,a[o+3*i+1]=u.y,o+=4*i}},r.prototype.uploadRotation=function(e,r,t,a,i,o){for(var n=0;n<t;n++){var u=e[r+n].rotation;a[o]=u,a[o+i]=u,a[o+2*i]=u,a[o+3*i]=u,o+=4*i}},r.prototype.uploadUvs=function(e,r,t,a,i,o){for(var n=0;n<t;++n){var u=e[r+n]._texture._uvs;u?(a[o]=u.x0,a[o+1]=u.y0,a[o+i]=u.x1,a[o+i+1]=u.y1,a[o+2*i]=u.x2,a[o+2*i+1]=u.y2,a[o+3*i]=u.x3,a[o+3*i+1]=u.y3,o+=4*i):(a[o]=0,a[o+1]=0,a[o+i]=0,a[o+i+1]=0,a[o+2*i]=0,a[o+2*i+1]=0,a[o+3*i]=0,a[o+3*i+1]=0,o+=4*i)}},r.prototype.uploadTint=function(e,r,t,a,i,o){for(var n=0;n<t;++n){var u=e[r+n],s=u._texture.baseTexture.premultipliedAlpha,l=u.alpha,$=l<1&&s?(0,nj)(u._tintRGB,l):u._tintRGB+(255*l<<24);a[o]=$,a[o+i]=$,a[o+2*i]=$,a[o+3*i]=$,o+=4*i}},r.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},r}(Xe.ObjectRenderer),nQ=nr;ul.default=nQ,Xe.WebGLRenderer.registerPlugin("particle",nr);var dh={},oQ=!0;dh.__esModule=oQ;Object.defineProperty(dh,"ParticleContainer",{enumerable:!0,get:function(){return or(rl).default}});function or(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(dh,"ParticleRenderer",{enumerable:!0,get:function(){return or(ul).default}});var eh={},pQ=!0;function qQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}eh.__esModule=pQ;var rQ=function(){function t(e){qQ(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-->0},t}(),sQ=rQ;eh.default=sQ;var Ye={},tQ=!0;Ye.__esModule=tQ;var ia=wQ(b),uQ=vQ(eh);function vQ(e){return e&&e.__esModule?e:{default:e}}function wQ(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function xQ(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var vl=ia.ticker.shared;ia.settings.UPLOADS_PER_FRAME=4;var yQ=function(){function e(r){var t=this;xQ(this,e),this.limiter=new uQ.default(ia.settings.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(FQ),this.registerFindHook(GQ),this.registerFindHook(AQ),this.registerFindHook(BQ),this.registerFindHook(CQ),this.registerUploadHook(DQ),this.registerUploadHook(EQ)}return e.prototype.upload=function(e,r){"function"==typeof e&&(r=e,e=null),e&&this.add(e),this.queue.length?(r&&this.completes.push(r),this.ticking||(this.ticking=!0,vl.addOnce(this.tick,this,ia.UPDATE_PRIORITY.UTILITY))):r&&r()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed)for(var t=0,i=this.uploadHooks.length;t<i;t++)if(this.uploadHooks[t](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}r||this.queue.shift()}if(this.queue.length)vl.addOnce(this.tick,this,ia.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var $=0,a=o.length;$<a;$++)o[$]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var r=0,t=this.addHooks.length;r<t&&!this.addHooks[r](e,this.queue);r++);if(e instanceof ia.Container)for(var i=e.children.length-1;i>=0;i--)this.add(e.children[i]);return this},e.prototype.destroy=function(){this.ticking&&vl.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}(),zQ=yQ;function AQ(e,r){var t=!1;if(e&&e._textures&&e._textures.length)for(var i=0;i<e._textures.length;i++)if(e._textures[i]instanceof ia.Texture){var o=e._textures[i].baseTexture;-1===r.indexOf(o)&&(r.push(o),t=!0)}return t}function BQ(e,r){return e instanceof ia.BaseTexture&&(-1===r.indexOf(e)&&r.push(e),!0)}function CQ(e,r){if(e._texture&&e._texture instanceof ia.Texture){var t=e._texture.baseTexture;return-1===r.indexOf(t)&&r.push(t),!0}return!1}function DQ(e,r){return r instanceof ia.Text&&(r.updateText(!0),!0)}function EQ(e,r){if(r instanceof ia.TextStyle){var t=r.toFontString();return ia.TextMetrics.measureFont(t),!0}return!1}function FQ(e,r){if(e instanceof ia.Text){-1===r.indexOf(e.style)&&r.push(e.style),-1===r.indexOf(e)&&r.push(e);var t=e._texture.baseTexture;return-1===r.indexOf(t)&&r.push(t),!0}return!1}function GQ(e,r){return e instanceof ia.TextStyle&&(-1===r.indexOf(e)&&r.push(e),!0)}Ye.default=zQ;var wl={},HQ=!0;wl.__esModule=HQ;var fh=KQ(b),IQ=JQ(Ye);function JQ(e){return e&&e.__esModule?e:{default:e}}function KQ(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}function LQ(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function MQ(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function NQ(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var pr=function(e){function r(a){LQ(this,r);var $=MQ(this,e.call(this,a));return $.uploadHookHelper=$.renderer,$.registerFindHook(RQ),$.registerUploadHook(PQ),$.registerUploadHook(QQ),$}return NQ(r,e),r}(IQ.default),OQ=pr;function PQ(e,r){return r instanceof fh.BaseTexture&&(r._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(r),!0)}function QQ(e,r){return r instanceof fh.Graphics&&((r.dirty||r.clearDirty||!r._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(r),!0)}function RQ(e,r){return e instanceof fh.Graphics&&(r.push(e),!0)}wl.default=OQ,fh.WebGLRenderer.registerPlugin("prepare",pr);var xl={},SQ=!0;xl.__esModule=SQ;var qr=VQ(b),TQ=UQ(Ye);function UQ(e){return e&&e.__esModule?e:{default:e}}function VQ(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}function WQ(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function XQ(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function YQ(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var rr=16,sr=function(e){function r(a){WQ(this,r);var t=XQ(this,e.call(this,a));return t.uploadHookHelper=t,t.canvas=document.createElement("canvas"),t.canvas.width=rr,t.canvas.height=rr,t.ctx=t.canvas.getContext("2d"),t.registerUploadHook($Q),t}return YQ(r,e),r.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},r}(TQ.default),ZQ=sr;function $Q(e,r){if(r instanceof qr.BaseTexture){var a=r.source,t=0===a.width?e.canvas.width:Math.min(e.canvas.width,a.width),i=0===a.height?e.canvas.height:Math.min(e.canvas.height,a.height);return e.ctx.drawImage(a,0,0,t,i,0,0,e.canvas.width,e.canvas.height),!0}return!1}xl.default=ZQ,qr.CanvasRenderer.registerPlugin("prepare",sr);var yl={},_Q=!0;function aR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}yl.__esModule=_Q;var bR=function(){function t(e){aR(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),cR=bR;yl.default=cR;var vc={},dR=!0;vc.__esModule=dR;Object.defineProperty(vc,"webgl",{enumerable:!0,get:function(){return Ze(wl).default}});Object.defineProperty(vc,"canvas",{enumerable:!0,get:function(){return Ze(xl).default}});Object.defineProperty(vc,"BasePrepare",{enumerable:!0,get:function(){return Ze(Ye).default}});Object.defineProperty(vc,"CountLimiter",{enumerable:!0,get:function(){return Ze(eh).default}});function Ze(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(vc,"TimeLimiter",{enumerable:!0,get:function(){return Ze(yl).default}});var j={},eR=!0;j.__esModule=eR;var tr=(xr=void 0,yr=j.accessibility=xr,zr=j.extract=yr,Ar=j.extras=zr,Br=j.filters=Ar,Cr=j.interaction=Br,Dr=j.loaders=Cr,Er=j.mesh=Dr,Fr=j.particles=Er,j.prepare=Fr);j.loader=tr;var ur={};Object.keys(ur).forEach(function($){"default"!==$&&"__esModule"!==$&&Object.defineProperty(j,$,{enumerable:!0,get:function(){return ur[$]}})});Object.keys(b).forEach(function($){"default"!==$&&"__esModule"!==$&&Object.defineProperty(j,$,{enumerable:!0,get:function(){return b[$]}})});var vr=nR(Fk),fR=ib(Ig),gR=ib(Jg),hR=ib(Oa),iR=ib(Pa),jR=ib(sc),wr=ib(S),kR=ib(Hb),lR=ib(dh),mR=ib(vc);function ib($){if($&&$.__esModule)return $;var r={};if(null!=$)for(var e in $)Object.prototype.hasOwnProperty.call($,e)&&(r[e]=$[e]);return r.default=$,r}function nR($){return $&&$.__esModule?$:{default:$}}b.utils.mixins.performMixins();var oR=wr.shared||null,xr=fR;j.accessibility=xr;var yr=gR;j.extract=yr;var zr=hR;j.extras=zr;var Ar=iR;j.filters=Ar;var Br=jR;j.interaction=Br;var Cr=wr;j.loaders=Cr;var Dr=kR;j.mesh=Dr;var Er=lR;j.particles=Er;var Fr=mR;j.prepare=Fr,tr=oR,j.loader=tr,"function"==typeof vr.default&&(0,vr.default)(j),B.PIXI=j;j.settings.SCALE_MODE=j.SCALE_MODES.NEAREST;var qd=new j.Container;function Gr(){po=innerWidth,qo=innerHeight,ce&&ce.resize(po,qo)}function pR(){tR(),void 0===ce&&(Gr(),ce=new j.WebGLRenderer(po,qo),document.body.appendChild(ce.view))}var qR=function($){return qd.addChild($)};var rR=function($){return qd.removeChild($)};var sR=function(){return ce.render(qd)};var tR=function(){for(;qd.children[0];)qd.removeChild(qd.children[0])},zl={init:pR,addChild:qR,removeChild:rR,onResize:Gr,render:sR};var uR=function(){var exports=this,module={exports:this};exports.__esModule=!0;var TEXT="\nClick to add a new vertex to each polyline\n\nPress Z to undo last vertex\nPress Q / P to add / delete a layer\nPress H to export all layers\n\nPress S to set the scale of the preview / exported geometry\n",DIVISION=12,SIZE=400,scaleX=.25,scaleY=.25,layerPoints=[],editor,preview;function getRelativeXY(e){var r=e.data.originalEvent,t=r.x,i=r.y,o=DIVISION/SIZE,a=1/o,n=t-editor.x,d=i-editor.y;return{x:n,y:d,gridX:Math.min(Math.round(n*o)*a,SIZE),gridY:Math.min(Math.round(d*o)*a,SIZE)}}function onClick(e){var r=editor.children,t=getRelativeXY(e),i=t.gridX,o=t.gridY,a=r[r.length-1],n=layerPoints[layerPoints.length-1];n.push(i),n.push(o),updateLayer(a,n)}function onMouseMove(e){var r=getRelativeXY(e),t=r.gridX,i=r.gridY;editor.children[1].x=t,editor.children[1].y=i}function deleteLayer(){layerPoints.length>1?(editor.removeChild(editor.children[editor.children.length-1]),layerPoints.pop()):layerPoints[0]=[],updatePreview()}function exportLayers(){var e=layerPoints.length>1?JSON.stringify(layerPoints):JSON.stringify(layerPoints[0]);prompt("Exported geometry",e)}var setScale=function setScale(){var userScaleX=prompt("Scale X coordinates\nYou may also use fractions here, e.g. \"0.25\" or \"1/4\"",scaleX.toString())||"1/4",userScaleY=prompt("Scale Y coordinates\nYou may also use fractions here, e.g. \"0.25\" or \"1/4\"",scaleY.toString())||"1/4";scaleX=parseFloat(eval(userScaleX)),scaleY=parseFloat(eval(userScaleY))};function onKeyPress(e){var r;switch(e.which){case 115:setScale(),updatePreview();break;case 104:exportLayers();break;case 112:deleteLayer();break;case 113:addLayer();break;case 122:var t=editor.children;(r=layerPoints[layerPoints.length-1]).pop(),r.pop(),updateLayer(t[t.length-1],r);}}function create(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(editor=new j.Graphics).lineStyle(1,16777215,.25),editor.beginFill(0,0),editor.drawRect(0,0,SIZE,SIZE),editor.endFill(),editor.x=e,editor.y=r,editor.interactive=!0,editor.hitArea=new j.Rectangle(0,0,SIZE,SIZE),editor.buttonMode=!0,editor.click=onClick,editor.mousemove=onMouseMove,drawGridLines(),drawHelpLabel(),addSnapCursor(),addPreviewWindow(),addLayer(),addEventListener("keypress",onKeyPress),editor}function addPreviewWindow(){(preview=new j.Graphics).x=SIZE+20,preview.y=0,editor.addChild(preview)}function addSnapCursor(){var e=new j.Graphics;e.lineStyle(1,16711680,1),e.drawRect(-2,-2,4,4),editor.addChild(e)}function addLayer(){editor.addChild(new j.Graphics),layerPoints.push([])}function drawGridLines(){var e,r=SIZE/DIVISION;for(e=0;e<SIZE;e+=r)e>>0==SIZE>>1?editor.lineStyle(1,16777215,.5):editor.lineStyle(1,16777215,.25),editor.moveTo(e,0),editor.lineTo(e,SIZE);for(e=0;e<SIZE;e+=r)e>>0==SIZE>>1?editor.lineStyle(1,16777215,.5):editor.lineStyle(1,16777215,.25),editor.moveTo(0,e),editor.lineTo(SIZE,e)}function drawHelpLabel(){var e=new j.Text(TEXT,{fontFamily:"arial",fontSize:12,fill:16777215});e.x=0,e.y=editor.height,editor.addChild(e)}function updateLayer(e,r){e.clear(),e.lineStyle(1,16711680,1),e.drawPolygon(r),updatePreview()}function updatePreview(){preview.clear(),preview.lineStyle(1,65280,1);var e=function(e,r){return r%2?scaleX*e:scaleY*e};layerPoints.forEach(function(r){return preview.drawPolygon(r.map(e))})}function destroy(){removeEventListener("keypress",onKeyPress)}var $Y$export$default={create:create,destroy:destroy};return exports.default=$Y$export$default,module.exports}.call({});var vR=60,Hr=1e3/vR;function Ir(){var $=Date.now(),r=$-nx;r>Hr&&(zl.render(),nx=$-r%Hr),mx=requestAnimationFrame(Ir)}function wR(){var $Y$$interop$default=Uf(uR);zl.init(),zl.addChild($Y$$interop$default.d.create(20,20)),nx=Date.now(),Ir()}function xR(){cancelAnimationFrame(mx)}var yR={start:wR,stop:xR};var zR,AR;var Jr=function($,r){return Math.round(Kr($,r))},Kr=function($,r){return $+Math.random()*(r-$)},BR=function($){return $[Jr(0,$.length-1)]},q={int:Jr,float:Kr,arrayElement:BR};var rd=[];function Lr($){var r=$.color,a=$.size,e=$.x,c=$.y,t=new j.Graphics;return t.beginFill(r),t.drawRect(0,0,a,a),t.lineWidth=a,t.endFill(),t.x=e,t.y=c,t}var Ib={BRIGHT:{speed:.01,count:8,size:2,color:11184810,x:0,y:0},DIM:{speed:.3,count:20,size:1,color:15790320,x:0,y:0}},sd=innerWidth>>1,td=innerHeight>>1;function Mr(){Al=null}function CR(){var $;if(0===rd.length){for($=0;$<Ib.DIM.count;$++)rd.push(Lr(Ib.DIM));for($=0;$<Ib.BRIGHT.count;$++)rd.push(Lr(Ib.BRIGHT))}else Mr();return rd}function DR($){sd=innerWidth>>1,td=innerHeight>>1,rd.forEach(function(r){r.x=$.x+q.float(-sd,sd),r.y=$.y+q.float(-td,td)})}function ER($,r,a,e){1===e.lineWidth?($*=Ib.DIM.speed,r*=Ib.DIM.speed):($*=Ib.BRIGHT.speed,r*=Ib.BRIGHT.speed),e.x+=$,e.y+=r,e.x<a.x-sd?e.x=a.x+sd:e.x>a.x+sd&&(e.x=a.x-sd),e.y<a.y-td?e.y=a.y+td:e.y>a.y+td&&(e.y=a.y-td)}var Al=null;function FR($){if($){var r=$.x,a=$.y,e=0,c=0;Al?(e=r-Al.x,c=a-Al.y):DR($),rd.forEach(ER.bind(null,e,c,$)),Al={x:r,y:a}}else Al=null}var ua={init:CR,process:FR,onResize:Mr};var $e,gh,GR,hh,HR;function Bl($){return KR($)||JR($)||IR()}function IR(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function JR($){if(Symbol.iterator in Object($)||"[object Arguments]"===Object.prototype.toString.call($))return Array.from($)}function KR($){if(Array.isArray($)){for(var r=0,e=new Array($.length);r<$.length;r++)e[r]=$[r];return e}}var LR={attackTurretPositions:[],attackTarget:null,attackWeapon:"Cannon",isAttacking:!1},MR={componentFlag:"canAttack",DEFAULTS:LR};var NR={AUTO_TARGET_ENEMY_TIME:1500,autoTargetSearchDist2:16e4,autoTargetLastSearchTime:0};function OR(t){t.attackTarget=d.getNearestEnemyUnit(t,t.autoTargetSearchDist2),t.isAttacking=Boolean(t.attackTarget)}function PR(t){if(t.canAttack){var a=Date.now();a-t.autoTargetLastSearchTime>=t.AUTO_TARGET_ENEMY_TIME&&(OR(t),t.autoTargetLastSearchTime=a)}}var QR={componentFlag:"canAutoTargetEnemy",DEFAULTS:NR,process:PR};function RR($){yh.init(),Cs.init(),ls.init(),ms.init(),ff.init(),Qs.init(),Bh.init(),Mb.init($),dm.init(),am.init(),Ss.init()}function SR(){ff.update(),Bh.update(),Cs.update(),yh.update(),ls.update(),ms.update(),Qs.update(),Mb.update(),Ss.update()}function TR(){yh.onResize(),Mb.onResize(),ff.onResize(),Bh.onResize(),dm.onResize(),am.onResize()}function UR($,e){s($)&&Bh.displayText(e)}var P;var ih,VR;function WR(t,$){return ZR(t)||YR(t,$)||XR()}function XR(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function YR(t,$){var a=[],e=!0,r=!1,n=void 0;try{for(var u,o=t[Symbol.iterator]();!(e=(u=o.next()).done)&&(a.push(u.value),!$||a.length!==$);e=!0);}catch(A){r=!0,n=A}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return a}function ZR(t){if(Array.isArray(t))return t}var ud=.1,jh=1e-6,$R=function(t){var $=t.left,a=t.right,e=(t.up,t.analogAngle),r=t.button0,n=t.button1,u=t.button2,o=t.button3;return{TURN_LEFT:Boolean($),TURN_RIGHT:Boolean(a),ACCELERATE:Boolean(o),SPECIAL:Boolean(n),SHOOT:Boolean(r),PAUSE:Boolean(u),FOCUS_NEXT_ENEMY:!1,TARGET_NEXT_ENEMY:!1,TOGGLE_RADAR:!1,NAV_POINT_SET:!1,NAV_POINT_CLEAR:!1,analogAngle:e}},Nr={left:!1,right:!1,up:!1,down:!1,analogAngle:0,button0:!1,button1:!1,button2:!1,button3:!1};function _R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=navigator.getGamepads()[t];if($){var a,e=WR($.axes,2),r=e[0],n=e[1],u=Math.abs(r)>ud,o=Math.abs(n)>ud;(u||o)&&(u||(r=r>0?jh:-jh),o||(n=n>0?jh:-jh),a=Math.atan2(n,r)),Nr={left:$.axes[0]<-ud,right:$.axes[0]>ud,up:$.axes[1]<-ud,down:$.axes[1]>ud,analogAngle:a,button0:$.buttons[0].pressed,button1:$.buttons[1].pressed,button2:$.buttons[2].pressed,button3:$.buttons[3].pressed}}return $R(Nr)}var aS=function(){return Object.assign({},Nr)},bS={getEvents:_R,getInputState:aS};var Or={27:"escape",32:"spacebar",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:"0",37:"left_arrow",38:"up_arrow",39:"right_arrow",40:"down_arrow",69:"e",80:"p",70:"f",77:"m",84:"t",88:"x",81:"q",190:".",13:"enter",8:"backspace"},x={left_arrow:!1,right_arrow:!1,up_arrow:!1,down_arrow:!1,p:!1,q:!1,e:!1,f:!1,m:!1,t:!1,x:!1,".":!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,0:!1,spacebar:!1,backspace:!1,enter:!1};function cS(t){var $=t.which;x[Or[$]]=!1}function dS(t){var $=t.which;x[Or[$]]=!0}addEventListener("keydown",dS),addEventListener("keyup",cS);var eS=function(){return{PAUSE:Boolean(x.p),TURN_LEFT:Boolean(x.left_arrow),TURN_RIGHT:Boolean(x.right_arrow),ACCELERATE:Boolean(x.up_arrow),SHOOT:Boolean(x.f),FOCUS_NEXT_ENEMY:Boolean(x["."]),TARGET_NEXT_ENEMY:Boolean(x.t),TOGGLE_RADAR:Boolean(x.m),NAV_POINT_SET:Boolean(x.enter),NAV_POINT_CLEAR:Boolean(x.backspace),SPECIAL:Boolean(x.spacebar),OPTION1:Boolean(x[1]),OPTION2:Boolean(x[2]),OPTION3:Boolean(x[3]),OPTION4:Boolean(x[4]),OPTION5:Boolean(x[5]),OPTION6:Boolean(x[6]),OPTION7:Boolean(x[7]),OPTION8:Boolean(x[8]),OPTION9:Boolean(x[9]),OPTION0:Boolean(x[0])}};var fS=function(){return Object.assign({},x)},gS={getEvents:eS,getInputState:fS};var vd;function hS(e,r){return kS(e)||jS(e,r)||iS()}function iS(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function jS(e,r){var t=[],a=!0,$=!1,l=void 0;try{for(var o,n=e[Symbol.iterator]();!(a=(o=n.next()).done)&&(t.push(o.value),!r||t.length!==r);a=!0);}catch(i){$=!0,l=i}finally{try{a||null==n.return||n.return()}finally{if($)throw l}}return t}function kS(e){if(Array.isArray(e))return e}!function(e){e.AudioMuted="mute",e.GamePadInUse="gamepad",e.SkipTitleScreen="game",e.GeometryEditorInUse="editor",e.TestSectorInUse="test"}(vd||(vd={}));var Pr={};location.search.slice(1).split("&").forEach(function(e){var r=hS(e.split("="),2),t=r[0],a=r[1];Pr[t]=a});var _e=function(e){return Pr.hasOwnProperty(e)},af={isAudioMuted:_e(vd.AudioMuted),isGamePadInUse:_e(vd.GamePadInUse),shouldSkipTitleScreen:_e(vd.SkipTitleScreen),isTestSectorInUse:_e(vd.TestSectorInUse),isGeometryEditorInUse:_e(vd.GeometryEditorInUse)};(function(e){e[e.Keyboard=0]="Keyboard",e[e.GamePad=1]="GamePad"})(ih||(ih={})),VR=af.isGamePadInUse?ih.GamePad:ih.Keyboard;var lS=function(){return VR===ih.Keyboard?gS:bS},Qr={getDevice:lS};var Cl,mS=function($){return Cl=$},nS=function(){return Cl?{x:Cl.x,y:Cl.y}:{x:0,y:0}},jb={getFocus:nS,setFocus:mS};var oS=0,pS=16,Rr=1e3/pS;function Sr($,t){var r=Date.now(),o=r-oS;o>Rr&&(t.up||t.up_arrow?$.prevButton():t.down||t.down_arrow?$.nextButton():(t.f||t.button0||t.button1||t.button2||t.button3)&&$.clickButton(),oS=r-o%Rr)}function Tr(t,a,e){var r=t.isDockedPlanet,$=t.isDockedSpacePort,E=t.attackTarget,p=r||$;if(!p){if("number"==typeof a.analogAngle?t.rotation=a.analogAngle:a.TURN_LEFT?t.rotation-=kh:a.TURN_RIGHT&&(t.rotation+=kh),t.isAttacking=a.SHOOT,a.NAV_POINT_SET&&!e.NAV_POINT_SET){var o={x:t.x,y:t.y};yc.setNavPoint(o)}else a.NAV_POINT_CLEAR&&!e.NAV_POINT_CLEAR&&yc.clear();a.TARGET_NEXT_ENEMY&&!e.TARGET_NEXT_ENEMY&&(t.attackTarget=OS(t))}a.ACCELERATE?(p&&(r?t.undockPlanet():$&&t.undockSpacePort(),t.accelerate(El),oh.reset()),t.flameOn(),t.accelerate(bf)):t.flameOff(),E&&E.hp<=0&&(t.attackTarget=null,oh.reset())}var qS;var wc=function(){var t,o,e={exports:this};return t=this,o=function(){var t={};function o(t,o){this.x=t||0,this.y=o||0}function e(t,e){this.pos=t||new o,this.r=e||0}function r(t,e){this.pos=t||new o,this.angle=0,this.offset=new o,this.setPoints(e||[])}function n(t,e,r){this.pos=t||new o,this.w=e||0,this.h=r||0}function s(){this.a=null,this.b=null,this.overlapN=new o,this.overlapV=new o,this.clear()}t.Vector=o,t.V=o,o.prototype.copy=o.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},o.prototype.clone=o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.perp=o.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},o.prototype.rotate=o.prototype.rotate=function(t){var o=this.x,e=this.y;return this.x=o*Math.cos(t)-e*Math.sin(t),this.y=o*Math.sin(t)+e*Math.cos(t),this},o.prototype.reverse=o.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},o.prototype.normalize=o.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},o.prototype.add=o.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},o.prototype.sub=o.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},o.prototype.scale=o.prototype.scale=function(t,o){return this.x*=t,this.y*=o||t,this},o.prototype.project=o.prototype.project=function(t){var o=this.dot(t)/t.len2();return this.x=o*t.x,this.y=o*t.y,this},o.prototype.projectN=o.prototype.projectN=function(t){var o=this.dot(t);return this.x=o*t.x,this.y=o*t.y,this},o.prototype.reflect=o.prototype.reflect=function(t){var o=this.x,e=this.y;return this.project(t).scale(2),this.x-=o,this.y-=e,this},o.prototype.reflectN=o.prototype.reflectN=function(t){var o=this.x,e=this.y;return this.projectN(t).scale(2),this.x-=o,this.y-=e,this},o.prototype.dot=o.prototype.dot=function(t){return this.x*t.x+this.y*t.y},o.prototype.len2=o.prototype.len2=function(){return this.dot(this)},o.prototype.len=o.prototype.len=function(){return Math.sqrt(this.len2())},t.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var t=this.r;return new n(this.pos.clone().sub(new o(t,t)),2*t,2*t).toPolygon()},t.Polygon=r,r.prototype.setPoints=r.prototype.setPoints=function(t){if(!this.points||this.points.length!==t.length){var e,r=this.calcPoints=[],n=this.edges=[],s=this.normals=[];for(e=0;e<t.length;e++)r.push(new o),n.push(new o),s.push(new o)}return this.points=t,this._recalc(),this},r.prototype.setAngle=r.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},r.prototype.setOffset=r.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},r.prototype.rotate=r.prototype.rotate=function(t){for(var o=this.points,e=o.length,r=0;r<e;r++)o[r].rotate(t);return this._recalc(),this},r.prototype.translate=r.prototype.translate=function(t,o){for(var e=this.points,r=e.length,n=0;n<r;n++)e[n].x+=t,e[n].y+=o;return this._recalc(),this},r.prototype._recalc=function(){var t,o=this.calcPoints,e=this.edges,r=this.normals,n=this.points,s=this.offset,p=this.angle,i=n.length;for(t=0;t<i;t++){var h=o[t].copy(n[t]);h.x+=s.x,h.y+=s.y,0!==p&&h.rotate(p)}for(t=0;t<i;t++){var a=o[t],u=t<i-1?o[t+1]:o[0],l=e[t].copy(u).sub(a);r[t].copy(l).perp().normalize()}return this},r.prototype.getAABB=r.prototype.getAABB=function(){for(var t=this.calcPoints,e=t.length,r=t[0].x,s=t[0].y,p=t[0].x,i=t[0].y,h=1;h<e;h++){var a=t[h];a.x<r?r=a.x:a.x>p&&(p=a.x),a.y<s?s=a.y:a.y>i&&(i=a.y)}return new n(this.pos.clone().add(new o(r,s)),p-r,i-s).toPolygon()},t.Box=n,n.prototype.toPolygon=n.prototype.toPolygon=function(){var t=this.pos,e=this.w,n=this.h;return new r(new o(t.x,t.y),[new o,new o(e,0),new o(e,n),new o(0,n)])},t.Response=s,s.prototype.clear=s.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var p=[],i=0;i<10;i++)p.push(new o);var h=[];for(i=0;i<5;i++)h.push([]);var a=new s,u=new n(new o(),1e-6,1e-6).toPolygon();function l(t,o,e){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=t.length,p=0;p<s;p++){var i=t[p].dot(o);i<r&&(r=i),i>n&&(n=i)}e[0]=r,e[1]=n}function c(t,o,e,r,n,s){var i=h.pop(),a=h.pop(),u=p.pop().copy(o).sub(t),c=u.dot(n);if(l(e,n,i),l(r,n,a),a[0]+=c,a[1]+=c,i[0]>a[1]||a[0]>i[1])return p.push(u),h.push(i),h.push(a),!0;if(s){var y,f,v=0;if(i[0]<a[0]){if(s.aInB=!1,i[1]<a[1])v=i[1]-a[0],s.bInA=!1;else v=(y=i[1]-a[0])<(f=a[1]-i[0])?y:-f;}else if(s.bInA=!1,i[1]>a[1])v=i[0]-a[1],s.aInB=!1;else v=(y=i[1]-a[0])<(f=a[1]-i[0])?y:-f;var x=Math.abs(v);x<s.overlap&&(s.overlap=x,s.overlapN.copy(n),v<0&&s.overlapN.reverse())}return p.push(u),h.push(i),h.push(a),!1}function y(t,o){var e=t.len2(),r=o.dot(t);return r<0?f:r>e?x:v}t.isSeparatingAxis=c;var f=-1,v=0,x=1;function g(t,o,e){for(var r=p.pop().copy(o.pos).sub(t.pos),n=o.r,s=n*n,i=t.calcPoints,h=i.length,a=p.pop(),u=p.pop(),l=0;l<h;l++){var c=l===h-1?0:l+1,v=0===l?h-1:l-1,g=0,b=null;a.copy(t.edges[l]),u.copy(r).sub(i[l]),e&&u.len2()>s&&(e.aInB=!1);var A=y(a,u);if(A===f){a.copy(t.edges[v]);var w=p.pop().copy(r).sub(i[v]);if((A=y(a,w))===x){if((P=u.len())>n)return p.push(r),p.push(a),p.push(u),p.push(w),!1;e&&(e.bInA=!1,b=u.normalize(),g=n-P)}p.push(w)}else if(A===x){if(a.copy(t.edges[c]),u.copy(r).sub(i[c]),(A=y(a,u))===f){if((P=u.len())>n)return p.push(r),p.push(a),p.push(u),!1;e&&(e.bInA=!1,b=u.normalize(),g=n-P)}}else{var d=a.perp().normalize(),P=u.dot(d),I=Math.abs(P);if(P>0&&I>n)return p.push(r),p.push(d),p.push(u),!1;e&&(b=d,g=n-P,(P>=0||g<2*n)&&(e.bInA=!1))}b&&e&&Math.abs(g)<Math.abs(e.overlap)&&(e.overlap=g,e.overlapN.copy(b))}return e&&(e.a=t,e.b=o,e.overlapV.copy(e.overlapN).scale(e.overlap)),p.push(r),p.push(a),p.push(u),!0}function b(t,o,e){for(var r=t.calcPoints,n=r.length,s=o.calcPoints,p=s.length,i=0;i<n;i++)if(c(t.pos,o.pos,r,s,t.normals[i],e))return!1;for(i=0;i<p;i++)if(c(t.pos,o.pos,r,s,o.normals[i],e))return!1;return e&&(e.a=t,e.b=o,e.overlapV.copy(e.overlapN).scale(e.overlap)),!0}return t.pointInCircle=function(t,o){var e=p.pop().copy(t).sub(o.pos),r=o.r*o.r,n=e.len2();return p.push(e),n<=r},t.pointInPolygon=function(t,o){u.pos.copy(t),a.clear();var e=b(u,o,a);return e&&(e=a.aInB),e},t.testCircleCircle=function(t,o,e){var r=p.pop().copy(o.pos).sub(t.pos),n=t.r+o.r,s=n*n,i=r.len2();if(i>s)return p.push(r),!1;if(e){var h=Math.sqrt(i);e.a=t,e.b=o,e.overlap=n-h,e.overlapN.copy(r.normalize()),e.overlapV.copy(r).scale(e.overlap),e.aInB=t.r<=o.r&&h<=o.r-t.r,e.bInA=o.r<=t.r&&h<=t.r-o.r}return p.push(r),!0},t.testPolygonCircle=g,t.testCirclePolygon=function(t,o,e){var r=g(o,t,e);if(r&&e){var n=e.a,s=e.aInB;e.overlapN.reverse(),e.overlapV.reverse(),e.a=e.b,e.b=n,e.aInB=e.bInA,e.bInA=s}return r},t.testPolygonPolygon=b,t},"object"==typeof this?e.exports=o():t.SAT=o(),e.exports}.call({});var Dl=function(e,t){return new wc.Vector(e,t)},Ur=2*Math.PI;function rS(e,t){return{set x(e){e<0?e=0:e>va&&(e=va),this.graphics.x=e,this.collider.pos.x=e},set y(e){e<0?e=0:e>va&&(e=va),this.graphics.y=e,this.collider.pos.y=e},set rotation(e){e>Math.PI?e-=Ur:e<-Math.PI&&(e+=Ur),this.collider instanceof wc.Circle||(this.collider.setAngle(e),this.graphics.rotation=e)},get x(){return this.graphics.x},get y(){return this.graphics.y},get rotation(){return this.graphics.rotation},graphics:e,collider:t}}function Vr(e,t){var r=e.x,$=e.y,o=t.geo.collider,i=Dl(r,$);return o instanceof wc.Circle?0!==o.r&&wc.pointInCircle(i,o):wc.pointInPolygon(i,o)}var a,J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,$=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return e.map(function(e,i){return i%2==0?e*$+t:e*o+r})};function h(e){var t,r=e.lineStyle,$=e.fill,o=e.type,i=e.path,y=e.collisionPath,n=e.radius,a=e.collisionRadius,l=e.x,p=e.y,s=new j.Graphics;r&&s.lineStyle(r.width,r.color,r.alpha),$?s.beginFill($.color,$.alpha):s.beginFill(0,0),s.x=l||0,s.y=p||0;var c=Dl(s.x,s.y);if("circle"===o)s.drawCircle(0,0,n),t=new wc.Circle(c,a||n);else{for(var J=[],U=y||i,h=0;h<U.length;h+=2)J.push(Dl(U[h],U[h+1]));s.drawPolygon(i),t=new wc.Polygon(c,J)}return s.endFill(),rS(s,t)}J,a,function(e){e.Circle="circle",e.Polygon="polygon"}(a||(qS=a={},a,qS)),h;var va=32768;var kh=.05;var bf=.2;var El=1;var wd={d:[0,0,266.6666666666667,0,400,100,400,300,266.6666666666667,400,0,400,0,0],f:[400,0,0,0,0,400,0,200,300,200],g:[400,0,100,0,0,100,0,300,100,400,300,400,400,300,400,166.66666666666669,200,166.66666666666669],h:[0,0,0,400,0,200,400,200,400,0,400,400],j:[400,0,400,333.33333333333337,333.33333333333337,400,66.66666666666667,400,0,333.33333333333337],k:[0,0,0,400,0,200,266.6666666666667,200,400,0,266.6666666666667,200,400,400],n:[0,400,0,0,400,400,400,0],p:[0,400,0,0,300,0,400,100,300,200,0,200],q:[66.66666666666667,0,0,66.66666666666667,0,266.6666666666667,66.66666666666667,333.33333333333337,300,333.33333333333337,400,400,200,266.6666666666667,300,333.33333333333337,366.6666666666667,266.6666666666667,366.6666666666667,66.66666666666667,300,0,66.66666666666667,0],r:[0,400,0,0,300,0,400,100,300,200,0,200,300,200,400,266.6666666666667,400,400],u:[400,0,400,400,66.66666666666667,400,0,333.33333333333337,0,0],v:[0,0,0,133.33333333333334,200,400,400,133.33333333333334,400,0],w:[0,0,0,400,200,166.66666666666669,400,400,400,0],x:[0,0,0,100,66.66666666666667,200,200,200,66.66666666666667,200,0,300,0,400,0,300,66.66666666666667,200,333.33333333333337,200,400,100,400,0,400,100,333.33333333333337,200,400,300,400,400],y:[0,0,0,200,133.33333333333334,266.6666666666667,266.6666666666667,266.6666666666667,400,200,400,0,400,200,266.6666666666667,266.6666666666667,200,266.6666666666667,200,400],z:[0,0,400,0,400,33.333333333333336,0,300,0,400,400,400],c:[400,100,300,0,100,0,0,100,0,300,100,400,300,400,400,300],e:[400,0,0,0,0,200,300,200,0,200,0,400,400,400],l:[0,0,0,400,400,400],s:[400,0,100,0,0,100,100,200,300,200,400,300,300,400,0,400],t:[0,0,200,0,200,400,200,0,400,0],i:[0,0,400,0,200,0,200,400,0,400,400,400],a:[0,400,0,166.66666666666669,200,0,400,166.66666666666669,400,400,400,200,0,200],b:[400,100,300,0,0,0,0,400,300,400,400,300,300,200,0,200,300,200,400,100],m:[0,400,0,0,200,266.6666666666667,400,0,400,400],o:[0,100,100,0,300,0,400,100,400,300,300,400,100,400,0,300,0,100],symbol:[[0,233.33333333333334,0,166.66666666666669,33.333333333333336,66.66666666666667,66.66666666666667,33.333333333333336,166.66666666666669,0,233.33333333333334,0,333.33333333333337,33.333333333333336,366.6666666666667,66.66666666666667,400,166.66666666666669,400,233.33333333333334,366.6666666666667,333.33333333333337,333.33333333333337,366.6666666666667,233.33333333333334,400,166.66666666666669,400,66.66666666666667,366.6666666666667,33.333333333333336,333.33333333333337,0,233.33333333333334,400,166.66666666666669],[33.333333333333336,66.66666666666667,366.6666666666667,333.33333333333337]]};var xd=.02,Wr=J([200,0,0,200,200,400,400,200,200,0],0,0,xd,xd);var sS=J([0,0,100,100,300,100,400,0,300,100,300,300,400,400,300,300,100,300,0,400,100,300,100,100],0,0,xd,xd);var tS=J([0,400,0,0,66.66666666666667,0,333.33333333333337,333.33333333333337,333.33333333333337,0,400,0,400,400,300,400,66.66666666666667,100,66.66666666666667,400,0,400],0,0,xd,xd);var lh=[[0,10,0,0,-10,-10,0,0,10,0],[-10,0,0,0,10,-10,0,0,0,10],[0,-10,0,0,10,10,0,0,-10,0],[10,0,0,0,-10,10,0,0,0,-10]];var uS=[[100,0,0,0,0,100],[300,0,400,0,400,100],[400,300,400,400,300,400],[100,400,0,400,0,300]];var ba={NONE:-1,BLUE:0,GREEN:1,RED:2,YELLOW:3,MAGENTA:4};var xc=[255,65280,16711680,16776960,16711935];var vS=10066329;var s=function($){return $===ba.MAGENTA};var wS,Xr=60,xS=.5,pa=new PIXI.Graphics;pa.visible=!1;var Fl=0;function yS(){pa.visible&&(Fl>Xr?Fl=0:Fl+=xS,pa.clear(),pa.lineStyle(1,65535,.4),pa.beginFill(0,0),pa.drawCircle(0,0,Fl),pa.drawCircle(0,0,Xr-Fl),pa.endFill())}var yc={init:function(){return k.addChild(pa)},setNavPoint:function($){wS=$,pa.x=$.x,pa.y=$.y,pa.visible=!0},update:yS,getNavPoint:function(){return Object.assign({},wS)},clear:function(){wS=null,pa.visible=!1}};function wa($,e){var t=e.x-$.x,r=e.y-$.y;return t*t+r*r}function Ga($,e){var t=e.x-$.x,r=e.y-$.y;return Math.atan2(r,t)}wa,Ga;var Yr=1e-6;var zS={};function AS(r,e){var t=e&&e.cache?e.cache:GS,a=e&&e.serializer?e.serializer:FS;return(e&&e.strategy?e.strategy:CS)(r,{cache:t,serializer:a})}function BS(r){return null==r||"number"==typeof r||"boolean"==typeof r}function Zr(r,e,t,a){var $=BS(a)?a:t(a),i=e.get($);return void 0===i&&(i=r.call(this,a),e.set($,i)),i}function $r(r,e,t){var a=Array.prototype.slice.call(arguments,3),$=t(a),i=e.get($);return void 0===i&&(i=r.apply(this,a),e.set($,i)),i}function Gl(r,e,t,a,$){return t.bind(e,r,a,$)}function CS(r,e){return Gl(r,this,1===r.length?Zr:$r,e.cache.create(),e.serializer)}function DS(r,e){return Gl(r,this,$r,e.cache.create(),e.serializer)}function ES(r,e){return Gl(r,this,Zr,e.cache.create(),e.serializer)}function FS(){return JSON.stringify(arguments)}function mh(){this.cache=Object.create(null)}mh.prototype.has=function(r){return r in this.cache},mh.prototype.get=function(r){return this.cache[r]},mh.prototype.set=function(r,e){this.cache[r]=e};var GS={create:function(){return new mh}};(zS=AS).strategies={variadic:DS,monadic:ES};var yd=new AudioContext,Hl={};function HS($){var e=$.name,a=$.arrayBuffer;try{yd.decodeAudioData(a).then(function($){Hl[e]=$})}catch(r){console.warn("Failed to decode audio file \"".concat(e,"\"! ").concat(r.toString()))}}var _r=!af.isAudioMuted;function K($){if(_r){var e=yd.createBufferSource();e.buffer=Hl[$],e.connect(yd.destination),e.start()}}var IS=Uf(zS);var as=Math.pow(3e3,2)>>12,JS=1/Math.log(as),KS=function($){return 1-Math.log($)*JS},LS=IS.d(KS);function zc($,e){if(_r){var a=jb.getFocus(),r=Math.max(wa(e,a)>>12,1);if(r<as){var o=yd.createBufferSource(),t=yd.createGain();o.buffer=Hl[$],t.gain.value=LS(r),o.connect(t),t.connect(yd.destination),o.start()}}}var bs=0,MS=["Fighter","Freighter","PBase","PColony","PComm","PLab","SpacePort"].join(","),NS=function(r){return!s(r.team)&&-1!==MS.indexOf(r.type)};function OS(r){var a=d.getNearestUnits(r).filter(NS);a[++bs]||(bs=0);var e=a[bs];return e&&K("bopp"),e}var Jb;function PS(e,a){var t=!1;if(e.length>0){for(var $=e.length-1;$>=0;$--){var r=e[$];if(!Boolean(r.colonizationTarget)){r.isOrbitingPlanet&&r.exitPlanetOrbit(),r.colonizationTarget=a,t=!0;break}}t&&v.displayText(e[0].team,"Freighter fleet heading towards target.")}}function QS(e){return!e.pbase||!e.pcolony}function RS(e){return e.pcolony&&!e.pcolony.isManufacturing}function cs(e,a,t){if(a){var $;if(s(e)&&Jb){var r=Jb.pcolony;r&&!r.isManufacturing&&($=r)}$||($=q.arrayElement(a).pcolony),$&&$.orderManufacture(t)}}function SS(e){var a=e.planet,t=e.isDockedPlanet,$=e.team,r=e.isDockedSpacePort,n=e.reload_HomingMissile,i=e.reload_ClusterRocket,c=e.reload_LaserBolt,o=!1;r?(e.hp<e.maxHp&&(o=s($),e.hp=e.maxHp,v.displayText(e.team,"Fully repaired.")),n&&e.reload_HomingMissile(!1),i&&e.reload_ClusterRocket(!1),c&&e.reload_LaserBolt(!1)):t&&$===a.team&&a.isOccupied()&&(n&&e.reload_HomingMissile(),i&&e.reload_ClusterRocket(),c&&e.reload_LaserBolt(),e.hp<e.maxHp&&(o=s($),e.hp+=.5,v.displayText(e.team,"Repairing: ".concat(Math.round(e.hp/e.maxHp*100),"%")))),o&&K("repaired")}function TS(e){if(!e.colonizationTarget){var a,t=1/0;d.getByType("Planet").forEach(function($){var r=wa(e,$);t>r&&(a=$,t=r)}),a&&(e.exitPlanetOrbit(),e.colonizationTarget=a)}}function US(e,a){var t=e.planet===Jb||e.spaceport&&e.spaceport.planet===Jb;return((a.planet===Jb||a.spaceport&&a.spaceport.planet===Jb)>>0)-(t>>0)}function VS(){Jb&&!s(Jb.team)&&(Jb=null)}function WS(e){var a,t=function(a){return a.team===e},$=function(a){return a.team!==e},r=d.getByType("Planet").filter(t),n=d.getByType("PColony").filter(t),i=d.getByType("Freighter").filter(t),c=d.getByType("Fighter").filter(t);if(a=(a=r.filter(RS)).length>0?a:void 0,0===r.length&&i.length>0?i.forEach(TS):r.filter(QS).forEach(PS.bind(null,i)),c.length<r.length&&cs(e,a,"Fighter"),c.length>0){var o=q.arrayElement(c);if(s(e)&&(VS(),ja.getControlledEntity()||(o=c.filter(function(e){return!e.isFighterAutoAccelerated||!e.attackTarget&&(e.planet||e.spaceport)}).sort(US)[0])&&(o.isFighterAutoAccelerated=!1,ja.setControlledEntity(o),jb.setFocus(o),ua.init())),o&&!o.attackTarget&&o.isFighterAutoAccelerated){var T,l=Math.random();l<.1?(T=q.arrayElement(d.getByType("Freighter").filter($)),v.displayText(e,"Friendly Fighter targeting enemy Freighter!")):l<.3&&(T=q.arrayElement(d.getByType("PBase").filter($)),v.displayText(e,"Friendly Fighter targeting enemy planet!")),T&&(o.attackTarget=T)}}c.forEach(SS),r.length>i.length&&cs(e,a,"Freighter"),0===n.length&&0===c.length&&0===i.length&&(nh=nh.filter(function(a){return a!==e}),bT(e))}function XS(e){K("install"),Jb=e}function YS(e){d.getByType("Fighter").forEach(function(a){s(a.team)&&(a.attackTarget=e)}),K("alert"),v.displayText(ba.MAGENTA,"All fighters attacking your target!")}var nh,ZS=3e3,$S=0,_S=[ba.GREEN,ba.BLUE,ba.YELLOW,ba.RED,ba.MAGENTA];function aT(){var e=Date.now();e-$S>ZS&&(nh.forEach(WS),1===nh.length&&cT(nh[0]),$S=e)}var bT=new Function,cT=new Function,dT=function(e){return bT=e},eT=function(e){return cT=e};function fT(){nh=_S.concat()}var zd={init:fT,update:aT,setHumanFightersTarget:YS,setHumanTeamHomePlanet:XS,setOnTeamLostCallback:dT,setOnTeamWinCallback:eT};var gT=function(e,a){var t=a.isDockedPlanet,n=a.isDockedSpacePort,o=a.planet,p=a.spaceport,$=a.team;return t&&o.team===$||n&&p.team===$},hT=["Fighter is docked","  [1] Swap weapon","  [2] Set current location as home"],Il="Cannon",iT=function(e,a){switch(e.menuId){case 0:v.displayCommandText(hT),e.menuId=1,e.options=[function(){return e.menuId=2},function(){zd.setHumanTeamHomePlanet(a.planet||a.spaceport.planet),e.shouldReset=!0}];break;case 2:var t=(a.planet||a.spaceport.planet).plab,n=!(!t||!t.developEquipment_equipmentReady||"Shield"===t.developEquipment_equipmentReady)&&t.developEquipment_equipmentReady,o=["Swap Fighter's ".concat(a.attackWeapon," for"),"  [1] Cannon"];e.menuId=3,e.options=[function(){t&&a.attackWeapon!==Il&&(t.developEquipment_equipmentReady=a.attackWeapon),a.attackWeapon=Il,e.shouldReset=!0}],n&&(o.push("  [2] ".concat(n)),e.options.push(function(){t&&a.attackWeapon!==Il&&(t.developEquipment_equipmentReady=a.attackWeapon),a.attackWeapon=n,e.shouldReset=!0})),v.displayCommandText(o);}return!0},jT=[gT,iT];var kT=function(t,a){var e=a.attackTarget;return e&&e.hp>0},lT=["Wingmates:","  [1] Attack my target"],mT=function(t,a){switch(t.menuId){case 0:var e=a.attackTarget;v.displayCommandText(lT),t.menuId=1,t.options=[function(){zd.setHumanFightersTarget(e),t.shouldReset=!0}];}return!0},nT=[kT,mT];var L={isCommanding:!1,shouldReset:!1,menuId:0,options:[]},oT=function($,t,a){if(L.shouldReset&&Jl(),L.isCommanding){var e=function(e){return e(L,$,t,a)};$&&(jT.every(e),nT.every(e))}var r;t.OPTION1&&!a.OPTION1?r=L.options[0]:t.OPTION2&&!a.OPTION2?r=L.options[1]:t.OPTION3&&!a.OPTION3?r=L.options[2]:t.OPTION4&&!a.OPTION4?r=L.options[3]:t.OPTION5&&!a.OPTION5?r=L.options[4]:t.OPTION6&&!a.OPTION6?r=L.options[5]:t.OPTION7&&!a.OPTION7?r=L.options[6]:t.OPTION8&&!a.OPTION8?r=L.options[7]:t.OPTION9&&!a.OPTION9?r=L.options[8]:t.OPTION0&&!a.OPTION0?r=Jl:t.SPECIAL&&!a.SPECIAL&&(L.isCommanding=!L.isCommanding,L.isCommanding||(L.shouldReset=!0)),r&&r()},Jl=function(){L.isCommanding=!1,L.shouldReset=!1,L.menuId=0,L.options=[],v.displayCommandText()},oh={update:oT,reset:Jl};Tr;var pT=-1;function ds($){var e=d.getByType("Fighter");return e[pT+=$?1:-1]||(pT=$?0:e.length-1),e[pT]}function es(t,e){t.interactive=!0,t.interactiveChildren=!1,t.buttonMode=!0,t.click=e}var ph,qT,Kb=16,rT=.25,sT=16776960,tT=65280,uT=11184810,qh=.04,vT=uS.map(function($){return J($,-200*qh,-200*qh,qh,qh)}),wT=125,Kl=!1,rh={x:0,y:0},Lb={x:0,y:0},sh=0,th=0,xT=0,m=new j.Graphics;m.x=Kb,m.y=Kb,es(m,function($){var r=$.data.global,c=r.x,a=r.y;gs(!1);var e={x:(c-Kb)/sh,y:(a-Kb)/th};jb.setFocus(e),ph.revertControlToAI&&ph.revertControlToAI(),ph.setControlledEntity(Object.assign({},e,{hp:1})),ua.init()});var yT=function(){m.beginFill(526344,1),m.lineStyle(1,16777215,rT),m.drawRect(0,0,Lb.x,Lb.y),m.endFill()};m.mousemove=function($){var r=$.data.global,c=r.x,a=r.y;Kl&&(rh.x=c,rh.y=a)};var zT=function(){var $=rh.x,r=rh.y;m.beginFill(0,0),m.lineStyle(1,13421772,1),m.drawRect($-Kb-.5*Lb.x*sh,r-Kb-.5*Lb.y*th,innerWidth*sh,innerHeight*th),m.endFill()},uh=function($){var r,c,a=$.type,e=$.team,n=$.x*sh,F=$.y*th;switch(a){case"Planet":if(c=tT,r=12,m.beginFill(c,.1),m.lineStyle(0,0,0),m.drawCircle(n,F,r),e!==ba.NONE){m.endFill(),m.beginFill(xc[e],.75),m.lineStyle(0,0,0),m.drawRect(n-1.5,F-1,3,2)}break;case"Star":c=sT,r=16,m.beginFill(0,0),m.lineStyle(1,c,1),m.drawCircle(n,F,r);break;case"Fighter":c=xc[e],r=2,m.beginFill(c,1),m.lineStyle(1,c,1),m.drawRect(n-r/2,F-r/2,r,r),$===qT&&(m.endFill(),m.beginFill(0,0),m.lineStyle(1,16777215,1),vT.forEach(function($){return m.drawPolygon(J($,n,F))}));break;case"Freighter":default:c=uT,r=4,m.beginFill(0,0),m.lineStyle(1,c,1),m.drawRect(n-r/2,F-r/2,r,r);}m.endFill()};function AT(){if(Kl){var $=Date.now();$-xT>wT&&(m.clear(),yT(),qT=ph.getControlledEntity(),d.getByType("Star").forEach(uh),d.getByType("Planet").forEach(uh),d.getByType("Freighter").forEach(uh),d.getByType("Fighter").forEach(uh),zT(),xT=$)}}function fs(){Lb.x=innerWidth-2*Kb,Lb.y=innerHeight-2*Kb,sh=Lb.x/va,th=Lb.y/va}function gs($){$&&fs(),m.visible=$,Kl=$}function BT(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;ph=$,k.addChildToHUD(m)}function CT(){return Kl}var Mb={init:BT,update:AT,onResize:fs,getIsVisible:CT,setVisible:gs};var Ll=function(r){return P=r},DT=function(){return P},cf={};function hs(){P&&s(P.team)&&(P.isFighterAutoAccelerated=!0)}function ET(){P&&s(P.team)&&(P.isFighterAutoAccelerated=!1)}function FT(){var r=Qr.getDevice(),$=r.getEvents(),t=r.getInputState();if($.PAUSE&&!cf.PAUSE&&Lh.togglePause(),Lh.getIsPaused())P&&P.modal&&Sr(P,t);else{if(P)if(P.modal)Sr(P,t);else if(P.hp>0){if(jb.setFocus(P),s(P.team))switch(ET(),P.type){case"Fighter":Tr(P,$,cf);}}else oh.reset(),Ll(null);$.FOCUS_NEXT_ENEMY&&!cf.FOCUS_NEXT_ENEMY&&(ua.process(null),hs(),jb.setFocus(Ll(ds(!0)))),$.TOGGLE_RADAR&&!cf.TOGGLE_RADAR&&Mb.setVisible(!Mb.getIsVisible()),oh.update(P,$,cf)}cf=$}var ja={update:FT,getControlledEntity:DT,setControlledEntity:Ll,revertControlToAI:hs};var Ml=12,is=100,js=12,Ad=new j.Graphics;Ad.x=Ml,Ad.y=Ml+100+28+2*Ml;var Bd=new j.Text("Unknown",{fontFamily:"arial",fontSize:12,fill:16316664,align:"left"});Bd.x=0,Bd.y=0;var Nb=new j.Graphics;Nb.x=0,Nb.y=16;var kb=new j.Graphics;function GT($){var a=$.hp,o=$.maxHp,r=Math.floor(is*(a/o));Nb.clear(),Nb.beginFill(6728294,1),Nb.drawRect(0,0,r,js),Nb.endFill(),kb.clear(),kb.beginFill(11167334,1),kb.drawRect(0,0,is-r,js),kb.endFill(),kb.x=r}kb.x=0,kb.y=16,Ad.addChild(Bd),Ad.addChild(Nb),Ad.addChild(kb);var ks=0,HT=10;function IT(){if(ks>0)ks--;else{ks=HT;var $=ja.getControlledEntity();$&&$.type?(s($.team)?Bd.text=$.type:Bd.text="Enemy ".concat($.type),GT($)):(Bd.text="",Nb.clear(),kb.clear())}}function JT(){k.addChildToHUD(Ad)}var ls={init:JT,update:IT};var Nl=12,df=new j.Graphics;df.x=Nl,df.y=Nl+100+42+4*Nl;var ef=new j.Text("Unarmed",{fontFamily:"arial",fontSize:12,fill:16316664,align:"left"});ef.x=0,ef.y=0;var Ob=new j.Text("",{fontFamily:"arial",fontSize:12,fill:16711680,align:"left"});function KT(){var a=ja.getControlledEntity();if(ef.text="",Ob.text="",a&&a.canAttack){var $=a.attackWeapon,e=a.ammo_HomingMissile,o=a.ammo_ClusterRocket,r=a.ammo_LaserBolt;switch(ef.text=$,$){case"HomingMissile":Ob.text="|".repeat(e);break;case"ClusterRocket":Ob.text="|".repeat(o);break;case"LaserBolt":Ob.text="|".repeat(r);break;case"HeavyCannon":case"Cannon":default:Ob.text="Infinite ammo";}}}function LT(){k.addChildToHUD(df)}Ob.x=0,Ob.y=14,df.addChild(ef),df.addChild(Ob);var ms={init:LT,update:KT};function MT(r){return(MT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function NT(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ns(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function OT(r,t,e){return t&&ns(r.prototype,t),e&&ns(r,e),r}function PT(r,t){return!t||"object"!==MT(t)&&"function"!=typeof t?Ol(r):t}function QT(r){return(QT=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function RT(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ST(r,t)}function ST(r,t){return(ST=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(r,t)}function Ol(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function TT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function os(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function UT(e,t,a){return t&&os(e.prototype,t),a&&os(e,a),e}var VT=function(){function e(){TT(this,VT),this.team=ba.NONE}return UT(e,[{key:"getChildAt",value:function(e){return this.geo.graphics.getChildAt(e)}},{key:"setChildVisible",value:function(e,t){var a=this.getChildAt(e);a&&(a.visible=t)}},{key:"assignTeamColor",value:function(){var e=xc[this.team];return this.geo.graphics.currentPath.lineColor=e,e}},{key:"renderHit",value:function(){this.hitTime>0?(this.hitTime--,this.geo.graphics.alpha=Math.random()):0===this.hitTime&&(this.hitTime=-1,this.geo.graphics.alpha=1)}},{key:"x",get:function(){return this.geo.x},set:function(e){this.geo.x=e}},{key:"y",get:function(){return this.geo.y},set:function(e){this.geo.y=e}},{key:"rotation",get:function(){return this.geo.rotation},set:function(e){this.geo.rotation=e}}]),e}();var ps={body:{type:a.Circle,radius:100,fill:{color:0,alpha:1},lineStyle:{width:1,color:65280,alpha:1}},flag:{type:a.Polygon,fill:{color:16777215,alpha:1},path:[-5,-4,-5,4,5,4,5,-4]}},Cd=function(r){function t(r){var t;return NT(this,Cd),(t=PT(this,QT(Cd).call(this))).type="Planet",t.canOrbitStar=!0,t.canStoreMaterial=!0,t.materialsRaw=0,t.materialsFinished=0,t.hp=2e3,t.mass=180,t.geo=h(ps.body),t.geo.graphics.addChild(h(ps.flag).graphics),Object.assign(Ol(Ol(t)),r),t.updateFlagColor(),t}return RT(t,LivingEntity),OT(t,[{key:"isOccupied",value:function(){return Boolean(this.pbase||this.plab||this.pcolony||this.pcomm)}},{key:"updateFlagColor",value:function(){var r=this.geo.graphics.children[0];this.team===ba.NONE?r.visible=!1:(r.visible=!0,r.tint=xc[this.team])}}]),t}();Cd,Cd.DIST_SURFACE2=11025;function WT(t){return(WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YT(t,e){return!e||"object"!==WT(e)&&"function"!=typeof e?Pl(t):e}function ZT(t){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $T(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_T(t,e)}function _T(t,e){return(_T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var aU={type:a.Circle,radius:200,fill:{color:0,alpha:1},lineStyle:{width:1,color:16776960,alpha:1}},Dd=function(t){function e(t){var e;return XT(this,Dd),(e=YT(this,ZT(Dd).call(this))).geo=h(aU),e.type="Star",e.hp=1e4,e.mass=600,Object.assign(Pl(Pl(e)),t),e}return $T(e,LivingEntity),e}();Dd,Dd.DIST_SURFACE2=4e4;var vh=[{name:"Serf",scoreNeeded:-1/0},{name:"Peasant",scoreNeeded:-50},{name:"Recruit",scoreNeeded:0},{name:"Cadet",scoreNeeded:200},{name:"Private",scoreNeeded:1e3},{name:"Corporal",scoreNeeded:2e3},{name:"Lieutenant",scoreNeeded:3200},{name:"Captain",scoreNeeded:4500},{name:"Major",scoreNeeded:6e3},{name:"Colonel",scoreNeeded:8e3},{name:"Rear Admiral",scoreNeeded:12e3},{name:"Vice Admiral",scoreNeeded:18e3},{name:"Fleet Admiral",scoreNeeded:24e3},{name:"Fleet Commander",scoreNeeded:5e4}],qs=function(e){return vh[vh.findIndex(function(r){return e<r.scoreNeeded})-1]};var rs=function(e){return vh[vh.findIndex(function(r){return e<r.scoreNeeded})]};var Ql=0,bU=qs(0),cU=rs(0);function dU($){Ql+=$,bU=qs(Ql),cU=rs(Ql)}function eU(){return{rank:bU,score:Ql,nextRank:cU}}var fU=0;function gU($){fU+=$}function hU(){return fU<-1}var Qa={add:dU,addSectorResult:gU,getIsGameOver:hU,getScoreRank:eU};var iU=Math.pow(1e3,2),jU=Math.pow(800,2),kU=Math.PI/4,ss=Math.pow(3.5,2);var ts=2*Math.PI;function us($){$.explode(),d.destroy($),s($.team)&&Qa.add(-10)}function lU($){var t=wa(this,$);if(t<jU){var a=this.mass*$.mass/Math.pow(t,1.5),r=$.x-this.x,I=$.y-this.y;if(this.dx+=r*a,this.dy+=I*a,t<Cd.DIST_SURFACE2){var e=this.dx*this.dx+this.dy*this.dy,x=this.rotation,i=Ga($,this),f=Math.abs(i-x);f>Math.PI&&(x>0?x-=ts:x+=ts,f=Math.abs(i-x)),f<kU&&e<ss?this.dockPlanet($):us(this)}}}function mU($){var t=wa(this,$);if(t<iU){var a=$.x-this.x,r=$.y-this.y,I=this.mass*$.mass/Math.pow(t,1.5);this.dx+=a*I,this.dy+=r*I,t<Dd.DIST_SURFACE2&&us(this)}}function nU($){var t=$.type;"Star"===t?mU.call(this,$):"Planet"===t&&lU.call(this,$)}var oU={};function pU($){var t=$.isDockedPlanet,a=$.isDockedSpacePort,r=$.hp;!t&&!a&&r>0&&d.getBodies().forEach(nU.bind($))}var qU={componentFlag:"canGravitate",DEFAULTS:oU,process:pU};var Rl=100,Sl=14,rU=1/ss,Tl=Rl>>1,Ul=20+(Sl>>1),Ha=new j.Graphics,Vl=new j.Text("Landing Speed",{fontFamily:"arial",fontSize:12,fill:16777215});Vl.x=-Tl,Vl.y=Ul,Ha.addChild(Vl);var sU=!0;function tU(){vs(),k.addChildToHUD(Ha)}function uU(){if(sU){var $=ja.getControlledEntity();if($){var r=$.dx,e=$.dy;if(!isNaN(r+e)){var p=65280,a=r*r+e*e,i=Math.min(a*rU,1),m=i*Rl;Ha.beginFill(4473924,1),Ha.drawRect(-Tl,14+Ul,Rl,Sl),Ha.endFill(),i>.3&&(p=8978176),i>.5&&(p=16776960),i>.7&&(p=16746496),i>.9&&(p=16711680),Ha.beginFill(p,1),Ha.drawRect(-Tl,14+Ul,m,Sl),Ha.endFill()}}}}function vU($){Ha.visible=$,sU=$}function vs(){Ha.x=innerWidth>>1,Ha.y=innerHeight>>1}var ff={init:tU,update:uU,setVisible:vU,onResize:vs};var wU=Math.pow(300,2),wh=new j.Graphics,Ac=new j.Graphics;Ac.beginFill(0,0),Ac.lineStyle(2,16776960,1),Ac.drawPolygon(J(Wr,-10,-10)),Ac.endFill(),Ac.visible=!1;var Bc=new j.Graphics;Bc.beginFill(0,0),Bc.lineStyle(2,65280,1),Bc.drawPolygon(J(Wr,-10,-10)),Bc.endFill(),Bc.visible=!1;var Pb=new j.Graphics;Pb.beginFill(0,0),Pb.lineStyle(1,16711680,1),Pb.drawPolygon(J(sS,-10,-10)),Pb.endFill(),Pb.visible=!1;var Cc=new j.Graphics;Cc.beginFill(0,0),Cc.lineStyle(1.5,65535,1),Cc.drawPolygon(J(tS,-10,-10)),Cc.endFill(),Cc.visible=!1,wh.addChild(Ac,Bc,Pb,Cc);var Wl,xU,yU=12,zU=12,ws=0,Xl=0,xs=0,Yl=0,ys=1;function AU(){zs(),k.addChildToHUD(wh)}var gf,Zl=0,BU=20;function CU($){if(Wl&&$&&"Fighter"===$.type){var r=$.isDockedPlanet,a=$.isDockedSpacePort,e=r||a,t=wa($,Wl)<=wU;ff.setVisible(t&&!e)}else ff.setVisible(!1)}function xh($,r){if($)if(Sm($)){r.visible=!0;var a=$.x-gf.x+Yr,e=$.y-gf.y+Yr,t=a/e;Math.abs(t)>ys?(r.x=a>0?Xl:-Xl+yU,r.y=1/t*r.x):t<ys&&(r.y=e>0?Yl:-Yl+zU,r.x=t*r.y)}else r.visible=!1}function DU(){if(gf){var $=ja.getControlledEntity();0===Zl?(Zl=BU,Wl=d.getAbsoluteNearestByBodyType(gf,"Planet"),xU=d.getAbsoluteNearestByBodyType(gf,"Star"),CU($)):Zl--,Zl%2&&(xh(Wl,Bc),xh(xU,Ac),xh(yc.getNavPoint(),Cc),$&&$.attackTarget?xh($.attackTarget,Pb):Pb.visible=!1)}}function zs(){ws=innerWidth,xs=innerHeight,ys=ws/xs,Xl=ws/2,Yl=xs/2,wh.x=Xl,wh.y=Yl}var EU=function($){var r=$.x,a=$.y;return gf={x:r,y:a}},yh={init:AU,update:DU,setOrigin:EU,onResize:zs};var FU=.3,$l=100,As=12,GU=12,_l=0,qa=new j.Graphics;function HU(){qa.beginFill(0,1),qa.lineStyle(1,16777215,FU),qa.drawRect(0,0,$l,$l),qa.endFill()}qa.x=As,qa.y=As,es(qa,function(){Mb.setVisible(!0),K("expand-detail")});var zh,Bs=$l/va,Ah=function($){var r,a,p=$.type,e=$.team;switch(p){case"Planet":a=JU,r=4;break;case"Star":a=IU,r=2;break;case"Fighter":a=$===zh&&_l>6?16777215:xc[e],r=2;break;case"Freighter":default:a=KU,r=1;}var t=$.x*Bs,F=$.y*Bs;qa.beginFill(0,0),qa.lineStyle(1,a,1),qa.drawRect(t-r/2,F-r/2,r,r),qa.endFill()},IU=16776960,JU=65280,KU=11184810;function LU(){zh&&(!zh.type||zh.hp<=0)&&(zh=null)}function MU(){_l>0?_l--:(zh=ja.getControlledEntity(),_l=GU,qa.clear(),HU(),d.getByType("Star").forEach(Ah),d.getByType("Planet").forEach(Ah),d.getByType("Freighter").forEach(Ah)),d.getByType("Fighter").forEach(Ah),LU()}function NU(){k.addChildToHUD(qa)}var Cs={init:NU,update:MU};var Ds,Es,Ra=new j.Graphics;Ra.lineStyle(1,16777215,1);var Fs=.03125,Gs=.025;function Hs(){Ra.x=.5*(innerWidth-Ra.width),Ra.y=.5*(innerHeight-Ra.height)+40}function OU($){Ra.renderable=$,$&&Hs()}function PU(){Ra.renderable=!1,k.addChildToHUD(Ra)}Ds=14,Es=0,"game".split("").forEach(function($){Ra.drawPolygon(J(wd[$],Ds,Es,Fs,Gs)),Ds+=17}),Ds=0,Es=20,"paused".split("").forEach(function($){Ra.drawPolygon(J(wd[$],Ds,Es,Fs,Gs)),Ds+=16});var am={init:PU,setVisible:OU,onResize:Hs};var Qb=new j.Container,Is=8,Js=12;function Ks(){Qb.x=innerWidth-Js,Qb.y=innerHeight-Js+4}var Ed=[];function QU(){for(var $;Qb.children.length<Is;){$=new j.Text("",{fontFamily:"arial",fontSize:12,fill:11184810}),Qb.addChild($),Ed.push();var t=Qb.children.length-1;Qb.children[t].y=-20*(t+1)}Ed=[],bm(),k.addChildToHUD(Qb),Ks()}var Ls=400,Ms=Ls;function bm(){Qb.children.forEach(function($,t){$.text=Ed[t],$.x=-$.width})}function RU(){Ms>0?Ms--:(Ms=Ls,Ed.shift(),bm())}function SU(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Ed.push($),Ed.length>Is&&Ed.shift(),bm()}var Bh={init:QU,update:RU,onResize:Ks,displayText:SU};var TU=20,Ns=12,Ch=14,cm=100,Sa=new j.Graphics;Sa.x=Ns,Sa.y=2*Ns+cm;var UU={fontFamily:"arial",fontSize:12},Os=new j.Text("<rank>",Object.assign({},UU,{fill:16777215}));Sa.addChild(Os);var Ps=0;function VU(){k.addChildToHUD(Sa)}function WU(){if(Ps>0)Ps--;else{var $=Score.getScoreRank(),a=$.rank,r=$.score,p=$.nextRank;Os.text=a.name,Sa.beginFill(4473924,1),Sa.drawRect(0,Ch+2,cm,Ch),Sa.endFill(),Sa.beginFill(65535,1),Sa.drawRect(0,Ch+2,cm*((r-a.scoreNeeded)/p.scoreNeeded),Ch),Sa.endFill(),Ps=TU}}var Qs={init:VU,update:WU};var ra=new j.Graphics;function XU(){k.addChildToHUD(ra)}var Rs=0;function YU(){var $=ja.getControlledEntity();if($&&$.attackTarget&&!Sm($.attackTarget)){ra.visible=!0;var r=$.attackTarget,e=r.reticleWidth2,t=r.reticleHeight2,o=r.x,a=r.y,i=r.reticleOffsetX,C=void 0===i?0:i,l=r.reticleOffsetY,q=void 0===l?0:l,D=k.getSceneCoordFromStageCoord(o,a);if(!e||!t){var c=$.attackTarget.geo.graphics.getBounds();e=10+(c.width>>1),t=10+(c.height>>1)}ra.x=D.x+C,ra.y=D.y+q,ra.clear(),ra.beginFill(0,0),ra.lineStyle(1,Rs%6?16711680:65535,1),ra.drawPolygon(J(lh[0],-e,-t)),ra.drawPolygon(J(lh[1],e,-t)),ra.drawPolygon(J(lh[2],e,t)),ra.drawPolygon(J(lh[3],-e,t)),ra.endFill(),Rs++}else ra.visible=!1,Rs=0}var Ss={init:XU,update:YU};var Rb=new j.Container,Dh=4,Ts=12;function Us(){Rb.x=Ts,Rb.y=innerHeight-Ts+4}function ZU(){for(var $;Rb.children.length<Dh;){$=new j.Text("",{fontFamily:"arial",fontSize:12,fill:xc[ba.MAGENTA]}),Rb.addChild($);var r=Rb.children.length-1;Rb.children[r].y=-20*(r+1)}k.addChildToHUD(Rb),Us()}var $U=" ".repeat(Dh).split("");function Vs(){for(var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$U,r=Dh-1;r>=0;r--)Rb.children[r].text=$[Dh-r-1]||""}var dm={init:ZU,clear:function(){return Vs()},onResize:Us,displayText:Vs};var v={init:RR,update:SR,displayText:UR,onResize:TR,displayCommandText:dm.displayText,setFocus:yh.setOrigin,setPauseVisible:am.setVisible};var _U={Freighter:{cost:800,time:1500},Fighter:{cost:500,time:100}},aV={orderManufacture:bV,isManufacturing:!1,manufactureTime:0,manufactureType:void 0};function bV(r){this.isManufacturing||(this.isManufacturing=!0,this.manufactureTime=_U[r].time,this.manufactureType=r,v.displayText(this.team,"Manufacturing new ".concat(r,".")))}function cV(r){if(r.isManufacturing){var a=r.planet,e=r.team;if(r.planet.pbase&&r.planet.pbase.materialsFinished>=r.PRODUCT[r.manufactureType].cost)if(r.manufactureTime>0)r.manufactureTime--;else{var t=r.x+q.int(-20,20),i=r.y+q.int(-20,20),$=d.create(r.manufactureType,{x:t,y:i,team:e});"Fighter"===r.manufactureType?a.spaceport&&!a.spaceport.isCarryingFighter?$.dockSpacePort(a.spaceport):$.dockPlanet(a):"Freighter"===r.manufactureType&&$.enterPlanetOrbit(a),v.displayText(e,"New ".concat($.type," manufactured.")),r.isManufacturing=!1,r.manufactureType=void 0}}}var dV={componentFlag:"canManufacture",DEFAULTS:aV,process:cV};var eV={MINE_RATE:25,MINE_TIME:20,mineTime:20};function fV(e){e.mineTime>0?e.mineTime--:(e.mineTime=e.MINE_TIME,e.planet.materialsRaw+=e.MINE_RATE)}var gV={componentFlag:"canMine",DEFAULTS:eV,process:fV};function hV(a){a.hp--}var iV={componentFlag:"canMetabolize",process:hV};var jV={dx:0,dy:0};function kV($){$.isDockedPlanet||($.x+=$.dx,$.y+=$.dy,0!==$.x&&$.x!==va||($.dx=0),0!==$.y&&$.y!==va||($.dy=0))}var lV={componentFlag:"canMoveLinearly",DEFAULTS:jV,process:kV};var mV={TURN_RATE:.07,SPEED:2.5,DIST_HALT2:Math.pow(80,2)},nV=Math.pow(200,2);function oV(t){var a=t.rotation,o=Ga(t,t.colonizationTarget),r=Math.abs(o-a);return r>Math.PI?a>0?t.rotation+=t.TURN_RATE:t.rotation-=t.TURN_RATE:r>t.TURN_RATE?a>o?t.rotation-=t.TURN_RATE:t.rotation+=t.TURN_RATE:t.rotation=o,a=t.rotation}function pV(t){var a=t.isOrbitingPlanet,o=t.colonizationTarget,r=t.DIST_HALT2;if(!a&&o){var e=wa(t,o);if("Planet"===o.type&&(r=nV),e>r){var $=oV(t);t.x+=Math.cos($)*t.SPEED,t.y+=Math.sin($)*t.SPEED,t.flameOn&&t.flameOn()}else"Planet"===o.type&&t.canOrbitPlanet&&t.enterPlanetOrbit(o),t.flameOff&&t.flameOff()}}var qV={componentFlag:"canMoveToColonizationTarget",DEFAULTS:mV,process:pV};var rV={HARVEST_RATE_RAW:35,HARVEST_RATE_FINISHED:25,HARVEST_TIME:10,harvestTime:0};function sV(a){a.harvestTime>0?a.harvestTime--:(a.harvestTime=a.HARVEST_TIME,a.planet.materialsRaw>0&&a.materialsRaw<a.MAX_RAW_MATERIALS&&(a.MAX_RAW_MATERIALS-a.materialsRaw<a.HARVEST_RATE_RAW?(a.planet.materialsRaw=0,a.materialsRaw+=a.MAX_RAW_MATERIALS-a.materialsRaw):(a.planet.materialsRaw-=a.HARVEST_RATE_RAW,a.materialsRaw+=a.HARVEST_RATE_RAW)),a.planet.materialsFinished>0&&a.materialsFinished<a.MAX_FINISHED_MATERIALS&&(a.MAX_FINISHED_MATERIALS-a.materialsFinished<a.HARVEST_RATE_FINISHED?(a.planet.materialsFinished=0,a.materialsFinished+=a.MAX_FINISHED_MATERIALS-a.materialsFinished):(a.planet.materialsFinished-=a.HARVEST_RATE_FINISHED,a.materialsFinished+=a.HARVEST_RATE_FINISHED)))}var tV={componentFlag:"canHarvest",DEFAULTS:rV,process:sV};var uV={MAX_RAW_MATERIALS:3e3,MAX_FINISHED_MATERIALS:2e3,materialsRaw:0,materialsFinished:0};function vV(){}var wV={componentFlag:"canStoreMaterial",DEFAULTS:uV,process:vV};var xV={REPAIR_COST_FINISHED:25,REPAIR_TIME:30,repairTime:0};function yV(e){e.hp<e.maxHp&&e.materialsFinished>e.REPAIR_COST_FINISHED&&e.materialsFinished>0&&(e.repairTime>0?e.repairTime--:(e.hp++,e.materialsFinished-=e.REPAIR_COST_FINISHED,e.repairTime=e.REPAIR_TIME))}var zV={componentFlag:"canRepair",DEFAULTS:xV,process:yV};var AV={anchorOffsetX:0,anchorOffsetY:0};function BV(r){r.anchor.hp>0?(r.x=r.anchor.x+r.anchorOffsetX,r.y=r.anchor.y+r.anchorOffsetY):d.destroy(r)}var CV={DEFAULTS:AV,componentFlag:"canAnchor",process:BV};var DV={shield:null},EV={DEFAULTS:DV,componentFlag:"canBeShielded"};var FV={REFINE_RATE_RAW_TO_FINISHED:.5};function GV(a){a.materialsFinished<a.MAX_FINISHED_MATERIALS?a.materialsRaw>0&&(a.materialsFinished+=a.REFINE_RATE_RAW_TO_FINISHED,a.materialsFinished>a.MAX_FINISHED_MATERIALS&&(a.planet.materialsFinished+=a.materialsFinished-a.MAX_FINISHED_MATERIALS,a.materialsFinished=a.MAX_FINISHED_MATERIALS),a.materialsRaw--):a.materialsRaw>0&&(a.planet.materialsFinished+=a.REFINE_RATE_RAW_TO_FINISHED,a.materialsRaw--)}var HV={componentFlag:"canRefine",DEFAULTS:FV,process:GV};var IV=8e3,JV={constructionTime:8e3},KV=[{type:"PLab",cost:200},{type:"PComm",cost:300},{type:"SpacePort",cost:1e3,prerequisite:"PColony"},{type:"SpaceDock",cost:500,prerequisite:"SpacePort",occupation:"SpacePort"},{type:"SensorArray",cost:500,prerequisite:"SpacePort",occupation:"SpacePort"}];function LV(t){var e=this.team,r=this.planet,a=t.type.toLowerCase(),o=!0;return t.prerequisite&&(o=Boolean(this.planet[t.prerequisite.toLowerCase()])),!!(!this.planet[a]&&this.materialsFinished>=t.cost&&o)&&("SpacePort"===t.occupation?this.planet[a]=d.create(t.type,{spaceport:this.planet.spaceport,planet:r,team:e}):this.planet[a]=d.create(t.type,{planet:r,team:e}),this.materialsFinished-=t.cost,!0)}function MV(t){t.materialsFinished>0&&(t.constructionTime>0?t.constructionTime--:(KV.some(LV.bind(t)),t.constructionTime=IV))}var NV={componentFlag:"canConstruct",DEFAULTS:JV,process:MV};function Ws(){var $=this.EXPLOSION_SOUND,o=this.EXPLOSION_FRAGMENTS,e=this.x,r=this.y,a=this.dx,t=this.dy,i=this.explosionOriginDx,p=this.explosionOriginDy;zc($,this);for(var l=o;l>0;l--)d.create("CannonShot",{x:i+e+q.float(-10,10),y:p+r+q.float(-10,10),team:ba.NONE,dx:q.float(-2,2)+(a||0),dy:q.float(-2,2)+(t||0)});this.hasExploded=!0}var OV={explosionOriginDx:0,explosionOriginDy:0,EXPLOSION_SOUND:"collide",EXPLOSION_FRAGMENTS:6,hasExploded:!1,explode:Ws};function PV($){var o=$.hasExploded,e=$.canExplode;$.hp<=0&&!o&&e&&Ws.call($)}var em={componentFlag:"canExplode",DEFAULTS:OV,process:PV};function QV($){$.x=$.planet.x,$.y=$.planet.y}var RV={componentFlag:"canOccupyPlanet",process:QV};function SV(t){var o=t.spaceport,a=o.x,e=o.y,r=o.rotation;o.hp>0?(t.x=a,t.y=e,t.rotation=r):(t.explode&&t.explode(),d.destroy(t))}var TV={componentFlag:"canOccupySpacePort",process:SV};var UV={D_ROTATION:1e-4,orbitDistance:1800,orbitRotation:0};function VV(t){t.orbitRotation+=t.D_ROTATION,t.x=Math.cos(t.orbitRotation)*t.orbitDistance+t.star.x,t.y=Math.sin(t.orbitRotation)*t.orbitDistance+t.star.y}var WV={componentFlag:"canOrbitStar",DEFAULTS:UV,process:VV};function XV(t){this.isOrbitingPlanet=!0,this.dx=0,this.dy=0,this.orbitRotation=Ga(t,this),this.rotation=this.orbitRotation+$V,this.planet=t,this.flameOff&&this.flameOff()}function YV(){this.isOrbitingPlanet=!1,this.planet=void 0,this.flameOn&&this.flameOn()}var ZV={enterPlanetOrbit:XV,exitPlanetOrbit:YV,isOrbitingPlanet:!0,D_ROTATION:1e-4,orbitDistance:105,orbitRotation:0},$V=.5*Math.PI;function _V(t){t.isOrbitingPlanet&&t.planet&&("SpacePort"===t.type?t.rotation=Ga(t.planet,t):"Freighter"===t.type&&(t.rotation+=t.D_ROTATION),t.orbitRotation+=t.D_ROTATION,t.x=Math.cos(t.orbitRotation)*t.orbitDistance+t.planet.x,t.y=Math.sin(t.orbitRotation)*t.orbitDistance+t.planet.y)}var aW={componentFlag:"canOrbitPlanet",DEFAULTS:ZV,process:_V};var bW={damageHp:1};function cW($){var e=this.team,t=this.damageHp;return!($.team===e||!Vr(this,$))&&(zc($.AUDIO_HIT||"hit",this),$.hp-=t,$.lastDamagedByTeam=e,$.hitTime=10,d.destroy(this),!0)}function dW($){d.getNearestUnits($).some(cW.bind($))}var eW={componentFlag:"canDamage",DEFAULTS:bW,process:dW};var Xs=5;function fW(a){var $=this.team,t=a(this),o=t.rotation,n=t.x,r=t.y,e=Math.cos(o)*Xs,i=Math.sin(o)*Xs,f=this.dx||0,s=this.dy||0;d.create("CannonShot",{team:$,x:n+this.x-f,y:r+this.y-s,dx:e+f,dy:i+s})}var gW={lastShotTime_Cannon:0,reloadTime_Cannon:100},hW="fire";function iW(a){var $=a.isAttacking,t=a.attackWeapon;if($&&"Cannon"===t){var o=Date.now();o-a.lastShotTime_Cannon>=a.reloadTime_Cannon&&(a.attackTurretPositions.forEach(fW.bind(a)),zc(hW,a),a.lastShotTime_Cannon=o)}}var jW={componentFlag:"canShootCannon",DEFAULTS:gW,process:iW};var Ys=6;function kW(a){var $=this.team,t=a(this),o=t.rotation,e=t.x,n=t.y,r=Math.cos(o)*Ys,y=Math.sin(o)*Ys,i=this.dx||0,x=this.dy||0;d.create("HeavyCannonShot",{team:$,x:e+this.x-i,y:n+this.y-x,dx:r+i,dy:y+x})}var lW={lastShotTime_HeavyCannon:0,reloadTime_HeavyCannon:120},mW="fire";function nW(a){var $=a.isAttacking,t=a.attackWeapon;if($&&"HeavyCannon"===t){var o=Date.now();o-a.lastShotTime_HeavyCannon>=a.reloadTime_HeavyCannon&&(a.attackTurretPositions.forEach(kW.bind(a)),zc(mW,a),a.lastShotTime_HeavyCannon=o)}}var oW={componentFlag:"canShootHeavyCannon",DEFAULTS:lW,process:nW};var Zs=10;function pW(t){for(var r=this.team,a=this.range_LaserBolt,e=t(this),o=e.rotation,$=e.x,s=e.y,B=Math.cos(o)*Zs,l=Math.sin(o)*Zs,i=this.dx||0,m=this.dy||0,L=a;L>0;L--)d.create("LaserBolt",{team:r,rotation:o,x:$+this.x-i+B*L,y:s+this.y-m+l*L})}function qW(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ammo_LaserBolt<this.ammoMax_LaserBolt&&(K("empty"),t?this.ammo_LaserBolt++:this.ammo_LaserBolt=this.ammoMax_LaserBolt)}var rW={reload_LaserBolt:qW,range_LaserBolt:20,ammo_LaserBolt:4,ammoMax_LaserBolt:4,lastShotTime_LaserBolt:0,reloadTime_LaserBolt:1e3},sW="laser";function tW(t){var r=t.isAttacking,a=t.attackWeapon,e=t.ammo_LaserBolt;if(r&&"LaserBolt"===a){var o=Date.now();o-t.lastShotTime_LaserBolt>=t.reloadTime_LaserBolt&&e>0&&(t.attackTurretPositions.forEach(pW.bind(t)),zc(sW,t),t.ammo_LaserBolt--,t.lastShotTime_LaserBolt=o)}}var uW={componentFlag:"canShootLaserBolt",DEFAULTS:rW,process:tW};var $s=4;function vW(i){var a=this.attackTarget,s=this.team,o=i(this),$=o.rotation,t=o.x,e=o.y,r=Math.cos($)*$s,v=Math.sin($)*$s,m=this.dx||0,n=this.dy||0;d.create("HomingMissile",{team:s,attackTarget:a,rotation:$,x:t+this.x-m,y:e+this.y-n,dx:r+m,dy:v+n})}function wW(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ammo_HomingMissile<this.ammoMax_HomingMissile&&(K("empty"),i?this.ammo_HomingMissile++:this.ammo_HomingMissile=this.ammoMax_HomingMissile)}var xW=300,yW={reload_HomingMissile:wW,lastShotTime_HomingMissile:0,ammo_HomingMissile:40,ammoMax_HomingMissile:40},zW="missile";function AW(i){var a=i.isAttacking,s=i.ammo_HomingMissile,o=i.attackWeapon;if(a&&"HomingMissile"===o){var $=Date.now();$-i.lastShotTime_HomingMissile>=xW&&s>0&&(i.attackTurretPositions.forEach(vW.bind(i)),i.lastShotTime_HomingMissile=$,i.ammo_HomingMissile--,zc(zW,i))}}var BW={componentFlag:"canShootHomingMissile",DEFAULTS:yW,process:AW};var fm={};var _s=2.5;function CW(t){var e=this.team,o=t(this),a=o.rotation,r=o.x,$=o.y,s=Math.cos(a)*_s,l=Math.sin(a)*_s,i=this.dx||0,S=this.dy||0;d.create("ClusterRocket",{rotation:a,team:e,x:r+this.x-i,y:$+this.y-S,dx:s+i,dy:l+S})}function DW(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ammo_ClusterRocket<this.ammoMax_ClusterRocket&&(K("empty"),t?this.ammo_ClusterRocket++:this.ammo_ClusterRocket=this.ammoMax_ClusterRocket)}var EW={reload_ClusterRocket:DW,lastShotTime_ClusterRocket:0,reloadTime_ClusterRocket:600,ammo_ClusterRocket:8,ammoMax_ClusterRocket:8},FW="bomb-release";function GW(t){var e=t.isAttacking,o=t.attackWeapon,a=t.ammo_ClusterRocket;if(e&&"ClusterRocket"===o){var r=Date.now();r-t.lastShotTime_ClusterRocket>=t.reloadTime_ClusterRocket&&a>0&&(t.attackTurretPositions.forEach(CW.bind(t)),t.lastShotTime_ClusterRocket=r,t.ammo_ClusterRocket--,zc(FW,t))}}var at={componentFlag:"canShootClusterRocket",DEFAULTS:EW,process:GW};fm.default=at;var HW={MAX_SPEED:40,MAX_SPEED2:Math.pow(40,2)};function IW($){var a=Math.pow($.dx,2)+Math.pow($.dy,2);if(a>$.MAX_SPEED2){var r=$.MAX_SPEED*Math.pow(a,-.5);$.dx*=r,$.dy*=r}}var JW={componentFlag:"canLimitSpeed",DEFAULTS:HW,process:IW};function KW(r){this.dx+=Math.cos(this.rotation)*r,this.dy+=Math.sin(this.rotation)*r}var LW={accelerate:KW},MW={componentFlag:"canAccelerate",DEFAULTS:LW};var Eh=.26;function NW(e){if(e.delayBeforeTracking>0)e.delayBeforeTracking--;else{var $=e.attackTarget;if($){var a=$.x,r=$.y;e.x>a?e.dx-=Eh:e.x<a&&(e.dx+=Eh),e.y>r?e.dy-=Eh:e.y<r&&(e.dy+=Eh),e.rotation=Math.atan2(e.dy,e.dx)}}}var OW={delayBeforeTracking:5},PW={componentFlag:"canAccelerateToAttackTarget",DEFAULTS:OW,process:NW};function QW(e,r){for(var t=0;t<e.length;t++)if(!e[t](r))return!1;return!0}function bt(e,r){for(var t=0;t<e.length;t++)if(e[t](r))return!0;return!1}QW,bt;var ct=.1,dt=2*kh,RW=Math.PI/kh,SW=Math.pow(500,2),TW=Math.pow(400,2),UW=Math.pow(200,2)/1.4,VW=5,WW=.01;function XW($,a){var t=a-$.rotation;Math.abs(t)>Math.PI&&(a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),t=a-$.rotation),Math.abs(t)>=WW&&(t>0?$.rotation+=dt:$.rotation-=dt)}function Fh($){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bf;$.accelerate(a),$.flameOn()}function YW($){var a=$.isDockedPlanet,t=$.isDockedSpacePort,r=$.isFighterPreviouslyDocked;if(a)return $.isFighterPreviouslyDocked=!0,$.undockPlanet(),Fh($,2*El+bf),!0;if(t)return $.isFighterPreviouslyDocked=!0,$.undockSpacePort(),Fh($,El+bf),!0;var e=$.dx,O=$.dy,T=Math.pow(e,2)+Math.pow(O,2);return!!(r&&T<9)&&(Fh($),!0)}function ZW($){var a,t,r=$.attackTarget,e=$.dx,O=$.dy,T=wa($,r),o=Math.pow(e,2)+Math.pow(O,2);t="PBase"===r.type?TW:SW;var A=Ga($,r),i=Math.atan2(O,e);if($.isFighterPreviouslyDocked=!1,$.isAttacking=!1,T<UW/o)a=A-Math.PI;else if(T<t){var E=5*Math.cos(A),c=5*Math.sin(A);a=Math.atan2(c-O,E-e),$.isAttacking=Math.abs(a-$.rotation)<ct}else{var v=Math.sqrt(Math.sqrt(T)/bf)+RW+VW;a=Math.sqrt(T/o)<v?i+Math.PI:A}XW($,a),!$.isAttacking&&Math.abs(Math.cos(a)-Math.cos($.rotation))<ct&&Fh($)}var $W=[YW,ZW];function _W($){var a=$.attackTarget;$.flameOff(),a&&(a.hp>0?bt($W,$):($.attackTarget=null,$.isAttacking=!1))}function aX($){$.isFighterAutoAccelerated&&_W($)}var bX={isFighterPreviouslyDocked:!1,isFighterAutoAccelerated:!0},cX={componentFlag:"canAccelerateFighterToAttackTarget",DEFAULTS:bX,process:aX};var dX={hitTime:-1};function eX($){$.renderHit&&$.renderHit()}var fX={componentFlag:"canDisplayHit",DEFAULTS:dX,process:eX};function gX(r){this.isDockedPlanet=!0,this.dx=0,this.dy=0,this.rotation=Ga(r,this),this.planet=r,r.isOccupied()||r.team==this.team||(s(this.team)&&Qa.add(20),r.team=this.team,r.updateFlagColor())}function hX(){this.isDockedPlanet=!1,this.planet=void 0}var et=105,iX={isDockedPlanet:!1,dockPlanet:gX,undockPlanet:hX};function jX(r){r.isDockedPlanet&&(r.x=Math.cos(r.rotation)*et+r.planet.x,r.y=Math.sin(r.rotation)*et+r.planet.y)}var kX={componentFlag:"canDockPlanet",DEFAULTS:iX,process:jX};function lX(t){this.isDockedSpacePort=!0,this.dx=0,this.dy=0,this.rotation=t.rotation,this.spaceport=t,this.spaceport.fighter=this,this.spaceport.isCarryingFighter=!0}function mX(){this.isDockedSpacePort=!1,this.spaceport.fighter=null,this.spaceport.isCarryingFighter=!1,this.spaceport=null,this.x+=Math.cos(this.rotation),this.y+=Math.cos(this.rotation)}var ft=211,nX={spaceport:null,isDockedSpacePort:!1,dockSpacePort:lX,undockSpacePort:mX};function oX(t){var o=t.isDockedSpacePort,r=t.spaceport;o&&(t.rotation=r.rotation,t.x=Math.cos(t.rotation)*ft+r.planet.x,t.y=Math.sin(t.rotation)*ft+r.planet.y)}var pX={componentFlag:"canDockSpacePort",DEFAULTS:nX,process:oX};var qX={fighter:null,isCarryingFighter:!1},rX=Math.pow(8,2),sX=.1;function tX(r){var t=r.dx,$=r.dy,a=r.type,e=r.team,i=r.canDockSpacePort,u=r.rotation,o=r.isDockedSpacePort;if("Fighter"===a&&e===this.team&&i&&!o&&Vr(r,this)&&Math.abs(Math.cos(u)-Math.cos(this.rotation))<sX&&Math.pow(t,2)+Math.pow($,2)<=rX)return s(e)&&K("repaired"),r.dockSpacePort(this),!0;return!1}function uX(r){r.isCarryingFighter||d.getNearestUnits(r).some(tX.bind(r))}var vX={componentFlag:"canCarryFighter",DEFAULTS:qX,process:uX};function wX(e){var a=e.planet,o=e.team;s(o)&&(K("nav"),Qa.add(200)),a.pbase=d.create("PBase",{x:a.x,y:a.y,planet:a,team:o}),e.canExplode=!1,d.destroy(e)}function xX(e){var a=e.planet,o=e.team;s(o)&&(K("nav"),Qa.add(20)),a.pcolony=d.create("PColony",{x:a.x,y:a.y,planet:a,team:o}),e.canExplode=!1,d.destroy(e)}function yX(e){var a=e.planet,o=e.team,t=e.orbitRotation;s(o)&&(K("nav"),Qa.add(50)),a.spaceport=d.create("SpacePort",{x:a.x,y:a.y,planet:a,team:o}),a.spaceport.enterPlanetOrbit(a),a.spaceport.orbitRotation=t,e.canExplode=!1,d.destroy(e)}var zX=600,AX={MAX_MATERIALS_FINISHED:500,colonizationTarget:null};function BX(e){var a=e.planet.pbase;if(0===a.materialsFinished){a.materialsFinished+=e.materialsFinished,e.materialsFinished=0;var o=0;a.materialsFinished>a.MAX_FINISHED_MATERIALS?(o=a.materialsFinished-a.MAX_FINISHED_MATERIALS,a.materialsFinished=a.MAX_MATERIALS_FINISHED,e.materialsFinished=o,e.unloadSupply()):(e.canExplode=!1,d.destroy(e))}else if(e.planet.materialsFinished>0&&e.materialsFinished<e.MAX_MATERIALS_FINISHED){var t=e.MAX_MATERIALS_FINISHED-e.materialsFinished;t>=e.planet.materialsFinished?(e.materialsFinished+=e.planet.materialsFinished,e.planet.materialsFinished=0):(e.materialsFinished+=t,e.planet.materialsFinished-=t),e.loadSupply()}}function CX(e){var a=e.colonizationTarget,o=e.isOrbitingPlanet,t=e.planet,i=e.team;a&&o&&t&&(t.team===i?e.materialsFinished>0&&(void 0===e.supplyTime?e.supplyTime=zX:e.supplyTime>0?e.supplyTime--:0===e.supplyTime&&(t.pbase?t.pcolony?t.spaceport?(BX(e),e.colonizationTarget=null):(yX(e),v.displayText(i,"Colonization successful: SpacePort secured.")):(xX(e),v.displayText(i,"Colonization successful: Colony secured.")):(wX(e),v.displayText(i,"Colonization successful: PBase secured.")))):a.isOccupied()||(a.team=i,a.updateFlagColor()))}var DX={componentFlag:"canColonizePlanet",DEFAULTS:AX,process:CX};var EX={isShimmering:!0,isShimmerBlink:!1,shimmerTime:3,shimmerTimeMax:3,shimmerBlinkColor:16777215,shimmerNormalColor:16711935};function FX(m){if(m.isShimmering){var i=m.shimmerBlinkColor,r=m.shimmerNormalColor,e=m.shimmerTime,s=m.shimmerTimeMax,o=m.isShimmerBlink;e>0?m.shimmerTime--:(m.shimmerTime=s,m.isShimmerBlink=!o),m.geo.graphics.tint=o?i:r}else m.geo.graphics.tint=m.shimmerNormalColor}var GX={componentFlag:"canShimmer",DEFAULTS:EX,process:FX};var gt={HeavyCannon:.6,ClusterRocket:.3,HomingMissile:.4,LaserBolt:.2,Shield:.7},HX=function(e){return"Shield"===e},IX={developEquipment_installTimeMax:150,developEquipment_installTime:150,developEquipment_timeMax:2e3,developEquipment_time:2e3,developEquipment_equipmentReady:""};function JX(e){var t=e.developEquipment_time,i=e.developEquipment_installTime,a=e.developEquipment_installTimeMax,m=e.developEquipment_timeMax,p=e.developEquipment_equipmentReady,n=e.team;if(Boolean(p)){if(e.isShimmering=!0,i>0)e.developEquipment_installTime--;else{var $=d.getNearestUnits(e).find(function(t){return t.team===n&&(t.isDockedPlanet&&t.planet===e.planet||t.isDockedSpacePort&&t.spaceport===e.planet.spaceport)});$&&(HX(p)&&!$.shield?($.shield=d.create("Shield",{team:n,anchor:$}),e.developEquipment_equipmentReady="",s(n)&&(K("install"),$.isFighterAutoAccelerated||v.displayText(n,"".concat(p," installed.")))):"Cannon"===$.attackWeapon&&($.attackWeapon=p,e.developEquipment_equipmentReady="",s(n)&&(K("install"),$.isFighterAutoAccelerated||v.displayText(n,"".concat(p," installed."))))),e.developEquipment_installTime=a}}else if(e.isShimmering=!1,t>0)e.developEquipment_time--;else{e.developEquipment_time=m;var l=q.arrayElement(Object.keys(gt));Math.random()<gt[l]&&(e.developEquipment_equipmentReady=l,s(n)&&(K("develop"),v.displayText(n,"New equipment: ".concat(l," available."))))}}var KX={componentFlag:"canDevelopEquipment",DEFAULTS:IX,process:JX};var LX=Math.pow(20,2),MX=5,ht=5,it=2.5,NX={flockPoint:null};function OX(t){d.getNearestUnits(t).filter(function($){return $.canFlock&&$!==t}).forEach(function($){var r=wa(t,$);if(r<LX){var a=-MX;r<6&&(a*=4),t.dx+=($.x-t.x)*a,t.dy+=($.y-t.y)*a}})}function PX(t){var $=t.flockPoint;if($){var r=Ga(t,$);t.dx+=ht*Math.cos(r),t.dy+=ht*Math.sin(r)}}function QX(t){var $=t.dx,r=t.dy,a=Math.atan2(r,$);t.rotation=a,t.dx=Math.cos(a)*it,t.dy=Math.sin(a)*it}function RX(t){t.canMoveLinearly&&(OX(t),PX(t),QX(t))}var SX={componentFlag:"canFlock",DEFAULTS:NX,process:RX};var jt=[SX,kX,pX,CV,RV,TV,MW,PW,cX,lV,qV,WV,aW,JW,QR,eW,wV,tV,gV,KX,zV,HV,NV,dV,MR,jW,oW,uW,BW,at,DX,vX,iV,fX,GX,em,qU,EV];function TX(e){jt.forEach(function($){$.DEFAULTS&&e[$.componentFlag]&&Object.keys($.DEFAULTS).forEach(function(i){void 0===e[i]&&(e[i]=$.DEFAULTS[i])})})}function UX(e){e.hp>0?jt.forEach(function($){e[$.componentFlag]&&$.process&&$.process(e)}):e[em.componentFlag]&&em.process(e),e.hp>0?d.commit(e):(d.destroy(e),s(e.team)?isNaN(e.lastDamagedByTeam)||s(e.lastDamagedByTeam)||Qa.add(-2*e.maxHp):s(e.lastDamagedByTeam)&&Qa.add(e.maxHp))}var kt={init:TX,update:UX};var lb={};function VX(e){var $=e.type;lb[$]?lb[$].push(e):lb[$]=[e],k.addChild(e.geo.graphics)}var lt=function(e){return lb[e]||[]};function mt(e){e.hp=0;var $=e.type.toLowerCase();e.planet&&delete e.planet[$],e.spaceport&&delete e.spaceport[$],e.fighter&&(e.fighter.hp=0,e.fighter.undockSpacePort(),delete e.fighter),e.anchor&&(e.anchor.shield=null,delete e.anchor),delete e.shield,delete e.attackTarget,delete e.colonizationTarget;var r=lt(e.type),a=r.indexOf(e);-1!==a&&r.splice(a,1),k.removeChild(e.geo.graphics)}function WX(){var e=[];return Object.keys(lb).forEach(function($){return Array.prototype.push.apply(e,lb[$])}),e}function XX(){Object.keys(lb).forEach(function(e){lb[e].forEach(mt),delete lb[e]})}var Fd={add:VX,remove:mt,getAll:WX,clearAll:XX,getByType:lt};function YX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var r=0;r<e.length;r++){var $=e[r];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(t,$.key,$)}}function ZX(t,e,r){return e&&nt(t.prototype,e),r&&nt(t,r),t}var gm=8,$X=va>>gm;function Ta(t,e,r){var $=t.x>>gm,n=t.y>>gm;return($+=e||0)+(n+=r||0)*$X}var ot=function(){function t(){YX(this,ot),this.grid=[],this.nextGrid=[]}return ZX(t,[{key:"prepareNext",value:function(){return this.grid=this.nextGrid,this.nextGrid=[],this}},{key:"commit",value:function(t){var e=this.nextGrid;if(t.hp>0){var r=Ta(t,0,0);e[r]instanceof Array?e[r].push(t):e[r]=[t]}return this}},{key:"get1CellRadiusAroundEntity",value:function(t){for(var e=this.grid,r=[],$=[e[Ta(t,-1,-1)],e[Ta(t,0,-1)],e[Ta(t,1,-1)],e[Ta(t,-1,0)],e[Ta(t,0,0)],e[Ta(t,1,0)],e[Ta(t,0,1)],e[Ta(t,-1,1)],e[Ta(t,1,1)]],n=$.length-1;n>=0;n--)$[n]&&$[n].length>0&&Array.prototype.push.apply(r,$[n]);return r}},{key:"getNearestEnemy",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,$=this.get1CellRadiusAroundEntity(t).filter(function(e){return e.team!==t.team}),n=1/0;return $&&$.forEach(function($){var i=wa(t,$);i<=r&&i<n&&(n=i,e=$)}),e}}]),t}();function _X(t){return(_X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bY(t,e){return!e||"object"!==_X(e)&&"function"!=typeof e?hm(t):e}function cY(t){return(cY=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dY(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eY(t,e)}function eY(t,e){return(eY=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var im={body:{type:a.Polygon,lineStyle:{width:1,color:255,alpha:1},path:[-2,2,-4,0,-2,-2,-4,-4,-4,-6,2,-4,0,-2,8,0,0,2,2,4,-4,6,-4,4,-2,2],collisionPath:[-4,-6,8,0,-4,6]},flame1:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]},flame2:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-4,4,-8,5,-4,6]}},fY=[function(t){var e=t.geo.collider.calcPoints[1];return{x:e.x,y:e.y,rotation:t.rotation}}],jm=function(t){function e(t){var e;return aY(this,jm),(e=bY(this,cY(jm).call(this))).type="Fighter",e.geo=h(im.body),e.mass=10,e.hp=4,e.maxHp=4,e.rotation=0,e.canGravitate=!0,e.canExplode=!0,e.canAttack=!0,e.attackWeapon="Cannon",e.attackTurretPositions=fY,e.canBeShielded=!0,e.canShootLaserBolt=!0,e.canShootCannon=!0,e.canShootHeavyCannon=!0,e.canShootClusterRocket=!0,e.canShootHomingMissile=!0,e.canLimitSpeed=!0,e.canMoveLinearly=!0,e.canAccelerate=!0,e.canDockPlanet=!0,e.canDockSpacePort=!0,e.canAccelerateFighterToAttackTarget=!0,e.flameOn=function(){e.setChildVisible(0,!0),e.setChildVisible(1,!0)},e.flameOff=function(){e.setChildVisible(0,!1),e.setChildVisible(1,!1)},Object.assign(hm(hm(e)),t),e.assignTeamColor(),e.geo.graphics.addChild(h(im.flame1).graphics,h(im.flame2).graphics),e.flameOff(),e}return dY(e,LivingEntity),e}();function gY(i){return(gY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function hY(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function iY(i,t,e){return t&&pt(i.prototype,t),e&&pt(i,e),i}function jY(i,t){return!t||"object"!==gY(t)&&"function"!=typeof t?km(i):t}function kY(i){return(kY=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function lY(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&mY(i,t)}function mY(i,t){return(mY=Object.setPrototypeOf||function(i,t){return i.__proto__=t,i})(i,t)}function km(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var Dc={body:{type:a.Polygon,lineStyle:{width:1,color:15658734,alpha:1},collisionPath:[-44,-4,-38,-8,26,-10,44,0,26,10,-38,8,-44,4],path:[-26,-2,-26,-8,-38,-8,-38,2,-44,4,-44,-4,-38,-2,-38,8,-26,8,-26,-2,24,-2,26,-10,44,0,26,10,24,2,-26,2]},cargopodL:{type:a.Polygon,lineStyle:{width:1,color:15658734,alpha:1},path:[-24,-2,-24,-12,22,-12,22,-2]},cargopodR:{type:a.Polygon,lineStyle:{width:1,color:15658734,alpha:1},path:[-24,2,-24,12,22,12,22,2]},flag:{type:a.Polygon,lineStyle:{width:2,color:255,alpha:1},path:[34,0,42,0]},turret1:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:.5},path:[-34,0,-30,-3,-30,3,-34,0]},turret2:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:.5},path:[28,-3,32,0,28,3,28,-2]},flame:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-44,-2,-50,0,-44,2]}},qt=function(i,t,e){var r=i.attackTarget,o=(r=r||{}).dx||0,a=r.dy||0,$={x:r.x+24*o,y:r.y+24*a},n=Ga({x:t+i.x,y:e+i.y},$);return n+=q.float(-.2,.2)},nY=[function(i){var t=-34*Math.cos(i.rotation),e=-34*Math.sin(i.rotation);return{x:t,y:e,rotation:qt(i,t,e)}},function(i){var t=32*Math.cos(i.rotation),e=32*Math.sin(i.rotation);return{x:t,y:e,rotation:qt(i,t,e)}}],lm=function(i){function t(i){var t;return hY(this,lm),(t=jY(this,kY(lm).call(this))).type="Freighter",t.geo=h(Dc.body),t.hp=10,t.maxHp=10,t.canDisplayHit=!0,t.canOrbitPlanet=!0,t.isOrbitingPlanet=!1,t.orbitDistance=205,t.canExplode=!0,t.canColonizePlanet=!0,t.canMoveToColonizationTarget=!0,t.canStoreMaterial=!0,t.materialsRaw=0,t.materialsFinished=500,t.canAutoTargetEnemy=!0,t.autoTargetSearchDist2=16e4,t.canAttack=!0,t.attackTurretPositions=nY,t.canShootHomingMissile=!0,t.canShootLaserBolt=!0,t.canShootCannon=!0,t.reloadTime_Cannon=400,t.loadSupply=function(){t.setChildVisible(2,!0),t.setChildVisible(3,!0)},t.unloadSupply=function(){t.setChildVisible(2,!1),t.setChildVisible(3,!1)},t.flameOn=function(){return t.setChildVisible(0,!0)},t.flameOff=function(){return t.setChildVisible(0,!1)},Object.assign(km(km(t)),i),t.geo.graphics.addChild(h(Dc.flame).graphics,h(Dc.flag).graphics,h(Dc.cargopodL).graphics,h(Dc.cargopodR).graphics,h(Dc.turret1).graphics,h(Dc.turret2).graphics),t.assignTeamColor(),t.flameOff(),t}return lY(t,LivingEntity),iY(t,[{key:"assignTeamColor",value:function(){this.getChildAt(1).currentPath.lineColor=xc[this.team]}}]),t}();function oY(t){return(oY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qY(t,e){return!e||"object"!==oY(e)&&"function"!=typeof e?hf(t):e}function rY(t){return(rY=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sY(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tY(t,e)}function tY(t,e){return(tY=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jf={_name:"Planetary Base",body:{type:a.Polygon,lineStyle:{width:1,color:255,alpha:1},path:[-20,20,-20,-20,20,-20,20,20,-20,20]},turret1:{type:a.Polygon,lineStyle:{width:1,color:65280,alpha:.5},path:[65,-60,65,-65,60,-65,65,-60]},turret2:{type:a.Polygon,lineStyle:{width:1,color:65280,alpha:.5},path:[-65,-60,-65,-65,-60,-65,-65,-60]},turret3:{type:a.Polygon,lineStyle:{width:1,color:65280,alpha:.5},path:[65,60,65,65,60,65,65,60]},turret4:{type:a.Polygon,lineStyle:{width:1,color:65280,alpha:.5},path:[-65,60,-65,65,-60,65,-65,60]}},Gh=function(t,e,r){var i=t.attackTarget,o=i.dx||0,$=i.dy||0,a={x:i.x+24*o,y:i.y+24*$},n=Ga({x:e+t.x,y:r+t.y},a);return n+=q.float(-.2,.2)},uY=[function(t){return{x:65,y:65,rotation:Gh(t,65,65)}},function(t){return{x:65,y:-65,rotation:Gh(t,65,-65)}},function(t){return{x:-65,y:-65,rotation:Gh(t,-65,-65)}},function(t){return{x:-65,y:65,rotation:Gh(t,-65,65)}}],vY=.4,mm=function(t){function e(t){var e;return pY(this,mm),(e=qY(this,rY(mm).call(this))).type="PBase",e.geo=h(jf.body),e.reticleWidth2=30,e.reticleHeight2=30,e.hp=20,e.maxHp=20,e.canBeShielded=!0,e.canDisplayHit=!0,e.canExplode=!0,e.canHarvest=!0,e.canRepair=!0,e.canRefine=!0,e.canConstruct=!0,e.canOccupyPlanet=!0,e.canStoreMaterial=!0,e.materialsRaw=0,e.materialsFinished=0,e.canAutoTargetEnemy=!0,e.autoTargetSearchDist2=36e4,e.canAttack=!0,e.attackTurretPositions=uY,e.canShootCannon=!0,e.reloadTime_Cannon=400,Object.assign(hf(hf(e)),t),e.assignTeamColor(),e.geo.graphics.addChild(h(jf.turret1).graphics,h(jf.turret2).graphics,h(jf.turret3).graphics,h(jf.turret4).graphics),Math.random()<vY&&(e.shield=d.create("PShield",{team:t.team,anchor:hf(hf(e))})),e}return sY(e,LivingEntity),e}();function wY(t){return(wY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yY(t,e){return!e||"object"!==wY(e)&&"function"!=typeof e?nm(t):e}function zY(t){return(zY=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AY(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BY(t,e)}function BY(t,e){return(BY=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var CY={type:a.Polygon,_name:"Planetary Colony",lineStyle:{width:1,color:255,alpha:1},path:[-30,40,-70,40,-70,-40,-30,-40,-30,40]},om=function(t){function e(t){var e;return xY(this,om),(e=yY(this,zY(om).call(this))).type="PColony",e.geo=h(CY),e.reticleOffsetX=-50,e.reticleOffsetY=0,e.hp=15,e.maxHp=15,e.canDisplayHit=!0,e.canMine=!0,e.canExplode=!0,e.explosionOriginDx=-50,e.explosionOriginDy=0,e.canManufacture=!0,e.PRODUCT={Freighter:{cost:300,time:120},Fighter:{cost:500,time:90}},e.canOccupyPlanet=!0,e.canRepair=!0,e.REPAIR_COST_FINISHED=10,e.REPAIR_TIME=20,Object.assign(nm(nm(e)),t),e.assignTeamColor(),e}return AY(e,LivingEntity),e}();function DY(t){return(DY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FY(t,e){return!e||"object"!==DY(e)&&"function"!=typeof e?kf(t):e}function GY(t){return(GY=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function HY(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&IY(t,e)}function IY(t,e){return(IY=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var JY={type:a.Polygon,_name:"Planetary Communications Center",lineStyle:{width:1,color:255,alpha:1},path:[40,30,0,30,0,50,40,50,40,30,60,35,30,10,40,30]},KY=.15,pm=function(t){function e(t){var e;return EY(this,pm),(e=FY(this,GY(pm).call(this))).type="PComm",e.geo=h(JY),e.reticleOffsetX=31,e.reticleOffsetY=33,e.hp=7,e.maxHp=7,e.canDisplayHit=!0,e.canExplode=!0,e.explosionOriginDx=31,e.explosionOriginDy=33,e.canBeShielded=!0,e.canRepair=!0,e.canOccupyPlanet=!0,e.REPAIR_COST_FINISHED=2,e.REPAIR_TIME=10,Object.assign(kf(kf(e)),t),e.assignTeamColor(),Math.random()<KY&&(e.shield=d.create("PShield",{team:t.team,anchor:kf(kf(e)),anchorOffsetX:31,anchorOffsetY:33})),e}return HY(e,LivingEntity),e}();function LY(t){return(LY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NY(t,e){return!e||"object"!==LY(e)&&"function"!=typeof e?qm(t):e}function OY(t){return(OY=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PY(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QY(t,e)}function QY(t,e){return(QY=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var RY={type:a.Polygon,_name:"Planetary Lab",lineStyle:{width:1,color:16777215,alpha:1},path:[0,-40,0,-70,50,-70,50,-40,0,-40]},rm=function(t){function e(t){var e;MY(this,rm),(e=NY(this,OY(rm).call(this))).type="PLab",e.geo=h(RY),e.reticleOffsetX=25,e.reticleOffsetY=-55,e.hp=10,e.maxHp=10,e.canShimmer=!0,e.isShimmering=!1,e.shimmerBlinkColor=1044495,e.canDevelopEquipment=!0,e.canDisplayHit=!0,e.canExplode=!0,e.explosionOriginDx=25,e.explosionOriginDy=-55,e.canOccupyPlanet=!0,Object.assign(qm(qm(e)),t);var r=e.assignTeamColor();return e.shimmerNormalColor=r||vS,e}return PY(e,LivingEntity),e}();function SY(t){return(SY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TY(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function UY(t,o){return!o||"object"!==SY(o)&&"function"!=typeof o?sm(t):o}function VY(t){return(VY=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WY(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&XY(t,o)}function XY(t,o){return(XY=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function sm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var YY={_name:"Planetary Shield",type:a.Circle,radius:30,collisionRadius:30,fill:{color:0,alpha:0},lineStyle:{width:1,color:43690,alpha:1}},tm=function(t){function o(t){var o;return TY(this,tm),(o=UY(this,VY(tm).call(this))).type="PShield",o.hp=20,o.maxHp=20,o.geo=h(YY),o.canDisplayHit=!0,o.canAnchor=!0,Object.assign(sm(sm(o)),t),o}return WY(o,LivingEntity),o}();function ZY(t){return(ZY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Y(t,e){return!e||"object"!==ZY(e)&&"function"!=typeof e?um(t):e}function aZ(t){return(aZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cZ(t,e)}function cZ(t,e){return(cZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function um(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var rt={body:{type:a.Polygon,lineStyle:{width:1,color:16711935,alpha:1},path:[-4,1,0,2,4,0,0,-2,-4,-1,-4,1],collisionPath:[-4,2,0,4,8,0,0,-4,-4,-2]},flame:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]}},vm=function(t){function e(t){var e;return $Y(this,vm),(e=_Y(this,aZ(vm).call(this))).type="Probe",e.geo=h(rt.body),e.hp=2,e.maxHp=2,e.canMoveLinearly=!0,e.canFlock=!0,e.flameOn=function(){return e.setChildVisible(0,!0)},e.flameOff=function(){return e.setChildVisible(0,!1)},Object.assign(um(um(e)),t),e.assignTeamColor(),e.geo.graphics.addChild(h(rt.flame).graphics),e.flameOff(),e}return bZ(e,LivingEntity),e}();function dZ(t){return(dZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fZ(t,e){return!e||"object"!==dZ(e)&&"function"!=typeof e?wm(t):e}function gZ(t){return(gZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iZ(t,e)}function iZ(t,e){return(iZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jZ={_name:"Orbital Sensor Array",type:a.Polygon,lineStyle:{width:1,color:255,alpha:1},path:[6,26,12,28,12,40,18,46,18,34,12,40,6,42]},xm=function(t){function e(t){var e;return eZ(this,xm),(e=fZ(this,gZ(xm).call(this))).type="SensorArray",e.geo=h(jZ),e.hp=5,e.maxHp=5,e.canExplode=!0,e.canDisplayHit=!0,e.canRepair=!0,e.canOccupySpacePort=!0,Object.assign(wm(wm(e)),t),e.assignTeamColor(),e}return hZ(e,LivingEntity),e}();function kZ(t){return(kZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mZ(t,e){return!e||"object"!==kZ(e)&&"function"!=typeof e?ym(t):e}function nZ(t){return(nZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pZ(t,e)}function pZ(t,e){return(pZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ym(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var qZ={_name:"Space Dock",type:a.Polygon,lineStyle:{width:1,color:255,alpha:1},path:[6,-42,20,-42,20,-22,14,-26,6,-26]},zm=function(t){function e(t){var e;return lZ(this,zm),(e=mZ(this,nZ(zm).call(this))).type="SpaceDock",e.geo=h(qZ),e.hp=8,e.maxHp=8,e.canExplode=!0,e.canDisplayHit=!0,e.canRepair=!0,e.canManufacture=!0,e.PRODUCT={Fighter:{cost:200,time:60},Probe:{cost:15,time:10}},e.canOccupySpacePort=!0,Object.assign(ym(ym(e)),t),e.assignTeamColor(),e}return oZ(e,LivingEntity),e}();function rZ(t){return(rZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sZ(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function tZ(t,r){return!r||"object"!==rZ(r)&&"function"!=typeof r?Am(t):r}function uZ(t){return(uZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vZ(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&wZ(t,r)}function wZ(t,r){return(wZ=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function Am(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var mb={_name:"Space Port",body:{type:a.Polygon,lineStyle:{width:1,color:255,alpha:1},path:[-2,0,-6,-20,-6,-36,-2,-44,6,-44,6,-24,2,-20,2,20,6,24,6,44,-2,44,-6,36,-6,20,-2,0]},turret1:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:.5},path:[0,28,4,26,4,30,0,28]},turret2:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:.5},path:[0,-28,4,-26,4,-30,0,-28]},turret3:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:.5},path:[4,44,2,48,0,44]},turret4:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:.5},path:[4,-44,2,-48,0,-44]},flame1:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-6,20,-12,22,-6,24]},flame2:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-6,-24,-12,-22,-6,-20]},flame3:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-6,32,-12,34,-6,36]},flame4:{type:a.Polygon,lineStyle:{width:1,color:65535,alpha:1},path:[-6,-36,-12,-34,-6,-32]}},Hh=function(t,r,e){var o=t.attackTarget,$=o.dx||0,a=o.dy||0,n={x:o.x+20*$,y:o.y+20*a},i=Ga({x:r+t.x,y:e+t.y},n);return i+=q.float(-.15,.15)},Sb=Math.PI/2,xZ=[function(t){var r=28*Math.cos(t.rotation-Sb),e=28*Math.sin(t.rotation-Sb);return{x:r,y:e,rotation:Hh(t,r,e)}},function(t){var r=-28*Math.cos(t.rotation-Sb),e=-28*Math.sin(t.rotation-Sb);return{x:r,y:e,rotation:Hh(t,r,e)}},function(t){var r=46*Math.cos(t.rotation-Sb),e=46*Math.sin(t.rotation-Sb);return{x:r,y:e,rotation:Hh(t,r,e)}},function(t){var r=-46*Math.cos(t.rotation-Sb),e=-46*Math.sin(t.rotation-Sb);return{x:r,y:e,rotation:Hh(t,r,e)}}],Bm=function(t){function r(t){var r;return sZ(this,Bm),(r=tZ(this,uZ(Bm).call(this))).type="SpacePort",r.geo=h(mb.body),r.hp=35,r.maxHp=35,r.canRepair=!0,r.canRefine=!0,r.canOrbitPlanet=!0,r.orbitDistance=205,r.canAutoTargetEnemy=!0,r.canDisplayHit=!0,r.canExplode=!0,r.canAttack=!0,r.attackTurretPositions=xZ,r.canShootCannon=!0,r.reloadTime_Cannon=300,r.canCarryFighter=!0,r.canStoreMaterial=!0,r.materialsRaw=0,r.materialsFinished=0,Object.assign(Am(Am(r)),t),r.assignTeamColor(),r.geo.graphics.addChild(h(mb.flame1).graphics,h(mb.flame2).graphics,h(mb.flame3).graphics,h(mb.flame4).graphics,h(mb.turret1).graphics,h(mb.turret2).graphics,h(mb.turret3).graphics,h(mb.turret4).graphics),r}return vZ(r,LivingEntity),r}();function yZ(t){return(yZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AZ(t,e){return!e||"object"!==yZ(e)&&"function"!=typeof e?Cm(t):e}function BZ(t){return(BZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DZ(t,e)}function DZ(t,e){return(DZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var EZ={type:a.Circle,radius:20,collisionRadius:10,fill:{color:0,alpha:0},lineStyle:{width:1,color:65535,alpha:1}},Dm=function(t){function e(t){var e;return zZ(this,Dm),(e=AZ(this,BZ(Dm).call(this))).type="Shield",e.hp=12,e.maxHp=12,e.geo=h(EZ),e.canDisplayHit=!0,e.canAnchor=!0,Object.assign(Cm(Cm(e)),t),e}return CZ(e,LivingEntity),e}();function FZ(t){return(FZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HZ(t,e){return!e||"object"!==FZ(e)&&"function"!=typeof e?Em(t):e}function IZ(t){return(IZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&KZ(t,e)}function KZ(t,e){return(KZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Em(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var LZ={type:a.Polygon,fill:{color:16777215,alpha:1},path:[-1,1,1,1,1,-1,-1,-1,-1,1]},Fm=function(t){function e(t){var e;return GZ(this,Fm),(e=HZ(this,IZ(Fm).call(this))).type="CannonShot",e.canMoveLinearly=!0,e.canDamage=!0,e.canMetabolize=!0,e.hp=60,e.damageHp=1,e.geo=h(LZ),Object.assign(Em(Em(e)),t),e}return JZ(e,LivingEntity),e}();function MZ(t){return(MZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OZ(t,e){return!e||"object"!==MZ(e)&&"function"!=typeof e?Gm(t):e}function PZ(t){return(PZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function QZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RZ(t,e)}function RZ(t,e){return(RZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var SZ={type:a.Polygon,lineStyle:{width:2,color:16777215,alpha:1},path:[-3,0,0,0,0,-3,0,0,0,3,0,0,3,0]},Hm=function(t){function e(t){var e;return NZ(this,Hm),(e=OZ(this,PZ(Hm).call(this))).type="HeavyCannonShot",e.canShimmer=!0,e.shimmerNormalColor=65535,e.canMoveLinearly=!0,e.canDamage=!0,e.canMetabolize=!0,e.hp=40,e.damageHp=2,e.geo=h(SZ),Object.assign(Gm(Gm(e)),t),e}return QZ(e,LivingEntity),e}();function TZ(t){return(TZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VZ(t,e){return!e||"object"!==TZ(e)&&"function"!=typeof e?Im(t):e}function WZ(t){return(WZ=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&YZ(t,e)}function YZ(t,e){return(YZ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Im(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ZZ={type:a.Polygon,lineStyle:{width:1,color:16776960,alpha:1},path:[5,0,-5,0]},Jm=function(t){function e(t){var e;return UZ(this,Jm),(e=VZ(this,WZ(Jm).call(this))).type="LaserBolt",e.canMoveLinearly=!0,e.canDamage=!0,e.canMetabolize=!0,e.hp=q.int(2,3),e.damageHp=30,e.geo=h(ZZ),Object.assign(Im(Im(e)),t),e}return XZ(e,LivingEntity),e}();function $Z(t){return($Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a$(t,e){return!e||"object"!==$Z(e)&&"function"!=typeof e?Km(t):e}function b$(t){return(b$=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c$(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d$(t,e)}function d$(t,e){return(d$=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Km(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var st={missileBody:{type:a.Polygon,lineStyle:{width:1,color:16777215,alpha:1},path:[0,0,6,0]},missileFlame:{type:a.Polygon,lineStyle:{width:1,color:16711680,alpha:1},path:[0,0,-3,0]}},Lm=function(t){function e(t){var e;return _Z(this,Lm),(e=a$(this,b$(Lm).call(this))).type="HomingMissile",e.canShimmer=!0,e.shimmerNormalColor=15597568,e.canMoveLinearly=!0,e.canLimitSpeed=!0,e.MAX_SPEED=55,e.MAX_SPEED2=3025,e.canAccelerateToAttackTarget=!0,e.canDamage=!0,e.canMetabolize=!0,e.canAttack=!0,e.hp=60,e.damageHp=7,e.geo=h(st.missileBody),e.geo.graphics.addChild(h(st.missileFlame).graphics),Object.assign(Km(Km(e)),t),e}return c$(e,LivingEntity),e}();function e$(t){return(e$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g$(t,e){return!e||"object"!==e$(e)&&"function"!=typeof e?Mm(t):e}function h$(t){return(h$=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i$(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j$(t,e)}function j$(t,e){return(j$=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var tt={missileBody:{type:a.Polygon,lineStyle:{width:2,color:4474111,alpha:1},path:[0,0,8,0]},missileFlame:{type:a.Polygon,lineStyle:{width:1,color:16776960,alpha:1},path:[0,0,-2,0]}},Nm=function(t){function e(t){var e;return f$(this,Nm),(e=g$(this,h$(Nm).call(this))).type="ClusterRocket",e.geo=h(tt.missileBody),e.canExplode=!0,e.EXPLOSION_FRAGMENTS=20,e.EXPLOSION_SOUND="fire-heavy",e.canMoveLinearly=!0,e.canDamage=!0,e.canMetabolize=!0,e.canAttack=!0,e.hp=45,e.damageHp=.5,e.geo.graphics.addChild(h(tt.missileFlame).graphics),Object.assign(Mm(Mm(e)),t),e}return i$(e,LivingEntity),e}();var Ih=new ot,Om={Probe:vm,PBase:mm,PColony:om,PComm:pm,PLab:rm,PShield:tm,SpacePort:Bm,SpaceDock:zm,SensorArray:xm,Fighter:jm,Freighter:lm,Shield:Dm},k$=[],ut={CannonShot:Fm,HeavyCannonShot:Hm,LaserBolt:Jm,HomingMissile:Lm,ClusterRocket:Nm},Pm=[],Qm={Star:Dd,Planet:Cd},vt=Object.assign({},Qm,Om,ut),l$=Bl(Object.keys(Qm)).concat(Bl(Object.keys(Om)),Bl(Object.keys(ut)));function m$($,r){var e;return $ in vt&&(e=new vt[$](r),kt.init(e),Fd.add(e),$ in Qm&&Pm.push(e)),e}function n$($){var r=Fd.getByType($);r&&r.forEach(kt.update)}function o$(){l$.forEach(n$)}function p$(){for(var $=0;$<4;$++)wt();Pm=[],Fd.clearAll()}var q$=function($){return $.hp>0};function wt(){Ih.prepareNext(),k$=k$.filter(q$)}function r$($){$.type in Om&&Ih.commit($)}function s$(){return Pm}function t$($,r){var e,t=1/0;return Pm.filter(function($){return $.type===r}).forEach(function(r){var a=wa($,r);a<t&&(t=a,e=r)}),e}function u$($){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return Ih.getNearestEnemy($,r)}function v$($){return Ih.get1CellRadiusAroundEntity($)}var d={create:m$,updateAll:o$,commit:r$,prepareNext:wt,getBodies:s$,getAbsoluteNearestByBodyType:t$,getNearestEnemyUnit:u$,getNearestUnits:v$,clearAll:p$,getAll:Fd.getAll,destroy:Fd.remove,getByType:Fd.getByType};j.settings.SCALE_MODE=j.SCALE_MODES.NEAREST;var Ia=new j.Container,ca=new j.Container,Rm={};function xt(){gh=innerWidth,hh=innerHeight,GR=gh>>1,HR=hh>>1,$e&&($e.resize(gh,hh),Object.values(Rm).forEach(function(r){return r()}))}var w$=function(){for(Rm={};ca.children[0];)ca.removeChild(ca.children[0]);for(;Ia.children[0];)Ia.removeChild(Ia.children[0]);Ia.addChild(ca)};function x$(){w$(),void 0===$e&&(xt(),Ia.addChild(ca),$e=new j.WebGLRenderer(gh,hh),document.body.appendChild($e.view))}var y$=function(r){return Ia.alpha=r},z$=function(r){if(r.modal){var $=r.modal,e=r.id,g=r.onResize;Ia.addChild($),Rm[e]=g}else Ia.addChild(r)};var A$=function(r){if(r.modal){var $=r.modal,e=r.id;Ia.removeChild($),delete Rm[e]}else Ia.removeChild(r)};var B$=function(r){return ca.addChild(r)};var C$=function(r){return ca.removeChild(r)};var D$=function(){return $e.render(Ia)};var Jh=200,Sm=function(r){var $=r.x,e=r.y;return $<-ca.x-Jh||$>-ca.x+gh+Jh||e<-ca.y-Jh||e>-ca.y+hh+Jh};var E$=function(r){r&&(ca.x=-(r.x-GR),ca.y=-(r.y-HR))};function F$(r,$){return{x:r+ca.x,y:$+ca.y}}function G$(){d.getAll().forEach(function(r){return r.geo.graphics.visible=!Sm(r)})}var k={init:x$,setGlobalAlpha:y$,addChild:B$,removeChild:C$,render:D$,centerOn:E$,addChildToHUD:z$,removeChildFromHUD:A$,cullRenderable:G$,onResize:xt,getSceneCoordFromStageCoord:F$};var H$=2,I$=.8,lf=8e3,J$=Math.pow(lf,2);function K$(){return{x:q.float(lf,va-lf),y:q.float(lf,va-lf)}}function L$($){for(var r=d.getByType("Star"),t=0;t<r.length;t++)if(r[t]!==$&&wa($,r[t])<J$)return!1;return!0}function M$(){var $;do{$=K$()}while(!L$($));var r=d.create("Star",$),t=r;if(q.float(0,1)<I$)for(var a=q.int(1,H$),I=0;I<a;I++)t=d.create("Planet",{star:r,orbitDistance:1600+I*q.int(2,5)*800,orbitRotation:q.float(-Math.PI,Math.PI)});return t}var N$=["Cannon","HeavyCannon","LaserBolt","HomingMissile","ClusterRocket"];function O$(t,e){var a=ba[t];if("Star"===e.type){var r=q.float(-Math.PI,Math.PI),i={x:e.x+1e3*Math.cos(r),y:e.y+1e3*Math.sin(r)},$=d.create("Fighter",{x:i.x+q.int(-100,100),y:i.y+q.int(-100,100),attackWeapon:q.arrayElement(N$),isFighterAutoAccelerated:!s(a),reloadTime_HeavyCannon:60,team:a});$.shield=d.create("Shield",{x:$.x,y:$.y,team:a,anchor:$}),d.create("Freighter",{x:i.x+q.int(-100,100),y:i.y+q.int(-100,100),team:a,isOrbitingPlanet:!1,materialsFinished:500}),d.create("Freighter",{x:i.x+q.int(-100,100),y:i.y+q.int(-100,100),team:a,attackWeapon:"HomingMissile",ammo_HomingMissile:240,target:$,isOrbitingPlanet:!1,materialsFinished:500}),d.create("Freighter",{x:i.x+q.int(-100,100),y:i.y+q.int(-100,100),team:a,attackWeapon:"HomingMissile",isOrbitingPlanet:!1,materialsFinished:500}),d.create("Freighter",{x:i.x+q.int(-100,100),y:i.y+q.int(-100,100),team:a,isOrbitingPlanet:!1,materialsFinished:500}),v.displayText(a,"Invasion fleet en route to hostile world.")}else{var n={team:a,planet:e};e.team=a,e.updateFlagColor(),d.create("Fighter",{isFighterAutoAccelerated:!s(a),team:a}).dockPlanet(e),e.pbase=d.create("PBase",n),e.pcolony=d.create("PColony",n),e.plab=d.create("PLab",n),e.pcomm=d.create("PComm",n),e.spaceport=d.create("SpacePort",n);var o=Object.assign({},n,{spaceport:e.spaceport});e.spacedock=d.create("SpaceDock",o),e.sensorarray=d.create("SensorArray",o),d.getByType("Planet").filter(function(t){return t.star===e.star&&t!==e}).forEach(function(t){t.team=a,t.updateFlagColor()})}}var P$=["BLUE","GREEN","RED","YELLOW","MAGENTA"],Q$=2,R$=5;function S$(){for(var r=q.int(Q$,R$),$=P$.concat(),a=0;a<r;a++){var o=M$(),e=$.pop();e&&O$(e,o)}}var T$={init:S$};function U$(){var t=this;this.buttons.forEach(function(e,i){i===t.activeIndex?e.mouseover():e.mouseout()})}function V$(){this.activeIndex--,this.activeIndex<0&&(this.activeIndex=0),this.updateButtonState()}function W$(){this.activeIndex++;var t=this.buttons.length-1;this.activeIndex>t&&(this.activeIndex=t),this.updateButtonState()}function X$(){var t=this.buttons[this.activeIndex];t&&t.click()}function Y$(t){var e=t.width,i=void 0===e?640:e,n=t.height,$=void 0===n?480:n,a=new j.Graphics;a.lineStyle(1,65280,1),a.beginFill(0,1),a.drawRect(0,0,i,$),a.endFill();var r=function(){a.x=(innerWidth-i)/2,a.y=(innerHeight-$)/2};return r(),{id:Date.now().toString(16),modal:a,onResize:r,activeIndex:-1,buttons:[],updateButtonState:U$,prevButton:V$,nextButton:W$,clickButton:X$}}function Z$(t){var e=t.modal;k.removeChildFromHUD(e)}var Ec={create:Y$,destroy:Z$};function $$(t){var e=t.text,r=t.width,i=void 0===r?300:r,a=t.height,n=void 0===a?40:a,$=t.onClick,o=new j.Graphics;o.lineStyle(1,16777215,1),o.drawRect(0,0,i,n),o.tint=65280;var c=new j.Text(e,{fontFamily:"arial",fontSize:12,fill:16777215,align:"center"});return c.x=(i-c.width)/2,c.y=(n-c.height)/2,o.addChild(c),o.interactive=!0,o.interactiveChildren=!1,o.buttonMode=!0,o.hitArea=new j.Rectangle(0,0,i,n),o.mouseover=function(t){var e=(t||{currentTarget:this}).currentTarget;e.tint=16777215,e.getChildAt(0).tint=16711680,K("switch-flick")},o.mouseout=function(t){var e=(t||{currentTarget:this}).currentTarget;e.tint=65280,e.getChildAt(0).tint=16777215},o.click=function(){$(),K("nav")},o}var Gd={create:$$};var _$="GALAXY CONQUERED\n\nAll enemies in this sector have been eradicated!\nYour empire encompasses all known worlds in this galaxy.";function a_(e){var t=e.onClickContinue,r=Ec.create({width:400,height:300});var $=Gd.create({text:"Continue to next sector",width:360,onClick:function(){Ec.destroy(r),t()}});$.x=20,$.y=240;var a=new j.Text(_$,{fontFamily:"arial",fontSize:12,fill:16777215,align:"center"});return a.x=(400-a.width)/2,a.y=40,r.buttons.push($),r.modal.addChild($),r.modal.addChild(a),r}var b_={create:a_};var c_="GALAXY LOST\n\nFriendly forces have been vanquished!\nYour empire has failed to establish\na foothold in this galaxy.";function d_(e){var t=e.onClickContinue,r=Ec.create({width:400,height:200});var a=Gd.create({text:"Retreat to a different sector",width:360,onClick:function(){Ec.destroy(r),t()}});a.x=20,a.y=140;var $=new j.Text(c_,{fontFamily:"arial",fontSize:12,fill:16777215,align:"center"});return $.x=(400-$.width)/2,$.y=30,r.buttons.push(a),r.modal.addChild(a),r.modal.addChild($),r}var e_={create:d_};function f_(e){var r=e.onClickContinue,t=Ec.create({width:400,height:200});var a=Gd.create({text:"Return to main menu",width:360,onClick:function(){Ec.destroy(t),r()}});a.x=20,a.y=140;var o=Score.getScoreRank(),$=o.rank,i=o.score,n=new j.Text(["GAME OVER\n","Your career ends with a forced","retirement after recent losses.\n","Your final rank is ".concat($,"."),"Your final score is ".concat(i,".")].join("\n"),{fontFamily:"arial",fontSize:12,fill:16777215,align:"center"});return n.x=(400-n.width)/2,n.y=30,t.buttons.push(a),t.modal.addChild(a),t.modal.addChild(n),t}var g_={create:f_};var h_=60,yt=1e3/h_,i_=!0,zt=0,j_=.05,Kh=!1;function k_(){zd.update(),d.updateAll(),d.prepareNext()}function At(){var $=Date.now(),i=$-AR;if(!Kh&&k_(),ja.update(),i>yt){i_&&(zt<1?zt+=j_:(zt=1,i_=!1),k.setGlobalAlpha(zt));var a=jb.getFocus();a&&(v.setFocus(a),k.centerOn(a)),yc.update(),k.cullRenderable(),ua.process(a),v.update(),k.render(),AR=$-i%yt}zR=requestAnimationFrame(At)}function l_(){AR=Date.now(),At()}function m_(){cancelAnimationFrame(zR)}function Bt(){Kh=!1,Ct(),ja.setControlledEntity(null)}function n_($){if(s($)){var i;yc.clear(),Qa.addSectorResult(-1),Kh=!0,K("galaxy-lose"),i=Qa.getIsGameOver()?function(){var $=g_.create({onClickContinue:function(){return location.reload()}});k.addChildToHUD($.modal),ja.setControlledEntity($)}:Bt;var a=e_.create({onClickContinue:i});k.addChildToHUD(a.modal),ja.setControlledEntity(a)}}function o_($){if(s($)){yc.clear(),Kh=!0,Qa.addSectorResult(1),K("galaxy-win");var i=b_.create({onClickContinue:Bt});k.addChildToHUD(i.modal),ja.setControlledEntity(i)}}function Ct(){addEventListener("resize",p_),i_=!0,zt=0,d.clearAll(),k.init(),ua.init().forEach(k.addChild),yc.init(),v.init(),T$.init(),zd.init(),zd.setOnTeamLostCallback(n_),zd.setOnTeamWinCallback(o_)}function p_(){v.onResize(),ua.onResize(),k.onResize()}var q_=function(){Kh=!Kh,K("pause"),v.setPauseVisible(Kh)},Lh={init:Ct,start:l_,stop:m_,togglePause:q_,getIsPaused:function(){return Kh}};var r_,s_;var t_=0,u_=16,Dt=1e3/u_;function v_($){var t=Date.now(),r=t-t_;if(r>Dt){var a=Input.getDevice(),e=a.getInputState;(0,a.getEvents)();var l=e();l.up||l.up_arrow?$.prevButton():l.down||l.down_arrow?$.nextButton():(l.f||l.button0||l.button1||l.button2||l.button3)&&$.clickButton(),t_=t-r%Dt}}var w_={update:v_};var x_=function(){return window.open("how-to-play","_blank")},y_=function(){return window.open("http://github.com/jsyang/celestial","_blank")},z_=340,Et=360;function A_(l){var $=l.onClickNewGame,n=Ec.create({width:z_,height:Et}),o=new j.Text("Build: ".concat("2018-12-03T19:52:17.509Z"," -- ").concat("7a5963f"),{fontFamily:"arial",fontSize:12,fill:1122833,align:"left"});o.x=0,o.y=Et+10,n.modal.addChild(o);var t=360;t-=60;var r=Gd.create({text:"Source code",onClick:y_});r.x=20,r.y=t,n.modal.addChild(r),t-=60;var a=Gd.create({text:"How to play",onClick:x_});a.x=20,a.y=t,n.modal.addChild(a),t-=60;var e=Gd.create({text:"New game",onClick:$});e.x=20,e.y=t,n.modal.addChild(e),n.buttons.push(e),n.buttons.push(a),n.buttons.push(r);var i,P,c=new j.Graphics;c.lineStyle(2,16776960,1);var q=.0625,d=.05;i=40,P=60,"celestial".split("").forEach(function(l){c.drawPolygon(J(wd[l],i,P,q,d)),i+=30}),i=90,P=100,"combat".split("").forEach(function(l){c.drawPolygon(J(wd[l],i,P,q,d)),i+=30});var p=new j.Graphics;return i=190,P=20,q=1/3,d=1/3,p.lineStyle(12,3355392,1),p.drawPolygon(J(wd.symbol[0],i,P,q,d)),p.lineStyle(32,3355392,1),p.drawPolygon(J(wd.symbol[1],i,P,q,d)),n.modal.addChild(p),n.modal.addChild(c),n}var B_={create:A_};var C_=60,Ft=1e3/C_,Mh={x:0,y:0},Gt=600,Ht=0,D_=Math.PI/180*.02,E_=.05,It=1,Jt=!1;function Kt(){var $=Date.now(),e=$-s_,a=!0;Jt||w_.update(Mt),e>Ft&&(Jt?(k.setGlobalAlpha(It),It>0?It-=E_:(It=1,a=!1)):(Mh.x=Math.cos(Ht)*Gt,Mh.y=Math.sin(Ht)*Gt,Ht+=D_,k.centerOn(Mh),ua.process(Mh)),k.render(),s_=$-e%Ft),a?r_=requestAnimationFrame(Kt):G_()}var Lt,Mt=B_.create({onClickNewGame:function(){return Jt=!0}});function F_(){addEventListener("resize",Nt),k.init(),ua.init().forEach(k.addChild),k.addChildToHUD(Mt),s_=Date.now(),Kt()}function Nt(){k.onResize()}function G_(){cancelAnimationFrame(r_),Lt&&(removeEventListener("resize",Nt),Lt())}function H_($){Lt=$}var Ot={setFadeOutCallback:H_,start:F_};var I_={};function xa(){if(!(this instanceof xa))return new xa;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var r=new xa;for(var e in this)"function"!=typeof this[e]&&(r[e]=this[e]);return r}}var Tm,J_=false;function T(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function nb(e){return"function"==typeof e}function K_(e){return"number"==typeof e}function mf(e){return"object"==typeof e&&null!==e}function Pt(e){return void 0===e}function Um(){if(J_)return;J_=true;Tm={};Tm=T,T.EventEmitter=T,T.prototype._events=void 0,T.prototype._maxListeners=void 0,T.defaultMaxListeners=10,T.prototype.setMaxListeners=function(e){if(!K_(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},T.prototype.emit=function(e){var t,r,i,n,s,v;if(this._events||(this._events={}),"error"===e&&(!this._events.error||mf(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var o=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw o.context=t,o}if(Pt(r=this._events[e]))return!1;if(nb(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n);}else if(mf(r))for(n=Array.prototype.slice.call(arguments,1),i=(v=r.slice()).length,s=0;s<i;s++)v[s].apply(this,n);return!0},T.prototype.addListener=function(e,t){var r;if(!nb(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,nb(t.listener)?t.listener:t),this._events[e]?mf(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,mf(this._events[e])&&!this._events[e].warned&&(r=Pt(this._maxListeners)?T.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},T.prototype.on=T.prototype.addListener,T.prototype.once=function(e,t){if(!nb(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},T.prototype.removeListener=function(e,t){var r,i,n,s;if(!nb(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=(r=this._events[e]).length,i=-1,r===t||nb(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(mf(r)){for(s=n;s-->0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},T.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(nb(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},T.prototype.listeners=function(e){return this._events&&this._events[e]?nb(this._events[e])?[this._events[e]]:this._events[e].slice():[]},T.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(nb(t))return 1;if(t)return t.length}return 0},T.listenerCount=function(e,t){return e.listenerCount(t)}}var Hd,L_=false;function Id(){if(L_)return;L_=true;Hd={};Hd="function"==typeof Object.create?function(t,o){t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,o){t.super_=o;var e=function(){};e.prototype=o.prototype,t.prototype=new e,t.prototype.constructor=t}}var Nh,Ua,M_=false;function N_(r,e,$,n){if("function"!=typeof r)throw new TypeError("\"callback\" argument must be a function");var c,s,a=arguments.length;switch(a){case 0:case 1:return Ua.nextTick(r);case 2:return Ua.nextTick(function(){r.call(null,e)});case 3:return Ua.nextTick(function(){r.call(null,e,$)});case 4:return Ua.nextTick(function(){r.call(null,e,$,n)});default:for(c=new Array(a-1),s=0;s<c.length;)c[s++]=arguments[s];return Ua.nextTick(function(){r.apply(null,c)});}}function Oh(){if(M_)return;M_=true;Nh={};Ua=(tg(),sg);Nh=!Ua.version||0===Ua.version.indexOf("v0.")||0===Ua.version.indexOf("v1.")&&0!==Ua.version.indexOf("v1.8.")?N_:Ua.nextTick}var Qt,O_,P_=false;function Rt(){if(P_)return;P_=true;Qt={};O_={}.toString;Qt=Array.isArray||function(r){return"[object Array]"==O_.call(r)}}var St,Q_=false;function Tt(){if(Q_)return;Q_=true;St={};St=(Um(),Tm).EventEmitter}var Ph,R_,S_,T_,U_=false;function Ut($){var r=$.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===$[r-2]?2:"="===$[r-1]?1:0}function V_($){return 3*$.length/4-Ut($)}function W_($){var r,n,o,e,a,A=$.length;e=Ut($),a=new $QAn$var$Arr(3*A/4-e),n=e>0?A-4:A;var t=0;for(r=0;r<n;r+=4)o=$QAn$var$revLookup[$.charCodeAt(r)]<<18|$QAn$var$revLookup[$.charCodeAt(r+1)]<<12|$QAn$var$revLookup[$.charCodeAt(r+2)]<<6|$QAn$var$revLookup[$.charCodeAt(r+3)],a[t++]=o>>16&255,a[t++]=o>>8&255,a[t++]=255&o;return 2===e?(o=$QAn$var$revLookup[$.charCodeAt(r)]<<2|$QAn$var$revLookup[$.charCodeAt(r+1)]>>4,a[t++]=255&o):1===e&&(o=$QAn$var$revLookup[$.charCodeAt(r)]<<10|$QAn$var$revLookup[$.charCodeAt(r+1)]<<4|$QAn$var$revLookup[$.charCodeAt(r+2)]>>2,a[t++]=o>>8&255,a[t++]=255&o),a}function X_($){return $QAn$var$lookup[$>>18&63]+$QAn$var$lookup[$>>12&63]+$QAn$var$lookup[$>>6&63]+$QAn$var$lookup[63&$]}function Y_($,r,n){for(var o,e=[],a=r;a<n;a+=3)o=($[a]<<16)+($[a+1]<<8)+$[a+2],e.push(X_(o));return e.join("")}function Z_($){for(var r,n=$.length,o=n%3,e="",a=[],A=0,t=n-o;A<t;A+=16383)a.push(Y_($,A,A+16383>t?t:A+16383));return 1===o?(r=$[n-1],e+=$QAn$var$lookup[r>>2],e+=$QAn$var$lookup[r<<4&63],e+="=="):2===o&&(r=($[n-2]<<8)+$[n-1],e+=$QAn$var$lookup[r>>10],e+=$QAn$var$lookup[r>>4&63],e+=$QAn$var$lookup[r<<2&63],e+="="),a.push(e),a.join("")}function $_(){if(U_)return;U_=true;Ph={};R_=V_;Ph.byteLength=R_;S_=W_;Ph.toByteArray=S_;T_=Z_;Ph.fromByteArray=T_;for(var $QAn$var$lookup=[],$QAn$var$revLookup=[],$QAn$var$Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,$QAn$var$code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$QAn$var$i=0,$QAn$var$len=$QAn$var$code.length;$QAn$var$i<$QAn$var$len;++$QAn$var$i)$QAn$var$lookup[$QAn$var$i]=$QAn$var$code[$QAn$var$i],$QAn$var$revLookup[$QAn$var$code.charCodeAt($QAn$var$i)]=$QAn$var$i;$QAn$var$revLookup["-".charCodeAt(0)]=62,$QAn$var$revLookup["_".charCodeAt(0)]=63}var Vm,__,aaa,baa=false;function caa(){if(baa)return;baa=true;Vm={};__=function(a,t,r,o,$){var e,p,h=8*$-o-1,M=(1<<h)-1,w=M>>1,f=-7,i=r?$-1:0,s=r?-1:1,x=a[t+i];for(i+=s,e=x&(1<<-f)-1,x>>=-f,f+=h;f>0;e=256*e+a[t+i],i+=s,f-=8);for(p=e&(1<<-f)-1,e>>=-f,f+=o;f>0;p=256*p+a[t+i],i+=s,f-=8);if(0===e)e=1-w;else{if(e===M)return p?NaN:1/0*(x?-1:1);p+=Math.pow(2,o),e-=w}return(x?-1:1)*p*Math.pow(2,e-o)};Vm.read=__;aaa=function(a,t,r,o,$,e){var p,h,M,w=8*e-$-1,f=(1<<w)-1,i=f>>1,s=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,x=o?0:e-1,N=o?1:-1,O=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,p=f):(p=Math.floor(Math.log(t)/Math.LN2),t*(M=Math.pow(2,-p))<1&&(p--,M*=2),(t+=p+i>=1?s/M:s*Math.pow(2,1-i))*M>=2&&(p++,M/=2),p+i>=f?(h=0,p=f):p+i>=1?(h=(t*M-1)*Math.pow(2,$),p+=i):(h=t*Math.pow(2,i-1)*Math.pow(2,$),p=0));$>=8;a[r+x]=255&h,x+=N,h/=256,$-=8);for(p=p<<$|h,w+=$;w>0;a[r+x]=255&p,x+=N,p/=256,w-=8);a[r+x-N]|=128*O};Vm.write=aaa}var Va,Wm,Jd,Vt,daa,eaa,faa,gaa,Wt,haa,iaa=false;function jaa(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function Qh(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ob(e,r){if(Qh()<r)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r)).__proto__=c.prototype:(null===e&&(e=new c(r)),e.length=r),e}function c(e,r,t){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,r,t);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return Xm(this,e)}return Xt(this,e,r,t)}function Xt(e,r,t,f){if("number"==typeof r)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?maa(e,r,t,f):"string"==typeof r?laa(e,r,t):naa(e,r)}function Yt(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");if(e<0)throw new RangeError("\"size\" argument must not be negative")}function kaa(e,r,t,f){return Yt(r),r<=0?ob(e,r):void 0!==t?"string"==typeof f?ob(e,r).fill(t,f):ob(e,r).fill(t):ob(e,r)}function Xm(e,r){if(Yt(r),e=ob(e,r<0?0:0|Zm(r)),!c.TYPED_ARRAY_SUPPORT)for(var t=0;t<r;++t)e[t]=0;return e}function laa(e,r,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var f=0|Zt(r,t),$=(e=ob(e,f)).write(r,t);return $!==f&&(e=e.slice(0,$)),e}function Ym(e,r){var t=r.length<0?0:0|Zm(r.length);e=ob(e,t);for(var f=0;f<t;f+=1)e[f]=255&r[f];return e}function maa(e,r,t,f){if(r.byteLength,t<0||r.byteLength<t)throw new RangeError("'offset' is out of bounds");if(r.byteLength<t+(f||0))throw new RangeError("'length' is out of bounds");return r=void 0===t&&void 0===f?new Uint8Array(r):void 0===f?new Uint8Array(r,t):new Uint8Array(r,t,f),c.TYPED_ARRAY_SUPPORT?(e=r).__proto__=c.prototype:e=Ym(e,r),e}function naa(e,r){if(c.isBuffer(r)){var t=0|Zm(r.length);return 0===(e=ob(e,t)).length?e:(r.copy(e,0,0,t),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||Gaa(r.length)?ob(e,0):Ym(e,r);if("Buffer"===r.type&&Vt(r.data))return Ym(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Zm(e){if(e>=Qh())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qh().toString(16)+" bytes");return 0|e}function oaa(e){return+e!=e&&(e=0),c.alloc(+e)}function Zt(e,r){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var t=e.length;if(0===t)return 0;for(var f=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Th(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return fu(e).length;default:if(f)return Th(e).length;r=(""+r).toLowerCase(),f=!0;}}function paa(e,r,t){var f=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return zaa(this,r,t);case"utf8":case"utf-8":return bu(this,r,t);case"ascii":return xaa(this,r,t);case"latin1":case"binary":return yaa(this,r,t);case"base64":return vaa(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Aaa(this,r,t);default:if(f)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),f=!0;}}function Fc(e,r,t){var f=e[r];e[r]=e[t],e[t]=f}function $t(e,r,t,f,$){if(0===e.length)return-1;if("string"==typeof t?(f=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=$?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if($)return-1;t=e.length-1}else if(t<0){if(!$)return-1;t=0}if("string"==typeof r&&(r=c.from(r,f)),c.isBuffer(r))return 0===r.length?-1:_t(e,r,t,f,$);if("number"==typeof r)return r&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?$?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):_t(e,[r],t,f,$);throw new TypeError("val must be string, number or Buffer")}function _t(e,r,t,f,$){var n,a=1,i=e.length,o=r.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(e.length<2||r.length<2)return-1;a=2,i/=2,o/=2,t/=2}function u(e,r){return 1===a?e[r]:e.readUInt16BE(r*a)}if($){var s=-1;for(n=t;n<i;n++)if(u(e,n)===u(r,-1===s?0:n-s)){if(-1===s&&(s=n),n-s+1===o)return s*a}else-1!==s&&(n-=n-s),s=-1}else for(t+o>i&&(t=i-o),n=t;n>=0;n--){for(var h=!0,v=0;v<o;v++)if(u(e,n+v)!==u(r,v)){h=!1;break}if(h)return n}return-1}function qaa(e,r,t,f){t=Number(t)||0;var $=e.length-t;f?(f=Number(f))>$&&(f=$):f=$;var n=r.length;if(n%2!=0)throw new TypeError("Invalid hex string");f>n/2&&(f=n/2);for(var a=0;a<f;++a){var i=parseInt(r.substr(2*a,2),16);if(isNaN(i))return a;e[t+a]=i}return a}function raa(e,r,t,f){return Uh(Th(r,e.length-t),e,t,f)}function au(e,r,t,f){return Uh(Eaa(r),e,t,f)}function saa(e,r,t,f){return au(e,r,t,f)}function taa(e,r,t,f){return Uh(fu(r),e,t,f)}function uaa(e,r,t,f){return Uh(Faa(r,e.length-t),e,t,f)}function vaa(e,r,t){return 0===r&&t===e.length?Wm.fromByteArray(e):Wm.fromByteArray(e.slice(r,t))}function bu(e,r,t){t=Math.min(e.length,t);for(var f=[],$=r;$<t;){var n,a,i,o,u=e[$],s=null,h=u>239?4:u>223?3:u>191?2:1;if($+h<=t)switch(h){case 1:u<128&&(s=u);break;case 2:128==(192&(n=e[$+1]))&&(o=(31&u)<<6|63&n)>127&&(s=o);break;case 3:n=e[$+1],a=e[$+2],128==(192&n)&&128==(192&a)&&(o=(15&u)<<12|(63&n)<<6|63&a)>2047&&(o<55296||o>57343)&&(s=o);break;case 4:n=e[$+1],a=e[$+2],i=e[$+3],128==(192&n)&&128==(192&a)&&128==(192&i)&&(o=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&i)>65535&&o<1114112&&(s=o);}null===s?(s=65533,h=1):s>65535&&(s-=65536,f.push(s>>>10&1023|55296),s=56320|1023&s),f.push(s),$+=h}return waa(f)}function waa(e){var r=e.length;if(r<=Wt)return String.fromCharCode.apply(String,e);for(var t="",f=0;f<r;)t+=String.fromCharCode.apply(String,e.slice(f,f+=Wt));return t}function xaa(e,r,t){var f="";t=Math.min(e.length,t);for(var $=r;$<t;++$)f+=String.fromCharCode(127&e[$]);return f}function yaa(e,r,t){var f="";t=Math.min(e.length,t);for(var $=r;$<t;++$)f+=String.fromCharCode(e[$]);return f}function zaa(e,r,t){var f=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>f)&&(t=f);for(var $="",n=r;n<t;++n)$+=Daa(e[n]);return $}function Aaa(e,r,t){for(var f=e.slice(r,t),$="",n=0;n<f.length;n+=2)$+=String.fromCharCode(f[n]+256*f[n+1]);return $}function U(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function ka(e,r,t,f,$,n){if(!c.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(r>$||r<n)throw new RangeError("\"value\" argument is out of bounds");if(t+f>e.length)throw new RangeError("Index out of range")}function Rh(e,r,t,f){r<0&&(r=65535+r+1);for(var $=0,n=Math.min(e.length-t,2);$<n;++$)e[t+$]=(r&255<<8*(f?$:1-$))>>>8*(f?$:1-$)}function Sh(e,r,t,f){r<0&&(r=4294967295+r+1);for(var $=0,n=Math.min(e.length-t,4);$<n;++$)e[t+$]=r>>>8*(f?$:3-$)&255}function cu(e,r,t,f,$,n){if(t+f>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function du(e,r,t,f,$){return $||cu(e,r,t,4,3.4028234663852886e38,-3.4028234663852886e38),Jd.write(e,r,t,f,23,4),t+4}function eu(e,r,t,f,$){return $||cu(e,r,t,8,1.7976931348623157e308,-1.7976931348623157e308),Jd.write(e,r,t,f,52,8),t+8}function Baa(e){if((e=Caa(e).replace(haa,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function Caa(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Daa(e){return e<16?"0"+e.toString(16):e.toString(16)}function Th(e,r){var t;r=r||1/0;for(var f=e.length,$=null,n=[],a=0;a<f;++a){if((t=e.charCodeAt(a))>55295&&t<57344){if(!$){if(t>56319){(r-=3)>-1&&n.push(239,191,189);continue}if(a+1===f){(r-=3)>-1&&n.push(239,191,189);continue}$=t;continue}if(t<56320){(r-=3)>-1&&n.push(239,191,189),$=t;continue}t=65536+($-55296<<10|t-56320)}else $&&(r-=3)>-1&&n.push(239,191,189);if($=null,t<128){if((r-=1)<0)break;n.push(t)}else if(t<2048){if((r-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function Eaa(e){for(var r=[],t=0;t<e.length;++t)r.push(255&e.charCodeAt(t));return r}function Faa(e,r){for(var t,f,$,n=[],a=0;a<e.length&&!((r-=2)<0);++a)f=(t=e.charCodeAt(a))>>8,$=t%256,n.push($),n.push(f);return n}function fu(e){return Wm.toByteArray(Baa(e))}function Uh(e,r,t,f){for(var $=0;$<f&&!($+t>=r.length||$>=e.length);++$)r[$+t]=e[$];return $}function Gaa(e){return e!=e}function nf(){if(iaa)return;iaa=true;Va={};Wm=($_(),Ph);Jd=(caa(),Vm);Vt=(Rt(),Qt);daa=c;Va.Buffer=daa;eaa=oaa;Va.SlowBuffer=eaa;faa=50;Va.INSPECT_MAX_BYTES=faa,c.TYPED_ARRAY_SUPPORT=void 0!==B.TYPED_ARRAY_SUPPORT?B.TYPED_ARRAY_SUPPORT:jaa();gaa=Qh();Va.kMaxLength=gaa,c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,r,t){return Xt(null,e,r,t)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,r,t){return kaa(null,e,r,t)},c.allocUnsafe=function(e){return Xm(null,e)},c.allocUnsafeSlow=function(e){return Xm(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,r){if(!c.isBuffer(e)||!c.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var t=e.length,f=r.length,$=0,n=Math.min(t,f);$<n;++$)if(e[$]!==r[$]){t=e[$],f=r[$];break}return t<f?-1:f<t?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},c.concat=function(e,r){if(!Vt(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return c.alloc(0);var t;if(void 0===r)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var f=c.allocUnsafe(r),$=0;for(t=0;t<e.length;++t){var n=e[t];if(!c.isBuffer(n))throw new TypeError("\"list\" argument must be an Array of Buffers");n.copy(f,$),$+=n.length}return f},c.byteLength=Zt,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Fc(this,r,r+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Fc(this,r,r+3),Fc(this,r+1,r+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Fc(this,r,r+7),Fc(this,r+1,r+6),Fc(this,r+2,r+5),Fc(this,r+3,r+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?bu(this,0,e):paa.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=Va.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,r,t,f,$){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===t&&(t=e?e.length:0),void 0===f&&(f=0),void 0===$&&($=this.length),r<0||t>e.length||f<0||$>this.length)throw new RangeError("out of range index");if(f>=$&&r>=t)return 0;if(f>=$)return-1;if(r>=t)return 1;if(this===e)return 0;for(var n=($>>>=0)-(f>>>=0),a=(t>>>=0)-(r>>>=0),i=Math.min(n,a),o=this.slice(f,$),u=e.slice(r,t),s=0;s<i;++s)if(o[s]!==u[s]){n=o[s],a=u[s];break}return n<a?-1:a<n?1:0},c.prototype.includes=function(e,r,t){return-1!==this.indexOf(e,r,t)},c.prototype.indexOf=function(e,r,t){return $t(this,e,r,t,!0)},c.prototype.lastIndexOf=function(e,r,t){return $t(this,e,r,t,!1)},c.prototype.write=function(e,r,t,f){if(void 0===r)f="utf8",t=this.length,r=0;else if(void 0===t&&"string"==typeof r)f=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(t)?(t|=0,void 0===f&&(f="utf8")):(f=t,t=void 0)}var $=this.length-r;if((void 0===t||t>$)&&(t=$),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");for(var n=!1;;)switch(f){case"hex":return qaa(this,e,r,t);case"utf8":case"utf-8":return raa(this,e,r,t);case"ascii":return au(this,e,r,t);case"latin1":case"binary":return saa(this,e,r,t);case"base64":return taa(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uaa(this,e,r,t);default:if(n)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),n=!0;}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Wt=4096;c.prototype.slice=function(e,r){var t,f=this.length;if((e=~~e)<0?(e+=f)<0&&(e=0):e>f&&(e=f),(r=void 0===r?f:~~r)<0?(r+=f)<0&&(r=0):r>f&&(r=f),r<e&&(r=e),c.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,r)).__proto__=c.prototype;else{var $=r-e;t=new c($,void 0);for(var n=0;n<$;++n)t[n]=this[n+e]}return t},c.prototype.readUIntLE=function(e,r,t){e|=0,r|=0,t||U(e,r,this.length);for(var f=this[e],$=1,n=0;++n<r&&($*=256);)f+=this[e+n]*$;return f},c.prototype.readUIntBE=function(e,r,t){e|=0,r|=0,t||U(e,r,this.length);for(var f=this[e+--r],$=1;r>0&&($*=256);)f+=this[e+--r]*$;return f},c.prototype.readUInt8=function(e,r){return r||U(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,r){return r||U(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,r){return r||U(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,r){return r||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,r){return r||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,r,t){e|=0,r|=0,t||U(e,r,this.length);for(var f=this[e],$=1,n=0;++n<r&&($*=256);)f+=this[e+n]*$;return f>=($*=128)&&(f-=Math.pow(2,8*r)),f},c.prototype.readIntBE=function(e,r,t){e|=0,r|=0,t||U(e,r,this.length);for(var f=r,$=1,n=this[e+--f];f>0&&($*=256);)n+=this[e+--f]*$;return n>=($*=128)&&(n-=Math.pow(2,8*r)),n},c.prototype.readInt8=function(e,r){return r||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,r){r||U(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt16BE=function(e,r){r||U(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt32LE=function(e,r){return r||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,r){return r||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,r){return r||U(e,4,this.length),Jd.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,r){return r||U(e,4,this.length),Jd.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,r){return r||U(e,8,this.length),Jd.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,r){return r||U(e,8,this.length),Jd.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,r,t,f){(e=+e,r|=0,t|=0,f)||ka(this,e,r,t,Math.pow(2,8*t)-1,0);var $=1,n=0;for(this[r]=255&e;++n<t&&($*=256);)this[r+n]=e/$&255;return r+t},c.prototype.writeUIntBE=function(e,r,t,f){(e=+e,r|=0,t|=0,f)||ka(this,e,r,t,Math.pow(2,8*t)-1,0);var $=t-1,n=1;for(this[r+$]=255&e;--$>=0&&(n*=256);)this[r+$]=e/n&255;return r+t},c.prototype.writeUInt8=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},c.prototype.writeUInt16LE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):Rh(this,e,r,!0),r+2},c.prototype.writeUInt16BE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):Rh(this,e,r,!1),r+2},c.prototype.writeUInt32LE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):Sh(this,e,r,!0),r+4},c.prototype.writeUInt32BE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):Sh(this,e,r,!1),r+4},c.prototype.writeIntLE=function(e,r,t,f){if(e=+e,r|=0,!f){var $=Math.pow(2,8*t-1);ka(this,e,r,t,$-1,-$)}var n=0,a=1,i=0;for(this[r]=255&e;++n<t&&(a*=256);)e<0&&0===i&&0!==this[r+n-1]&&(i=1),this[r+n]=(e/a>>0)-i&255;return r+t},c.prototype.writeIntBE=function(e,r,t,f){if(e=+e,r|=0,!f){var $=Math.pow(2,8*t-1);ka(this,e,r,t,$-1,-$)}var n=t-1,a=1,i=0;for(this[r+n]=255&e;--n>=0&&(a*=256);)e<0&&0===i&&0!==this[r+n+1]&&(i=1),this[r+n]=(e/a>>0)-i&255;return r+t},c.prototype.writeInt8=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},c.prototype.writeInt16LE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):Rh(this,e,r,!0),r+2},c.prototype.writeInt16BE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):Rh(this,e,r,!1),r+2},c.prototype.writeInt32LE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):Sh(this,e,r,!0),r+4},c.prototype.writeInt32BE=function(e,r,t){return e=+e,r|=0,t||ka(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):Sh(this,e,r,!1),r+4},c.prototype.writeFloatLE=function(e,r,t){return du(this,e,r,!0,t)},c.prototype.writeFloatBE=function(e,r,t){return du(this,e,r,!1,t)},c.prototype.writeDoubleLE=function(e,r,t){return eu(this,e,r,!0,t)},c.prototype.writeDoubleBE=function(e,r,t){return eu(this,e,r,!1,t)},c.prototype.copy=function(e,r,t,f){if(t||(t=0),f||0===f||(f=this.length),r>=e.length&&(r=e.length),r||(r=0),f>0&&f<t&&(f=t),f===t)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),e.length-r<f-t&&(f=e.length-r+t);var $,n=f-t;if(this===e&&t<r&&r<f)for($=n-1;$>=0;--$)e[$+r]=this[$+t];else if(n<1e3||!c.TYPED_ARRAY_SUPPORT)for($=0;$<n;++$)e[$+r]=this[$+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+n),r);return n},c.prototype.fill=function(e,r,t,f){if("string"==typeof e){if("string"==typeof r?(f=r,r=0,t=this.length):"string"==typeof t&&(f=t,t=this.length),1===e.length){var $=e.charCodeAt(0);$<256&&(e=$)}if(void 0!==f&&"string"!=typeof f)throw new TypeError("encoding must be a string");if("string"==typeof f&&!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var n;if(r>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"==typeof e)for(n=r;n<t;++n)this[n]=e;else{var a=c.isBuffer(e)?e:Th(new c(e,f).toString()),i=a.length;for(n=0;n<t-r;++n)this[n+r]=a[n%i]}return this};haa=/[^+\/0-9A-Za-z-_]/g}var Kd,Vh,pb,Haa=false;function gu(f,r){for(var $ in f)r[$]=f[$]}function Ld(f,r,$){return pb(f,r,$)}function Wh(){if(Haa)return;Haa=true;Kd={};Vh=(nf(),Va);pb=Vh.Buffer;if(pb.from&&pb.alloc&&pb.allocUnsafe&&pb.allocUnsafeSlow)Kd=Vh;else{gu(Vh,Kd);var $udfh$export$Buffer=Ld;Kd.Buffer=$udfh$export$Buffer}gu(pb,Ld),Ld.from=function(f,r,$){if("number"==typeof f)throw new TypeError("Argument must not be a number");return pb(f,r,$)},Ld.alloc=function(f,r,$){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=pb(f);return void 0!==r?"string"==typeof $?u.fill(r,$):u.fill(r):u.fill(0),u},Ld.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return pb(f)},Ld.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Vh.SlowBuffer(f)}}var M,Iaa,Jaa,Kaa,Laa,Maa,Naa,Oaa,Paa,Qaa,Raa,Saa,Taa,Uaa,Vaa,Waa,Xaa,Yaa=false;function Zaa($){return Array.isArray?Array.isArray($):"[object Array]"===Xh($)}function $aa($){return"boolean"==typeof $}function _aa($){return null===$}function aba($){return null==$}function bba($){return"number"==typeof $}function cba($){return"string"==typeof $}function dba($){return"symbol"==typeof $}function eba($){return void 0===$}function fba($){return"[object RegExp]"===Xh($)}function gba($){return"object"==typeof $&&null!==$}function hba($){return"[object Date]"===Xh($)}function iba($){return"[object Error]"===Xh($)||$ instanceof Error}function jba($){return"function"==typeof $}function kba($){return null===$||"boolean"==typeof $||"number"==typeof $||"string"==typeof $||"symbol"==typeof $||void 0===$}function Xh($){return Object.prototype.toString.call($)}function of(){if(Yaa)return;Yaa=true;M={};Iaa=(nf(),Va).Buffer;Jaa=Zaa;M.isArray=Jaa;Kaa=$aa;M.isBoolean=Kaa;Laa=_aa;M.isNull=Laa;Maa=aba;M.isNullOrUndefined=Maa;Naa=bba;M.isNumber=Naa;Oaa=cba;M.isString=Oaa;Paa=dba;M.isSymbol=Paa;Qaa=eba;M.isUndefined=Qaa;Raa=fba;M.isRegExp=Raa;Saa=gba;M.isObject=Saa;Taa=hba;M.isDate=Taa;Uaa=iba;M.isError=Uaa;Vaa=jba;M.isFunction=Vaa;Waa=kba;M.isPrimitive=Waa;Xaa=Iaa.isBuffer;M.isBuffer=Xaa}var lba=false;function mba(){if(lba)return;lba=true}var nba,hu,oba=false;function pba(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function qba(t,h,a){t.copy(h,a)}function rba(){if(oba)return;oba=true;nba={};hu=(Wh(),Kd).Buffer;nba=function(){function t(){pba(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var h={data:t,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length},t.prototype.unshift=function(t){var h={data:t,next:this.head};0===this.length&&(this.tail=h),this.head=h,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var h=this.head,a=""+h.data;h=h.next;)a+=t+h.data;return a},t.prototype.concat=function(t){if(0===this.length)return hu.alloc(0);if(1===this.length)return this.head.data;for(var h=hu.allocUnsafe(t>>>0),a=this.head,e=0;a;)qba(a.data,h,e),e+=a.data.length,a=a.next;return h},t}()}var fm,iu,sba=false;function tba(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;a||i?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||iu(ju,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(iu(ju,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}))}function uba(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ju(t,e){t.emit("error",e)}function ku(){if(sba)return;sba=true;fm={};iu=(Oh(),Nh);fm={destroy:tba,undestroy:uba}}var vba,wba=false;function xba(r,e){if($m("noDeprecation"))return r;var a=!1;return function(){if(!a){if($m("throwDeprecation"))throw new Error(e);$m("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return r.apply(this,arguments)}}function $m(r){try{if(!B.localStorage)return!1}catch(a){return!1}var e=B.localStorage[r];return null!=e&&"true"===String(e).toLowerCase()}function yba(){if(wba)return;wba=true;vba={};vba=xba}var _m,lu,Gc,Yh,zba,mu,Aba,nu,Zh,Bba,ou,pu,Cba=false;function qu(r){var e=this;this.next=null,this.entry=null,this.finish=function(){Rba(e,r)}}function Dba(r){return Zh.from(r)}function Eba(r){return Zh.isBuffer(r)||r instanceof Bba}function Fba(){}function pf(r,e){Yh=Yh||(Ic(),Hc),r=r||{},this.objectMode=!!r.objectMode,e instanceof Yh&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var t=r.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=t||0===t?t:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===r.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(r){Mba(e,r)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new qu(this)}function V(r){if(Yh=Yh||(Ic(),Hc),!(ou.call(V,this)||this instanceof Yh))return new V(r);this._writableState=new pf(r,this),this.writable=!0,r&&("function"==typeof r.write&&(this._write=r.write),"function"==typeof r.writev&&(this._writev=r.writev),"function"==typeof r.destroy&&(this._destroy=r.destroy),"function"==typeof r.final&&(this._final=r.final)),nu.call(this)}function Gba(r,e){var t=new Error("write after end");r.emit("error",t),Gc(e,t)}function Hba(r,e,t,i){var n=!0,$=!1;return null===t?$=new TypeError("May not write null values to stream"):"string"==typeof t||void 0===t||e.objectMode||($=new TypeError("Invalid non-string/buffer chunk")),$&&(r.emit("error",$),Gc(i,$),n=!1),n}function Iba(r,e,t){return r.objectMode||!1===r.decodeStrings||"string"!=typeof e||(e=Zh.from(e,t)),e}function Jba(r,e,t,i,n,$){if(!t){var a=Iba(e,i,n);i!==a&&(t=!0,n="buffer",i=a)}var o=e.objectMode?1:i.length;e.length+=o;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:t,callback:$,next:null},f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else an(r,e,!1,o,i,n,$);return s}function an(r,e,t,i,n,$,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,t?r._writev(n,e.onwrite):r._write(n,$,e.onwrite),e.sync=!1}function Kba(r,e,t,i,n){--e.pendingcb,t?(Gc(n,i),Gc(qf,r,e),r._writableState.errorEmitted=!0,r.emit("error",i)):(n(i),r._writableState.errorEmitted=!0,r.emit("error",i),qf(r,e))}function Lba(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function Mba(r,e){var t=r._writableState,i=t.sync,n=t.writecb;if(Lba(t),e)Kba(r,t,i,e,n);else{var $=tu(t);$||t.corked||t.bufferProcessing||!t.bufferedRequest||su(r,t),i?zba(ru,r,t,$,n):ru(r,t,$,n)}}function ru(r,e,t,i){t||Nba(r,e),e.pendingcb--,i(),qf(r,e)}function Nba(r,e){0===e.length&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function su(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var i=e.bufferedRequestCount,n=new Array(i),$=e.corkedRequestsFree;$.entry=t;for(var a=0,o=!0;t;)n[a]=t,t.isBuf||(o=!1),t=t.next,a+=1;n.allBuffers=o,an(r,e,!0,e.length,n,"",$.finish),e.pendingcb++,e.lastBufferedRequest=null,$.next?(e.corkedRequestsFree=$.next,$.next=null):e.corkedRequestsFree=new qu(e)}else{for(;t;){var s=t.chunk,f=t.encoding,u=t.callback;if(an(r,e,!1,e.objectMode?1:s.length,s,f,u),t=t.next,e.writing)break}null===t&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}function tu(r){return r.ending&&0===r.length&&null===r.bufferedRequest&&!r.finished&&!r.writing}function Oba(r,e){r._final(function(t){e.pendingcb--,t&&r.emit("error",t),e.prefinished=!0,r.emit("prefinish"),qf(r,e)})}function Pba(r,e){e.prefinished||e.finalCalled||("function"==typeof r._final?(e.pendingcb++,e.finalCalled=!0,Gc(Oba,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function qf(r,e){var t=tu(e);return t&&(Pba(r,e),0===e.pendingcb&&(e.finished=!0,r.emit("finish"))),t}function Qba(r,e,t){e.ending=!0,qf(r,e),t&&(e.finished?Gc(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function Rba(r,e,t){var i=r.entry;for(r.entry=null;i;){var n=i.callback;e.pendingcb--,n(t),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=r:e.corkedRequestsFree=r}function bn(){if(Cba)return;Cba=true;_m={};lu=(tg(),sg);Gc=(Oh(),Nh);_m=V;zba=!lu.browser&&["v0.10","v0.9."].indexOf(lu.version.slice(0,5))>-1?setImmediate:Gc;V.WritableState=pf;mu=(of(),M);mu.inherits=(Id(),Hd);Aba={deprecate:(yba(),vba)};nu=(Tt(),St);Zh=(Wh(),Kd).Buffer;Bba=B.Uint8Array||function(){};pu=(ku(),fm);mu.inherits(V,nu),pf.prototype.getBuffer=function(){for(var r=this.bufferedRequest,e=[];r;)e.push(r),r=r.next;return e},function(){try{Object.defineProperty(pf.prototype,"buffer",{get:Aba.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(ou=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(r){return!!ou.call(this,r)||r&&r._writableState instanceof pf}})):ou=function(r){return r instanceof this},V.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},V.prototype.write=function(r,e,t){var i=this._writableState,n=!1,$=Eba(r)&&!i.objectMode;return $&&!Zh.isBuffer(r)&&(r=Dba(r)),"function"==typeof e&&(t=e,e=null),$?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof t&&(t=Fba),i.ended?Gba(this,t):($||Hba(this,i,r,t))&&(i.pendingcb++,n=Jba(this,i,$,r,e,t)),n},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,r.writing||r.corked||r.finished||r.bufferProcessing||!r.bufferedRequest||su(this,r))},V.prototype.setDefaultEncoding=function(r){if("string"==typeof r&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+r);return this._writableState.defaultEncoding=r,this},V.prototype._write=function(r,e,t){t(new Error("_write() is not implemented"))},V.prototype._writev=null,V.prototype.end=function(r,e,t){var i=this._writableState;"function"==typeof r?(t=r,r=null,e=null):"function"==typeof e&&(t=e,e=null),null!=r&&this.write(r,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||Qba(this,i,t)},Object.defineProperty(V.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(r){this._writableState&&(this._writableState.destroyed=r)}}),V.prototype.destroy=pu.destroy,V.prototype._undestroy=pu.undestroy,V.prototype._destroy=function(r,e){this.end(),e(r)}}var Hc,uu,Sba,vu,wu,cn,Tba=false;function Tb(t){if(!(this instanceof Tb))return new Tb(t);wu.call(this,t),cn.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Uba)}function Uba(){this.allowHalfOpen||this._writableState.ended||uu(Vba,this)}function Vba(t){t.end()}function Ic(){if(Tba)return;Tba=true;Hc={};uu=(Oh(),Nh);Sba=Object.keys||function(t){var e=[];for(var $ in t)e.push($);return e};Hc=Tb;vu=(of(),M);vu.inherits=(Id(),Hd);wu=(Mu(),zu);cn=(bn(),_m);vu.inherits(Tb,wu);for(var $Nn5t$var$keys=Sba(cn.prototype),$Nn5t$var$v=0;$Nn5t$var$v<$Nn5t$var$keys.length;$Nn5t$var$v++){var $Nn5t$var$method=$Nn5t$var$keys[$Nn5t$var$v];Tb.prototype[$Nn5t$var$method]||(Tb.prototype[$Nn5t$var$method]=cn.prototype[$Nn5t$var$method])}Object.defineProperty(Tb.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),Tb.prototype._destroy=function(t,e){this.push(null),this.end(),uu(e,t)}}var dn,en,xu,Wba,Xba=false;function Yba(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0;}}function Zba(t){var e=Yba(t);if("string"!=typeof e&&(en.isEncoding===xu||!xu(t)))throw new Error("Unknown encoding: "+t);return e||t}function rf(t){var e;switch(this.encoding=Zba(t),this.encoding){case"utf16le":this.text=dca,this.end=eca,e=4;break;case"utf8":this.fillLast=aca,e=4;break;case"base64":this.text=fca,this.end=gca,e=3;break;default:return this.write=hca,void(this.end=ica);}this.lastNeed=0,this.lastTotal=0,this.lastChar=en.allocUnsafe(e)}function fn(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function $ba(t,e,r){var a=e.length-1;if(a<r)return 0;var s=fn(e[a]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--a<r?0:(s=fn(e[a]))>=0?(s>0&&(t.lastNeed=s-2),s):--a<r?0:(s=fn(e[a]))>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0}function _ba(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"\uFFFD".repeat(r);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\uFFFD".repeat(r+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\uFFFD".repeat(r+2)}}function aca(t){var e=this.lastTotal-this.lastNeed,r=_ba(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function bca(t,e){var r=$ba(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var a=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,a),t.toString("utf8",e,a)}function cca(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD".repeat(this.lastTotal-this.lastNeed):e}function dca(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var a=r.charCodeAt(r.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function eca(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function fca(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function gca(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function hca(t){return t.toString(this.encoding)}function ica(t){return t&&t.length?this.write(t):""}function yu(){if(Xba)return;Xba=true;dn={};en=(Wh(),Kd).Buffer;xu=en.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};Wba=rf;dn.StringDecoder=Wba,rf.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},rf.prototype.end=cca,rf.prototype.text=bca,rf.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}}var zu,Au,Md,gn,jca,Oja,Bu,hn,sf,kca,Cu,jn,w,$h,lca,Du,kn,Eu,mca=false;function nca(e){return sf.from(e)}function oca(e){return sf.isBuffer(e)||e instanceof kca}function pca(e,r,a){if("function"==typeof e.prependListener)return e.prependListener(r,a);e._events&&e._events[r]?jca(e._events[r])?e._events[r].unshift(a):e._events[r]=[a,e._events[r]]:e.on(r,a)}function Fu(e,r){gn=gn||(Ic(),Hc),e=e||{},this.objectMode=!!e.objectMode,r instanceof gn&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,t=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:t,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new lca,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&($h||($h=(yu(),dn).StringDecoder),this.decoder=new $h(e.encoding),this.encoding=e.encoding)}function t(e){if(gn=gn||(Ic(),Hc),!(this instanceof t))return new t(e);this._readableState=new Fu(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),hn.call(this)}function Gu(e,r,a,t,$){var n,i=e._readableState;null===r?(i.reading=!1,tca(e,i)):($||(n=qca(i,r)),n?e.emit("error",n):i.objectMode||r&&r.length>0?("string"==typeof r||i.objectMode||Object.getPrototypeOf(r)===sf.prototype||(r=nca(r)),t?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):ln(e,i,r,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!a?(r=i.decoder.write(r),i.objectMode||0!==r.length?ln(e,i,r,!1):Ju(e,i)):ln(e,i,r,!1))):t||(i.reading=!1));return rca(i)}function ln(e,r,a,t){r.flowing&&0===r.length&&!r.sync?(e.emit("data",a),e.read(0)):(r.length+=r.objectMode?1:a.length,t?r.buffer.unshift(a):r.buffer.push(a),r.needReadable&&_h(e)),Ju(e,r)}function qca(e,r){var a;return oca(r)||"string"==typeof r||void 0===r||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a}function rca(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function sca(e){return e>=Eu?e=Eu:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Hu(e,r){return e<=0||0===r.length&&r.ended?0:r.objectMode?1:e!=e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=sca(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}function tca(e,r){if(!r.ended){if(r.decoder){var a=r.decoder.end();a&&a.length&&(r.buffer.push(a),r.length+=r.objectMode?1:a.length)}r.ended=!0,_h(e)}}function _h(e){var r=e._readableState;r.needReadable=!1,r.emittedReadable||(w("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?Md(Iu,e):Iu(e))}function Iu(e){w("emit readable"),e.emit("readable"),mn(e)}function Ju(e,r){r.readingMore||(r.readingMore=!0,Md(uca,e,r))}function uca(e,r){for(var a=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(w("maybeReadMore read 0"),e.read(0),a!==r.length);)a=r.length;r.readingMore=!1}function vca(e){return function(){var r=e._readableState;w("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&Bu(e,"data")&&(r.flowing=!0,mn(e))}}function wca(e){w("readable nexttick read 0"),e.read(0)}function xca(e,r){r.resumeScheduled||(r.resumeScheduled=!0,Md(yca,e,r))}function yca(e,r){r.reading||(w("resume read 0"),e.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,e.emit("resume"),mn(e),r.flowing&&!r.reading&&e.read(0)}function mn(e){var r=e._readableState;for(w("flow",r.flowing);r.flowing&&null!==e.read(););}function Ku(e,r){return 0===r.length?null:(r.objectMode?a=r.buffer.shift():!e||e>=r.length?(a=r.decoder?r.buffer.join(""):1===r.buffer.length?r.buffer.head.data:r.buffer.concat(r.length),r.buffer.clear()):a=zca(e,r.buffer,r.decoder),a);var a}function zca(e,r,a){var t;return e<r.head.data.length?(t=r.head.data.slice(0,e),r.head.data=r.head.data.slice(e)):t=e===r.head.data.length?r.shift():a?Aca(e,r):Bca(e,r),t}function Aca(e,r){var a=r.head,t=1,$=a.data;for(e-=$.length;a=a.next;){var n=a.data,i=e>n.length?n.length:e;if(i===n.length?$+=n:$+=n.slice(0,e),0===(e-=i)){i===n.length?(++t,a.next?r.head=a.next:r.head=r.tail=null):(r.head=a,a.data=n.slice(i));break}++t}return r.length-=t,$}function Bca(e,r){var a=sf.allocUnsafe(e),t=r.head,$=1;for(t.data.copy(a),e-=t.data.length;t=t.next;){var n=t.data,i=e>n.length?n.length:e;if(n.copy(a,a.length-e,0,i),0===(e-=i)){i===n.length?(++$,t.next?r.head=t.next:r.head=r.tail=null):(r.head=t,t.data=n.slice(i));break}++$}return r.length-=$,a}function nn(e){var r=e._readableState;if(r.length>0)throw new Error("\"endReadable()\" called on non-empty stream");r.endEmitted||(r.ended=!0,Md(Cca,r,e))}function Cca(e,r){e.endEmitted||0!==e.length||(e.endEmitted=!0,r.readable=!1,r.emit("end"))}function Lu(e,r){for(var a=0,t=e.length;a<t;a++)if(e[a]===r)return a;return-1}function Mu(){if(mca)return;mca=true;zu={};Au=(tg(),sg);Md=(Oh(),Nh);zu=t;jca=(Rt(),Qt);t.ReadableState=Fu;Oja=(Um(),Tm).EventEmitter;Bu=function(e,r){return e.listeners(r).length};hn=(Tt(),St);sf=(Wh(),Kd).Buffer;kca=B.Uint8Array||function(){};Cu=(of(),M);Cu.inherits=(Id(),Hd);jn=(mba(),{});w=void 0;w=jn&&jn.debuglog?jn.debuglog("stream"):function(){};lca=(rba(),nba);Du=(ku(),fm);Cu.inherits(t,hn);kn=["error","close","destroy","pause","resume"];Object.defineProperty(t.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),t.prototype.destroy=Du.destroy,t.prototype._undestroy=Du.undestroy,t.prototype._destroy=function(e,r){this.push(null),r(e)},t.prototype.push=function(e,r){var a,t=this._readableState;return t.objectMode?a=!0:"string"==typeof e&&((r=r||t.defaultEncoding)!==t.encoding&&(e=sf.from(e,r),r=""),a=!0),Gu(this,e,r,!1,a)},t.prototype.unshift=function(e){return Gu(this,e,null,!0,!1)},t.prototype.isPaused=function(){return!1===this._readableState.flowing},t.prototype.setEncoding=function(e){return $h||($h=(yu(),dn).StringDecoder),this._readableState.decoder=new $h(e),this._readableState.encoding=e,this};Eu=8388608;t.prototype.read=function(e){w("read",e),e=parseInt(e,10);var r=this._readableState,a=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return w("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?nn(this):_h(this),null;if(0===(e=Hu(e,r))&&r.ended)return 0===r.length&&nn(this),null;var t,$=r.needReadable;return w("need readable",$),(0===r.length||r.length-e<r.highWaterMark)&&w("length less than watermark",$=!0),r.ended||r.reading?w("reading or ended",$=!1):$&&(w("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=Hu(a,r))),null===(t=e>0?Ku(e,r):null)?(r.needReadable=!0,e=0):r.length-=e,0===r.length&&(r.ended||(r.needReadable=!0),a!==e&&r.ended&&nn(this)),null!==t&&this.emit("data",t),t},t.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},t.prototype.pipe=function(e,r){var a=this,t=this._readableState;switch(t.pipesCount){case 0:t.pipes=e;break;case 1:t.pipes=[t.pipes,e];break;default:t.pipes.push(e);}t.pipesCount+=1,w("pipe count=%d opts=%j",t.pipesCount,r);var $=(!r||!1!==r.end)&&e!==Au.stdout&&e!==Au.stderr?i:S;function n(r,$){w("onunpipe"),r===a&&$&&!1===$.hasUnpiped&&($.hasUnpiped=!0,w("cleanup"),e.removeListener("close",u),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",s),e.removeListener("unpipe",n),a.removeListener("end",i),a.removeListener("end",S),a.removeListener("data",l),h=!0,!t.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function i(){w("onend"),e.end()}t.endEmitted?Md($):a.once("end",$),e.on("unpipe",n);var d=vca(a);e.on("drain",d);var h=!1;var o=!1;function l(r){w("ondata"),o=!1,!1!==e.write(r)||o||((1===t.pipesCount&&t.pipes===e||t.pipesCount>1&&-1!==Lu(t.pipes,e))&&!h&&(w("false write response, pause",a._readableState.awaitDrain),a._readableState.awaitDrain++,o=!0),a.pause())}function s(r){w("onerror",r),S(),e.removeListener("error",s),0===Bu(e,"error")&&e.emit("error",r)}function u(){e.removeListener("finish",v),S()}function v(){w("onfinish"),e.removeListener("close",u),S()}function S(){w("unpipe"),a.unpipe(e)}return a.on("data",l),pca(e,"error",s),e.once("close",u),e.once("finish",v),e.emit("pipe",a),t.flowing||(w("pipe resume"),a.resume()),e},t.prototype.unpipe=function(e){var r=this._readableState,a={hasUnpiped:!1};if(0===r.pipesCount)return this;if(1===r.pipesCount)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,a),this);if(!e){var t=r.pipes,$=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var n=0;n<$;n++)t[n].emit("unpipe",this,a);return this}var i=Lu(r.pipes,e);return-1===i?this:(r.pipes.splice(i,1),r.pipesCount-=1,1===r.pipesCount&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,a),this)},t.prototype.on=function(e,r){var a=hn.prototype.on.call(this,e,r);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var t=this._readableState;t.endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.emittedReadable=!1,t.reading?t.length&&_h(this):Md(wca,this))}return a},t.prototype.addListener=t.prototype.on,t.prototype.resume=function(){var e=this._readableState;return e.flowing||(w("resume"),e.flowing=!0,xca(this,e)),this},t.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this},t.prototype.wrap=function(e){var r=this._readableState,a=!1,t=this;for(var $ in e.on("end",function(){if(w("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function($){(w("wrapped data"),r.decoder&&($=r.decoder.write($)),r.objectMode&&null==$)||(r.objectMode||$&&$.length)&&(t.push($)||(a=!0,e.pause()))}),e)void 0===this[$]&&"function"==typeof e[$]&&(this[$]=function(r){return function(){return e[r].apply(e,arguments)}}($));for(var n=0;n<kn.length;n++)e.on(kn[n],t.emit.bind(t,kn[n]));return t._read=function(r){w("wrapped _read",r),a&&(a=!1,e.resume())},t},t._fromList=Ku}var Nu,ai,Ou,Dca=false;function Eca(r){this.afterTransform=function(t,e){return Fca(r,t,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Fca(r,t,e){var n=r._transformState;n.transforming=!1;var a=n.writecb;if(!a)return r.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&r.push(e),a(t);var f=r._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&r._read(f.highWaterMark)}function qb(r){if(!(this instanceof qb))return new qb(r);ai.call(this,r),this._transformState=new Eca(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(r,e){Pu(t,r,e)}):Pu(t)})}function Pu(r,t,e){if(t)return r.emit("error",t);null!=e&&r.push(e);var n=r._writableState,a=r._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}function Qu(){if(Dca)return;Dca=true;Nu={};Nu=qb;ai=(Ic(),Hc);Ou=(of(),M);Ou.inherits=(Id(),Hd),Ou.inherits(qb,ai),qb.prototype.push=function(r,t){return this._transformState.needTransform=!1,ai.prototype.push.call(this,r,t)},qb.prototype._transform=function(r,t,e){throw new Error("_transform() is not implemented")},qb.prototype._write=function(r,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=r,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},qb.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},qb.prototype._destroy=function(r,t){var e=this;ai.prototype._destroy.call(this,r,function(r){t(r),e.emit("close")})}}var Gca,Ru,Su,Hca=false;function tf(r){if(!(this instanceof tf))return new tf(r);Ru.call(this,r)}function Ica(){if(Hca)return;Hca=true;Gca={};Gca=tf;Ru=(Qu(),Nu);Su=(of(),M);Su.inherits=(Id(),Hd),Su.inherits(tf,Ru),tf.prototype._transform=function(r,$,h){h(null,r)}}var Wa,Jca,Kca,Lca,Mca,Nca,Oca,Pca=false;function on(){if(Pca)return;Pca=true;Wa={};Jca=Wa=Wa=(Mu(),zu);Wa.Stream=Jca;Kca=Wa;Wa.Readable=Kca;Lca=(bn(),_m);Wa.Writable=Lca;Mca=(Ic(),Hc);Wa.Duplex=Mca;Nca=(Qu(),Nu);Wa.Transform=Nca;Oca=(Ica(),Gca);Wa.PassThrough=Oca}var Qca,Rca=false;function Sca(){if(Rca)return;Rca=true;Qca={};Qca=(bn(),_m)}var Tca,Uca=false;function Vca(){if(Uca)return;Uca=true;Tca={};Tca=(Ic(),Hc)}var Wca,Xca=false;function Yca(){if(Xca)return;Xca=true;Wca={};Wca=(on(),Wa).Transform}var Zca,$ca=false;function _ca(){if($ca)return;$ca=true;Zca={};Zca=(on(),Wa).PassThrough}var ada,pn,bda,cda=false;function Xa(){pn.call(this)}function dda(){if(cda)return;cda=true;ada={};ada=Xa;pn=(Um(),Tm).EventEmitter;bda=(Id(),Hd);bda(Xa,pn),Xa.Readable=(on(),Wa),Xa.Writable=(Sca(),Qca),Xa.Duplex=(Vca(),Tca),Xa.Transform=(Yca(),Wca),Xa.PassThrough=(_ca(),Zca),Xa.Stream=Xa,Xa.prototype.pipe=function(e,r){var a=this;function $(r){e.writable&&!1===e.write(r)&&a.pause&&a.pause()}function t(){a.readable&&a.resume&&a.resume()}a.on("data",$),e.on("drain",t),e._isStdio||r&&!1===r.end||(a.on("end",o),a.on("close",i));var n=!1;function o(){n||(n=!0,e.end())}function i(){n||(n=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(b(),0===pn.listenerCount(this,"error"))throw e}function b(){a.removeListener("data",$),e.removeListener("drain",t),a.removeListener("end",o),a.removeListener("close",i),a.removeListener("error",s),e.removeListener("error",s),a.removeListener("end",b),a.removeListener("close",b),e.removeListener("close",b)}return a.on("error",s),e.on("error",s),a.on("end",b),a.on("close",b),e.on("close",b),e.emit("pipe",a),e}}var Tu,eda=false;function Uu(){if(eda)return;eda=true;Tu={};Tu=(dda(),ada)}var N,fda,gda,hda,ida,jda,kda,lda,mda=false;function Ub(){if(mda)return;mda=true;N={};fda=(nf(),Va).Buffer;gda=!0;N.base64=gda;hda=!0;N.array=hda;ida=!0;N.string=ida;jda="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array;N.arraybuffer=jda;kda=void 0!==fda;N.nodebuffer=kda;lda="undefined"!=typeof Uint8Array;if(N.uint8array=lda,"undefined"==typeof ArrayBuffer){var $Mn9$export$blob=!1;N.blob=$Mn9$export$blob}else{var $Mn9$var$buffer=new ArrayBuffer(0);try{$Mn9$export$blob=0===new Blob([$Mn9$var$buffer],{type:"application/zip"}).size,N.blob=$Mn9$export$blob}catch(e){try{var $Mn9$var$Builder=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,$Mn9$var$builder=new $Mn9$var$Builder;$Mn9$var$builder.append($Mn9$var$buffer),$Mn9$export$blob=0===$Mn9$var$builder.getBlob("application/zip").size,N.blob=$Mn9$export$blob}catch(e){$Mn9$export$blob=!1,N.blob=$Mn9$export$blob}}}try{var $Mn9$export$nodestream=!!(Uu(),Tu).Readable;N.nodestream=$Mn9$export$nodestream}catch(e){$Mn9$export$nodestream=!1,N.nodestream=$Mn9$export$nodestream}}var bi={},nda=(D(),n),oda=(Ub(),N),Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",pda=function(r){for(var t,$,e,a,c,d,n,o=[],h=0,G=r.length,i=G,v="string"!==nda.getTypeOf(r);h<r.length;)i=G-h,v?(t=r[h++],$=h<G?r[h++]:0,e=h<G?r[h++]:0):(t=r.charCodeAt(h++),$=h<G?r.charCodeAt(h++):0,e=h<G?r.charCodeAt(h++):0),a=t>>2,c=(3&t)<<4|$>>4,d=i>1?(15&$)<<2|e>>6:64,n=i>2?63&e:64,o.push(Ya.charAt(a)+Ya.charAt(c)+Ya.charAt(d)+Ya.charAt(n));return o.join("")};bi.encode=pda;var qda=function(r){var t,$,e,a,c,d,n=0,o=0;if("data:"===r.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,G=3*(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(r.charAt(r.length-1)===Ya.charAt(64)&&G--,r.charAt(r.length-2)===Ya.charAt(64)&&G--,G%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=oda.uint8array?new Uint8Array(0|G):new Array(0|G);n<r.length;)t=Ya.indexOf(r.charAt(n++))<<2|(a=Ya.indexOf(r.charAt(n++)))>>4,$=(15&a)<<4|(c=Ya.indexOf(r.charAt(n++)))>>2,e=(3&c)<<6|(d=Ya.indexOf(r.charAt(n++))),h[o++]=t,64!==c&&(h[o++]=$),64!==d&&(h[o++]=e);return h};bi.decode=qda;var ci,Nd,rda=false;function di(){if(rda)return;rda=true;ci={};Nd=(nf(),Va).Buffer;ci={isNode:void 0!==Nd,newBufferFrom:function(r,f){return new Nd(r,f)},allocBuffer:function(r){return Nd.alloc?Nd.alloc(r):new Nd(r)},isBuffer:function(r){return Nd.isBuffer(r)},isStream:function(r){return r&&"function"==typeof r.on&&"function"==typeof r.pause&&"function"==typeof r.resume}}}var ei,sda,tda=false;function fi(){if(tda)return;tda=true;ei={};sda=ei="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=sda)}var Vu,uda,vda=false;function Wu(){if(vda)return;vda=true;Vu={};uda=Vu={version:"2.3.0"};"number"==typeof __e&&(__e=uda)}var wda,xda=false;function yda(){if(xda)return;xda=true;wda={};wda=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o}}var Xu,zda,Ada=false;function Yu(){if(Ada)return;Ada=true;Xu={};zda=(yda(),wda);Xu=function(r,n,t){if(zda(r),void 0===n)return r;switch(t){case 1:return function(t){return r.call(n,t)};case 2:return function(t,u){return r.call(n,t,u)};case 3:return function(t,u,e){return r.call(n,t,u,e)};}return function(){return r.apply(n,arguments)}}}var qn,Bda=false;function rn(){if(Bda)return;Bda=true;qn={};qn=function(t){return"object"==typeof t?null!==t:"function"==typeof t}}var Cda,Dda,Eda=false;function Fda(){if(Eda)return;Eda=true;Cda={};Dda=(rn(),qn);Cda=function(r){if(!Dda(r))throw TypeError(r+" is not an object!");return r}}var Zu,Gda=false;function $u(){if(Gda)return;Gda=true;Zu={};Zu=function(r){try{return!!r()}catch(t){return!0}}}var sn,Hda=false;function tn(){if(Hda)return;Hda=true;sn={};sn=!($u(),Zu)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}var _u,av,un,Ida,Jda=false;function bv(){if(Jda)return;Jda=true;_u={};av=(rn(),qn);un=(fi(),ei).document;Ida=av(un)&&av(un.createElement);_u=function($){return Ida?un.createElement($):{}}}var Kda,Lda=false;function Mda(){if(Lda)return;Lda=true;Kda={};Kda=!(tn(),sn)&&!($u(),Zu)(function(){return 7!=Object.defineProperty((bv(),_u)("div"),"a",{get:function(){return 7}}).a})}var Nda,gi,Oda=false;function Pda(){if(Oda)return;Oda=true;Nda={};gi=(rn(),qn);Nda=function(t,r){if(!gi(t))return t;var c,e;if(r&&"function"==typeof(c=t.toString)&&!gi(e=c.call(t)))return e;if("function"==typeof(c=t.valueOf)&&!gi(e=c.call(t)))return e;if(!r&&"function"==typeof(c=t.toString)&&!gi(e=c.call(t)))return e;throw TypeError("Can't convert object to primitive value")}}var cv,dv,Qda,Rda,Sda,Tda,Uda=false;function Vda(){if(Uda)return;Uda=true;cv={};dv=(Fda(),Cda);Qda=(Mda(),Kda);Rda=(Pda(),Nda);Sda=Object.defineProperty;Tda=(tn(),sn)?Object.defineProperty:function(r,$,e){if(dv(r),$=Rda($,!0),dv(e),Qda)try{return Sda(r,$,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(r[$]=e.value),r};cv.f=Tda}var Wda,Xda=false;function Yda(){if(Xda)return;Xda=true;Wda={};Wda=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}}}var Zda,$da,_da,aea=false;function bea(){if(aea)return;aea=true;Zda={};$da=(Vda(),cv);_da=(Yda(),Wda);Zda=(tn(),sn)?function(r,e,$){return $da.f(r,e,_da(1,$))}:function(r,e,$){return r[e]=$,r}}var cea,hi,vn,ev,dea,ii,_,eea=false;function fea(){if(eea)return;eea=true;cea={};hi=(fi(),ei);vn=(Wu(),Vu);ev=(Yu(),Xu);dea=(bea(),Zda);ii="prototype";_=function($,r,a){var e,P,t,S=$&_.F,o=$&_.G,v=$&_.S,Z=$&_.P,p=$&_.B,n=$&_.W,c=o?vn:vn[r]||(vn[r]={}),i=c[ii],x=o?hi:v?hi[r]:(hi[r]||{})[ii];for(e in o&&(a=r),a)(P=!S&&x&&void 0!==x[e])&&e in c||(t=P?x[e]:a[e],c[e]=o&&"function"!=typeof x[e]?a[e]:p&&P?ev(t,hi):n&&x[e]==t?function($){var r=function(r,a,e){if(this instanceof $){switch(arguments.length){case 0:return new $;case 1:return new $(r);case 2:return new $(r,a);}return new $(r,a,e)}return $.apply(this,arguments)};return r[ii]=$[ii],r}(t):Z&&"function"==typeof t?ev(Function.call,t):t,Z&&((c.virtual||(c.virtual={}))[e]=t,$&_.R&&i&&!i[e]&&dea(i,e,t)))};_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128,cea=_}var gea,hea=false;function iea(){if(hea)return;hea=true;gea={};gea=function(r,c,e){var a=void 0===e;switch(c.length){case 0:return a?r():r.call(e);case 1:return a?r(c[0]):r.call(e,c[0]);case 2:return a?r(c[0],c[1]):r.call(e,c[0],c[1]);case 3:return a?r(c[0],c[1],c[2]):r.call(e,c[0],c[1],c[2]);case 4:return a?r(c[0],c[1],c[2],c[3]):r.call(e,c[0],c[1],c[2],c[3]);}return r.apply(e,c)}}var jea,kea=false;function lea(){if(kea)return;kea=true;jea={};jea=(fi(),ei).document&&document.documentElement}var mea,nea,oea=false;function pea(){if(oea)return;oea=true;mea={};nea={}.toString;mea=function(r){return nea.call(r).slice(8,-1)}}var qea,rea,fv,sea,wn,tea,gv,hv,Vb,iv,jv,kv,lv,xn,uf,mv,ji,nv,uea=false;function vea(){if(uea)return;uea=true;sea={};wn=(Yu(),Xu);tea=(iea(),gea);gv=(lea(),jea);hv=(bv(),_u);Vb=(fi(),ei);iv=Vb.process;jv=Vb.setImmediate;kv=Vb.clearImmediate;lv=Vb.MessageChannel;xn=0;uf={};mv="onreadystatechange";ji=function(){var $=+this;if(uf.hasOwnProperty($)){var r=uf[$];delete uf[$],r()}};nv=function($){ji.call($.data)};jv&&kv||(jv=function($){for(var r=[],e=1;arguments.length>e;)r.push(arguments[e++]);return uf[++xn]=function(){tea("function"==typeof $?$:Function($),r)},qea(xn),xn},kv=function($){delete uf[$]},"process"==(pea(),mea)(iv)?qea=function($){iv.nextTick(wn(ji,$,1))}:lv?(fv=(rea=new lv).port2,rea.port1.onmessage=nv,qea=wn(fv.postMessage,fv,1)):Vb.addEventListener&&"function"==typeof postMessage&&!Vb.importScripts?(qea=function($){Vb.postMessage($+"","*")},Vb.addEventListener("message",nv,!1)):qea=mv in hv("script")?function($){gv.appendChild(hv("script"))[mv]=function(){gv.removeChild(this),ji.call($)}}:function($){setTimeout(wn(ji,$,1),0)}),sea={set:jv,clear:kv}}var yn,ov,wea=false;function xea(){if(wea)return;wea=true;yn=(fea(),cea);ov=(vea(),sea);yn(yn.G+yn.B,{setImmediate:ov.set,clearImmediate:ov.clear})}var yea,zea=false;function Aea(){if(zea)return;zea=true;yea={};xea(),yea=(Wu(),Vu).setImmediate}var Bea,Cea,Dea,pv,ki,Eea=false;function li(){var $,e;Cea=!0;for(var a=ki.length;a;){for(e=ki,ki=[],$=-1;++$<a;)e[$]();a=ki.length}Cea=!1}function Fea($){1!==ki.push($)||Cea||Bea()}function Gea(){if(Eea)return;Eea=true;Dea={};pv=B.MutationObserver||B.WebKitMutationObserver;if(pv){var $bsDb$var$called=0,$bsDb$var$observer=new pv(li),$bsDb$var$element=B.document.createTextNode("");$bsDb$var$observer.observe($bsDb$var$element,{characterData:!0}),Bea=function(){$bsDb$var$element.data=$bsDb$var$called=++$bsDb$var$called%2}}else if(B.setImmediate||void 0===B.MessageChannel)Bea="document"in B&&"onreadystatechange"in B.document.createElement("script")?function(){var $=B.document.createElement("script");$.onreadystatechange=function(){li(),$.onreadystatechange=null,$.parentNode.removeChild($),$=null},B.document.documentElement.appendChild($)}:function(){setTimeout(li,0)};else{var $bsDb$var$channel=new B.MessageChannel;$bsDb$var$channel.port1.onmessage=li,Bea=function(){$bsDb$var$channel.port2.postMessage(0)}}ki=[];Dea=Fea}var Hea,Iea,aa,qv,zn,rv,Jea=false;function Od(){}function Jc(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=rv,this.queue=[],this.outcome=void 0,e!==Od&&sv(this,e)}function vf(e,r,t){this.promise=e,"function"==typeof r&&(this.onFulfilled=r,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function An(e,r,t){Iea(function(){var $;try{$=r(t)}catch(l){return aa.reject(e,l)}$===e?aa.reject(e,new TypeError("Cannot resolve promise with itself")):aa.resolve(e,$)})}function Kea(e){var r=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof r)return function(){r.apply(e,arguments)}}function sv(e,r){var t=!1;function $(r){t||(t=!0,aa.reject(e,r))}function l(r){t||(t=!0,aa.resolve(e,r))}var a=tv(function(){r(l,$)});"error"===a.status&&$(a.value)}function tv(e,r){var t={};try{t.value=e(r),t.status="success"}catch($){t.status="error",t.value=$}return t}function Lea(e){return e instanceof this?e:aa.resolve(new this(Od),e)}function Mea(e){var r=new this(Od);return aa.reject(r,e)}function Nea(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,$=!1;if(!t)return this.resolve([]);for(var l=new Array(t),a=0,n=-1,o=new this(Od);++n<t;)s(e[n],n);return o;function s(e,n){r.resolve(e).then(function(e){l[n]=e,++a!==t||$||($=!0,aa.resolve(o,l))},function(e){$||($=!0,aa.reject(o,e))})}}function Oea(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,$=!1;if(!t)return this.resolve([]);for(var l,a=-1,n=new this(Od);++a<t;)l=e[a],r.resolve(l).then(function(e){$||($=!0,aa.resolve(n,e))},function(e){$||($=!0,aa.reject(n,e))});return n}function Pea(){if(Jea)return;Jea=true;Hea={};Iea=(Gea(),Dea);aa={};qv=["REJECTED"];zn=["FULFILLED"];rv=["PENDING"];Hea=Jc,Jc.prototype.catch=function(e){return this.then(null,e)},Jc.prototype.then=function(e,r){if("function"!=typeof e&&this.state===zn||"function"!=typeof r&&this.state===qv)return this;var t=new this.constructor(Od);this.state!==rv?An(t,this.state===zn?e:r,this.outcome):this.queue.push(new vf(t,e,r));return t},vf.prototype.callFulfilled=function(e){aa.resolve(this.promise,e)},vf.prototype.otherCallFulfilled=function(e){An(this.promise,this.onFulfilled,e)},vf.prototype.callRejected=function(e){aa.reject(this.promise,e)},vf.prototype.otherCallRejected=function(e){An(this.promise,this.onRejected,e)},aa.resolve=function(e,r){var t=tv(Kea,r);if("error"===t.status)return aa.reject(e,t.value);var $=t.value;if($)sv(e,$);else{e.state=zn,e.outcome=r;for(var l=-1,a=e.queue.length;++l<a;)e.queue[l].callFulfilled(r)}return e},aa.reject=function(e,r){e.state=qv,e.outcome=r;for(var t=-1,$=e.queue.length;++t<$;)e.queue[t].callRejected(r);return e},Jc.resolve=Lea,Jc.reject=Mea,Jc.all=Nea,Jc.race=Oea}var wf,Pja,Qea=false;function xf(){if(Qea)return;Qea=true;wf={};Pja=null;wf={Promise:Pja="undefined"!=typeof Promise?Promise:(Pea(),Hea)}}var n,Wb,Rea,Pd,Sea,Bn,Tea,mi,Uea,Xb,uv,ni,Cn,Vea,Wea,Xea,Yea,Zea,$ea,_ea,afa=false;function bfa(r){return oi(r,Wb.uint8array?new Uint8Array(r.length):new Array(r.length))}function yf(r){return r}function oi(r,e){for(var t=0;t<r.length;++t)e[t]=255&r.charCodeAt(t);return e}function zf(r){var e=65536,t=ni(r),n=!0;if("uint8array"===t?n=mi.applyCanBeUsed.uint8array:"nodebuffer"===t&&(n=mi.applyCanBeUsed.nodebuffer),n)for(;e>1;)try{return mi.stringifyByChunk(r,t,e)}catch(a){e=Math.floor(e/2)}return mi.stringifyByChar(r)}function pi(r,e){for(var t=0;t<r.length;t++)e[t]=r[t];return e}function D(){if(afa)return;afa=true;n={};Wb=(Ub(),N);Rea=bi;Pd=(di(),ci);Sea=(Aea(),yea);Bn=(xf(),wf);Tea=function(r,e){Cn("blob");try{return new Blob([r],{type:e})}catch(n){try{var t=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return t.append(r),t.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}};n.newBlob=Tea;mi={stringifyByChunk:function(r,e,t){var n=[],a=0,$=r.length;if($<=t)return String.fromCharCode.apply(null,r);for(;a<$;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,r.slice(a,Math.min(a+t,$)))):n.push(String.fromCharCode.apply(null,r.subarray(a,Math.min(a+t,$)))),a+=t;return n.join("")},stringifyByChar:function(r){for(var e="",t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},applyCanBeUsed:{uint8array:function(){try{return Wb.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(r){return!1}}(),nodebuffer:function(){try{return Wb.nodebuffer&&1===String.fromCharCode.apply(null,Pd.allocBuffer(1)).length}catch(r){return!1}}()}};Uea=zf;n.applyFromCharCode=Uea;Xb={};Xb.string={string:yf,array:function(r){return oi(r,new Array(r.length))},arraybuffer:function(r){return Xb.string.uint8array(r).buffer},uint8array:function(r){return oi(r,new Uint8Array(r.length))},nodebuffer:function(r){return oi(r,Pd.allocBuffer(r.length))}},Xb.array={string:zf,array:yf,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return Pd.newBufferFrom(r)}},Xb.arraybuffer={string:function(r){return zf(new Uint8Array(r))},array:function(r){return pi(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:yf,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return Pd.newBufferFrom(new Uint8Array(r))}},Xb.uint8array={string:zf,array:function(r){return pi(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:yf,nodebuffer:function(r){return Pd.newBufferFrom(r)}},Xb.nodebuffer={string:zf,array:function(r){return pi(r,new Array(r.length))},arraybuffer:function(r){return Xb.nodebuffer.uint8array(r).buffer},uint8array:function(r){return pi(r,new Uint8Array(r.length))},nodebuffer:yf};uv=function(r,e){if(e||(e=""),!r)return e;Cn(r);var t=ni(e);return Xb[t][r](e)};n.transformTo=uv;ni=function(r){return"string"==typeof r?"string":"[object Array]"===Object.prototype.toString.call(r)?"array":Wb.nodebuffer&&Pd.isBuffer(r)?"nodebuffer":Wb.uint8array&&r instanceof Uint8Array?"uint8array":Wb.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0};n.getTypeOf=ni;Cn=function(r){if(!Wb[r.toLowerCase()])throw new Error(r+" is not supported by this platform")};n.checkSupport=Cn;Vea=65535;n.MAX_VALUE_16BITS=Vea;Wea=-1;n.MAX_VALUE_32BITS=Wea;Xea=function(r){var e,t,n="";for(t=0;t<(r||"").length;t++)n+="\\x"+((e=r.charCodeAt(t))<16?"0":"")+e.toString(16).toUpperCase();return n};n.pretty=Xea;Yea=function(r,e,t){Sea(function(){r.apply(t||null,e||[])})};n.delay=Yea;Zea=function(r,e){var t=function(){};t.prototype=e.prototype,r.prototype=new t};n.inherits=Zea;$ea=function(){var r,e,t={};for(r=0;r<arguments.length;r++)for(e in arguments[r])arguments[r].hasOwnProperty(e)&&void 0===t[e]&&(t[e]=arguments[r][e]);return t};n.extend=$ea;_ea=function(r,e,t,n,a){return Bn.Promise.resolve(e).then(function(r){return Wb.blob&&(r instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(r)))&&"undefined"!=typeof FileReader?new Bn.Promise(function(e,t){var n=new FileReader;n.onload=function(r){e(r.target.result)},n.onerror=function(r){t(r.target.error)},n.readAsArrayBuffer(r)}):r}).then(function(e){var $=ni(e);return $?("arraybuffer"===$?e=uv("uint8array",e):"string"===$&&(a?e=Rea.decode(e):t&&!0!==n&&(e=bfa(e))),e):Bn.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})};n.prepareContent=_ea}var p={};function vv(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}vv.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,i){return this._listeners[e].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,i){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,i)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var i=this;return e.on("data",function(e){i.processChunk(e)}),e.on("end",function(){i.end()}),e.on("error",function(e){i.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,i){return this.extraStreamInfo[e]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},p=vv;for(var R={},Qd=(D(),n),Kc=(Ub(),N),cfa=(di(),ci),Af=new Array(256),Yb=0;Yb<256;Yb++)Af[Yb]=Yb>=252?6:Yb>=248?5:Yb>=240?4:Yb>=224?3:Yb>=192?2:1;Af[254]=Af[254]=1;var dfa=function(r){var e,$,t,a,o,n=r.length,f=0;for(a=0;a<n;a++)55296==(64512&($=r.charCodeAt(a)))&&a+1<n&&56320==(64512&(t=r.charCodeAt(a+1)))&&($=65536+($-55296<<10)+(t-56320),a++),f+=$<128?1:$<2048?2:$<65536?3:4;for(e=Kc.uint8array?new Uint8Array(f):new Array(f),o=0,a=0;o<f;a++)55296==(64512&($=r.charCodeAt(a)))&&a+1<n&&56320==(64512&(t=r.charCodeAt(a+1)))&&($=65536+($-55296<<10)+(t-56320),a++),$<128?e[o++]=$:$<2048?(e[o++]=192|$>>>6,e[o++]=128|63&$):$<65536?(e[o++]=224|$>>>12,e[o++]=128|$>>>6&63,e[o++]=128|63&$):(e[o++]=240|$>>>18,e[o++]=128|$>>>12&63,e[o++]=128|$>>>6&63,e[o++]=128|63&$);return e},efa=function(r,e){var $;for((e=e||r.length)>r.length&&(e=r.length),$=e-1;$>=0&&128==(192&r[$]);)$--;return $<0?e:0===$?e:$+Af[r[$]]>e?$:e},ffa=function(r){var e,$,t,a,o=r.length,n=new Array(2*o);for($=0,e=0;e<o;)if((t=r[e++])<128)n[$++]=t;else if((a=Af[t])>4)n[$++]=65533,e+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&e<o;)t=t<<6|63&r[e++],a--;a>1?n[$++]=65533:t<65536?n[$++]=t:(t-=65536,n[$++]=55296|t>>10&1023,n[$++]=56320|1023&t)}return n.length!==$&&(n.subarray?n=n.subarray(0,$):n.length=$),Qd.applyFromCharCode(n)},gfa=function(r){return Kc.nodebuffer?cfa.newBufferFrom(r,"utf-8"):dfa(r)};R.utf8encode=gfa;var hfa=function(r){return Kc.nodebuffer?Qd.transformTo("nodebuffer",r).toString("utf-8"):(r=Qd.transformTo(Kc.uint8array?"uint8array":"array",r),ffa(r))};function qi(){p.call(this,"utf-8 decode"),this.leftOver=null}R.utf8decode=hfa,Qd.inherits(qi,p),qi.prototype.processChunk=function(r){var e=Qd.transformTo(Kc.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(Kc.uint8array){var $=e;(e=new Uint8Array($.length+this.leftOver.length)).set(this.leftOver,0),e.set($,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var t=efa(e),a=e;t!==e.length&&(Kc.uint8array?(a=e.subarray(0,t),this.leftOver=e.subarray(t,e.length)):(a=e.slice(0,t),this.leftOver=e.slice(t,e.length))),this.push({data:R.utf8decode(a),meta:r.meta})},qi.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:R.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};var ifa=qi;function Dn(){p.call(this,"utf-8 encode")}R.Utf8DecodeWorker=ifa,Qd.inherits(Dn,p),Dn.prototype.processChunk=function(r){this.push({data:R.utf8encode(r.data),meta:r.meta})};var jfa=Dn;R.Utf8EncodeWorker=jfa;var kfa={},wv=(D(),n);function En(r){p.call(this,"ConvertWorker to "+r),this.destType=r}wv.inherits(En,p),En.prototype.processChunk=function(r){this.push({data:wv.transformTo(this.destType,r.data),meta:r.meta})},kfa=En;var lfa,xv,mfa,nfa=false;function Fn(e,r,a){xv.call(this,r),this._helper=e;var t=this;e.on("data",function(e,r){t.push(e)||t._helper.pause(),a&&a(r)}).on("error",function(e){t.emit("error",e)}).on("end",function(){t.push(null)})}function ofa(){if(nfa)return;nfa=true;lfa={};xv=(Uu(),Tu).Readable;mfa=(D(),n);mfa.inherits(Fn,xv),Fn.prototype._read=function(){this._helper.resume()},lfa=Fn}var yv={},pfa=(nf(),Va).Buffer,Lc=(D(),n),qfa=(Ub(),N),rfa=(xf(),wf),sfa=null;if(qfa.nodestream)try{sfa=(ofa(),lfa)}catch(e){}function tfa(r,e,t){switch(r){case"blob":return Lc.newBlob(Lc.transformTo("arraybuffer",e),t);case"base64":return bi.encode(e);default:return Lc.transformTo(r,e);}}function ufa(r,e){var t,a=0,$=null,u=0;for(t=0;t<e.length;t++)u+=e[t].length;switch(r){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for($=new Uint8Array(u),t=0;t<e.length;t++)$.set(e[t],a),a+=e[t].length;return $;case"nodebuffer":return pfa.concat(e);default:throw new Error("concat : unsupported type '"+r+"'");}}function vfa(r,t){return new rfa.Promise(function(a,$){var u=[],n=r._internalType,o=r._outputType,h=r._mimeType;r.on("data",function(r,e){u.push(r),t&&t(e)}).on("error",function(r){u=[],$(r)}).on("end",function(){try{var r=tfa(o,ufa(n,u),h);a(r)}catch(e){$(e)}u=[]}).resume()})}function zv(r,t,a){var $=t;switch(t){case"blob":case"arraybuffer":$="uint8array";break;case"base64":$="string";}try{this._internalType=$,this._outputType=t,this._mimeType=a,Lc.checkSupport($),this._worker=r.pipe(new kfa($)),r.lock()}catch(e){this._worker=new p("error"),this._worker.error(e)}}zv.prototype={accumulate:function(r){return vfa(this,r)},on:function(r,e){var t=this;return"data"===r?this._worker.on(r,function(r){e.call(t,r.data,r.meta)}):this._worker.on(r,function(){Lc.delay(e,arguments,t)}),this},resume:function(){return Lc.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(r){if(Lc.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new sfa(this,{objectMode:"nodebuffer"!==this._outputType},r)}},yv=zv;var ya={},wfa=!1;ya.base64=wfa;var xfa=!1;ya.binary=xfa;var yfa=!1;ya.dir=yfa;var Av=!0;ya.createFolders=Av;var zfa=null;ya.date=zfa;var Afa=null;ya.compression=Afa;var Bfa=null;ya.compressionOptions=Bfa;var Cfa=null;ya.comment=Cfa;var Dfa=null;ya.unixPermissions=Dfa;var Efa=null;ya.dosPermissions=Efa;var Gn={},ri=(D(),n),Ffa=16384;function Rd(t){p.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=ri.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}ri.inherits(Rd,p),Rd.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this.data=null},Rd.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ri.delay(this._tickAndRepeat,[],this)),!0)},Rd.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ri.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},Rd.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=Ffa,e=null,i=Math.min(this.max,this.index+t);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,i);break;case"uint8array":e=this.data.subarray(this.index,i);break;case"array":case"nodebuffer":e=this.data.slice(this.index,i);}return this.index=i,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},Gn=Rd;var Bf={},Gfa=(D(),n);var Bv={},Hfa=(D(),n);function Hn(r){p.call(this,"DataLengthProbe for "+r),this.propName=r,this.withStreamInfo(r,0)}Hfa.inherits(Hn,p),Hn.prototype.processChunk=function(r){if(r){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+r.data.length}p.prototype.processChunk.call(this,r)},Bv=Hn;function Ifa(){for(var r,$=[],a=0;a<256;a++){r=a;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;$[a]=r}return $}var Cv=Ifa();function Jfa(r,$,a,e){var t=Cv,c=e+a;r^=-1;for(var v=e;v<c;v++)r=r>>>8^t[255&(r^$[v])];return-1^r}function Kfa(r,$,a,e){var t=Cv,c=e+a;r^=-1;for(var v=e;v<c;v++)r=r>>>8^t[255&(r^$.charCodeAt(v))];return-1^r}Bf=function(r,$){return void 0!==r&&r.length?"string"!==Gfa.getTypeOf(r)?Jfa(0|$,r,r.length,0):Kfa(0|$,r,r.length,0):0};var Dv={},Lfa=(D(),n);function In(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Lfa.inherits(In,p),In.prototype.processChunk=function(r){this.streamInfo.crc32=Bf(r.data,this.streamInfo.crc32||0),this.push(r)},Dv=In;var Sd={},Ev=(xf(),wf),Jn=Bv;Jn=Bv;function Kn(e,r,t,s,o){this.compressedSize=e,this.uncompressedSize=r,this.crc32=t,this.compression=s,this.compressedContent=o}Kn.prototype={getContentWorker:function(){var e=new Gn(Ev.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Jn("data_length")),r=this;return e.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new Gn(Ev.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Kn.createWorkerFrom=function(e,r,t){return e.pipe(new Dv).pipe(new Jn("uncompressedSize")).pipe(r.compressWorker(t)).pipe(new Jn("compressedSize")).withStreamInfo("compression",r)},Sd=Kn;var Mfa={},Ln=function(r,e,i){this.name=r,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}};Ln.prototype={internalStream:function(r){var e=null,i="string";try{if(!r)throw new Error("No output type specified.");var o="string"===(i=r.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),e=this._decompressWorker();var t=!this._dataBinary;t&&!o&&(e=e.pipe(new R.Utf8EncodeWorker)),!t&&o&&(e=e.pipe(new R.Utf8DecodeWorker))}catch(a){(e=new p("error")).error(a)}return new yv(e,i,"")},async:function(r,e){return this.internalStream(r).accumulate(e)},nodeStream:function(r,e){return this.internalStream(r||"nodebuffer").toNodejsStream(e)},_compressWorker:function(r,e){if(this._data instanceof Sd&&this._data.compression.magic===r.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new R.Utf8EncodeWorker)),Sd.createWorkerFrom(i,r,e)},_decompressWorker:function(){return this._data instanceof Sd?this._data.getContentWorker():this._data instanceof p?this._data:new Gn(this._data)}};for(var Fv=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Nfa=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Mn=0;Mn<Fv.length;Mn++)Ln.prototype[Fv[Mn]]=Nfa;Mfa=Ln;var A={},Ofa="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function Pfa(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var Td=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var $ in e)Pfa(e,$)&&(r[$]=e[$])}}return r};A.assign=Td;var Cf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};A.shrinkBuf=Cf;var Qfa={arraySet:function(r,t,e,$,n){if(t.subarray&&r.subarray)r.set(t.subarray(e,e+$),n);else for(var a=0;a<$;a++)r[n+a]=t[e+a]},flattenChunks:function(r){var t,e,$,n,a,o;for($=0,t=0,e=r.length;t<e;t++)$+=r[t].length;for(o=new Uint8Array($),n=0,t=0,e=r.length;t<e;t++)a=r[t],o.set(a,n),n+=a.length;return o}},Rfa={arraySet:function(r,t,e,$,n){for(var a=0;a<$;a++)r[n+a]=t[e+a]},flattenChunks:function(r){return[].concat.apply([],r)}},Gv=function(r){if(r){var t=Uint8Array;A.Buf8=t;var e=Uint16Array;A.Buf16=e;var $=Int32Array;A.Buf32=$,Td(A,Qfa)}else t=Array,A.Buf8=t,e=Array,A.Buf16=e,$=Array,A.Buf32=$,Td(A,Rfa)};A.setTyped=Gv,Gv(Ofa);var Sfa=4,Hv=0,Iv=1,Tfa=2;function Ud(r){for(var $=r.length;--$>=0;)r[$]=0}var Ufa=0,Jv=1,Vfa=2,Wfa=3,Xfa=258,Nn=29,Df=256,Ef=Df+1+Nn,Vd=30,On=19,Kv=2*Ef+1,Mc=15,Pn=16,Yfa=7,Qn=256,Lv=16,Mv=17,Nv=18,Rn=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],si=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Zfa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ov=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$fa=512,rb=new Array(2*(Ef+2));Ud(rb);var Ff=new Array(2*Vd);Ud(Ff);var Gf=new Array($fa);Ud(Gf);var Hf=new Array(Xfa-Wfa+1);Ud(Hf);var Sn=new Array(Nn);Ud(Sn);var _fa,aga,bga,ti=new Array(Vd);function Tn(r,$,g,e,_){this.static_tree=r,this.extra_bits=$,this.extra_base=g,this.elems=e,this.max_length=_,this.has_stree=r&&r.length}function Un(r,$){this.dyn_tree=r,this.max_code=0,this.stat_desc=$}function Pv(r){return r<256?Gf[r]:Gf[256+(r>>>7)]}function If(r,$){r.pending_buf[r.pending++]=255&$,r.pending_buf[r.pending++]=$>>>8&255}function la(r,$,g){r.bi_valid>Pn-g?(r.bi_buf|=$<<r.bi_valid&65535,If(r,r.bi_buf),r.bi_buf=$>>Pn-r.bi_valid,r.bi_valid+=g-Pn):(r.bi_buf|=$<<r.bi_valid&65535,r.bi_valid+=g)}function Za(r,$,g){la(r,g[2*$],g[2*$+1])}function Qv(r,$){var g=0;do{g|=1&r,r>>>=1,g<<=1}while(--$>0);return g>>>1}function cga(r){16===r.bi_valid?(If(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=255&r.bi_buf,r.bi_buf>>=8,r.bi_valid-=8)}function dga(r,$){var g,e,_,a,t,v,i=$.dyn_tree,n=$.max_code,s=$.stat_desc.static_tree,d=$.stat_desc.has_stree,l=$.stat_desc.extra_bits,o=$.stat_desc.extra_base,c=$.stat_desc.max_length,b=0;for(a=0;a<=Mc;a++)r.bl_count[a]=0;for(i[2*r.heap[r.heap_max]+1]=0,g=r.heap_max+1;g<Kv;g++)(a=i[2*i[2*(e=r.heap[g])+1]+1]+1)>c&&(a=c,b++),i[2*e+1]=a,e>n||(r.bl_count[a]++,t=0,e>=o&&(t=l[e-o]),v=i[2*e],r.opt_len+=v*(a+t),d&&(r.static_len+=v*(s[2*e+1]+t)));if(0!==b){do{for(a=c-1;0===r.bl_count[a];)a--;r.bl_count[a]--,r.bl_count[a+1]+=2,r.bl_count[c]--,b-=2}while(b>0);for(a=c;0!==a;a--)for(e=r.bl_count[a];0!==e;)(_=r.heap[--g])>n||(i[2*_+1]!==a&&(r.opt_len+=(a-i[2*_+1])*i[2*_],i[2*_+1]=a),e--)}}function Rv(r,$,g){var e,_,a=new Array(Mc+1),t=0;for(e=1;e<=Mc;e++)a[e]=t=t+g[e-1]<<1;for(_=0;_<=$;_++){var v=r[2*_+1];0!==v&&(r[2*_]=Qv(a[v]++,v))}}function ega(){var r,$,g,e,_,a=new Array(Mc+1);for(g=0,e=0;e<Nn-1;e++)for(Sn[e]=g,r=0;r<1<<Rn[e];r++)Hf[g++]=e;for(Hf[g-1]=e,_=0,e=0;e<16;e++)for(ti[e]=_,r=0;r<1<<si[e];r++)Gf[_++]=e;for(_>>=7;e<Vd;e++)for(ti[e]=_<<7,r=0;r<1<<si[e]-7;r++)Gf[256+_++]=e;for($=0;$<=Mc;$++)a[$]=0;for(r=0;r<=143;)rb[2*r+1]=8,r++,a[8]++;for(;r<=255;)rb[2*r+1]=9,r++,a[9]++;for(;r<=279;)rb[2*r+1]=7,r++,a[7]++;for(;r<=287;)rb[2*r+1]=8,r++,a[8]++;for(Rv(rb,Ef+1,a),r=0;r<Vd;r++)Ff[2*r+1]=5,Ff[2*r]=Qv(r,5);_fa=new Tn(rb,Rn,Df+1,Ef,Mc),aga=new Tn(Ff,si,0,Vd,Mc),bga=new Tn(new Array(0),Zfa,0,On,Yfa)}function Sv(r){var $;for($=0;$<Ef;$++)r.dyn_ltree[2*$]=0;for($=0;$<Vd;$++)r.dyn_dtree[2*$]=0;for($=0;$<On;$++)r.bl_tree[2*$]=0;r.dyn_ltree[2*Qn]=1,r.opt_len=r.static_len=0,r.last_lit=r.matches=0}function Tv(r){r.bi_valid>8?If(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0}function fga(r,$,g,e){Tv(r),e&&(If(r,g),If(r,~g)),A.arraySet(r.pending_buf,r.window,$,g,r.pending),r.pending+=g}function Uv(r,$,g,e){var _=2*$,a=2*g;return r[_]<r[a]||r[_]===r[a]&&e[$]<=e[g]}function Vn(r,$,g){for(var e=r.heap[g],_=g<<1;_<=r.heap_len&&(_<r.heap_len&&Uv($,r.heap[_+1],r.heap[_],r.depth)&&_++,!Uv($,e,r.heap[_],r.depth));)r.heap[g]=r.heap[_],g=_,_<<=1;r.heap[g]=e}function Vv(r,$,g){var e,_,a,t,v=0;if(0!==r.last_lit)do{e=r.pending_buf[r.d_buf+2*v]<<8|r.pending_buf[r.d_buf+2*v+1],_=r.pending_buf[r.l_buf+v],v++,0===e?Za(r,_,$):(Za(r,(a=Hf[_])+Df+1,$),0!==(t=Rn[a])&&la(r,_-=Sn[a],t),Za(r,a=Pv(--e),g),0!==(t=si[a])&&la(r,e-=ti[a],t))}while(v<r.last_lit);Za(r,Qn,$)}function Wn(r,$){var g,e,_,a=$.dyn_tree,t=$.stat_desc.static_tree,v=$.stat_desc.has_stree,i=$.stat_desc.elems,n=-1;for(r.heap_len=0,r.heap_max=Kv,g=0;g<i;g++)0!==a[2*g]?(r.heap[++r.heap_len]=n=g,r.depth[g]=0):a[2*g+1]=0;for(;r.heap_len<2;)a[2*(_=r.heap[++r.heap_len]=n<2?++n:0)]=1,r.depth[_]=0,r.opt_len--,v&&(r.static_len-=t[2*_+1]);for($.max_code=n,g=r.heap_len>>1;g>=1;g--)Vn(r,a,g);_=i;do{g=r.heap[1],r.heap[1]=r.heap[r.heap_len--],Vn(r,a,1),e=r.heap[1],r.heap[--r.heap_max]=g,r.heap[--r.heap_max]=e,a[2*_]=a[2*g]+a[2*e],r.depth[_]=(r.depth[g]>=r.depth[e]?r.depth[g]:r.depth[e])+1,a[2*g+1]=a[2*e+1]=_,r.heap[1]=_++,Vn(r,a,1)}while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],dga(r,$),Rv(a,n,r.bl_count)}function Wv(r,$,g){var e,_,a=-1,t=$[1],v=0,i=7,n=4;for(0===t&&(i=138,n=3),$[2*(g+1)+1]=65535,e=0;e<=g;e++)_=t,t=$[2*(e+1)+1],++v<i&&_===t||(v<n?r.bl_tree[2*_]+=v:0!==_?(_!==a&&r.bl_tree[2*_]++,r.bl_tree[2*Lv]++):v<=10?r.bl_tree[2*Mv]++:r.bl_tree[2*Nv]++,v=0,a=_,0===t?(i=138,n=3):_===t?(i=6,n=3):(i=7,n=4))}function Xv(r,$,g){var e,_,a=-1,t=$[1],v=0,i=7,n=4;for(0===t&&(i=138,n=3),e=0;e<=g;e++)if(_=t,t=$[2*(e+1)+1],!(++v<i&&_===t)){if(v<n)do{Za(r,_,r.bl_tree)}while(0!=--v);else 0!==_?(_!==a&&(Za(r,_,r.bl_tree),v--),Za(r,Lv,r.bl_tree),la(r,v-3,2)):v<=10?(Za(r,Mv,r.bl_tree),la(r,v-3,3)):(Za(r,Nv,r.bl_tree),la(r,v-11,7));v=0,a=_,0===t?(i=138,n=3):_===t?(i=6,n=3):(i=7,n=4)}}function gga(r){var $;for(Wv(r,r.dyn_ltree,r.l_desc.max_code),Wv(r,r.dyn_dtree,r.d_desc.max_code),Wn(r,r.bl_desc),$=On-1;$>=3&&0===r.bl_tree[2*Ov[$]+1];$--);return r.opt_len+=3*($+1)+5+5+4,$}function hga(r,$,g,e){var _;for(la(r,$-257,5),la(r,g-1,5),la(r,e-4,4),_=0;_<e;_++)la(r,r.bl_tree[2*Ov[_]+1],3);Xv(r,r.dyn_ltree,$-1),Xv(r,r.dyn_dtree,g-1)}function iga(r){var $,g=4093624447;for($=0;$<=31;$++,g>>>=1)if(1&g&&0!==r.dyn_ltree[2*$])return Hv;if(0!==r.dyn_ltree[18]||0!==r.dyn_ltree[20]||0!==r.dyn_ltree[26])return Iv;for($=32;$<Df;$++)if(0!==r.dyn_ltree[2*$])return Iv;return Hv}Ud(ti);var jga=!1;function kga(r){jga||(ega(),jga=!0),r.l_desc=new Un(r.dyn_ltree,_fa),r.d_desc=new Un(r.dyn_dtree,aga),r.bl_desc=new Un(r.bl_tree,bga),r.bi_buf=0,r.bi_valid=0,Sv(r)}function Yv(r,$,g,e){la(r,(Ufa<<1)+(e?1:0),3),fga(r,$,g,!0)}function lga(r){la(r,Jv<<1,3),Za(r,Qn,rb),cga(r)}function mga(r,$,g,e){var _,a,t=0;r.level>0?(r.strm.data_type===Tfa&&(r.strm.data_type=iga(r)),Wn(r,r.l_desc),Wn(r,r.d_desc),t=gga(r),_=r.opt_len+3+7>>>3,(a=r.static_len+3+7>>>3)<=_&&(_=a)):_=a=g+5,g+4<=_&&-1!==$?Yv(r,$,g,e):r.strategy===Sfa||a===_?(la(r,(Jv<<1)+(e?1:0),3),Vv(r,rb,Ff)):(la(r,(Vfa<<1)+(e?1:0),3),hga(r,r.l_desc.max_code+1,r.d_desc.max_code+1,t+1),Vv(r,r.dyn_ltree,r.dyn_dtree)),Sv(r),e&&Tv(r)}function nga(r,$,g){return r.pending_buf[r.d_buf+2*r.last_lit]=$>>>8&255,r.pending_buf[r.d_buf+2*r.last_lit+1]=255&$,r.pending_buf[r.l_buf+r.last_lit]=255&g,r.last_lit++,0===$?r.dyn_ltree[2*g]++:(r.matches++,$--,r.dyn_ltree[2*(Hf[g]+Df+1)]++,r.dyn_dtree[2*Pv($)]++),r.last_lit===r.lit_bufsize-1}var oga=kga;var pga=Yv;var qga=mga;var Zb=nga;var rga=lga;var Jf={};function sga(r,$,e,a){for(var o=65535&r|0,t=r>>>16&65535|0,v=0;0!==e;){e-=v=e>2e3?2e3:e;do{t=t+(o=o+$[a++]|0)|0}while(--v);o%=65521,t%=65521}return o|t<<16|0}Jf=sga;var W={};function tga(){for(var r,$=[],a=0;a<256;a++){r=a;for(var o=0;o<8;o++)r=1&r?3988292384^r>>>1:r>>>1;$[a]=r}return $}var uga=tga();function vga(r,$,a,o){var v=uga,c=o+a;r^=-1;for(var e=o;e<c;e++)r=r>>>8^v[255&(r^$[e])];return-1^r}W=vga;var Wd={};Wd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var Kf,ma={},Nc=0,wga=1,xga=3,$b=4,Zv=5,$a=0,$v=1,za=-2,yga=-3,Xn=-5,zga=-1,Aga=1,ui=2,Bga=3,Cga=4,Dga=0,Ega=2,vi=8,Fga=9,Gga=15,Hga=8,Iga=29,Jga=256,Yn=Jga+1+Iga,Kga=30,Lga=19,Mga=2*Yn+1,Nga=15,o=3,_b=258,Ja=_b+o+1,Oga=32,wi=42,Zn=69,xi=73,yi=91,zi=103,Oc=113,Lf=666,X=1,Mf=2,Pc=3,Xd=4,Pga=3;function ac($,a){return $.msg=Wd[a],a}function _v($){return($<<1)-($>4?9:0)}function bc($){for(var a=$.length;--a>=0;)$[a]=0}function cc($){var a=$.state,t=a.pending;t>$.avail_out&&(t=$.avail_out),0!==t&&(A.arraySet($.output,a.pending_buf,a.pending_out,t,$.next_out),$.next_out+=t,a.pending_out+=t,$.total_out+=t,$.avail_out-=t,a.pending-=t,0===a.pending&&(a.pending_out=0))}function Z($,a){qga($,$.block_start>=0?$.block_start:-1,$.strstart-$.block_start,a),$.block_start=$.strstart,cc($.strm)}function u($,a){$.pending_buf[$.pending++]=a}function Nf($,a){$.pending_buf[$.pending++]=a>>>8&255,$.pending_buf[$.pending++]=255&a}function Qga($,a,t,r){var e=$.avail_in;return e>r&&(e=r),0===e?0:($.avail_in-=e,A.arraySet(a,$.input,$.next_in,e,t),1===$.state.wrap?$.adler=Jf($.adler,a,e,t):2===$.state.wrap&&($.adler=W($.adler,a,e,t)),$.next_in+=e,$.total_in+=e,e)}function aw($,a){var t,r,e=$.max_chain_length,_=$.strstart,M=$.prev_length,s=$.nice_match,R=$.strstart>$.w_size-Ja?$.strstart-($.w_size-Ja):0,i=$.window,n=$.w_mask,v=$.prev,l=$.strstart+_b,K=i[_+M-1],h=i[_+M];$.prev_length>=$.good_match&&(e>>=2),s>$.lookahead&&(s=$.lookahead);do{if(i[(t=a)+M]===h&&i[t+M-1]===K&&i[t]===i[_]&&i[++t]===i[_+1]){_+=2,t++;do{}while(i[++_]===i[++t]&&i[++_]===i[++t]&&i[++_]===i[++t]&&i[++_]===i[++t]&&i[++_]===i[++t]&&i[++_]===i[++t]&&i[++_]===i[++t]&&i[++_]===i[++t]&&_<l);if(r=_b-(l-_),_=l-_b,r>M){if($.match_start=a,M=r,r>=s)break;K=i[_+M-1],h=i[_+M]}}}while((a=v[a&n])>R&&0!=--e);return M<=$.lookahead?M:$.lookahead}function Qc($){var a,t,r,e,_,M=$.w_size;do{if(e=$.window_size-$.lookahead-$.strstart,$.strstart>=M+(M-Ja)){A.arraySet($.window,$.window,M,M,0),$.match_start-=M,$.strstart-=M,$.block_start-=M,a=t=$.hash_size;do{r=$.head[--a],$.head[a]=r>=M?r-M:0}while(--t);a=t=M;do{r=$.prev[--a],$.prev[a]=r>=M?r-M:0}while(--t);e+=M}if(0===$.strm.avail_in)break;if(t=Qga($.strm,$.window,$.strstart+$.lookahead,e),$.lookahead+=t,$.lookahead+$.insert>=o)for(_=$.strstart-$.insert,$.ins_h=$.window[_],$.ins_h=($.ins_h<<$.hash_shift^$.window[_+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[_+o-1])&$.hash_mask,$.prev[_&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=_,_++,$.insert--,!($.lookahead+$.insert<o)););}while($.lookahead<Ja&&0!==$.strm.avail_in)}function Rga($,a){var t=65535;for(t>$.pending_buf_size-5&&(t=$.pending_buf_size-5);;){if($.lookahead<=1){if(Qc($),0===$.lookahead&&a===Nc)return X;if(0===$.lookahead)break}$.strstart+=$.lookahead,$.lookahead=0;var r=$.block_start+t;if((0===$.strstart||$.strstart>=r)&&($.lookahead=$.strstart-r,$.strstart=r,Z($,!1),0===$.strm.avail_out))return X;if($.strstart-$.block_start>=$.w_size-Ja&&(Z($,!1),0===$.strm.avail_out))return X}return $.insert=0,a===$b?(Z($,!0),0===$.strm.avail_out?Pc:Xd):($.strstart>$.block_start&&(Z($,!1),$.strm.avail_out),X)}function $n($,a){for(var t,r;;){if($.lookahead<Ja){if(Qc($),$.lookahead<Ja&&a===Nc)return X;if(0===$.lookahead)break}if(t=0,$.lookahead>=o&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+o-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),0!==t&&$.strstart-t<=$.w_size-Ja&&($.match_length=aw($,t)),$.match_length>=o){if(r=Zb($,$.strstart-$.match_start,$.match_length-o),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=o){$.match_length--;do{$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+o-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart}while(0!=--$.match_length);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;}else r=Zb($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(r&&(Z($,!1),0===$.strm.avail_out))return X}return $.insert=$.strstart<o-1?$.strstart:o-1,a===$b?(Z($,!0),0===$.strm.avail_out?Pc:Xd):$.last_lit&&(Z($,!1),0===$.strm.avail_out)?X:Mf}function Yd($,a){for(var t,r,e;;){if($.lookahead<Ja){if(Qc($),$.lookahead<Ja&&a===Nc)return X;if(0===$.lookahead)break}if(t=0,$.lookahead>=o&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+o-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=o-1,0!==t&&$.prev_length<$.max_lazy_match&&$.strstart-t<=$.w_size-Ja&&($.match_length=aw($,t),$.match_length<=5&&($.strategy===Aga||$.match_length===o&&$.strstart-$.match_start>4096)&&($.match_length=o-1)),$.prev_length>=o&&$.match_length<=$.prev_length){e=$.strstart+$.lookahead-o,r=Zb($,$.strstart-1-$.prev_match,$.prev_length-o),$.lookahead-=$.prev_length-1,$.prev_length-=2;do{++$.strstart<=e&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+o-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart)}while(0!=--$.prev_length);if($.match_available=0,$.match_length=o-1,$.strstart++,r&&(Z($,!1),0===$.strm.avail_out))return X}else if($.match_available){if((r=Zb($,0,$.window[$.strstart-1]))&&Z($,!1),$.strstart++,$.lookahead--,0===$.strm.avail_out)return X}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(r=Zb($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<o-1?$.strstart:o-1,a===$b?(Z($,!0),0===$.strm.avail_out?Pc:Xd):$.last_lit&&(Z($,!1),0===$.strm.avail_out)?X:Mf}function Sga($,a){for(var t,r,e,_,M=$.window;;){if($.lookahead<=_b){if(Qc($),$.lookahead<=_b&&a===Nc)return X;if(0===$.lookahead)break}if($.match_length=0,$.lookahead>=o&&$.strstart>0&&(r=M[e=$.strstart-1])===M[++e]&&r===M[++e]&&r===M[++e]){_=$.strstart+_b;do{}while(r===M[++e]&&r===M[++e]&&r===M[++e]&&r===M[++e]&&r===M[++e]&&r===M[++e]&&r===M[++e]&&r===M[++e]&&e<_);$.match_length=_b-(_-e),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=o?(t=Zb($,1,$.match_length-o),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(t=Zb($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),t&&(Z($,!1),0===$.strm.avail_out))return X}return $.insert=0,a===$b?(Z($,!0),0===$.strm.avail_out?Pc:Xd):$.last_lit&&(Z($,!1),0===$.strm.avail_out)?X:Mf}function Tga($,a){for(var t;;){if(0===$.lookahead&&(Qc($),0===$.lookahead)){if(a===Nc)return X;break}if($.match_length=0,t=Zb($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,t&&(Z($,!1),0===$.strm.avail_out))return X}return $.insert=0,a===$b?(Z($,!0),0===$.strm.avail_out?Pc:Xd):$.last_lit&&(Z($,!1),0===$.strm.avail_out)?X:Mf}function _a($,a,t,r,e){this.good_length=$,this.max_lazy=a,this.nice_length=t,this.max_chain=r,this.func=e}function Uga($){$.window_size=2*$.w_size,bc($.head),$.max_lazy_match=Kf[$.level].max_lazy,$.good_match=Kf[$.level].good_length,$.nice_match=Kf[$.level].nice_length,$.max_chain_length=Kf[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=o-1,$.match_available=0,$.ins_h=0}function Vga(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=vi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $kQw7$export$Buf16(2*Mga),this.dyn_dtree=new $kQw7$export$Buf16(2*(2*Kga+1)),this.bl_tree=new $kQw7$export$Buf16(2*(2*Lga+1)),bc(this.dyn_ltree),bc(this.dyn_dtree),bc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $kQw7$export$Buf16(Nga+1),this.heap=new $kQw7$export$Buf16(2*Yn+1),bc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $kQw7$export$Buf16(2*Yn+1),bc(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function bw($){var a;return $&&$.state?($.total_in=$.total_out=0,$.data_type=Ega,(a=$.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?wi:Oc,$.adler=2===a.wrap?0:1,a.last_flush=Nc,oga(a),$a):ac($,za)}function cw($){var a=bw($);return a===$a&&Uga($.state),a}function Wga($,a){return $&&$.state?2!==$.state.wrap?za:($.state.gzhead=a,$a):za}function dw($,a,t,r,e,_){if(!$)return za;var M=1;if(a===zga&&(a=6),r<0?(M=0,r=-r):r>15&&(M=2,r-=16),e<1||e>Fga||t!==vi||r<8||r>15||a<0||a>9||_<0||_>Cga)return ac($,za);8===r&&(r=9);var s=new Vga;return $.state=s,s.strm=$,s.wrap=M,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=e+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+o-1)/o),s.window=new $kQw7$export$Buf8(2*s.w_size),s.head=new $kQw7$export$Buf16(s.hash_size),s.prev=new $kQw7$export$Buf16(s.w_size),s.lit_bufsize=1<<e+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new $kQw7$export$Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=a,s.strategy=_,s.method=t,cw($)}function Xga($,a){return dw($,a,vi,Gga,Hga,Dga)}function Yga($,a){var t,r,e,_;if(!$||!$.state||a>Zv||a<0)return $?ac($,za):za;if(r=$.state,!$.output||!$.input&&0!==$.avail_in||r.status===Lf&&a!==$b)return ac($,0===$.avail_out?Xn:za);if(r.strm=$,t=r.last_flush,r.last_flush=a,r.status===wi)if(2===r.wrap)$.adler=0,u(r,31),u(r,139),u(r,8),r.gzhead?(u(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),u(r,255&r.gzhead.time),u(r,r.gzhead.time>>8&255),u(r,r.gzhead.time>>16&255),u(r,r.gzhead.time>>24&255),u(r,9===r.level?2:r.strategy>=ui||r.level<2?4:0),u(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(u(r,255&r.gzhead.extra.length),u(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&($.adler=W($.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Zn):(u(r,0),u(r,0),u(r,0),u(r,0),u(r,0),u(r,9===r.level?2:r.strategy>=ui||r.level<2?4:0),u(r,Pga),r.status=Oc);else{var M=vi+(r.w_bits-8<<4)<<8;M|=(r.strategy>=ui||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(M|=Oga),M+=31-M%31,r.status=Oc,Nf(r,M),0!==r.strstart&&(Nf(r,$.adler>>>16),Nf(r,65535&$.adler)),$.adler=1}if(r.status===Zn)if(r.gzhead.extra){for(e=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>e&&($.adler=W($.adler,r.pending_buf,r.pending-e,e)),cc($),e=r.pending,r.pending!==r.pending_buf_size));)u(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>e&&($.adler=W($.adler,r.pending_buf,r.pending-e,e)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=xi)}else r.status=xi;if(r.status===xi)if(r.gzhead.name){e=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>e&&($.adler=W($.adler,r.pending_buf,r.pending-e,e)),cc($),e=r.pending,r.pending===r.pending_buf_size)){_=1;break}_=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,u(r,_)}while(0!==_);r.gzhead.hcrc&&r.pending>e&&($.adler=W($.adler,r.pending_buf,r.pending-e,e)),0===_&&(r.gzindex=0,r.status=yi)}else r.status=yi;if(r.status===yi)if(r.gzhead.comment){e=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>e&&($.adler=W($.adler,r.pending_buf,r.pending-e,e)),cc($),e=r.pending,r.pending===r.pending_buf_size)){_=1;break}_=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,u(r,_)}while(0!==_);r.gzhead.hcrc&&r.pending>e&&($.adler=W($.adler,r.pending_buf,r.pending-e,e)),0===_&&(r.status=zi)}else r.status=zi;if(r.status===zi&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&cc($),r.pending+2<=r.pending_buf_size&&(u(r,255&$.adler),u(r,$.adler>>8&255),$.adler=0,r.status=Oc)):r.status=Oc),0!==r.pending){if(cc($),0===$.avail_out)return r.last_flush=-1,$a}else if(0===$.avail_in&&_v(a)<=_v(t)&&a!==$b)return ac($,Xn);if(r.status===Lf&&0!==$.avail_in)return ac($,Xn);if(0!==$.avail_in||0!==r.lookahead||a!==Nc&&r.status!==Lf){var s=r.strategy===ui?Tga(r,a):r.strategy===Bga?Sga(r,a):Kf[r.level].func(r,a);if(s!==Pc&&s!==Xd||(r.status=Lf),s===X||s===Pc)return 0===$.avail_out&&(r.last_flush=-1),$a;if(s===Mf&&(a===wga?rga(r):a!==Zv&&(pga(r,0,0,!1),a===xga&&(bc(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),cc($),0===$.avail_out))return r.last_flush=-1,$a}return a!==$b?$a:r.wrap<=0?$v:(2===r.wrap?(u(r,255&$.adler),u(r,$.adler>>8&255),u(r,$.adler>>16&255),u(r,$.adler>>24&255),u(r,255&$.total_in),u(r,$.total_in>>8&255),u(r,$.total_in>>16&255),u(r,$.total_in>>24&255)):(Nf(r,$.adler>>>16),Nf(r,65535&$.adler)),cc($),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?$a:$v)}function Zga($){var a;return $&&$.state?(a=$.state.status)!==wi&&a!==Zn&&a!==xi&&a!==yi&&a!==zi&&a!==Oc&&a!==Lf?ac($,za):($.state=null,a===Oc?ac($,yga):$a):za}function $ga($,a){var t,r,e,_,M,s,R,i,n=a.length;if(!$||!$.state)return za;if(2===(_=(t=$.state).wrap)||1===_&&t.status!==wi||t.lookahead)return za;for(1===_&&($.adler=Jf($.adler,a,n,0)),t.wrap=0,n>=t.w_size&&(0===_&&(bc(t.head),t.strstart=0,t.block_start=0,t.insert=0),i=new $kQw7$export$Buf8(t.w_size),A.arraySet(i,a,n-t.w_size,t.w_size,0),a=i,n=t.w_size),M=$.avail_in,s=$.next_in,R=$.input,$.avail_in=n,$.next_in=0,$.input=a,Qc(t);t.lookahead>=o;){r=t.strstart,e=t.lookahead-(o-1);do{t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+o-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++}while(--e);t.strstart=r,t.lookahead=o-1,Qc(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=o-1,t.match_available=0,$.next_in=s,$.input=R,$.avail_in=M,t.wrap=_,$a}Kf=[new _a(0,0,0,0,Rga),new _a(4,4,8,4,$n),new _a(4,5,16,8,$n),new _a(4,6,32,32,$n),new _a(4,4,16,16,Yd),new _a(8,16,32,32,Yd),new _a(8,16,128,128,Yd),new _a(8,32,128,256,Yd),new _a(32,128,258,1024,Yd),new _a(32,258,258,4096,Yd)];var _ga=Xga;ma.deflateInit=_ga;var aha=dw;ma.deflateInit2=aha;var bha=cw;ma.deflateReset=bha;var cha=bw;ma.deflateResetKeep=cha;var dha=Wga;ma.deflateSetHeader=dha;var eha=Yga;ma.deflate=eha;var fha=Zga;ma.deflateEnd=fha;var gha=$ga;ma.deflateSetDictionary=gha;var hha="pako deflate (from Nodeca project)";ma.deflateInfo=hha;var iha=!0,jha=!0;try{String.fromCharCode.apply(null,[0])}catch(__){iha=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){jha=!1}for(var Of=new $kQw7$export$Buf8(256),dc=0;dc<256;dc++)Of[dc]=dc>=252?6:dc>=248?5:dc>=240?4:dc>=224?3:dc>=192?2:1;Of[254]=Of[254]=1;var _n=function(r){var $,t,n,a,e,u=r.length,K=0;for(a=0;a<u;a++)55296==(64512&(t=r.charCodeAt(a)))&&a+1<u&&56320==(64512&(n=r.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(n-56320),a++),K+=t<128?1:t<2048?2:t<65536?3:4;for($=new $kQw7$export$Buf8(K),e=0,a=0;e<K;a++)55296==(64512&(t=r.charCodeAt(a)))&&a+1<u&&56320==(64512&(n=r.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(n-56320),a++),t<128?$[e++]=t:t<2048?($[e++]=192|t>>>6,$[e++]=128|63&t):t<65536?($[e++]=224|t>>>12,$[e++]=128|t>>>6&63,$[e++]=128|63&t):($[e++]=240|t>>>18,$[e++]=128|t>>>12&63,$[e++]=128|t>>>6&63,$[e++]=128|63&t);return $};function ew(r,$){if($<65537&&(r.subarray&&jha||!r.subarray&&iha))return String.fromCharCode.apply(null,Cf(r,$));for(var t="",n=0;n<$;n++)t+=String.fromCharCode(r[n]);return t}var kha=function(r){return ew(r,r.length)};var lha=function(r){for(var $=new $kQw7$export$Buf8(r.length),t=0,n=$.length;t<n;t++)$[t]=r.charCodeAt(t);return $};var mha=function(r,$){var t,n,a,e,u=$||r.length,K=new Array(2*u);for(n=0,t=0;t<u;)if((a=r[t++])<128)K[n++]=a;else if((e=Of[a])>4)K[n++]=65533,t+=e-1;else{for(a&=2===e?31:3===e?15:7;e>1&&t<u;)a=a<<6|63&r[t++],e--;e>1?K[n++]=65533:a<65536?K[n++]=a:(a-=65536,K[n++]=55296|a>>10&1023,K[n++]=56320|1023&a)}return ew(K,n)};var nha=function(r,$){var t;for(($=$||r.length)>r.length&&($=r.length),t=$-1;t>=0&&128==(192&r[t]);)t--;return t<0?$:0===t?$:t+Of[r[t]]>$?t:$};var fw={};function oha(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}fw=oha;var Pf={},gw=Object.prototype.toString,pha=0,ao=4,Zd=0,hw=1,iw=2,qha=-1,rha=0,sha=8;function Rc($){if(!(this instanceof Rc))return new Rc($);this.options=Td({level:qha,method:sha,chunkSize:16384,windowBits:15,memLevel:8,strategy:rha,to:""},$||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fw,this.strm.avail_out=0;var r=ma.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Zd)throw new Error(Wd[r]);if(t.header&&ma.deflateSetHeader(this.strm,t.header),t.dictionary){var e;if(e="string"==typeof t.dictionary?_n(t.dictionary):"[object ArrayBuffer]"===gw.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=ma.deflateSetDictionary(this.strm,e))!==Zd)throw new Error(Wd[r]);this._dict_set=!0}}function bo($,t){var r=new Rc(t);if(r.push($,!0),r.err)throw r.msg||Wd[r.err];return r.result}function tha($,t){return(t=t||{}).raw=!0,bo($,t)}function uha($,t){return(t=t||{}).gzip=!0,bo($,t)}Rc.prototype.push=function($,t){var r,e,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;e=t===~~t?t:!0===t?ao:pha,"string"==typeof $?a.input=_n($):"[object ArrayBuffer]"===gw.call($)?a.input=new Uint8Array($):a.input=$,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new $kQw7$export$Buf8(i),a.next_out=0,a.avail_out=i),(r=ma.deflate(a,e))!==hw&&r!==Zd)return this.onEnd(r),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||e!==ao&&e!==iw)||("string"===this.options.to?this.onData(kha(Cf(a.output,a.next_out))):this.onData(Cf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&r!==hw);return e===ao?(r=ma.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Zd):e!==iw||(this.onEnd(Zd),a.avail_out=0,!0)},Rc.prototype.onData=function($){this.chunks.push($)},Rc.prototype.onEnd=function($){$===Zd&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=A.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg};var vha=Rc;Pf.Deflate=vha;var wha=bo;Pf.deflate=wha;var xha=tha;Pf.deflateRaw=xha;var yha=uha;Pf.gzip=yha;var zha={},Ai=30,Aha=12;zha=function(i,e){var a,o,t,w,d,n,l,$,r,s,c,f,v,b,u,h,m,k,V,_,x,g,A,B,D;a=i.state,o=i.next_in,B=i.input,t=o+(i.avail_in-5),w=i.next_out,D=i.output,d=w-(e-i.avail_out),n=w+(i.avail_out-257),l=a.dmax,$=a.wsize,r=a.whave,s=a.wnext,c=a.window,f=a.hold,v=a.bits,b=a.lencode,u=a.distcode,h=(1<<a.lenbits)-1,m=(1<<a.distbits)-1;i:do{v<15&&(f+=B[o++]<<v,v+=8,f+=B[o++]<<v,v+=8),k=b[f&h];e:for(;;){if(f>>>=V=k>>>24,v-=V,0===(V=k>>>16&255))D[w++]=65535&k;else{if(!(16&V)){if(0==(64&V)){k=b[(65535&k)+(f&(1<<V)-1)];continue e}if(32&V){a.mode=Aha;break i}i.msg="invalid literal/length code",a.mode=Ai;break i}_=65535&k,(V&=15)&&(v<V&&(f+=B[o++]<<v,v+=8),_+=f&(1<<V)-1,f>>>=V,v-=V),v<15&&(f+=B[o++]<<v,v+=8,f+=B[o++]<<v,v+=8),k=u[f&m];a:for(;;){if(f>>>=V=k>>>24,v-=V,!(16&(V=k>>>16&255))){if(0==(64&V)){k=u[(65535&k)+(f&(1<<V)-1)];continue a}i.msg="invalid distance code",a.mode=Ai;break i}if(x=65535&k,v<(V&=15)&&(f+=B[o++]<<v,(v+=8)<V&&(f+=B[o++]<<v,v+=8)),(x+=f&(1<<V)-1)>l){i.msg="invalid distance too far back",a.mode=Ai;break i}if(f>>>=V,v-=V,x>(V=w-d)){if((V=x-V)>r&&a.sane){i.msg="invalid distance too far back",a.mode=Ai;break i}if(g=0,A=c,0===s){if(g+=$-V,V<_){_-=V;do{D[w++]=c[g++]}while(--V);g=w-x,A=D}}else if(s<V){if(g+=$+s-V,(V-=s)<_){_-=V;do{D[w++]=c[g++]}while(--V);if(g=0,s<_){_-=V=s;do{D[w++]=c[g++]}while(--V);g=w-x,A=D}}}else if(g+=s-V,V<_){_-=V;do{D[w++]=c[g++]}while(--V);g=w-x,A=D}for(;_>2;)D[w++]=A[g++],D[w++]=A[g++],D[w++]=A[g++],_-=3;_&&(D[w++]=A[g++],_>1&&(D[w++]=A[g++]))}else{g=w-x;do{D[w++]=D[g++],D[w++]=D[g++],D[w++]=D[g++],_-=3}while(_>2);_&&(D[w++]=D[g++],_>1&&(D[w++]=D[g++]))}break}}break}}while(o<t&&w<n);o-=_=v>>3,f&=(1<<(v-=_<<3))-1,i.next_in=o,i.next_out=w,i.avail_in=o<t?t-o+5:5-(o-t),i.avail_out=w<n?n-w+257:257-(w-n),a.hold=f,a.bits=v};var Qf={},$d=15,jw=852,kw=592,lw=0,co=1,mw=2,Bha=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Cha=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Dha=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Eha=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Qf=function($,r,o,x,a,c,V,v){var S,e,f,t,i,u,E,l,n,s=v.bits,I=0,N=0,T=0,B=0,D=0,O=0,b=0,A=0,L=0,M=0,X=null,G=0,H=new $kQw7$export$Buf16($d+1),U=new $kQw7$export$Buf16($d+1),_=null,d=0;for(I=0;I<=$d;I++)H[I]=0;for(N=0;N<x;N++)H[r[o+N]]++;for(D=s,B=$d;B>=1&&0===H[B];B--);if(D>B&&(D=B),0===B)return a[c++]=20971520,a[c++]=20971520,v.bits=1,0;for(T=1;T<B&&0===H[T];T++);for(D<T&&(D=T),A=1,I=1;I<=$d;I++)if(A<<=1,(A-=H[I])<0)return-1;if(A>0&&($===lw||1!==B))return-1;for(U[1]=0,I=1;I<$d;I++)U[I+1]=U[I]+H[I];for(N=0;N<x;N++)0!==r[o+N]&&(V[U[r[o+N]]++]=N);if($===lw?(X=_=V,u=19):$===co?(X=Bha,G-=257,_=Cha,d-=257,u=256):(X=Dha,_=Eha,u=-1),M=0,N=0,I=T,i=c,O=D,b=0,f=-1,t=(L=1<<D)-1,$===co&&L>jw||$===mw&&L>kw)return 1;for(;;){E=I-b,V[N]<u?(l=0,n=V[N]):V[N]>u?(l=_[d+V[N]],n=X[G+V[N]]):(l=96,n=0),S=1<<I-b,T=e=1<<O;do{a[i+(M>>b)+(e-=S)]=E<<24|l<<16|n|0}while(0!==e);for(S=1<<I-1;M&S;)S>>=1;if(0!==S?(M&=S-1,M+=S):M=0,N++,0==--H[I]){if(I===B)break;I=r[o+V[N]]}if(I>D&&(M&t)!==f){for(0===b&&(b=D),i+=T,A=1<<(O=I-b);O+b<B&&!((A-=H[O+b])<=0);)O++,A<<=1;if(L+=1<<O,$===co&&L>jw||$===mw&&L>kw)return 1;a[f=M&t]=D<<24|O<<16|i-c|0}}return 0!==M&&(a[i+M]=I-b<<24|64<<16|0),v.bits=D,0};var Fha=0,nw=1,ow=2,pw=4,Gha=5,Bi=6,Sc=0,Hha=1,Iha=2,Aa=-2,qw=-3,eo=-4,Jha=-5,rw=8,sw=1,tw=2,uw=3,vw=4,ww=5,xw=6,yw=7,zw=8,Aw=9,Bw=10,Ci=11,sb=12,fo=13,Cw=14,go=15,Dw=16,Ew=17,Fw=18,Gw=19,Di=20,Ei=21,Hw=22,Iw=23,Jw=24,Kw=25,Lw=26,ho=27,Mw=28,Nw=29,C=30,io=31,Kha=32,Lha=852,Mha=592;function Ow(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function Nha(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new $kQw7$export$Buf16(320),this.work=new $kQw7$export$Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Oha(a){var $;return a&&a.state?($=a.state,a.total_in=a.total_out=$.total=0,a.msg="",$.wrap&&(a.adler=1&$.wrap),$.mode=sw,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new $kQw7$export$Buf32(Lha),$.distcode=$.distdyn=new $kQw7$export$Buf32(Mha),$.sane=1,$.back=-1,Sc):Aa}function Pha(a){var $;return a&&a.state?(($=a.state).wsize=0,$.whave=0,$.wnext=0,Oha(a)):Aa}function Qha(a,$){var e,r;return a&&a.state?(r=a.state,$<0?(e=0,$=-$):(e=1+($>>4),$<48&&($&=15)),$&&($<8||$>15)?Aa:(null!==r.window&&r.wbits!==$&&(r.window=null),r.wrap=e,r.wbits=$,Pha(a))):Aa}function Rha(a,$){var e,r;return a?(r=new Nha,a.state=r,r.window=null,(e=Qha(a,$))!==Sc&&(a.state=null),e):Aa}var Pw,Qw,Sha=!0;function Tha(a){if(Sha){var $;for(Pw=new $kQw7$export$Buf32(512),Qw=new $kQw7$export$Buf32(32),$=0;$<144;)a.lens[$++]=8;for(;$<256;)a.lens[$++]=9;for(;$<280;)a.lens[$++]=7;for(;$<288;)a.lens[$++]=8;for(Qf(nw,a.lens,0,288,Pw,0,a.work,{bits:9}),$=0;$<32;)a.lens[$++]=5;Qf(ow,a.lens,0,32,Qw,0,a.work,{bits:5}),Sha=!1}a.lencode=Pw,a.lenbits=9,a.distcode=Qw,a.distbits=5}function Rw(a,$,e,r){var t,i=a.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new $kQw7$export$Buf8(i.wsize)),r>=i.wsize?(A.arraySet(i.window,$,e-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((t=i.wsize-i.wnext)>r&&(t=r),A.arraySet(i.window,$,e-r,t,i.wnext),(r-=t)?(A.arraySet(i.window,$,e-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=t,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=t))),0}function Uha(a,$){var e,r,t,i,m,n,v,s,F,l,o,f,d,c,h,E,b,_,k,w,R,u,x,T,D=0,g=new $kQw7$export$Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return Aa;(e=a.state).mode===sb&&(e.mode=fo),m=a.next_out,t=a.output,v=a.avail_out,i=a.next_in,r=a.input,n=a.avail_in,s=e.hold,F=e.bits,l=n,o=v,u=Sc;a:for(;;)switch(e.mode){case sw:if(0===e.wrap){e.mode=fo;break}for(;F<16;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(2&e.wrap&&35615===s){e.check=0,g[0]=255&s,g[1]=s>>>8&255,e.check=W(e.check,g,2,0),s=0,F=0,e.mode=tw;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&s)<<8)+(s>>8))%31){a.msg="incorrect header check",e.mode=C;break}if((15&s)!==rw){a.msg="unknown compression method",e.mode=C;break}if(F-=4,R=8+(15&(s>>>=4)),0===e.wbits)e.wbits=R;else if(R>e.wbits){a.msg="invalid window size",e.mode=C;break}e.dmax=1<<R,a.adler=e.check=1,e.mode=512&s?Bw:sb,s=0,F=0;break;case tw:for(;F<16;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(e.flags=s,(255&e.flags)!==rw){a.msg="unknown compression method",e.mode=C;break}if(57344&e.flags){a.msg="unknown header flags set",e.mode=C;break}e.head&&(e.head.text=s>>8&1),512&e.flags&&(g[0]=255&s,g[1]=s>>>8&255,e.check=W(e.check,g,2,0)),s=0,F=0,e.mode=uw;case uw:for(;F<32;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}e.head&&(e.head.time=s),512&e.flags&&(g[0]=255&s,g[1]=s>>>8&255,g[2]=s>>>16&255,g[3]=s>>>24&255,e.check=W(e.check,g,4,0)),s=0,F=0,e.mode=vw;case vw:for(;F<16;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}e.head&&(e.head.xflags=255&s,e.head.os=s>>8),512&e.flags&&(g[0]=255&s,g[1]=s>>>8&255,e.check=W(e.check,g,2,0)),s=0,F=0,e.mode=ww;case ww:if(1024&e.flags){for(;F<16;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}e.length=s,e.head&&(e.head.extra_len=s),512&e.flags&&(g[0]=255&s,g[1]=s>>>8&255,e.check=W(e.check,g,2,0)),s=0,F=0}else e.head&&(e.head.extra=null);e.mode=xw;case xw:if(1024&e.flags&&((f=e.length)>n&&(f=n),f&&(e.head&&(R=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),A.arraySet(e.head.extra,r,i,f,R)),512&e.flags&&(e.check=W(e.check,r,f,i)),n-=f,i+=f,e.length-=f),e.length))break a;e.length=0,e.mode=yw;case yw:if(2048&e.flags){if(0===n)break a;f=0;do{R=r[i+f++],e.head&&R&&e.length<65536&&(e.head.name+=String.fromCharCode(R))}while(R&&f<n);if(512&e.flags&&(e.check=W(e.check,r,f,i)),n-=f,i+=f,R)break a}else e.head&&(e.head.name=null);e.length=0,e.mode=zw;case zw:if(4096&e.flags){if(0===n)break a;f=0;do{R=r[i+f++],e.head&&R&&e.length<65536&&(e.head.comment+=String.fromCharCode(R))}while(R&&f<n);if(512&e.flags&&(e.check=W(e.check,r,f,i)),n-=f,i+=f,R)break a}else e.head&&(e.head.comment=null);e.mode=Aw;case Aw:if(512&e.flags){for(;F<16;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(s!==(65535&e.check)){a.msg="header crc mismatch",e.mode=C;break}s=0,F=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),a.adler=e.check=0,e.mode=sb;break;case Bw:for(;F<32;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}a.adler=e.check=Ow(s),s=0,F=0,e.mode=Ci;case Ci:if(0===e.havedict)return a.next_out=m,a.avail_out=v,a.next_in=i,a.avail_in=n,e.hold=s,e.bits=F,Iha;a.adler=e.check=1,e.mode=sb;case sb:if($===Gha||$===Bi)break a;case fo:if(e.last){s>>>=7&F,F-=7&F,e.mode=ho;break}for(;F<3;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}switch(e.last=1&s,F-=1,3&(s>>>=1)){case 0:e.mode=Cw;break;case 1:if(Tha(e),e.mode=Di,$===Bi){s>>>=2,F-=2;break a}break;case 2:e.mode=Ew;break;case 3:a.msg="invalid block type",e.mode=C;}s>>>=2,F-=2;break;case Cw:for(s>>>=7&F,F-=7&F;F<32;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if((65535&s)!=(s>>>16^65535)){a.msg="invalid stored block lengths",e.mode=C;break}if(e.length=65535&s,s=0,F=0,e.mode=go,$===Bi)break a;case go:e.mode=Dw;case Dw:if(f=e.length){if(f>n&&(f=n),f>v&&(f=v),0===f)break a;A.arraySet(t,r,i,f,m),n-=f,i+=f,v-=f,m+=f,e.length-=f;break}e.mode=sb;break;case Ew:for(;F<14;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(e.nlen=257+(31&s),s>>>=5,F-=5,e.ndist=1+(31&s),s>>>=5,F-=5,e.ncode=4+(15&s),s>>>=4,F-=4,e.nlen>286||e.ndist>30){a.msg="too many length or distance symbols",e.mode=C;break}e.have=0,e.mode=Fw;case Fw:for(;e.have<e.ncode;){for(;F<3;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}e.lens[S[e.have++]]=7&s,s>>>=3,F-=3}for(;e.have<19;)e.lens[S[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,x={bits:e.lenbits},u=Qf(Fha,e.lens,0,19,e.lencode,0,e.work,x),e.lenbits=x.bits,u){a.msg="invalid code lengths set",e.mode=C;break}e.have=0,e.mode=Gw;case Gw:for(;e.have<e.nlen+e.ndist;){for(;E=(D=e.lencode[s&(1<<e.lenbits)-1])>>>16&255,b=65535&D,!((h=D>>>24)<=F);){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(b<16)s>>>=h,F-=h,e.lens[e.have++]=b;else{if(16===b){for(T=h+2;F<T;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(s>>>=h,F-=h,0===e.have){a.msg="invalid bit length repeat",e.mode=C;break}R=e.lens[e.have-1],f=3+(3&s),s>>>=2,F-=2}else if(17===b){for(T=h+3;F<T;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}F-=h,R=0,f=3+(7&(s>>>=h)),s>>>=3,F-=3}else{for(T=h+7;F<T;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}F-=h,R=0,f=11+(127&(s>>>=h)),s>>>=7,F-=7}if(e.have+f>e.nlen+e.ndist){a.msg="invalid bit length repeat",e.mode=C;break}for(;f--;)e.lens[e.have++]=R}}if(e.mode===C)break;if(0===e.lens[256]){a.msg="invalid code -- missing end-of-block",e.mode=C;break}if(e.lenbits=9,x={bits:e.lenbits},u=Qf(nw,e.lens,0,e.nlen,e.lencode,0,e.work,x),e.lenbits=x.bits,u){a.msg="invalid literal/lengths set",e.mode=C;break}if(e.distbits=6,e.distcode=e.distdyn,x={bits:e.distbits},u=Qf(ow,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,x),e.distbits=x.bits,u){a.msg="invalid distances set",e.mode=C;break}if(e.mode=Di,$===Bi)break a;case Di:e.mode=Ei;case Ei:if(n>=6&&v>=258){a.next_out=m,a.avail_out=v,a.next_in=i,a.avail_in=n,e.hold=s,e.bits=F,zha(a,o),m=a.next_out,t=a.output,v=a.avail_out,i=a.next_in,r=a.input,n=a.avail_in,s=e.hold,F=e.bits,e.mode===sb&&(e.back=-1);break}for(e.back=0;E=(D=e.lencode[s&(1<<e.lenbits)-1])>>>16&255,b=65535&D,!((h=D>>>24)<=F);){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(E&&0==(240&E)){for(_=h,k=E,w=b;E=(D=e.lencode[w+((s&(1<<_+k)-1)>>_)])>>>16&255,b=65535&D,!(_+(h=D>>>24)<=F);){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}s>>>=_,F-=_,e.back+=_}if(s>>>=h,F-=h,e.back+=h,e.length=b,0===E){e.mode=Lw;break}if(32&E){e.back=-1,e.mode=sb;break}if(64&E){a.msg="invalid literal/length code",e.mode=C;break}e.extra=15&E,e.mode=Hw;case Hw:if(e.extra){for(T=e.extra;F<T;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}e.length+=s&(1<<e.extra)-1,s>>>=e.extra,F-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Iw;case Iw:for(;E=(D=e.distcode[s&(1<<e.distbits)-1])>>>16&255,b=65535&D,!((h=D>>>24)<=F);){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(0==(240&E)){for(_=h,k=E,w=b;E=(D=e.distcode[w+((s&(1<<_+k)-1)>>_)])>>>16&255,b=65535&D,!(_+(h=D>>>24)<=F);){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}s>>>=_,F-=_,e.back+=_}if(s>>>=h,F-=h,e.back+=h,64&E){a.msg="invalid distance code",e.mode=C;break}e.offset=b,e.extra=15&E,e.mode=Jw;case Jw:if(e.extra){for(T=e.extra;F<T;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}e.offset+=s&(1<<e.extra)-1,s>>>=e.extra,F-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){a.msg="invalid distance too far back",e.mode=C;break}e.mode=Kw;case Kw:if(0===v)break a;if(f=o-v,e.offset>f){if((f=e.offset-f)>e.whave&&e.sane){a.msg="invalid distance too far back",e.mode=C;break}f>e.wnext?(f-=e.wnext,d=e.wsize-f):d=e.wnext-f,f>e.length&&(f=e.length),c=e.window}else c=t,d=m-e.offset,f=e.length;f>v&&(f=v),v-=f,e.length-=f;do{t[m++]=c[d++]}while(--f);0===e.length&&(e.mode=Ei);break;case Lw:if(0===v)break a;t[m++]=e.length,v--,e.mode=Ei;break;case ho:if(e.wrap){for(;F<32;){if(0===n)break a;n--,s|=r[i++]<<F,F+=8}if(o-=v,a.total_out+=o,e.total+=o,o&&(a.adler=e.check=e.flags?W(e.check,t,o,m-o):Jf(e.check,t,o,m-o)),o=v,(e.flags?s:Ow(s))!==e.check){a.msg="incorrect data check",e.mode=C;break}s=0,F=0}e.mode=Mw;case Mw:if(e.wrap&&e.flags){for(;F<32;){if(0===n)break a;n--,s+=r[i++]<<F,F+=8}if(s!==(4294967295&e.total)){a.msg="incorrect length check",e.mode=C;break}s=0,F=0}e.mode=Nw;case Nw:u=Hha;break a;case C:u=qw;break a;case io:return eo;case Kha:default:return Aa;}return a.next_out=m,a.avail_out=v,a.next_in=i,a.avail_in=n,e.hold=s,e.bits=F,(e.wsize||o!==a.avail_out&&e.mode<C&&(e.mode<ho||$!==pw))&&Rw(a,a.output,a.next_out,o-a.avail_out)?(e.mode=io,eo):(l-=a.avail_in,o-=a.avail_out,a.total_in+=l,a.total_out+=o,e.total+=o,e.wrap&&o&&(a.adler=e.check=e.flags?W(e.check,t,o,a.next_out-o):Jf(e.check,t,o,a.next_out-o)),a.data_type=e.bits+(e.last?64:0)+(e.mode===sb?128:0)+(e.mode===Di||e.mode===go?256:0),(0===l&&0===o||$===pw)&&u===Sc&&(u=Jha),u)}function Vha(a){if(!a||!a.state)return Aa;var $=a.state;return $.window&&($.window=null),a.state=null,Sc}function Wha(a,$){var e;return a&&a.state?0==(2&(e=a.state).wrap)?Aa:(e.head=$,$.done=!1,Sc):Aa}function Xha(a,$){var e,r=$.length;return a&&a.state?0!==(e=a.state).wrap&&e.mode!==Ci?Aa:e.mode===Ci&&Jf(1,$,r,0)!==e.check?qw:Rw(a,$,r,r)?(e.mode=io,eo):(e.havedict=1,Sc):Aa}var Yha=Rha;var Zha=Uha;var $ha=Vha;var _ha=Wha;var aia=Xha;var G={};G={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var bia={};function cia(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}bia=cia;var Rf={},Sw=Object.prototype.toString;function Tc(t){if(!(this instanceof Tc))return new Tc(t);this.options=Td({chunkSize:16384,windowBits:0,to:""},t||{});var $=this.options;$.raw&&$.windowBits>=0&&$.windowBits<16&&($.windowBits=-$.windowBits,0===$.windowBits&&($.windowBits=-15)),!($.windowBits>=0&&$.windowBits<16)||t&&t.windowBits||($.windowBits+=32),$.windowBits>15&&$.windowBits<48&&0==(15&$.windowBits)&&($.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fw,this.strm.avail_out=0;var e=Yha(this.strm,$.windowBits);if(e!==G.Z_OK)throw new Error(Wd[e]);this.header=new bia,_ha(this.strm,this.header)}function jo(t,$){var e=new Tc($);if(e.push(t,!0),e.err)throw e.msg||Wd[e.err];return e.result}function dia(t,$){return($=$||{}).raw=!0,jo(t,$)}Tc.prototype.push=function(t,$){var e,i,r,a,n,s,o=this.strm,b=this.options.chunkSize,M=this.options.dictionary,l=!1;if(this.ended)return!1;i=$===~~$?$:!0===$?G.Z_FINISH:G.Z_NO_FLUSH,"string"==typeof t?o.input=lha(t):"[object ArrayBuffer]"===Sw.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new $kQw7$export$Buf8(b),o.next_out=0,o.avail_out=b),(e=Zha(o,G.Z_NO_FLUSH))===G.Z_NEED_DICT&&M&&(s="string"==typeof M?_n(M):"[object ArrayBuffer]"===Sw.call(M)?new Uint8Array(M):M,e=aia(this.strm,s)),e===G.Z_BUF_ERROR&&!0===l&&(e=G.Z_OK,l=!1),e!==G.Z_STREAM_END&&e!==G.Z_OK)return this.onEnd(e),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&e!==G.Z_STREAM_END&&(0!==o.avail_in||i!==G.Z_FINISH&&i!==G.Z_SYNC_FLUSH)||("string"===this.options.to?(r=nha(o.output,o.next_out),a=o.next_out-r,n=mha(o.output,r),o.next_out=a,o.avail_out=b-a,a&&A.arraySet(o.output,o.output,r,a,0),this.onData(n)):this.onData(Cf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(l=!0)}while((o.avail_in>0||0===o.avail_out)&&e!==G.Z_STREAM_END);return e===G.Z_STREAM_END&&(i=G.Z_FINISH),i===G.Z_FINISH?(e=$ha(this.strm),this.onEnd(e),this.ended=!0,e===G.Z_OK):i!==G.Z_SYNC_FLUSH||(this.onEnd(G.Z_OK),o.avail_out=0,!0)},Tc.prototype.onData=function(t){this.chunks.push(t)},Tc.prototype.onEnd=function(t){t===G.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=A.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var eia=Tc;Rf.Inflate=eia;var fia=jo;Rf.inflate=fia;var gia=dia;Rf.inflateRaw=gia;var hia=jo;Rf.ungzip=hia;var iia={},jia=Td,Tw={};jia(Tw,Pf,Rf,G),iia=Tw;var Fi={},kia="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,Uw=(D(),n),lia=kia?"uint8array":"array",mia="\b\0";function Uc(r,e){p.call(this,"FlateWorker/"+r),this._pako=null,this._pakoAction=r,this._pakoOptions=e,this.meta={}}Fi.magic=mia,Uw.inherits(Uc,p),Uc.prototype.processChunk=function(r){this.meta=r.meta,null===this._pako&&this._createPako(),this._pako.push(Uw.transformTo(lia,r.data),!1)},Uc.prototype.flush=function(){p.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Uc.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},Uc.prototype._createPako=function(){this._pako=new iia[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var r=this;this._pako.onData=function(e){r.push({data:e,meta:r.meta})}};var nia=function(r){return new Uc("Deflate",r)};Fi.compressWorker=nia;var oia=function(){return new Uc("Inflate",{})};Fi.uncompressWorker=oia;var Vc={},pia={magic:"\0\0",compressWorker:function(r){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}};Vc.STORE=pia;Vc.DEFLATE=Fi;var I={},qia="PK\x03\x04";I.LOCAL_FILE_HEADER=qia;var ria="PK\x01\x02";I.CENTRAL_FILE_HEADER=ria;var sia="PK\x05\x06";I.CENTRAL_DIRECTORY_END=sia;var tia="PK\x06\x07";I.ZIP64_CENTRAL_DIRECTORY_LOCATOR=tia;var uia="PK\x06\x06";I.ZIP64_CENTRAL_DIRECTORY_END=uia;var via="PK\x07\b";I.DATA_DESCRIPTOR=via;var wia={},_d=(D(),n),y=function(e,r){var t,$="";for(t=0;t<r;t++)$+=String.fromCharCode(255&e),e>>>=8;return $},xia=function(e,r){var t=e;return e||(t=r?16893:33204),(65535&t)<<16},yia=function(e,r){return 63&(e||0)},Vw=function(e,r,t,$,i,s){var o,a,n=e.file,c=e.compression,u=s!==R.utf8encode,h=_d.transformTo("string",s(n.name)),W=_d.transformTo("string",R.utf8encode(n.name)),l=n.comment,p=_d.transformTo("string",s(l)),v=_d.transformTo("string",R.utf8encode(l)),d=W.length!==n.name.length,J=v.length!==l.length,Q="",f="",m="",g=n.dir,T=n.date,x={crc32:0,compressedSize:0,uncompressedSize:0};r&&!t||(x.crc32=e.crc32,x.compressedSize=e.compressedSize,x.uncompressedSize=e.uncompressedSize);var F=0;r&&(F|=8),u||!d&&!J||(F|=2048);var H=0,k=0;g&&(H|=16),"UNIX"===i?(k=798,H|=xia(n.unixPermissions,g)):(k=20,H|=yia(n.dosPermissions,g)),o=T.getUTCHours(),o<<=6,o|=T.getUTCMinutes(),o<<=5,o|=T.getUTCSeconds()/2,a=T.getUTCFullYear()-1980,a<<=4,a|=T.getUTCMonth()+1,a<<=5,a|=T.getUTCDate(),d&&(f=y(1,1)+y(Bf(h),4)+W,Q+="up"+y(f.length,2)+f),J&&(m=y(1,1)+y(Bf(p),4)+v,Q+="uc"+y(m.length,2)+m);var S="";return S+="\n\0",S+=y(F,2),S+=c.magic,S+=y(o,2),S+=y(a,2),S+=y(x.crc32,4),S+=y(x.compressedSize,4),S+=y(x.uncompressedSize,4),S+=y(h.length,2),S+=y(Q.length,2),{fileRecord:I.LOCAL_FILE_HEADER+S+h+Q,dirRecord:I.CENTRAL_FILE_HEADER+y(k,2)+S+y(p.length,2)+"\0\0\0\0"+y(H,4)+y($,4)+h+Q+p}},zia=function(e,r,t,$,i){var s=_d.transformTo("string",i($));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(e,2)+y(e,2)+y(r,4)+y(t,4)+y(s.length,2)+s},Aia=function(e){return I.DATA_DESCRIPTOR+y(e.crc32,4)+y(e.compressedSize,4)+y(e.uncompressedSize,4)};function Ka(e,r,t,$){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=t,this.encodeFileName=$,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_d.inherits(Ka,p),Ka.prototype.push=function(e){var r=e.meta.percent||0,t=this.entriesCount,$=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,p.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(r+100*(t-$-1))/t:100}}))},Ka.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var r=this.streamFiles&&!e.file.dir;if(r){var t=Vw(e,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Ka.prototype.closedSource=function(e){this.accumulate=!1;var r=this.streamFiles&&!e.file.dir,t=Vw(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),r)this.push({data:Aia(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Ka.prototype.flush=function(){for(var e=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var t=this.bytesWritten-e,$=zia(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:$,meta:{percent:100}})},Ka.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Ka.prototype.registerPrevious=function(e){this._sources.push(e);var r=this;return e.on("data",function(e){r.processChunk(e)}),e.on("end",function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()}),e.on("error",function(e){r.error(e)}),this},Ka.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Ka.prototype.error=function(e){var r=this._sources;if(!p.prototype.error.call(this,e))return!1;for(var t=0;t<r.length;t++)try{r[t].error(e)}catch(e){}return!0},Ka.prototype.lock=function(){p.prototype.lock.call(this);for(var e=this._sources,r=0;r<e.length;r++)e[r].lock()},wia=Ka;var Bia=function(e,r){var o=e||r,s=Vc[o];if(!s)throw new Error(o+" is not a valid compression method !");return s},Cia=function(e,r,o){var s=new wia(r.streamFiles,o,r.platform,r.encodeFileName),i=0;try{e.forEach(function(e,o){i++;var n=Bia(o.options.compression,r.compression),t=o.options.compressionOptions||r.compressionOptions||{},$=o.dir,p=o.date;o._compressWorker(n,t).withStreamInfo("file",{name:e,dir:$,date:p,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(s)}),s.entriesCount=i}catch(n){s.error(n)}return s};var Dia={},Eia=(D(),n);function Sf(e,r){p.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(r)}Eia.inherits(Sf,p),Sf.prototype._bindStream=function(e){var r=this;this._stream=e,e.pause(),e.on("data",function(e){r.push({data:e,meta:{percent:0}})}).on("error",function(e){r.isPaused?this.generatedError=e:r.error(e)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})},Sf.prototype.pause=function(){return!!p.prototype.pause.call(this)&&(this._stream.pause(),!0)},Sf.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Dia=Sf;var Fia={},Tf=(D(),n),Ww=(di(),ci),Xw=function(r,e,t){var i,n=Tf.getTypeOf(e),s=Tf.extend(t||{},ya);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(r=Yw(r)),s.createFolders&&(i=Gia(r))&&Zw.call(this,i,!0);var a="string"===n&&!1===s.binary&&!1===s.base64;t&&void 0!==t.binary||(s.binary=!a),(e instanceof Sd&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",n="string");var $=null;$=e instanceof Sd||e instanceof p?e:Ww.isNode&&Ww.isStream(e)?new Dia(r,e):Tf.prepareContent(r,e,s.binary,s.optimizedBinaryString,s.base64);var o=new Mfa(r,$,s);this.files[r]=o},Gia=function(r){"/"===r.slice(-1)&&(r=r.substring(0,r.length-1));var e=r.lastIndexOf("/");return e>0?r.substring(0,e):""},Yw=function(r){return"/"!==r.slice(-1)&&(r+="/"),r},Zw=function(r,e){return e=void 0!==e?e:Av,r=Yw(r),this.files[r]||Xw.call(this,r,null,{dir:!0,createFolders:e}),this.files[r]};function $w(r){return"[object RegExp]"===Object.prototype.toString.call(r)}var Hia={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(r){var e,t,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(t=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&r(t,i))},filter:function(r){var e=[];return this.forEach(function(t,i){r(t,i)&&e.push(i)}),e},file:function(r,e,t){if(1===arguments.length){if($w(r)){var i=r;return this.filter(function(r,e){return!e.dir&&i.test(r)})}var n=this.files[this.root+r];return n&&!n.dir?n:null}return r=this.root+r,Xw.call(this,r,e,t),this},folder:function(r){if(!r)return this;if($w(r))return this.filter(function(e,t){return t.dir&&r.test(e)});var e=this.root+r,t=Zw.call(this,e),i=this.clone();return i.root=t.name,i},remove:function(r){r=this.root+r;var e=this.files[r];if(e||("/"!==r.slice(-1)&&(r+="/"),e=this.files[r]),e&&!e.dir)delete this.files[r];else for(var t=this.filter(function(e,t){return t.name.slice(0,r.length)===r}),i=0;i<t.length;i++)delete this.files[t[i].name];return this},generate:function(r){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(r){var e,t={};try{if((t=Tf.extend(r||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:R.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");Tf.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var i=t.comment||this.comment||"";e=Cia(this,t,i)}catch(n){(e=new p("error")).error(n)}return new yv(e,t.type||"string",t.mimeType)},generateAsync:function(r,e){return this.generateInternalStream(r).accumulate(e)},generateNodeStream:function(r,e){return(r=r||{}).type||(r.type="nodebuffer"),this.generateInternalStream(r).toNodejsStream(e)}};Fia=Hia;var Gi={},Iia=(D(),n);function _w(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}_w.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return Iia.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},Gi=_w;var ko={},Jia=(D(),n);function ae(r){Gi.call(this,r);for(var a=0;a<this.data.length;a++)r[a]=255&r[a]}Jia.inherits(ae,Gi),ae.prototype.byteAt=function(r){return this.data[this.zero+r]},ae.prototype.lastIndexOfSignature=function(r){for(var a=r.charCodeAt(0),t=r.charCodeAt(1),e=r.charCodeAt(2),$=r.charCodeAt(3),i=this.length-4;i>=0;--i)if(this.data[i]===a&&this.data[i+1]===t&&this.data[i+2]===e&&this.data[i+3]===$)return i-this.zero;return-1},ae.prototype.readAndCheckSignature=function(r){var a=r.charCodeAt(0),t=r.charCodeAt(1),e=r.charCodeAt(2),$=r.charCodeAt(3),i=this.readData(4);return a===i[0]&&t===i[1]&&e===i[2]&&$===i[3]},ae.prototype.readData=function(r){if(this.checkOffset(r),0===r)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,a},ko=ae;var Kia={},Lia=(D(),n);function be(r){Gi.call(this,r)}Lia.inherits(be,Gi),be.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},be.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},be.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},be.prototype.readData=function(r){this.checkOffset(r);var t=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,t},Kia=be;var lo={},Mia=(D(),n);function mo(r){ko.call(this,r)}Mia.inherits(mo,ko),mo.prototype.readData=function(r){if(this.checkOffset(r),0===r)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,a},lo=mo;var Nia={},Oia=(D(),n);function no(r){lo.call(this,r)}Oia.inherits(no,lo),no.prototype.readData=function(r){this.checkOffset(r);var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e},Nia=no;var Hi={},Ii=(D(),n),ax=(Ub(),N);Hi=function(r){var $=Ii.getTypeOf(r);return Ii.checkSupport($),"string"!==$||ax.uint8array?"nodebuffer"===$?new Nia(r):ax.uint8array?new lo(Ii.transformTo("uint8array",r)):new ko(Ii.transformTo("array",r)):new Kia(r)};var Pia={},ec=(D(),n),Qia=(Ub(),N),Ria=0,Sia=3,Tia=function(e){for(var t in Vc)if(Vc.hasOwnProperty(t)&&Vc[t].magic===e)return Vc[t];return null};function bx(e,t){this.options=e,this.loadOptions=t}bx.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=Tia(this.compressionMethod)))throw new Error("Corrupted zip : compression "+ec.pretty(this.compressionMethod)+" unknown (inner file : "+ec.transformTo("string",this.fileName)+")");this.decompressed=new Sd(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e===Ria&&(this.dosPermissions=63&this.externalFileAttributes),e===Sia&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=Hi(this.extraFields[1].value);this.uncompressedSize===ec.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===ec.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===ec.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===ec.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,s,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),r=e.readInt(2),s=e.readData(r),this.extraFields[t]={id:t,length:r,value:s}},handleUTF8:function(){var e=Qia.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=R.utf8decode(this.fileName),this.fileCommentStr=R.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=ec.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var s=this.findExtraFieldUnicodeComment();if(null!==s)this.fileCommentStr=s;else{var i=ec.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=Hi(e.value);return 1!==t.readInt(1)?null:Bf(this.fileName)!==t.readInt(4)?null:R.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=Hi(e.value);return 1!==t.readInt(1)?null:Bf(this.fileComment)!==t.readInt(4)?null:R.utf8decode(t.readData(e.length-5))}return null}},Pia=bx;var Uia={},tb=(D(),n),Via=(Ub(),N);function cx(r){this.files=[],this.loadOptions=r}cx.prototype={checkSignature:function(r){if(!this.reader.readAndCheckSignature(r)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+tb.pretty(e)+", expected "+tb.pretty(r)+")")}},isSignature:function(r,e){var t=this.reader.index;this.reader.setIndex(r);var i=this.reader.readString(4)===e;return this.reader.setIndex(t),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var r=this.reader.readData(this.zipCommentLength),e=Via.uint8array?"uint8array":"array",t=tb.transformTo(e,r);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var r,e,t,i=this.zip64EndOfCentralSize-44;0<i;)r=this.reader.readInt(2),e=this.reader.readInt(4),t=this.reader.readData(e),this.zip64ExtensibleData[r]={id:r,length:e,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var r,e;for(r=0;r<this.files.length;r++)e=this.files[r],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(I.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var r;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(I.CENTRAL_FILE_HEADER);)(r=new Pia({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(r);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var r=this.reader.lastIndexOfSignature(I.CENTRAL_DIRECTORY_END);if(r<0)throw!this.isSignature(0,I.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(r);var e=r;if(this.checkSignature(I.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===tb.MAX_VALUE_16BITS||this.diskWithCentralDirStart===tb.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===tb.MAX_VALUE_16BITS||this.centralDirRecords===tb.MAX_VALUE_16BITS||this.centralDirSize===tb.MAX_VALUE_32BITS||this.centralDirOffset===tb.MAX_VALUE_32BITS){if(this.zip64=!0,(r=this.reader.lastIndexOfSignature(I.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(r),this.checkSignature(I.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,I.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(I.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(I.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var i=e-t;if(i>0)this.isSignature(e,I.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(r){this.reader=Hi(r)},load:function(r){this.prepareReader(r),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Uia=cx;var Wia={},dx=(D(),n),Ji=(xf(),wf),Xia=(dx=(D(),n),Uia),ex=(di(),ci);function Yia(r){return new Ji.Promise(function(e,t){var i=r.decompressed.getContentWorker().pipe(new Dv);i.on("error",function(r){t(r)}).on("end",function(){i.streamInfo.crc32!==r.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}Wia=function(r,e){var t=this;return e=dx.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:R.utf8decode}),ex.isNode&&ex.isStream(r)?Ji.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):dx.prepareContent("the loaded zip file",r,!0,e.optimizedBinaryString,e.base64).then(function(r){var t=new Xia(e);return t.load(r),t}).then(function(r){var t=[Ji.Promise.resolve(r)],i=r.files;if(e.checkCRC32)for(var n=0;n<i.length;n++)t.push(Yia(i[n]));return Ji.Promise.all(t)}).then(function(r){for(var i=r.shift(),n=i.files,$=0;$<n.length;$++){var c=n[$];t.file(c.fileNameStr,c.decompressed,{binary:!0,optimizedBinaryString:!0,date:c.date,dir:c.dir,comment:c.fileCommentStr.length?c.fileCommentStr:null,unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(t.comment=i.zipComment),t})};xa.prototype=Fia,xa.prototype.loadAsync=Wia,xa.support=(Ub(),N),xa.defaults=ya,xa.version="3.1.5",xa.loadAsync=function(r,e){return new xa().loadAsync(r,e)},xa.external=(xf(),wf),I_=xa;var Zia={},Ki={};function fx(){try{return new window.XMLHttpRequest}catch(r){}}function $ia(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(r){}}Ki._getBinaryFromXHR=function(r){return r.response||r.responseText};var _ia=window.ActiveXObject?function(){return fx()||$ia()}:fx;Ki.getBinaryContent=function(r,e){try{var t=_ia();t.open("GET",r,!0),"responseType"in t&&(t.responseType="arraybuffer"),t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),t.onreadystatechange=function(a){var n,$;if(4===t.readyState)if(200===t.status||0===t.status){n=null,$=null;try{n=Ki._getBinaryFromXHR(t)}catch(i){$=new Error(i)}e($,n)}else e(new Error("Ajax error for "+r+" : "+this.status+" "+this.statusText),null)},t.send()}catch(a){e(new Error(a),null)}},Zia=Ki;var aja=/(^sounds\/|\.ogg$)/gi,bja=/\.ogg$/i;function cja(r){var $=[],e=[];return r.folder("sounds/").forEach(function(r,a){bja.test(r)&&($.push(a.name.replace(aja,"")),e.push(a.async("arraybuffer")))}),Promise.all(e).then(function(r){return r.forEach(function(r,e){return HS({name:$[e],arrayBuffer:r})})})}function dja(){return new Promise(function(r,$){var $lyU$$interop$default=Uf(Zia);$lyU$$interop$default.d.getBinaryContent("assets.zip",function(e,a){e?$(e):r(a)})}).then(function(r){var $zl0j$$interop$default=Uf(I_);return $zl0j$$interop$default.d.loadAsync(r)}).then(cja)}var eja={load:dja};var fja;var gja;var gx=function(e){return gja=e},hja=function(){return gja},oo={};function ija(){var e=Qr.getDevice().getEvents();e.PAUSE&&!oo.PAUSE&&Mi.togglePause(),Mi.getIsPaused()||(e.FOCUS_NEXT_ENEMY&&!oo.FOCUS_NEXT_ENEMY&&(ua.process(null),jb.setFocus(gx(ds(!0)))),e.TOGGLE_RADAR&&!oo.TOGGLE_RADAR&&Mb.setVisible(!Mb.getIsVisible())),oo=e}var hx={update:ija,getControlledEntity:hja,setControlledEntity:gx};var jja=ba.MAGENTA,kja=ba.BLUE;function lja(){var t=d.create("Star",{x:5e3,y:5e3}),$=d.create("Planet",{star:t,orbitDistance:3200,orbitRotation:0});$.team=kja,$.updateFlagColor();var e={team:$.team,planet:$};$.pbase=d.create("PBase",e);var a=d.create("Fighter",{x:15e3,y:15e3,isFighterAutoAccelerated:!0,team:jja,attackTarget:$.pbase});jb.setFocus(a)}var mja={init:lja};var nja=60,ix=1e3/nja,Li=!1;function oja(){d.updateAll(),d.prepareNext()}function jx(){var $=Date.now(),r=$-fja;if(!Li&&oja(),hx.update(),r>ix){var s=jb.getFocus();s&&(v.setFocus(s),k.centerOn(s)),k.cullRenderable(),ua.process(s),v.update(),k.render(),fja=$-r%ix}requestAnimationFrame(jx)}function pja(){fja=Date.now(),jx()}function qja(){addEventListener("resize",rja),d.clearAll(),k.init(),ua.init().forEach(k.addChild),v.init(hx),mja.init()}function rja(){v.onResize(),ua.onResize(),k.onResize()}var sja=function(){Li=!Li,v.setPauseVisible(Li)},Mi={init:qja,start:pja,togglePause:sja,getIsPaused:function(){return Li}};var kx=function(){Lh.init(),Lh.start()};function lx(){var e;removeEventListener("DOMContentLoaded",lx),af.isTestSectorInUse?e=function(){Mi.init(),Mi.start()}:af.shouldSkipTitleScreen?e=kx:af.isGeometryEditorInUse?e=yR.start:(Ot.setFadeOutCallback(kx),e=Ot.start),eja.load().then(e)}addEventListener("DOMContentLoaded",lx);})();