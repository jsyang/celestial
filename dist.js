!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;b<e;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;i<k;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],2:[function(a,b,c){},{}],3:[function(a,b,c){(function(b){"use strict";var d=a("buffer"),e=d.Buffer,f=d.SlowBuffer,g=d.kMaxLength||2147483647;c.alloc=function(a,b,c){if("function"==typeof e.alloc)return e.alloc(a,b,c);if("number"==typeof c)throw new TypeError("encoding must not be number");if("number"!=typeof a)throw new TypeError("size must be a number");if(a>g)throw new RangeError("size is too large");var d=c,f=b;void 0===f&&(d=void 0,f=0);var h=new e(a);if("string"==typeof f)for(var i=new e(f,d),j=i.length,k=-1;++k<a;)h[k]=i[k%j];else h.fill(f);return h},c.allocUnsafe=function(a){if("function"==typeof e.allocUnsafe)return e.allocUnsafe(a);if("number"!=typeof a)throw new TypeError("size must be a number");if(a>g)throw new RangeError("size is too large");return new e(a)},c.from=function(a,c,d){if("function"==typeof e.from&&(!b.Uint8Array||Uint8Array.from!==e.from))return e.from(a,c,d);if("number"==typeof a)throw new TypeError('"value" argument must not be a number');if("string"==typeof a)return new e(a,c);if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer){var f=c;if(1===arguments.length)return new e(a);"undefined"==typeof f&&(f=0);var g=d;if("undefined"==typeof g&&(g=a.byteLength-f),f>=a.byteLength)throw new RangeError("'offset' is out of bounds");if(g>a.byteLength-f)throw new RangeError("'length' is out of bounds");return new e(a.slice(f,f+g))}if(e.isBuffer(a)){var h=new e(a.length);return a.copy(h,0,0,a.length),h}if(a){if(Array.isArray(a)||"undefined"!=typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return new e(a);if("Buffer"===a.type&&Array.isArray(a.data))return new e(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},c.allocUnsafeSlow=function(a){if("function"==typeof e.allocUnsafeSlow)return e.allocUnsafeSlow(a);if("number"!=typeof a)throw new TypeError("size must be a number");if(a>=g)throw new RangeError("size is too large");return new f(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:4}],4:[function(a,b,c){(function(b){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}function e(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a,b){if(e()<b)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=g.prototype):(null===a&&(a=new g(b)),a.length=b),a}function g(a,b,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return k(this,a)}return h(this,a,b,c)}function h(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?n(a,b,c,d):"string"==typeof b?l(a,b,c):o(a,b)}function i(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function j(a,b,c,d){return i(b),b<=0?f(a,b):void 0!==c?"string"==typeof d?f(a,b).fill(c,d):f(a,b).fill(c):f(a,b)}function k(a,b){if(i(b),a=f(a,b<0?0:0|p(b)),!g.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function l(a,b,c){if("string"==typeof c&&""!==c||(c="utf8"),!g.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|r(b,c);a=f(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function m(a,b){var c=b.length<0?0:0|p(b.length);a=f(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function n(a,b,c,d){if(b.byteLength,c<0||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),g.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=g.prototype):a=m(a,b),a}function o(a,b){if(g.isBuffer(b)){var c=0|p(b.length);return a=f(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||Y(b.length)?f(a,0):m(a,b);if("Buffer"===b.type&&_(b.data))return m(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),g.alloc(+a)}function r(a,b){if(g.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b&=255,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return 0===b&&c===a.length?Z.fromByteArray(a):Z.fromByteArray(a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(b<=aa)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function L(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return a<16?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Z.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Y(a){return a!==a}var Z=a("base64-js"),$=a("ieee754"),_=a("isarray");c.Buffer=g,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),c.kMaxLength=e(),g.poolSize=8192,g._augment=function(a){return a.__proto__=g.prototype,a},g.from=function(a,b,c){return h(null,a,b,c)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(a,b,c){return j(null,a,b,c)},g.allocUnsafe=function(a){return k(null,a)},g.allocUnsafeSlow=function(a){return k(null,a)},g.isBuffer=function(a){return!(null==a||!a._isBuffer)},g.compare=function(a,b){if(!g.isBuffer(a)||!g.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},g.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(a,b){if(!_(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},g.byteLength=r,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)t(this,b,b+1);return this},g.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},g.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},g.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):s.apply(this,arguments)},g.prototype.equals=function(a){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},g.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},g.prototype.compare=function(a,b,c,d,e){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],h=k[l];break}return f<h?-1:h<f?1:0},g.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},g.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},g.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},g.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;g.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(g.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=g.prototype;else{var e=b-a;d=new g(e,void 0);for(var f=0;f<e;++f)d[f]=this[f+a]}return d},g.prototype.readUIntLE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},g.prototype.readUIntBE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},g.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},g.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},g.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},g.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},g.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},g.prototype.readIntLE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},g.prototype.readIntBE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},g.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},g.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},g.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},g.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!0,23,4)},g.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!1,23,4)},g.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!0,52,8)},g.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!1,52,8)},g.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b|=0,c|=0,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},g.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b|=0,c|=0,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},g.prototype.writeUInt8=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,1,255,0),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},g.prototype.writeUInt16LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeUInt16BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeUInt32LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):M(this,a,b,!0),b+4},g.prototype.writeUInt32BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeInt8=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,1,127,-128),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},g.prototype.writeInt16LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeInt16BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeInt32LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):M(this,a,b,!0),b+4},g.prototype.writeInt32BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},g.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},g.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},g.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},g.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3||!g.TYPED_ARRAY_SUPPORT)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},g.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{var h=g.isBuffer(a)?a:T(new g(a,d).toString()),i=h.length;for(f=0;f<c-b;++f)this[f+b]=h[f%i]}return this};var ba=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:28,isarray:32}],5:[function(a,b,c){a("../modules/web.immediate"),b.exports=a("../modules/_core").setImmediate},{"../modules/_core":9,"../modules/web.immediate":25}],6:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],7:[function(a,b,c){var d=a("./_is-object");b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{"./_is-object":20}],8:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],9:[function(a,b,c){var d=b.exports={version:"2.3.0"};"number"==typeof __e&&(__e=d)},{}],10:[function(a,b,c){var d=a("./_a-function");b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./_a-function":6}],11:[function(a,b,c){b.exports=!a("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":14}],12:[function(a,b,c){var d=a("./_is-object"),e=a("./_global").document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{"./_global":15,"./_is-object":20}],13:[function(a,b,c){var d=a("./_global"),e=a("./_core"),f=a("./_ctx"),g=a("./_hide"),h="prototype",i=function(a,b,c){var j,k,l,m=a&i.F,n=a&i.G,o=a&i.S,p=a&i.P,q=a&i.B,r=a&i.W,s=n?e:e[b]||(e[b]={}),t=s[h],u=n?d:o?d[b]:(d[b]||{})[h];n&&(c=b);for(j in c)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:c[j],s[j]=n&&"function"!=typeof u[j]?c[j]:q&&k?f(l,d):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[h]=a[h],b}(l):p&&"function"==typeof l?f(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&i.R&&t&&!t[j]&&g(t,j,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,b.exports=i},{"./_core":9,"./_ctx":10,"./_global":15,"./_hide":16}],14:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(a){return!0}}},{}],15:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],16:[function(a,b,c){var d=a("./_object-dp"),e=a("./_property-desc");b.exports=a("./_descriptors")?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{"./_descriptors":11,"./_object-dp":21,"./_property-desc":22}],17:[function(a,b,c){b.exports=a("./_global").document&&document.documentElement},{"./_global":15}],18:[function(a,b,c){b.exports=!a("./_descriptors")&&!a("./_fails")(function(){return 7!=Object.defineProperty(a("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":11,"./_dom-create":12,"./_fails":14}],19:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],20:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],21:[function(a,b,c){var d=a("./_an-object"),e=a("./_ie8-dom-define"),f=a("./_to-primitive"),g=Object.defineProperty;c.f=a("./_descriptors")?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{"./_an-object":7,"./_descriptors":11,"./_ie8-dom-define":18,"./_to-primitive":24}],22:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],23:[function(a,b,c){var d,e,f,g=a("./_ctx"),h=a("./_invoke"),i=a("./_html"),j=a("./_dom-create"),k=a("./_global"),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a("./_cof")(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{"./_cof":8,"./_ctx":10,"./_dom-create":12,"./_global":15,"./_html":17,"./_invoke":19}],24:[function(a,b,c){var d=a("./_is-object");b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":20}],25:[function(a,b,c){var d=a("./_export"),e=a("./_task");d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},{"./_export":13,"./_task":23}],26:[function(a,b,c){(function(a){function b(a){return Array.isArray?Array.isArray(a):"[object Array]"===q(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return"[object RegExp]"===q(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return"[object Date]"===q(a)}function n(a){return"[object Error]"===q(a)||a instanceof Error}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=a.isBuffer}).call(this,{isBuffer:a("../../is-buffer/index.js")})},{"../../is-buffer/index.js":31}],27:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,
g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],28:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],29:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],31:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],32:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],33:[function(a,b,c){"use strict";function d(){try{return new window.XMLHttpRequest}catch(a){}}function e(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}var f={};f._getBinaryFromXHR=function(a){return a.response||a.responseText};var g=window.ActiveXObject?function(){return d()||e()}:d;f.getBinaryContent=function(a,b){try{var c=g();c.open("GET",a,!0),"responseType"in c&&(c.responseType="arraybuffer"),c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(d){var e,g;if(4===c.readyState)if(200===c.status||0===c.status){e=null,g=null;try{e=f._getBinaryFromXHR(c)}catch(a){g=new Error(a)}b(g,e)}else b(new Error("Ajax error for "+a+" : "+this.status+" "+this.statusText),null)},c.send()}catch(a){b(new Error(a),null)}},b.exports=f},{}],34:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,g,h,i,j,k=[],l=0,m=a.length,n=m,o="string"!==d.getTypeOf(a);l<a.length;)n=m-l,o?(b=a[l++],c=l<m?a[l++]:0,e=l<m?a[l++]:0):(b=a.charCodeAt(l++),c=l<m?a.charCodeAt(l++):0,e=l<m?a.charCodeAt(l++):0),g=b>>2,h=(3&b)<<4|c>>4,i=n>1?(15&c)<<2|e>>6:64,j=n>2?63&e:64,k.push(f.charAt(g)+f.charAt(h)+f.charAt(i)+f.charAt(j));return k.join("")},c.decode=function(a){var b,c,d,g,h,i,j,k=0,l=0,m="data:";if(a.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var n=3*a.length/4;if(a.charAt(a.length-1)===f.charAt(64)&&n--,a.charAt(a.length-2)===f.charAt(64)&&n--,n%1!==0)throw new Error("Invalid base64 input, bad content length.");var o;for(o=e.uint8array?new Uint8Array(0|n):new Array(0|n);k<a.length;)g=f.indexOf(a.charAt(k++)),h=f.indexOf(a.charAt(k++)),i=f.indexOf(a.charAt(k++)),j=f.indexOf(a.charAt(k++)),b=g<<2|h>>4,c=(15&h)<<4|i>>2,d=(3&i)<<6|j,o[l++]=b,64!==i&&(o[l++]=c),64!==j&&(o[l++]=d);return o}},{"./support":63,"./utils":65}],35:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}var e=a("./external"),f=a("./stream/DataWorker"),g=a("./stream/DataLengthProbe"),h=a("./stream/Crc32Probe"),g=a("./stream/DataLengthProbe");d.prototype={getContentWorker:function(){var a=new f(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),b=this;return a.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new f(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(a,b,c){return a.pipe(new h).pipe(new g("uncompressedSize")).pipe(b.compressWorker(c)).pipe(new g("compressedSize")).withStreamInfo("compression",b)},b.exports=d},{"./external":39,"./stream/Crc32Probe":58,"./stream/DataLengthProbe":59,"./stream/DataWorker":60}],36:[function(a,b,c){"use strict";var d=a("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(a){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},c.DEFLATE=a("./flate")},{"./flate":40,"./stream/GenericWorker":61}],37:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b[g])];return a^-1}function f(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b.charCodeAt(g))];return a^-1}var g=a("./utils"),h=d();b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var c="string"!==g.getTypeOf(a);return c?e(0|b,a,a.length,0):f(0|b,a,a.length,0)}},{"./utils":65}],38:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],39:[function(a,b,c){"use strict";var d=null;d="undefined"!=typeof Promise?Promise:a("lie"),b.exports={Promise:d}},{lie:85}],40:[function(a,b,c){"use strict";function d(a,b){h.call(this,"FlateWorker/"+a),this._pako=new f[a]({raw:!0,level:b.level||-1}),this.meta={};var c=this;this._pako.onData=function(a){c.push({data:a,meta:c.meta})}}var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=a("pako"),g=a("./utils"),h=a("./stream/GenericWorker"),i=e?"uint8array":"array";c.magic="\b\0",g.inherits(d,h),d.prototype.processChunk=function(a){this.meta=a.meta,this._pako.push(g.transformTo(i,a.data),!1)},d.prototype.flush=function(){h.prototype.flush.call(this),this._pako.push([],!0)},d.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},c.compressWorker=function(a){return new d("Deflate",a)},c.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":61,"./utils":65,pako:69}],41:[function(a,b,c){"use strict";function d(a,b,c,d){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=c,this.encodeFileName=d,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var e=a("../utils"),f=a("../stream/GenericWorker"),g=a("../utf8"),h=a("../crc32"),i=a("../signature"),j=function(a,b){var c,d="";for(c=0;c<b;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},k=function(a,b){var c=a;return a||(c=b?16893:33204),(65535&c)<<16},l=function(a,b){return 63&(a||0)},m=function(a,b,c,d,f,m){var n,o,p=a.file,q=a.compression,r=m!==g.utf8encode,s=e.transformTo("string",m(p.name)),t=e.transformTo("string",g.utf8encode(p.name)),u=p.comment,v=e.transformTo("string",m(u)),w=e.transformTo("string",g.utf8encode(u)),x=t.length!==p.name.length,y=w.length!==u.length,z="",A="",B="",C=p.dir,D=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};b&&!c||(E.crc32=a.crc32,E.compressedSize=a.compressedSize,E.uncompressedSize=a.uncompressedSize);var F=0;b&&(F|=8),r||!x&&!y||(F|=2048);var G=0,H=0;C&&(G|=16),"UNIX"===f?(H=798,G|=k(p.unixPermissions,C)):(H=20,G|=l(p.dosPermissions,C)),n=D.getUTCHours(),n<<=6,n|=D.getUTCMinutes(),n<<=5,n|=D.getUTCSeconds()/2,o=D.getUTCFullYear()-1980,o<<=4,o|=D.getUTCMonth()+1,o<<=5,o|=D.getUTCDate(),x&&(A=j(1,1)+j(h(s),4)+t,z+="up"+j(A.length,2)+A),y&&(B=j(1,1)+j(h(v),4)+w,z+="uc"+j(B.length,2)+B);var I="";I+="\n\0",I+=j(F,2),I+=q.magic,I+=j(n,2),I+=j(o,2),I+=j(E.crc32,4),I+=j(E.compressedSize,4),I+=j(E.uncompressedSize,4),I+=j(s.length,2),I+=j(z.length,2);var J=i.LOCAL_FILE_HEADER+I+s+z,K=i.CENTRAL_FILE_HEADER+j(H,2)+I+j(v.length,2)+"\0\0\0\0"+j(G,4)+j(d,4)+s+z+v;return{fileRecord:J,dirRecord:K}},n=function(a,b,c,d,f){var g="",h=e.transformTo("string",f(d));return g=i.CENTRAL_DIRECTORY_END+"\0\0\0\0"+j(a,2)+j(a,2)+j(b,4)+j(c,4)+j(h.length,2)+h},o=function(a){var b="";return b=i.DATA_DESCRIPTOR+j(a.crc32,4)+j(a.compressedSize,4)+j(a.uncompressedSize,4)};e.inherits(d,f),d.prototype.push=function(a){var b=a.meta.percent||0,c=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,f.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:c?(b+100*(c-d-1))/c:100}}))},d.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;if(b){var c=m(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=m(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),b)this.push({data:o(a),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var a=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var c=this.bytesWritten-a,d=n(this.dirRecords.length,c,a,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),a.on("error",function(a){b.error(a)}),this},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(a){var b=this._sources;if(!f.prototype.error.call(this,a))return!1;for(var c=0;c<b.length;c++)try{b[c].error(a)}catch(a){}return!0},d.prototype.lock=function(){f.prototype.lock.call(this);for(var a=this._sources,b=0;b<a.length;b++)a[b].lock()},b.exports=d},{"../crc32":37,"../signature":56,"../stream/GenericWorker":61,"../utf8":64,"../utils":65}],42:[function(a,b,c){"use strict";var d=a("../compressions"),e=a("./ZipFileWorker"),f=function(a,b){var c=a||b,e=d[c];if(!e)throw new Error(c+" is not a valid compression method !");return e};c.generateWorker=function(a,b,c){var d=new e(b.streamFiles,c,b.platform,b.encodeFileName),g=0;try{a.forEach(function(a,c){g++;var e=f(c.options.compression,b.compression),h=c.options.compressionOptions||b.compressionOptions||{},i=c.dir,j=c.date;c._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(a){d.error(a)}return d}},{"../compressions":36,"./ZipFileWorker":41}],43:[function(a,b,c){"use strict";function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var a=new d;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a}}d.prototype=a("./object"),d.prototype.loadAsync=a("./load"),d.support=a("./support"),d.defaults=a("./defaults"),d.version="3.1.3",d.loadAsync=function(a,b){return(new d).loadAsync(a,b)},d.external=a("./external"),b.exports=d},{"./defaults":38,"./external":39,"./load":44,"./object":48,"./support":63}],44:[function(a,b,c){"use strict";function d(a){return new f.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new i);d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}var e=a("./utils"),f=a("./external"),g=a("./utf8"),e=a("./utils"),h=a("./zipEntries"),i=a("./stream/Crc32Probe"),j=a("./nodejsUtils");b.exports=function(a,b){var c=this;return b=e.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),j.isNode&&j.isStream(a)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",a,!0,b.optimizedBinaryString,b.base64).then(function(a){var c=new h(b);return c.load(a),c}).then(function(a){var c=[f.Promise.resolve(a)],e=a.files;if(b.checkCRC32)for(var g=0;g<e.length;g++)c.push(d(e[g]));return f.Promise.all(c)}).then(function(a){for(var d=a.shift(),e=d.files,f=0;f<e.length;f++){var g=e[f];c.file(g.fileNameStr,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:b.createFolders})}return d.zipComment.length&&(c.comment=d.zipComment),c})}},{"./external":39,"./nodejsUtils":47,"./stream/Crc32Probe":58,"./utf8":64,"./utils":65,"./zipEntries":66}],45:[function(a,b,c){"use strict";function d(a,b){f.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(b)}var e=a("../utils"),f=a("../stream/GenericWorker");e.inherits(d,f),d.prototype._bindStream=function(a){var b=this;this._stream=a,a.pause(),a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},d.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=d},{"../stream/GenericWorker":61,"../utils":65}],46:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,b),this._helper=a;var d=this;a.on("data",function(a,b){d.push(a)||d._helper.pause(),c&&c(b)}).on("error",function(a){d.emit("error",a)}).on("end",function(){d.push(null)})}var e=a("readable-stream").Readable,f=a("util");f.inherits(d,e),d.prototype._read=function(){this._helper.resume()},b.exports=d},{"readable-stream":49,util:105}],47:[function(a,b,c){(function(a){"use strict";b.exports={isNode:"undefined"!=typeof a,newBuffer:function(b,c){return new a(b,c)},isBuffer:function(b){return a.isBuffer(b)},isStream:function(a){return a&&"function"==typeof a.on&&"function"==typeof a.pause&&"function"==typeof a.resume}}}).call(this,a("buffer").Buffer)},{buffer:4}],48:[function(a,b,c){"use strict";function d(a){return"[object RegExp]"===Object.prototype.toString.call(a)}var e=a("./utf8"),f=a("./utils"),g=a("./stream/GenericWorker"),h=a("./stream/StreamHelper"),i=a("./defaults"),j=a("./compressedObject"),k=a("./zipObject"),l=a("./generate"),m=a("./nodejsUtils"),n=a("./nodejs/NodejsStreamInputAdapter"),o=function(a,b,c){var d,e=f.getTypeOf(b),h=f.extend(c||{},i);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),"string"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(a=q(a)),h.createFolders&&(d=p(a))&&r.call(this,d,!0);var l="string"===e&&h.binary===!1&&h.base64===!1;c&&"undefined"!=typeof c.binary||(h.binary=!l);var o=b instanceof j&&0===b.uncompressedSize;(o||h.dir||!b||0===b.length)&&(h.base64=!1,h.binary=!0,b="",h.compression="STORE",e="string");var s=null;s=b instanceof j||b instanceof g?b:m.isNode&&m.isStream(b)?new n(a,b):f.prepareContent(a,b,h.binary,h.optimizedBinaryString,h.base64);var t=new k(a,s,h);this.files[a]=t},p=function(a){"/"===a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},q=function(a){return"/"!==a.slice(-1)&&(a+="/"),a},r=function(a,b){return b="undefined"!=typeof b?b:i.createFolders,a=q(a),this.files[a]||o.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},s={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],c=b.slice(this.root.length,b.length),c&&b.slice(0,this.root.length)===this.root&&a(c,d))},filter:function(a){var b=[];return this.forEach(function(c,d){a(c,d)&&b.push(d)}),b},file:function(a,b,c){if(1===arguments.length){if(d(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}var f=this.files[this.root+a];return f&&!f.dir?f:null}return a=this.root+a,o.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=r.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!==a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(a){var b,c={};try{if(c=f.extend(a||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode}),c.type=c.type.toLowerCase(),c.compression=c.compression.toUpperCase(),"binarystring"===c.type&&(c.type="string"),!c.type)throw new Error("No output type specified.");f.checkSupport(c.type),"darwin"!==c.platform&&"freebsd"!==c.platform&&"linux"!==c.platform&&"sunos"!==c.platform||(c.platform="UNIX"),"win32"===c.platform&&(c.platform="DOS");var d=c.comment||this.comment||"";b=l.generateWorker(this,c,d)}catch(a){b=new g("error"),b.error(a)}return new h(b,c.type||"string",c.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){return a=a||{},a.type||(a.type="nodebuffer"),this.generateInternalStream(a).toNodejsStream(b)}};b.exports=s},{"./compressedObject":35,"./defaults":38,"./generate":42,"./nodejs/NodejsStreamInputAdapter":45,"./nodejsUtils":47,"./stream/GenericWorker":61,"./stream/StreamHelper":62,"./utf8":64,"./utils":65,"./zipObject":68}],49:[function(a,b,c){b.exports=a("stream")},{stream:100}],50:[function(a,b,c){"use strict";function d(a){e.call(this,a);for(var b=0;b<this.data.length;b++)a[b]=255&a[b]}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data[this.zero+a]},d.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f-this.zero;return-1},d.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.readData(4);return b===f[0]&&c===f[1]&&d===f[2]&&e===f[3]},d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":65,"./DataReader":51}],51:[function(a,b,c){"use strict";function d(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}var e=a("../utils");d.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return e.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},b.exports=d},{"../utils":65}],52:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./Uint8ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":65,"./Uint8ArrayReader":54}],53:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},d.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},d.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b},d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":65,"./DataReader":51}],54:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":65,"./ArrayReader":50}],55:[function(a,b,c){"use strict";var d=a("../utils"),e=a("../support"),f=a("./ArrayReader"),g=a("./StringReader"),h=a("./NodeBufferReader"),i=a("./Uint8ArrayReader");b.exports=function(a){var b=d.getTypeOf(a);return d.checkSupport(b),"string"!==b||e.uint8array?"nodebuffer"===b?new h(a):e.uint8array?new i(d.transformTo("uint8array",a)):new f(d.transformTo("array",a)):new g(a)}},{"../support":63,"../utils":65,"./ArrayReader":50,"./NodeBufferReader":52,"./StringReader":53,"./Uint8ArrayReader":54}],56:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],57:[function(a,b,c){"use strict";function d(a){e.call(this,"ConvertWorker to "+a),this.destType=a}var e=a("./GenericWorker"),f=a("../utils");f.inherits(d,e),d.prototype.processChunk=function(a){this.push({data:f.transformTo(this.destType,a.data),meta:a.meta})},b.exports=d},{"../utils":65,"./GenericWorker":61}],58:[function(a,b,c){"use strict";function d(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var e=a("./GenericWorker"),f=a("../crc32"),g=a("../utils");g.inherits(d,e),d.prototype.processChunk=function(a){this.streamInfo.crc32=f(a.data,this.streamInfo.crc32||0),this.push(a)},b.exports=d},{"../crc32":37,"../utils":65,"./GenericWorker":61}],59:[function(a,b,c){"use strict";function d(a){f.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}var e=a("../utils"),f=a("./GenericWorker");e.inherits(d,f),d.prototype.processChunk=function(a){if(a){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+a.data.length}f.prototype.processChunk.call(this,a)},b.exports=d},{"../utils":65,"./GenericWorker":61}],60:[function(a,b,c){"use strict";function d(a){f.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(a){b.dataIsReady=!0,b.data=a,b.max=a&&a.length||0,b.type=e.getTypeOf(a),b.isPaused||b._tickAndRepeat()},function(a){b.error(a)})}var e=a("../utils"),f=a("./GenericWorker"),g=16384;e.inherits(d,f),d.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=g,b=null,c=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();switch(this.type){case"string":b=this.data.substring(this.index,c);break;case"uint8array":b=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":b=this.data.slice(this.index,c)}return this.index=c,this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=d},{"../utils":65,"./GenericWorker":61}],61:[function(a,b,c){"use strict";function d(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,b){return this._listeners[a].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.end()}),a.on("error",function(a){b.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){return this.extraStreamInfo[a]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},b.exports=d},{}],62:[function(a,b,c){(function(c){"use strict";function d(a,b,c,d){var f=null;switch(a){case"blob":return h.newBlob(c,d);case"base64":return f=e(b,c),k.encode(f);default:return f=e(b,c),h.transformTo(a,f)}}function e(a,b){var d,e=0,f=null,g=0;for(d=0;d<b.length;d++)g+=b[d].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(f=new Uint8Array(g),d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].length;return f;case"nodebuffer":return c.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function f(a,b){return new m.Promise(function(c,e){var f=[],g=a._internalType,h=a._outputType,i=a._mimeType;a.on("data",function(a,c){f.push(a),b&&b(c)}).on("error",function(a){f=[],e(a)}).on("end",function(){try{var a=d(h,g,f,i);c(a)}catch(a){e(a)}f=[]}).resume()})}function g(a,b,c){var d=b;switch(b){case"blob":d="arraybuffer";break;case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=b,this._mimeType=c,h.checkSupport(d),this._worker=a.pipe(new i(d)),a.lock()}catch(a){this._worker=new j("error"),this._worker.error(a)}}var h=a("../utils"),i=a("./ConvertWorker"),j=a("./GenericWorker"),k=a("../base64"),l=a("../support"),m=a("../external"),n=null;if(l.nodestream)try{n=a("../nodejs/NodejsStreamOutputAdapter");
}catch(a){}g.prototype={accumulate:function(a){return f(this,a)},on:function(a,b){var c=this;return"data"===a?this._worker.on(a,function(a){b.call(c,a.data,a.meta)}):this._worker.on(a,function(){h.delay(b,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(a){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new n(this,{objectMode:"nodebuffer"!==this._outputType},a)}},b.exports=g}).call(this,a("buffer").Buffer)},{"../base64":34,"../external":39,"../nodejs/NodejsStreamOutputAdapter":46,"../support":63,"../utils":65,"./ConvertWorker":57,"./GenericWorker":61,buffer:4}],63:[function(a,b,c){(function(b){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof b,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var d=new ArrayBuffer(0);try{c.blob=0===new Blob([d],{type:"application/zip"}).size}catch(a){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;f.append(d),c.blob=0===f.getBlob("application/zip").size}catch(a){c.blob=!1}}}try{c.nodestream=!!a("readable-stream").Readable}catch(a){c.nodestream=!1}}).call(this,a("buffer").Buffer)},{buffer:4,"readable-stream":49}],64:[function(a,b,c){"use strict";function d(){i.call(this,"utf-8 decode"),this.leftOver=null}function e(){i.call(this,"utf-8 encode")}for(var f=a("./utils"),g=a("./support"),h=a("./nodejsUtils"),i=a("./stream/GenericWorker"),j=new Array(256),k=0;k<256;k++)j[k]=k>=252?6:k>=248?5:k>=240?4:k>=224?3:k>=192?2:1;j[254]=j[254]=1;var l=function(a){var b,c,d,e,f,h=a.length,i=0;for(e=0;e<h;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=g.uint8array?new Uint8Array(i):new Array(i),f=0,e=0;f<i;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),c<128?b[f++]=c:c<2048?(b[f++]=192|c>>>6,b[f++]=128|63&c):c<65536?(b[f++]=224|c>>>12,b[f++]=128|c>>>6&63,b[f++]=128|63&c):(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63,b[f++]=128|c>>>6&63,b[f++]=128|63&c);return b},m=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+j[a[c]]>b?c:b},n=function(a){var b,c,d,e,g=a.length,h=new Array(2*g);for(c=0,b=0;b<g;)if(d=a[b++],d<128)h[c++]=d;else if(e=j[d],e>4)h[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;e>1&&b<g;)d=d<<6|63&a[b++],e--;e>1?h[c++]=65533:d<65536?h[c++]=d:(d-=65536,h[c++]=55296|d>>10&1023,h[c++]=56320|1023&d)}return h.length!==c&&(h.subarray?h=h.subarray(0,c):h.length=c),f.applyFromCharCode(h)};c.utf8encode=function(a){return g.nodebuffer?h.newBuffer(a,"utf-8"):l(a)},c.utf8decode=function(a){return g.nodebuffer?f.transformTo("nodebuffer",a).toString("utf-8"):(a=f.transformTo(g.uint8array?"uint8array":"array",a),n(a))},f.inherits(d,i),d.prototype.processChunk=function(a){var b=f.transformTo(g.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var d=b;b=new Uint8Array(d.length+this.leftOver.length),b.set(this.leftOver,0),b.set(d,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var e=m(b),h=b;e!==b.length&&(g.uint8array?(h=b.subarray(0,e),this.leftOver=b.subarray(e,b.length)):(h=b.slice(0,e),this.leftOver=b.slice(e,b.length))),this.push({data:c.utf8decode(h),meta:a.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=d,f.inherits(e,i),e.prototype.processChunk=function(a){this.push({data:c.utf8encode(a.data),meta:a.meta})},c.Utf8EncodeWorker=e},{"./nodejsUtils":47,"./stream/GenericWorker":61,"./support":63,"./utils":65}],65:[function(a,b,c){"use strict";function d(a){var b=null;return b=i.uint8array?new Uint8Array(a.length):new Array(a.length),f(a,b)}function e(a){return a}function f(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function g(a){var b=65536,d=c.getTypeOf(a),e=!0;if("uint8array"===d?e=n.applyCanBeUsed.uint8array:"nodebuffer"===d&&(e=n.applyCanBeUsed.nodebuffer),e)for(;b>1;)try{return n.stringifyByChunk(a,d,b)}catch(a){b=Math.floor(b/2)}return n.stringifyByChar(a)}function h(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var i=a("./support"),j=a("./base64"),k=a("./nodejsUtils"),l=a("core-js/library/fn/set-immediate"),m=a("./external");c.newBlob=function(a,b){c.checkSupport("blob");try{return new Blob(a,{type:b})}catch(c){try{for(var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,e=new d,f=0;f<a.length;f++)e.append(a[f]);return e.getBlob(b)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);for(;e<f;)"array"===b||"nodebuffer"===b?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(a){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,k.newBuffer(1)).length}catch(a){return!1}}()}};c.applyFromCharCode=g;var o={};o.string={string:e,array:function(a){return f(a,new Array(a.length))},arraybuffer:function(a){return o.string.uint8array(a).buffer},uint8array:function(a){return f(a,new Uint8Array(a.length))},nodebuffer:function(a){return f(a,k.newBuffer(a.length))}},o.array={string:g,array:e,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(a)}},o.arraybuffer={string:function(a){return g(new Uint8Array(a))},array:function(a){return h(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:e,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(new Uint8Array(a))}},o.uint8array={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){var b=new Uint8Array(a.length);return a.length&&b.set(a,0),b.buffer},uint8array:e,nodebuffer:function(a){return k.newBuffer(a)}},o.nodebuffer={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return o.nodebuffer.uint8array(a).buffer},uint8array:function(a){return h(a,new Uint8Array(a.length))},nodebuffer:e},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=o[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":i.nodebuffer&&k.isBuffer(a)?"nodebuffer":i.uint8array&&a instanceof Uint8Array?"uint8array":i.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=i[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(b<16?"0":"")+b.toString(16).toUpperCase();return d},c.delay=function(a,b,c){l(function(){a.apply(c||null,b||[])})},c.inherits=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},c.extend=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},c.prepareContent=function(a,b,e,f,g){var h=m.Promise.resolve(b).then(function(a){var b=i.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1);return b&&"undefined"!=typeof FileReader?new m.Promise(function(b,c){var d=new FileReader;d.onload=function(a){b(a.target.result)},d.onerror=function(a){c(a.target.error)},d.readAsArrayBuffer(a)}):a});return h.then(function(b){var h=c.getTypeOf(b);return h?("arraybuffer"===h?b=c.transformTo("uint8array",b):"string"===h&&(g?b=j.decode(b):e&&f!==!0&&(b=d(b))),b):m.Promise.reject(new Error("The data of '"+a+"' is in an unsupported format !"))})}},{"./base64":34,"./external":39,"./nodejsUtils":47,"./support":63,"core-js/library/fn/set-immediate":5}],66:[function(a,b,c){"use strict";function d(a){this.files=[],this.loadOptions=a}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./signature"),h=a("./zipEntry"),i=(a("./utf8"),a("./support"));d.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+f.pretty(b)+", expected "+f.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);var d=this.reader.readString(4),e=d===b;return this.reader.setIndex(c),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),b=i.uint8array?"uint8array":"array",c=f.transformTo(b,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;e<d;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readData(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)a=new h({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(a<0){var b=!this.isSignature(0,g.LOCAL_FILE_HEADER);throw b?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(a);var c=a;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),a<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var e=c-d;if(e>0)this.isSignature(c,g.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(a){this.reader=e(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=d},{"./reader/readerFor":55,"./signature":56,"./support":63,"./utf8":64,"./utils":65,"./zipEntry":67}],67:[function(a,b,c){"use strict";function d(a,b){this.options=a,this.loadOptions=b}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./compressedObject"),h=a("./crc32"),i=a("./utf8"),j=a("./compressions"),k=a("./support"),l=0,m=3,n=function(a){for(var b in j)if(j.hasOwnProperty(b)&&j[b].magic===a)return j[b];return null};d.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(b=n(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,b,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var b=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a===l&&(this.dosPermissions=63&this.externalFileAttributes),a===m&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(a){if(this.extraFields[1]){var b=e(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index<e;)b=a.readInt(2),c=a.readInt(2),d=a.readData(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){var a=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(null!==b)this.fileNameStr=b;else{var c=f.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var d=this.findExtraFieldUnicodeComment();if(null!==d)this.fileCommentStr=d;else{var e=f.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(e)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileName)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileComment)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null}},b.exports=d},{"./compressedObject":35,"./compressions":36,"./crc32":37,"./reader/readerFor":55,"./support":63,"./utf8":64,"./utils":65}],68:[function(a,b,c){"use strict";var d=a("./stream/StreamHelper"),e=a("./stream/DataWorker"),f=a("./utf8"),g=a("./compressedObject"),h=a("./stream/GenericWorker"),i=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};i.prototype={internalStream:function(a){var b=a.toLowerCase(),c="string"===b||"text"===b;"binarystring"!==b&&"text"!==b||(b="string");var e=this._decompressWorker(),g=!this._dataBinary;return g&&!c&&(e=e.pipe(new f.Utf8EncodeWorker)),!g&&c&&(e=e.pipe(new f.Utf8DecodeWorker)),new d(e,b,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof g&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new f.Utf8EncodeWorker)),g.createWorkerFrom(c,a,b)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof h?this._data:new e(this._data)}};for(var j=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<j.length;l++)i.prototype[j[l]]=k;b.exports=i},{"./compressedObject":35,"./stream/DataWorker":60,"./stream/GenericWorker":61,"./stream/StreamHelper":62,"./utf8":64}],69:[function(a,b,c){"use strict";var d=a("./lib/utils/common").assign,e=a("./lib/deflate"),f=a("./lib/inflate"),g=a("./lib/zlib/constants"),h={};d(h,e,f,g),b.exports=h},{"./lib/deflate":70,"./lib/inflate":71,"./lib/utils/common":72,"./lib/zlib/constants":75}],70:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=i.assign({level:s,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=h.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==p)throw new Error(k[c]);if(b.header&&h.deflateSetHeader(this.strm,b.header),b.dictionary){var e;if(e="string"==typeof b.dictionary?j.string2buf(b.dictionary):"[object ArrayBuffer]"===m.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,c=h.deflateSetDictionary(this.strm,e),c!==p)throw new Error(k[c]);this._dict_set=!0}}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg||k[c.err];return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}function g(a,b){return b=b||{},b.gzip=!0,e(a,b)}var h=a("./zlib/deflate"),i=a("./utils/common"),j=a("./utils/strings"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=Object.prototype.toString,n=0,o=4,p=0,q=1,r=2,s=-1,t=0,u=8;d.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?o:n,"string"==typeof a?e.input=j.string2buf(a):"[object ArrayBuffer]"===m.call(a)?e.input=new Uint8Array(a):e.input=a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new i.Buf8(f),e.next_out=0,e.avail_out=f),c=h.deflate(e,d),c!==q&&c!==p)return this.onEnd(c),this.ended=!0,!1;0!==e.avail_out&&(0!==e.avail_in||d!==o&&d!==r)||("string"===this.options.to?this.onData(j.buf2binstring(i.shrinkBuf(e.output,e.next_out))):this.onData(i.shrinkBuf(e.output,e.next_out)))}while((e.avail_in>0||0===e.avail_out)&&c!==q);return d===o?(c=h.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p):d!==r||(this.onEnd(p),e.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=d,c.deflate=e,c.deflateRaw=f,c.gzip=g},{"./utils/common":72,"./utils/strings":73,"./zlib/deflate":77,"./zlib/messages":82,"./zlib/zstream":84}],71:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg||k[c.err];return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?j.Z_FINISH:j.Z_NO_FLUSH,"string"==typeof a?m.input=i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&q===!0&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0!==m.avail_out&&c!==j.Z_STREAM_END&&(0!==m.avail_in||d!==j.Z_FINISH&&d!==j.Z_SYNC_FLUSH)||("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d!==j.Z_SYNC_FLUSH||(this.onEnd(j.Z_OK),m.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":72,"./utils/strings":73,"./zlib/constants":75,"./zlib/gzheader":78,"./zlib/inflate":80,"./zlib/messages":82,"./zlib/zstream":84}],72:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;b<c;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;b<c;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],73:[function(a,b,c){"use strict";function d(a,b){if(b<65537&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(a){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){g=!1}for(var h=new e.Buf8(256),i=0;i<256;i++)h[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;h[254]=h[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;f<h;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=new e.Buf8(i),g=0,f=0;g<i;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),c<128?b[g++]=c:c<2048?(b[g++]=192|c>>>6,b[g++]=128|63&c):c<65536?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,i=b||a.length,j=new Array(2*i);for(e=0,c=0;c<i;)if(f=a[c++],f<128)j[e++]=f;else if(g=h[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&c<i;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:f<65536?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+h[a[c]]>b?c:b}},{"./common":72}],74:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=d},{}],75:[function(a,b,c){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],76:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=f,g=d+c;a^=-1;for(var h=d;h<g;h++)a=a>>>8^e[255&(a^b[h])];return a^-1}var f=d();b.exports=e},{}],77:[function(a,b,c){"use strict";function d(a,b){return a.msg=I[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){F._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,E.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=G(a.adler,b,e,c):2===a.state.wrap&&(a.adler=H(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-la?a.strstart-(a.w_size-la):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ka,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&f<m);if(d=ka-(m-f),f=m-ka,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-la)){E.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ja)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ja-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ja)););}while(a.lookahead<la&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===J)return ua;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return ua;if(a.strstart-a.block_start>=a.w_size-la&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?ua:ua}function o(a,b){for(var c,d;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c)),a.match_length>=ja)if(d=F._tr_tally(a,a.strstart-a.match_start,a.match_length-ja),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ja){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function p(a,b){for(var c,d,e;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;
if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ja-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===U||a.match_length===ja&&a.strstart-a.match_start>4096)&&(a.match_length=ja-1)),a.prev_length>=ja&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ja,d=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ja),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ja-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return ua}else if(a.match_available){if(d=F._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ua}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ka){if(m(a),a.lookahead<=ka&&b===J)return ua;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ja&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ka;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f);a.match_length=ka-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ja?(c=F._tr_tally(a,1,a.match_length-ja),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===J)return ua;break}if(a.match_length=0,c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function s(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function t(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=D[a.level].max_lazy,a.good_match=D[a.level].good_length,a.nice_match=D[a.level].nice_length,a.max_chain_length=D[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ja-1,a.match_available=0,a.ins_h=0}function u(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*ha),this.dyn_dtree=new E.Buf16(2*(2*fa+1)),this.bl_tree=new E.Buf16(2*(2*ga+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ia+1),this.heap=new E.Buf16(2*ea+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*ea+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=Z,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?na:sa,a.adler=2===b.wrap?0:1,b.last_flush=J,F._tr_init(b),O):d(a,Q)}function w(a){var b=v(a);return b===O&&t(a.state),b}function x(a,b){return a&&a.state?2!==a.state.wrap?Q:(a.state.gzhead=b,O):Q}function y(a,b,c,e,f,g){if(!a)return Q;var h=1;if(b===T&&(b=6),e<0?(h=0,e=-e):e>15&&(h=2,e-=16),f<1||f>_||c!==$||e<8||e>15||b<0||b>9||g<0||g>X)return d(a,Q);8===e&&(e=9);var i=new u;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ja-1)/ja),i.window=new E.Buf8(2*i.w_size),i.head=new E.Buf16(i.hash_size),i.prev=new E.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new E.Buf8(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,w(a)}function z(a,b){return y(a,b,$,aa,ba,Y)}function A(a,b){var c,h,k,l;if(!a||!a.state||b>N||b<0)return a?d(a,Q):Q;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ta&&b!==M)return d(a,0===a.avail_out?S:Q);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===na)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=H(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=oa):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,ya),h.status=sa);else{var m=$+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=V||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ma),m+=31-m%31,h.status=sa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===oa)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=pa)}else h.status=pa;if(h.status===pa)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=qa)}else h.status=qa;if(h.status===qa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=ra)}else h.status=ra;if(h.status===ra&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=sa)):h.status=sa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,O}else if(0===a.avail_in&&e(b)<=e(c)&&b!==M)return d(a,S);if(h.status===ta&&0!==a.avail_in)return d(a,S);if(0!==a.avail_in||0!==h.lookahead||b!==J&&h.status!==ta){var o=h.strategy===V?r(h,b):h.strategy===W?q(h,b):D[h.level].func(h,b);if(o!==wa&&o!==xa||(h.status=ta),o===ua||o===wa)return 0===a.avail_out&&(h.last_flush=-1),O;if(o===va&&(b===K?F._tr_align(h):b!==N&&(F._tr_stored_block(h,0,0,!1),b===L&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,O}return b!==M?O:h.wrap<=0?P:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?O:P)}function B(a){var b;return a&&a.state?(b=a.state.status,b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra&&b!==sa&&b!==ta?d(a,Q):(a.state=null,b===sa?d(a,R):O)):Q}function C(a,b){var c,d,e,g,h,i,j,k,l=b.length;if(!a||!a.state)return Q;if(c=a.state,g=c.wrap,2===g||1===g&&c.status!==na||c.lookahead)return Q;for(1===g&&(a.adler=G(a.adler,b,l,0)),c.wrap=0,l>=c.w_size&&(0===g&&(f(c.head),c.strstart=0,c.block_start=0,c.insert=0),k=new E.Buf8(c.w_size),E.arraySet(k,b,l-c.w_size,c.w_size,0),b=k,l=c.w_size),h=a.avail_in,i=a.next_in,j=a.input,a.avail_in=l,a.next_in=0,a.input=b,m(c);c.lookahead>=ja;){d=c.strstart,e=c.lookahead-(ja-1);do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+ja-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=d,d++;while(--e);c.strstart=d,c.lookahead=ja-1,m(c)}return c.strstart+=c.lookahead,c.block_start=c.strstart,c.insert=c.lookahead,c.lookahead=0,c.match_length=c.prev_length=ja-1,c.match_available=0,a.next_in=i,a.input=j,a.avail_in=h,c.wrap=g,O}var D,E=a("../utils/common"),F=a("./trees"),G=a("./adler32"),H=a("./crc32"),I=a("./messages"),J=0,K=1,L=3,M=4,N=5,O=0,P=1,Q=-2,R=-3,S=-5,T=-1,U=1,V=2,W=3,X=4,Y=0,Z=2,$=8,_=9,aa=15,ba=8,ca=29,da=256,ea=da+1+ca,fa=30,ga=19,ha=2*ea+1,ia=15,ja=3,ka=258,la=ka+ja+1,ma=32,na=42,oa=69,pa=73,qa=91,ra=103,sa=113,ta=666,ua=1,va=2,wa=3,xa=4,ya=3;D=[new s(0,0,0,0,n),new s(4,4,8,4,o),new s(4,5,16,8,o),new s(4,6,32,32,o),new s(4,4,16,16,p),new s(8,16,32,32,p),new s(8,16,128,128,p),new s(8,32,128,256,p),new s(32,128,258,1024,p),new s(32,258,258,4096,p)],c.deflateInit=z,c.deflateInit2=y,c.deflateReset=w,c.deflateResetKeep=v,c.deflateSetHeader=x,c.deflate=A,c.deflateEnd=B,c.deflateSetDictionary=C,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":72,"./adler32":74,"./crc32":76,"./messages":82,"./trees":83}],78:[function(a,b,c){"use strict";function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=d},{}],79:[function(a,b,c){"use strict";var d=30,e=12;b.exports=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;c=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=c.dmax,l=c.wsize,m=c.whave,n=c.wnext,o=c.window,p=c.hold,q=c.bits,r=c.lencode,s=c.distcode,t=(1<<c.lenbits)-1,u=(1<<c.distbits)-1;a:do{q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){c.mode=e;break a}a.msg="invalid literal/length code",c.mode=d;break a}x=65535&v,w&=15,w&&(q<w&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",c.mode=d;break a}if(y=65535&v,w&=15,q<w&&(p+=B[f++]<<q,q+=8,q<w&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",c.mode=d;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&c.sane){a.msg="invalid distance too far back",c.mode=d;break a}if(z=0,A=o,0===n){if(z+=l-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(n<w){if(z+=l+n-w,w-=n,w<x){x-=w;do C[h++]=o[z++];while(--w);if(z=0,n<x){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(f<g&&h<j);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=f<g?5+(g-f):5-(f-g),a.avail_out=h<j?257+(j-h):257-(h-j),c.hold=p,c.bits=q}},{}],80:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15)),b&&(b<8||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,sa)}function k(a){if(ta){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;b<144;)a.lens[b++]=8;for(;b<256;)a.lens[b++]=9;for(;b<280;)a.lens[b++]=7;for(;b<288;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;b<32;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),ta=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;n<14;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(sa<16)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[r++];while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;n<32;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e,f=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,d=t(d,b,f,0),d!==c.check)?H:(e=l(a,b,f,f))?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=ra,ta=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":72,"./adler32":74,"./crc32":76,"./inffast":79,"./inftrees":81}],81:[function(a,b,c){"use strict";var d=a("../utils/common"),e=15,f=852,g=592,h=0,i=1,j=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,c,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new d.Buf16(e+1),Q=new d.Buf16(e+1),R=null,S=0;for(D=0;D<=e;D++)P[D]=0;for(E=0;E<o;E++)P[b[c+E]]++;for(H=C,G=e;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=e;D++)if(K<<=1,K-=P[D],K<0)return-1;if(K>0&&(a===h||1!==G))return-1;for(Q[1]=0,D=1;D<e;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<o;E++)0!==b[c+E]&&(r[Q[b[c+E]]++]=E);if(a===h?(N=R=r,y=19):a===i?(N=k,O-=257,R=l,S-=257,y=256):(N=m,R=n,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===i&&L>f||a===j&&L>g)return 1;for(;;){z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[c+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;I+J<G&&(K-=P[I+J],!(K<=0));)I++,K<<=1;if(L+=1<<I,a===i&&L>f||a===j&&L>g)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":72}],82:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],83:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function f(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function g(a){return a<256?ia[a]:ia[256+(a>>>7)]}function h(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function i(a,b,c){a.bi_valid>X-c?(a.bi_buf|=b<<a.bi_valid&65535,h(a,a.bi_buf),a.bi_buf=b>>X-a.bi_valid,a.bi_valid+=c-X):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function j(a,b,c){i(a,c[2*b],c[2*b+1])}function k(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function l(a){16===a.bi_valid?(h(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function m(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;f<=W;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;c<V;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function n(a,b,c){var d,e,f=new Array(W+1),g=0;for(d=1;d<=W;d++)f[d]=g=g+c[d-1]<<1;for(e=0;e<=b;e++){var h=a[2*e+1];0!==h&&(a[2*e]=k(f[h]++,h))}}function o(){var a,b,c,d,f,g=new Array(W+1);for(c=0,d=0;d<Q-1;d++)for(ka[d]=c,a=0;a<1<<ba[d];a++)ja[c++]=d;for(ja[c-1]=d,f=0,d=0;d<16;d++)for(la[d]=f,a=0;a<1<<ca[d];a++)ia[f++]=d;for(f>>=7;d<T;d++)for(la[d]=f<<7,a=0;a<1<<ca[d]-7;a++)ia[256+f++]=d;for(b=0;b<=W;b++)g[b]=0;for(a=0;a<=143;)ga[2*a+1]=8,a++,g[8]++;for(;a<=255;)ga[2*a+1]=9,a++,g[9]++;for(;a<=279;)ga[2*a+1]=7,a++,g[7]++;for(;a<=287;)ga[2*a+1]=8,a++,g[8]++;for(n(ga,S+1,g),a=0;a<T;a++)ha[2*a+1]=5,ha[2*a]=k(a,5);ma=new e(ga,ba,R+1,S,W),na=new e(ha,ca,0,T,W),oa=new e(new Array(0),da,0,U,Y)}function p(a){var b;for(b=0;b<S;b++)a.dyn_ltree[2*b]=0;for(b=0;b<T;b++)a.dyn_dtree[2*b]=0;for(b=0;b<U;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*Z]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function q(a){a.bi_valid>8?h(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function r(a,b,c,d){q(a),d&&(h(a,c),h(a,~c)),G.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function s(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function t(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&s(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!s(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function u(a,b,c){var d,e,f,h,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],e=a.pending_buf[a.l_buf+k],k++,0===d?j(a,e,b):(f=ja[e],j(a,f+R+1,b),h=ba[f],0!==h&&(e-=ka[f],i(a,e,h)),d--,f=g(d),j(a,f,c),h=ca[f],0!==h&&(d-=la[f],i(a,d,h)));while(k<a.last_lit);j(a,Z,b)}function v(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=V,c=0;c<i;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=j<2?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)t(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],t(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,t(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],m(a,b),n(f,j,a.bl_count)}function w(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;d<=c;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(h<j?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*$]++):h<=10?a.bl_tree[2*_]++:a.bl_tree[2*aa]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function x(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;for(0===g&&(k=138,l=3),d=0;d<=c;d++)if(e=g,g=b[2*(d+1)+1],!(++h<k&&e===g)){if(h<l){do j(a,e,a.bl_tree);while(0!==--h)}else 0!==e?(e!==f&&(j(a,e,a.bl_tree),h--),j(a,$,a.bl_tree),i(a,h-3,2)):h<=10?(j(a,_,a.bl_tree),i(a,h-3,3)):(j(a,aa,a.bl_tree),i(a,h-11,7));h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4)}}function y(a){var b;for(w(a,a.dyn_ltree,a.l_desc.max_code),w(a,a.dyn_dtree,a.d_desc.max_code),v(a,a.bl_desc),b=U-1;b>=3&&0===a.bl_tree[2*ea[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function z(a,b,c,d){var e;for(i(a,b-257,5),i(a,c-1,5),i(a,d-4,4),e=0;e<d;e++)i(a,a.bl_tree[2*ea[e]+1],3);x(a,a.dyn_ltree,b-1),x(a,a.dyn_dtree,c-1)}function A(a){var b,c=4093624447;for(b=0;b<=31;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return I;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return J;for(b=32;b<R;b++)if(0!==a.dyn_ltree[2*b])return J;return I}function B(a){pa||(o(),pa=!0),a.l_desc=new f(a.dyn_ltree,ma),a.d_desc=new f(a.dyn_dtree,na),a.bl_desc=new f(a.bl_tree,oa),a.bi_buf=0,a.bi_valid=0,p(a)}function C(a,b,c,d){i(a,(L<<1)+(d?1:0),3),r(a,b,c,!0)}function D(a){i(a,M<<1,3),j(a,Z,ga),l(a)}function E(a,b,c,d){var e,f,g=0;a.level>0?(a.strm.data_type===K&&(a.strm.data_type=A(a)),v(a,a.l_desc),v(a,a.d_desc),g=y(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,f<=e&&(e=f)):e=f=c+5,c+4<=e&&b!==-1?C(a,b,c,d):a.strategy===H||f===e?(i(a,(M<<1)+(d?1:0),3),u(a,ga,ha)):(i(a,(N<<1)+(d?1:0),3),z(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),u(a,a.dyn_ltree,a.dyn_dtree)),p(a),d&&q(a)}function F(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,
a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ja[c]+R+1)]++,a.dyn_dtree[2*g(b)]++),a.last_lit===a.lit_bufsize-1}var G=a("../utils/common"),H=4,I=0,J=1,K=2,L=0,M=1,N=2,O=3,P=258,Q=29,R=256,S=R+1+Q,T=30,U=19,V=2*S+1,W=15,X=16,Y=7,Z=256,$=16,_=17,aa=18,ba=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ca=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=512,ga=new Array(2*(S+2));d(ga);var ha=new Array(2*T);d(ha);var ia=new Array(fa);d(ia);var ja=new Array(P-O+1);d(ja);var ka=new Array(Q);d(ka);var la=new Array(T);d(la);var ma,na,oa,pa=!1;c._tr_init=B,c._tr_stored_block=C,c._tr_flush_block=E,c._tr_tally=F,c._tr_align=D},{"../utils/common":72}],84:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}],85:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{immediate:29}],86:[function(a,b,c){(function(a){"use strict";function c(b,c,d,e){if("function"!=typeof b)throw new TypeError('"callback" argument must be a function');var f,g,h=arguments.length;switch(h){case 0:case 1:return a.nextTick(b);case 2:return a.nextTick(function(){b.call(null,c)});case 3:return a.nextTick(function(){b.call(null,c,d)});case 4:return a.nextTick(function(){b.call(null,c,d,e)});default:for(f=new Array(h-1),g=0;g<f.length;)f[g++]=arguments[g];return a.nextTick(function(){b.apply(null,f)})}}!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?b.exports=c:b.exports=a.nextTick}).call(this,a("_process"))},{_process:87}],87:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],88:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":89}],89:[function(a,b,c){"use strict";function d(a){return this instanceof d?(j.call(this,a),k.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||h(f,this)}function f(a){a.end()}var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=d;var h=a("process-nextick-args"),i=a("core-util-is");i.inherits=a("inherits");var j=a("./_stream_readable"),k=a("./_stream_writable");i.inherits(d,j);for(var l=g(k.prototype),m=0;m<l.length;m++){var n=l[m];d.prototype[n]||(d.prototype[n]=k.prototype[n])}},{"./_stream_readable":91,"./_stream_writable":93,"core-util-is":26,inherits:30,"process-nextick-args":86}],90:[function(a,b,c){"use strict";function d(a){return this instanceof d?void e.call(this,a):new d(a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":92,"core-util-is":26,inherits:30}],91:[function(a,b,c){(function(c){"use strict";function d(a,b,c){return"function"==typeof a.prependListener?a.prependListener(b,c):void(a._events&&a._events[b]?F(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c))}function e(b,c){D=D||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof D&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(N||(N=a("string_decoder/").StringDecoder),this.decoder=new N(b.encoding),this.encoding=b.encoding)}function f(b){return D=D||a("./_stream_duplex"),this instanceof f?(this._readableState=new e(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),void G.call(this)):new f(b)}function g(a,b,c,d,e){var f=k(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,l(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var g=new Error("stream.push() after EOF");a.emit("error",g)}else if(b.endEmitted&&e){var i=new Error("stream.unshift() after end event");a.emit("error",i)}else{var j;!b.decoder||e||d||(c=b.decoder.write(c),j=!b.objectMode&&0===c.length),e||(b.reading=!1),j||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&m(a))),o(a,b)}else e||(b.reading=!1);return h(b)}function h(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function i(a){return a>=P?a=P:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function j(a,b){return a<=0||0===b.length&&b.ended?0:b.objectMode?1:a!==a?b.flowing&&b.length?b.buffer.head.data.length:b.length:(a>b.highWaterMark&&(b.highWaterMark=i(a)),a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0))}function k(a,b){var c=null;return I.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function l(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,m(a)}}function m(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(M("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?E(n,a):n(a))}function n(a){M("emit readable"),a.emit("readable"),u(a)}function o(a,b){b.readingMore||(b.readingMore=!0,E(p,a,b))}function p(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(M("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function q(a){return function(){var b=a._readableState;M("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&H(a,"data")&&(b.flowing=!0,u(a))}}function r(a){M("readable nexttick read 0"),a.read(0)}function s(a,b){b.resumeScheduled||(b.resumeScheduled=!0,E(t,a,b))}function t(a,b){b.reading||(M("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),u(a),b.flowing&&!b.reading&&a.read(0)}function u(a){var b=a._readableState;for(M("flow",b.flowing);b.flowing&&null!==a.read(););}function v(a,b){if(0===b.length)return null;var c;return b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear()):c=w(a,b.buffer,b.decoder),c}function w(a,b,c){var d;return a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):d=a===b.head.data.length?b.shift():c?x(a,b):y(a,b),d}function x(a,b){var c=b.head,d=1,e=c.data;for(a-=e.length;c=c.next;){var f=c.data,g=a>f.length?f.length:a;if(e+=g===f.length?f:f.slice(0,a),a-=g,0===a){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}return b.length-=d,e}function y(a,b){var c=J.allocUnsafe(a),d=b.head,e=1;for(d.data.copy(c),a-=d.data.length;d=d.next;){var f=d.data,g=a>f.length?f.length:a;if(f.copy(c,c.length-a,0,g),a-=g,0===a){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}return b.length-=e,c}function z(a){var b=a._readableState;if(b.length>0)throw new Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,E(A,b,a))}function A(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function B(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function C(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=f;var D,E=a("process-nextick-args"),F=a("isarray");f.ReadableState=e;var G,H=(a("events").EventEmitter,function(a,b){return a.listeners(b).length});!function(){try{G=a("stream")}catch(a){}finally{G||(G=a("events").EventEmitter)}}();var I=a("buffer").Buffer,J=a("buffer-shims"),K=a("core-util-is");K.inherits=a("inherits");var L=a("util"),M=void 0;M=L&&L.debuglog?L.debuglog("stream"):function(){};var N,O=a("./internal/streams/BufferList");K.inherits(f,G),f.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=J.from(a,b),b="")),g(this,c,a,b,!1)},f.prototype.unshift=function(a){var b=this._readableState;return g(this,b,a,"",!0)},f.prototype.isPaused=function(){return this._readableState.flowing===!1},f.prototype.setEncoding=function(b){return N||(N=a("string_decoder/").StringDecoder),this._readableState.decoder=new N(b),this._readableState.encoding=b,this};var P=8388608;f.prototype.read=function(a){M("read",a),a=parseInt(a,10);var b=this._readableState,c=a;if(0!==a&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return M("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?z(this):m(this),null;if(a=j(a,b),0===a&&b.ended)return 0===b.length&&z(this),null;var d=b.needReadable;M("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,M("length less than watermark",d)),b.ended||b.reading?(d=!1,M("reading or ended",d)):d&&(M("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=j(c,b)));var e;return e=a>0?v(a,b):null,null===e?(b.needReadable=!0,a=0):b.length-=a,0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&z(this)),null!==e&&this.emit("data",e),e},f.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(a,b){function e(a){M("onunpipe"),a===m&&g()}function f(){M("onend"),a.end()}function g(){M("cleanup"),a.removeListener("close",j),a.removeListener("finish",k),a.removeListener("drain",r),a.removeListener("error",i),a.removeListener("unpipe",e),m.removeListener("end",f),m.removeListener("end",g),m.removeListener("data",h),s=!0,!n.awaitDrain||a._writableState&&!a._writableState.needDrain||r()}function h(b){M("ondata"),t=!1;var c=a.write(b);!1!==c||t||((1===n.pipesCount&&n.pipes===a||n.pipesCount>1&&C(n.pipes,a)!==-1)&&!s&&(M("false write response, pause",m._readableState.awaitDrain),m._readableState.awaitDrain++,t=!0),m.pause())}function i(b){M("onerror",b),l(),a.removeListener("error",i),0===H(a,"error")&&a.emit("error",b)}function j(){a.removeListener("finish",k),l()}function k(){M("onfinish"),a.removeListener("close",j),l()}function l(){M("unpipe"),m.unpipe(a)}var m=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=a;break;case 1:n.pipes=[n.pipes,a];break;default:n.pipes.push(a)}n.pipesCount+=1,M("pipe count=%d opts=%j",n.pipesCount,b);var o=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,p=o?f:g;n.endEmitted?E(p):m.once("end",p),a.on("unpipe",e);var r=q(m);a.on("drain",r);var s=!1,t=!1;return m.on("data",h),d(a,"error",i),a.once("close",j),a.once("finish",k),a.emit("pipe",m),n.flowing||(M("pipe resume"),m.resume()),a},f.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var f=C(b.pipes,a);return f===-1?this:(b.pipes.splice(f,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},f.prototype.on=function(a,b){var c=G.prototype.on.call(this,a,b);if("data"===a)this._readableState.flowing!==!1&&this.resume();else if("readable"===a){var d=this._readableState;d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.emittedReadable=!1,d.reading?d.length&&m(this,d):E(r,this))}return c},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){var a=this._readableState;return a.flowing||(M("resume"),a.flowing=!0,s(this,a)),this},f.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(M("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(M("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return B(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){M("wrapped _read",b),c&&(c=!1,a.resume())},d},f._fromList=v}).call(this,a("_process"))},{"./_stream_duplex":89,"./internal/streams/BufferList":94,_process:87,buffer:4,"buffer-shims":3,"core-util-is":26,events:27,inherits:30,isarray:32,"process-nextick-args":86,"string_decoder/":101,util:2}],92:[function(a,b,c){"use strict";function d(a){this.afterTransform=function(b,c){return e(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a,c){g(b,a,c)}):g(b)})}function g(a,b,c){if(b)return a.emit("error",b);null!==c&&void 0!==c&&a.push(c);var d=a._writableState,e=a._transformState;if(d.length)throw new Error("Calling transform done when ws.length != 0");if(e.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":89,"core-util-is":26,inherits:30}],93:[function(a,b,c){(function(c){"use strict";function d(){}function e(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function f(b,c){x=x||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof x&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=b.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){o(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function g(b){return x=x||a("./_stream_duplex"),F.call(g,this)||this instanceof x?(this._writableState=new f(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),void B.call(this)):new g(b)}function h(a,b){var c=new Error("write after end");a.emit("error",c),y(b,c)}function i(a,b,c,d){var e=!0,f=!1;return null===c?f=new TypeError("May not write null values to stream"):D.isBuffer(c)||"string"==typeof c||void 0===c||b.objectMode||(f=new TypeError("Invalid non-string/buffer chunk")),f&&(a.emit("error",f),y(d,f),e=!1),e}function j(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=E.from(b,c)),b}function k(a,b,c,d,f){c=j(b,c,d),D.isBuffer(c)&&(d="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;if(h||(b.needDrain=!0),b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest=new e(c,d,f),i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else l(a,b,!1,g,c,d,f);return h}function l(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function m(a,b,c,d,e){--b.pendingcb,c?y(e,d):e(d),a._writableState.errorEmitted=!0,a.emit("error",d)}function n(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function o(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(n(c),b)m(a,c,d,b,e);else{var f=s(c);f||c.corked||c.bufferProcessing||!c.bufferedRequest||r(a,c),d?z(p,a,c,f,e):p(a,c,f,e)}}function p(a,b,c,d){c||q(a,b),b.pendingcb--,d(),u(a,b)}function q(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function r(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,e=new Array(d),f=b.corkedRequestsFree;f.entry=c;for(var g=0;c;)e[g]=c,c=c.next,g+=1;l(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new w(b)}else{for(;c;){var h=c.chunk,i=c.encoding,j=c.callback,k=b.objectMode?1:h.length;if(l(a,b,!1,k,h,i,j),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function s(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function t(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function u(a,b){var c=s(b);return c&&(0===b.pendingcb?(t(a,b),b.finished=!0,a.emit("finish")):t(a,b)),c}function v(a,b,c){b.ending=!0,u(a,b),c&&(b.finished?y(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function w(a){var b=this;this.next=null,this.entry=null,this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--,e(c),d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}b.exports=g;var x,y=a("process-nextick-args"),z=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:y;g.WritableState=f;var A=a("core-util-is");A.inherits=a("inherits");var B,C={deprecate:a("util-deprecate")};!function(){try{B=a("stream")}catch(a){}finally{B||(B=a("events").EventEmitter)}}();var D=a("buffer").Buffer,E=a("buffer-shims");A.inherits(g,B),f.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(f.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(a){return!!F.call(this,a)||a&&a._writableState instanceof f}})):F=function(a){return a instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(a,b,c){var e=this._writableState,f=!1;return"function"==typeof b&&(c=b,b=null),D.isBuffer(a)?b="buffer":b||(b=e.defaultEncoding),"function"!=typeof c&&(c=d),e.ended?h(this,c):i(this,e,a,c)&&(e.pendingcb++,f=k(this,e,a,b,c)),f},g.prototype.cork=function(){var a=this._writableState;a.corked++},g.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||r(this,a))},g.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);return this._writableState.defaultEncoding=a,this},g.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||v(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":89,_process:87,buffer:4,"buffer-shims":3,"core-util-is":26,events:27,inherits:30,"process-nextick-args":86,"util-deprecate":102}],94:[function(a,b,c){"use strict";function d(){this.head=null,this.tail=null,this.length=0}var e=(a("buffer").Buffer,a("buffer-shims"));b.exports=d,d.prototype.push=function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length},d.prototype.unshift=function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length},d.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},d.prototype.clear=function(){this.head=this.tail=null,this.length=0},d.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c},d.prototype.concat=function(a){if(0===this.length)return e.alloc(0);if(1===this.length)return this.head.data;for(var b=e.allocUnsafe(a>>>0),c=this.head,d=0;c;)c.data.copy(b,d),d+=c.data.length,c=c.next;return b}},{buffer:4,"buffer-shims":3}],95:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":90}],96:[function(a,b,c){(function(d){var e=function(){try{return a("stream")}catch(a){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=e||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js"),!d.browser&&"disable"===d.env.READABLE_STREAM&&e&&(b.exports=e)}).call(this,a("_process"))},{"./lib/_stream_duplex.js":89,"./lib/_stream_passthrough.js":90,"./lib/_stream_readable.js":91,"./lib/_stream_transform.js":92,"./lib/_stream_writable.js":93,_process:87}],97:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":92}],98:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":93}],99:[function(a,b,c){!function(a,d){"use strict";"function"==typeof define&&define.amd?define(d):"object"==typeof c?b.exports=d():a.SAT=d()}(this,function(){"use strict";function a(a,b){this.x=a||0,this.y=b||0}function b(b,c){this.pos=b||new a,this.r=c||0}function c(b,c){this.pos=b||new a,this.angle=0,this.offset=new a,this.setPoints(c||[])}function d(b,c,d){this.pos=b||new a,this.w=c||0,this.h=d||0}function e(){this.a=null,this.b=null,this.overlapN=new a,this.overlapV=new a,this.clear()}function f(a,b,c){for(var d=Number.MAX_VALUE,e=-Number.MAX_VALUE,f=a.length,g=0;g<f;g++){var h=a[g].dot(b);h<d&&(d=h),h>e&&(e=h)}c[0]=d,c[1]=e}function g(a,b,c,d,e,g){var h=r.pop(),i=r.pop(),j=p.pop().copy(b).sub(a),k=j.dot(e);if(f(c,e,h),f(d,e,i),i[0]+=k,i[1]+=k,h[0]>i[1]||i[0]>h[1])return p.push(j),r.push(h),r.push(i),!0;if(g){var l=0;if(h[0]<i[0])if(g.aInB=!1,h[1]<i[1])l=h[1]-i[0],g.bInA=!1;else{var m=h[1]-i[0],n=i[1]-h[0];l=m<n?m:-n}else if(g.bInA=!1,h[1]>i[1])l=h[0]-i[1],g.aInB=!1;else{var m=h[1]-i[0],n=i[1]-h[0];l=m<n?m:-n}var o=Math.abs(l);o<g.overlap&&(g.overlap=o,g.overlapN.copy(e),l<0&&g.overlapN.reverse())}return p.push(j),r.push(h),r.push(i),!1}function h(a,b){var c=a.len2(),d=b.dot(a);return d<0?u:d>c?w:v}function i(a,b){var c=p.pop().copy(a).sub(b.pos),d=b.r*b.r,e=c.len2();return p.push(c),e<=d}function j(a,b){t.pos.copy(a),s.clear();var c=n(t,b,s);return c&&(c=s.aInB),c}function k(a,b,c){var d=p.pop().copy(b.pos).sub(a.pos),e=a.r+b.r,f=e*e,g=d.len2();if(g>f)return p.push(d),!1;if(c){var h=Math.sqrt(g);c.a=a,c.b=b,c.overlap=e-h,c.overlapN.copy(d.normalize()),c.overlapV.copy(d).scale(c.overlap),c.aInB=a.r<=b.r&&h<=b.r-a.r,c.bInA=b.r<=a.r&&h<=a.r-b.r}return p.push(d),!0}function l(a,b,c){for(var d=p.pop().copy(b.pos).sub(a.pos),e=b.r,f=e*e,g=a.calcPoints,i=g.length,j=p.pop(),k=p.pop(),l=0;l<i;l++){var m=l===i-1?0:l+1,n=0===l?i-1:l-1,o=0,q=null;j.copy(a.edges[l]),k.copy(d).sub(g[l]),c&&k.len2()>f&&(c.aInB=!1);var r=h(j,k);if(r===u){j.copy(a.edges[n]);var s=p.pop().copy(d).sub(g[n]);if(r=h(j,s),r===w){var t=k.len();if(t>e)return p.push(d),p.push(j),p.push(k),p.push(s),!1;c&&(c.bInA=!1,q=k.normalize(),o=e-t)}p.push(s)}else if(r===w){if(j.copy(a.edges[m]),k.copy(d).sub(g[m]),r=h(j,k),r===u){var t=k.len();if(t>e)return p.push(d),p.push(j),p.push(k),!1;c&&(c.bInA=!1,q=k.normalize(),o=e-t)}}else{var v=j.perp().normalize(),t=k.dot(v),x=Math.abs(t);if(t>0&&x>e)return p.push(d),p.push(v),p.push(k),!1;c&&(q=v,o=e-t,(t>=0||o<2*e)&&(c.bInA=!1))}q&&c&&Math.abs(o)<Math.abs(c.overlap)&&(c.overlap=o,c.overlapN.copy(q))}return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),p.push(d),p.push(j),p.push(k),!0}function m(a,b,c){var d=l(b,a,c);if(d&&c){var e=c.a,f=c.aInB;c.overlapN.reverse(),c.overlapV.reverse(),c.a=c.b,c.b=e,c.aInB=c.bInA,c.bInA=f}return d}function n(a,b,c){for(var d=a.calcPoints,e=d.length,f=b.calcPoints,h=f.length,i=0;i<e;i++)if(g(a.pos,b.pos,d,f,a.normals[i],c))return!1;for(var i=0;i<h;i++)if(g(a.pos,b.pos,d,f,b.normals[i],c))return!1;return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),!0}var o={};o.Vector=a,o.V=a,a.prototype.copy=a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.clone=a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.perp=a.prototype.perp=function(){var a=this.x;return this.x=this.y,this.y=-a,this},a.prototype.rotate=a.prototype.rotate=function(a){var b=this.x,c=this.y;return this.x=b*Math.cos(a)-c*Math.sin(a),this.y=b*Math.sin(a)+c*Math.cos(a),this},a.prototype.reverse=a.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.normalize=a.prototype.normalize=function(){var a=this.len();return a>0&&(this.x=this.x/a,this.y=this.y/a),this},a.prototype.add=a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.sub=a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.scale=a.prototype.scale=function(a,b){return this.x*=a,this.y*=b||a,this},a.prototype.project=a.prototype.project=function(a){var b=this.dot(a)/a.len2();return this.x=b*a.x,this.y=b*a.y,this},a.prototype.projectN=a.prototype.projectN=function(a){var b=this.dot(a);return this.x=b*a.x,this.y=b*a.y,this},a.prototype.reflect=a.prototype.reflect=function(a){
var b=this.x,c=this.y;return this.project(a).scale(2),this.x-=b,this.y-=c,this},a.prototype.reflectN=a.prototype.reflectN=function(a){var b=this.x,c=this.y;return this.projectN(a).scale(2),this.x-=b,this.y-=c,this},a.prototype.dot=a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.len2=a.prototype.len2=function(){return this.dot(this)},a.prototype.len=a.prototype.len=function(){return Math.sqrt(this.len2())},o.Circle=b,b.prototype.getAABB=b.prototype.getAABB=function(){var b=this.r,c=this.pos.clone().sub(new a(b,b));return new d(c,2*b,2*b).toPolygon()},o.Polygon=c,c.prototype.setPoints=c.prototype.setPoints=function(b){var c=!this.points||this.points.length!==b.length;if(c){var d,e=this.calcPoints=[],f=this.edges=[],g=this.normals=[];for(d=0;d<b.length;d++)e.push(new a),f.push(new a),g.push(new a)}return this.points=b,this._recalc(),this},c.prototype.setAngle=c.prototype.setAngle=function(a){return this.angle=a,this._recalc(),this},c.prototype.setOffset=c.prototype.setOffset=function(a){return this.offset=a,this._recalc(),this},c.prototype.rotate=c.prototype.rotate=function(a){for(var b=this.points,c=b.length,d=0;d<c;d++)b[d].rotate(a);return this._recalc(),this},c.prototype.translate=c.prototype.translate=function(a,b){for(var c=this.points,d=c.length,e=0;e<d;e++)c[e].x+=a,c[e].y+=b;return this._recalc(),this},c.prototype._recalc=function(){var a,b=this.calcPoints,c=this.edges,d=this.normals,e=this.points,f=this.offset,g=this.angle,h=e.length;for(a=0;a<h;a++){var i=b[a].copy(e[a]);i.x+=f.x,i.y+=f.y,0!==g&&i.rotate(g)}for(a=0;a<h;a++){var j=b[a],k=a<h-1?b[a+1]:b[0],l=c[a].copy(k).sub(j);d[a].copy(l).perp().normalize()}return this},c.prototype.getAABB=c.prototype.getAABB=function(){for(var b=this.calcPoints,c=b.length,e=b[0].x,f=b[0].y,g=b[0].x,h=b[0].y,i=1;i<c;i++){var j=b[i];j.x<e?e=j.x:j.x>g&&(g=j.x),j.y<f?f=j.y:j.y>h&&(h=j.y)}return new d(this.pos.clone().add(new a(e,f)),g-e,h-f).toPolygon()},o.Box=d,d.prototype.toPolygon=d.prototype.toPolygon=function(){var b=this.pos,d=this.w,e=this.h;return new c(new a(b.x,b.y),[new a,new a(d,0),new a(d,e),new a(0,e)])},o.Response=e,e.prototype.clear=e.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var p=[],q=0;q<10;q++)p.push(new a);for(var r=[],q=0;q<5;q++)r.push([]);var s=new e,t=new d(new a,1e-6,1e-6).toPolygon();o.isSeparatingAxis=g;var u=-1,v=0,w=1;return o.pointInCircle=i,o.pointInPolygon=j,o.testCircleCircle=k,o.testPolygonCircle=l,o.testCirclePolygon=m,o.testPolygonPolygon=n,o})},{}],100:[function(a,b,c){function d(){e.call(this)}b.exports=d;var e=a("events").EventEmitter,f=a("inherits");f(d,e),d.Readable=a("readable-stream/readable.js"),d.Writable=a("readable-stream/writable.js"),d.Duplex=a("readable-stream/duplex.js"),d.Transform=a("readable-stream/transform.js"),d.PassThrough=a("readable-stream/passthrough.js"),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function d(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===e.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",d),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",d),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:27,inherits:30,"readable-stream/duplex.js":88,"readable-stream/passthrough.js":95,"readable-stream/readable.js":96,"readable-stream/transform.js":97,"readable-stream/writable.js":98}],101:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&d<=56319)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&d<=56319){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(b<=2&&c>>4==14){this.charLength=3;break}if(b<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:4}],102:[function(a,b,c){(function(a){function c(a,b){function c(){if(!e){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var e=!1;return c}function d(b){try{if(!a.localStorage)return!1}catch(a){return!1}var c=a.localStorage[b];return null!=c&&"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],103:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{dup:30}],104:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],105:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":104,_process:87,inherits:103}],106:[function(a,b,c){function d(a){function b(a,b){e.push(b.name.replace(/^sounds\//gi,"").replace(/\.ogg/gi,"")),d.push(b.async("arraybuffer"))}function c(a){for(var b=0;b<a.length;b++)g.define(e[b],a[b])}var d=[],e=[];return a.folder("sounds/").forEach(b),g.init(),h.external.Promise.all(d).then(c)}function e(a){h.external.Promise.all([d(a)]).then(this.onAssetsReady)}function f(a){new h.external.Promise(function(a,b){i.getBinaryContent("assets.zip",function(c,d){c?b(c):a(d)})}).then(function(a){return h.loadAsync(a)}).then(e.bind({onAssetsReady:a}))}var g=a("./audio"),h=a("jszip"),i=a("jszip-utils");b.exports={init:f}},{"./audio":107,jszip:43,"jszip-utils":33}],107:[function(a,b,c){function d(){g=new(window.AudioContext||window.webkitAudioContext),h={}}function e(a,b){g.decodeAudioData(b).then(function(b){h[a]=b})}function f(a){var b=g.createBufferSource();b.buffer=h[a],b.connect(g.destination),b.start()}var g,h;b.exports={init:d,define:e,play:f}},{}],108:[function(a,b,c){function d(){j=m.create("Star",{x:400,y:50,rotation:0,team:m.TEAM.BLUE}),k=m.create("Fighter",{x:20,y:0,rotation:0,team:m.TEAM.BLUE}),i=m.create("Freighter",{x:30,y:-30,rotation:0,team:m.TEAM.BLUE}),n.addChild(j.graphics,k.graphics,i.graphics),window.addEventListener("keydown",f),window.addEventListener("keyup",e)}function e(a){37===a.which?p.left_arrow=!1:39===a.which?p.right_arrow=!1:38===a.which&&(p.up_arrow=!1)}function f(a){37===a.which?p.left_arrow=!0:39===a.which?p.right_arrow=!0:38===a.which?p.up_arrow=!0:40===a.which&&(p.down_arrow=!0,l.play("hit"))}function g(){p.left_arrow?i.rotation-=.03:p.right_arrow&&(i.rotation+=.03),p.down_arrow,p.up_arrow?(i.x+=Math.cos(i.rotation),i.y+=Math.sin(i.rotation),i.flameOn()):i.flameOff(),o.testPolygonCircle(i.collision,j.collision)?i.graphics.alpha=.4:i.graphics.alpha=.8}function h(){return i}var i,j,k,l=a("../audio"),m=a("../entity"),n=a("../graphics"),o=a("sat"),p={};b.exports={init:d,process:g,getFocalPoint:h}},{"../audio":107,"../entity":111,"../graphics":124,sat:99}],109:[function(a,b,c){function d(a,b){g.x=a,g.y=b,h.x=a,h.y=b,i.x=a,i.y=b,j.x=a,j.y=b,k.x=a,k.y=b}function e(){g=n.create("Planet",t),h=n.create("PBase",t),i=n.create("PComm",t),j=n.create("PLab",t),k=n.create("PColony",t),l=n.create("StarPort",t),m.addChild(l.graphics,g.graphics,h.graphics,i.graphics,j.graphics,k.graphics)}function f(){o+=p;var a=Math.cos(o)*q+r,b=Math.sin(o)*q+s;d(a,b),l.rotation+=2.5*p,l.x=a+150*Math.cos(l.rotation),l.y=b+150*Math.sin(l.rotation)}var g,h,i,j,k,l,m=a("../graphics"),n=a("../entity"),o=0,p=1e-4,q=400,r=-500,s=100,t={x:0,y:0,rotation:0,team:n.TEAM.BLUE};b.exports={init:e,process:f}},{"../entity":111,"../graphics":124}],110:[function(a,b,c){(function(d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof d?d:"undefined"!=typeof self?self:this,e.PIXI=a()}}(function(){var b;return function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],2:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(h<=e&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(f<l?e:g,f,k,l,f<l?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(i<m||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i)),d=d.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],3:[function(a,b,c){"use strict";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(){this._events=new d,this._eventsCount=0}var g=Object.prototype.hasOwnProperty,h="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(h=!1)),f.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)g.call(a,b)&&c.push(h?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},f.prototype.listeners=function(a,b){var c=h?h+a:a,d=this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=new Array(f);e<f;e++)g[e]=d[e].fn;return g},f.prototype.emit=function(a,b,c,d,e,f){var g=h?h+a:a;if(!this._events[g])return!1;var i,j,k=this._events[g],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(j=1,i=new Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=new Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},f.prototype.on=function(a,b,c){var d=new e(b,c||this),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.once=function(a,b,c){var d=new e(b,c||this,!0),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.removeListener=function(a,b,c,e){var f=h?h+a:a;if(!this._events[f])return this;if(!b)return 0===--this._eventsCount?this._events=new d:delete this._events[f],this;var g=this._events[f];if(g.fn)g.fn!==b||e&&!g.once||c&&g.context!==c||(0===--this._eventsCount?this._events=new d:delete this._events[f]);else{for(var i=0,j=[],k=g.length;i<k;i++)(g[i].fn!==b||e&&!g[i].once||c&&g[i].context!==c)&&j.push(g[i]);j.length?this._events[f]=1===j.length?j[0]:j:0===--this._eventsCount?this._events=new d:delete this._events[f]}return this},f.prototype.removeAllListeners=function(a){var b;return a?(b=h?h+a:a,this._events[b]&&(0===--this._eventsCount?this._events=new d:delete this._events[b])):(this._events=new d,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=h,f.EventEmitter=f,"undefined"!=typeof b&&(b.exports=f)},{}],4:[function(a,c,d){!function(a){var d=/iPhone/i,e=/iPod/i,f=/iPad/i,g=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,i=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,j=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,k=/IEMobile/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,n=/BB10/i,o=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,q=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,r=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),s=function(a,b){return a.test(b)},t=function(a){var b=a||navigator.userAgent,c=b.split("[FBAN");if("undefined"!=typeof c[1]&&(b=c[0]),c=b.split("Twitter"),"undefined"!=typeof c[1]&&(b=c[0]),this.apple={phone:s(d,b),ipod:s(e,b),tablet:!s(d,b)&&s(f,b),device:s(d,b)||s(e,b)||s(f,b)},this.amazon={phone:s(i,b),tablet:!s(i,b)&&s(j,b),device:s(i,b)||s(j,b)},this.android={phone:s(i,b)||s(g,b),tablet:!s(i,b)&&!s(g,b)&&(s(j,b)||s(h,b)),device:s(i,b)||s(j,b)||s(g,b)||s(h,b)},this.windows={phone:s(k,b),tablet:s(l,b),device:s(k,b)||s(l,b)},this.other={blackberry:s(m,b),blackberry10:s(n,b),opera:s(o,b),firefox:s(q,b),chrome:s(p,b),device:s(m,b)||s(n,b)||s(o,b)||s(q,b)||s(p,b)},this.seven_inch=s(r,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},u=function(){var a=new t;return a.Class=t,a};"undefined"!=typeof c&&c.exports&&"undefined"==typeof window?c.exports=t:"undefined"!=typeof c&&c.exports&&"undefined"!=typeof window?c.exports=u():"function"==typeof b&&b.amd?b("isMobile",[],a.isMobile=u()):a.isMobile=u()}(this)},{}],5:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(a){return!1}}var f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;b.exports=e()?Object.assign:function(a,b){for(var c,e,h=d(a),i=1;i<arguments.length;i++){c=Object(arguments[i]);for(var j in c)f.call(c,j)&&(h[j]=c[j]);if(Object.getOwnPropertySymbols){e=Object.getOwnPropertySymbols(c);for(var k=0;k<e.length;k++)g.call(c,e[k])&&(h[e[k]]=c[e[k]])}}return h}},{}],6:[function(a,b,c){var d=new ArrayBuffer(0),e=function(a,b,c,e){this.gl=a,this.buffer=a.createBuffer(),this.type=b||a.ARRAY_BUFFER,this.drawType=e||a.STATIC_DRAW,this.data=d,c&&this.upload(c)};e.prototype.upload=function(a,b,c){c||this.bind();var d=this.gl;a=a||this.data,b=b||0,this.data.byteLength>=a.byteLength?d.bufferSubData(this.type,b,a):d.bufferData(this.type,a,this.drawType),this.data=a},e.prototype.bind=function(){var a=this.gl;a.bindBuffer(this.type,this.buffer)},e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)},e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)},e.create=function(a,b,c,d){return new e(a,b,c,d)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},b.exports=e},{}],7:[function(a,b,c){var d=a("./GLTexture"),e=function(a,b,c){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=b||100,this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b),this.texture.bind(),this.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)},e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencil),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}},e.prototype.clear=function(a,b,c,d){this.bind();var e=this.gl;e.clearColor(a,b,c,d),e.clear(e.COLOR_BUFFER_BIT);
},e.prototype.bind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)},e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.resize=function(a,b){var c=this.gl;this.width=a,this.height=b,this.texture&&this.texture.uploadData(null,a,b),this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))},e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy(),a.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},e.createRGBA=function(a,b,c,f){var g=d.fromData(a,null,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},e.createFloat32=function(a,b,c,f){var g=new d.fromData(a,f,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},b.exports=e},{"./GLTexture":9}],8:[function(a,b,c){var d=a("./shader/compileProgram"),e=a("./shader/extractAttributes"),f=a("./shader/extractUniforms"),g=a("./shader/generateUniformAccessObject"),h=function(a,b,c){this.gl=a,this.program=d(a,b,c),this.attributes=e(a,this.program);var h=f(a,this.program);this.uniforms=g(a,h)};h.prototype.bind=function(){this.gl.useProgram(this.program)},h.prototype.destroy=function(){},b.exports=h},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(a,b,c){var d=function(a,b,c,d,e){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=b||-1,this.height=c||-1,this.format=d||a.RGBA,this.type=e||a.UNSIGNED_BYTE};d.prototype.upload=function(a){this.bind();var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=a.videoWidth||a.width,d=a.videoHeight||a.height;d!==this.height||c!==this.width?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a):b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=c,this.height=d};var e=!1;d.prototype.uploadData=function(a,b,c){this.bind();var d=this.gl;if(a instanceof Float32Array){if(!e){var f=d.getExtension("OES_texture_float");if(!f)throw new Error("floating point textures not available");e=!0}this.type=d.FLOAT}else this.type=d.UNSIGNED_BYTE;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),b!==this.width||c!==this.height?d.texImage2D(d.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,a||null):d.texSubImage2D(d.TEXTURE_2D,0,0,0,b,c,this.format,this.type,a||null),this.width=b,this.height=c},d.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.texture)},d.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)},d.prototype.minFilter=function(a){var b=this.gl;this.bind(),this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.magFilter=function(a){var b=this.gl;this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.enableMipmap=function(){var a=this.gl;this.bind(),this.mipmap=!0,a.generateMipmap(a.TEXTURE_2D)},d.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},d.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},d.prototype.enableWrapClamp=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},d.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)},d.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)},d.prototype.destroy=function(){var a=this.gl;a.deleteTexture(this.texture)},d.fromSource=function(a,b,c){var e=new d(a);return e.premultiplyAlpha=c||!1,e.upload(b),e},d.fromData=function(a,b,c,e){var f=new d(a);return f.uploadData(b,c,e),f},b.exports=d},{}],10:[function(a,b,c){function d(a,b){if(this.nativeVaoExtension=null,d.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=b,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(c),attribState:new Array(c)}}this.gl=a,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var e=a("./setVertexAttribArrays");d.prototype.constructor=d,b.exports=d,d.FORCE_NATIVE=!1,d.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},d.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},d.prototype.activate=function(){for(var a=this.gl,b=null,c=0;c<this.attributes.length;c++){var d=this.attributes[c];b!==d.buffer&&(d.buffer.bind(),b=d.buffer),a.vertexAttribPointer(d.attribute.location,d.attribute.size,d.type||a.FLOAT,d.normalized||!1,d.stride||0,d.start||0)}return e(a,this.attributes,this.nativeState),this.indexBuffer.bind(),this},d.prototype.addAttribute=function(a,b,c,d,e,f){return this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:d||!1,stride:e||0,start:f||0}),this.dirty=!0,this},d.prototype.addIndex=function(a){return this.indexBuffer=a,this.dirty=!0,this},d.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},d.prototype.draw=function(a,b,c){var d=this.gl;return d.drawElements(a,b,d.UNSIGNED_SHORT,c||0),this},d.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":13}],11:[function(a,b,c){var d=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw new Error("This browser does not support webGL. Try using the canvas renderer");return c};b.exports=d},{}],12:[function(a,b,c){var d={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),shader:a("./shader")};"undefined"!=typeof b&&b.exports&&(b.exports=d),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=d)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(a,b,c){var d=function(a,b,c){var d;if(c){var e=c.tempAttribState,f=c.attribState;for(d=0;d<e.length;d++)e[d]=!1;for(d=0;d<b.length;d++)e[b[d].attribute.location]=!0;for(d=0;d<f.length;d++)f[d]!==e[d]&&(f[d]=e[d],c.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<b.length;d++){var g=b[d];a.enableVertexAttribArray(g.attribute.location)}};b.exports=d},{}],14:[function(a,b,c){var d=function(a,b,c){var d=e(a,a.VERTEX_SHADER,b),f=e(a,a.FRAGMENT_SHADER,c),g=a.createProgram();return a.attachShader(g,d),a.attachShader(g,f),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(g,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(g)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(g)),a.deleteProgram(g),g=null),a.deleteShader(d),a.deleteShader(f),g},e=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log(a.getShaderInfoLog(d)),null)};b.exports=d},{}],15:[function(a,b,c){var d=function(a,b){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"bool":return!1;case"bvec2":return e(2*b);case"bvec3":return e(3*b);case"bvec4":return e(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e=function(a){for(var b=new Array(a),c=0;c<b.length;c++)b[c]=!1;return b};b.exports=d},{}],16:[function(a,b,c){var d=a("./mapType"),e=a("./mapSize"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),h=0;h<f;h++){var i=a.getActiveAttrib(b,h),j=d(a,i.type);c[i.name]={type:j,size:e(j),location:a.getAttribLocation(b,i.name),pointer:g}}return c},g=function(a,b,c,d){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,d||0)};b.exports=f},{"./mapSize":20,"./mapType":21}],17:[function(a,b,c){var d=a("./mapType"),e=a("./defaultValue"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),g=0;g<f;g++){var h=a.getActiveUniform(b,g),i=h.name.replace(/\[.*?\]/,""),j=d(a,h.type);c[i]={type:j,size:h.size,location:a.getUniformLocation(b,i),value:e(j,h.size)}}return c};b.exports=f},{"./defaultValue":15,"./mapType":21}],18:[function(a,b,c){var d=function(a,b){var c={data:{}};c.gl=a;for(var d=Object.keys(b),h=0;h<d.length;h++){var i=d[h],j=i.split("."),k=j[j.length-1],l=g(j,c),m=b[i];l.data[k]=m,l.gl=a,Object.defineProperty(l,k,{get:e(k),set:f(k,m)})}return c},e=function(a){var b=h.replace("%%",a);return new Function(b)},f=function(a,b){var c,d=i.replace(/%%/g,a);return c=1===b.size?j[b.type]:k[b.type],c&&(d+="\nthis.gl."+c+";"),new Function("value",d)},g=function(a,b){for(var c=b,d=0;d<a.length-1;d++){var e=c[a[d]]||{data:{}};c[a[d]]=e,c=e}return c},h=["return this.data.%%.value;"].join("\n"),i=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),j={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},k={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};b.exports=d},{}],19:[function(a,b,c){b.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(a,b,c){var d=function(a){return e[a]},e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=d},{}],21:[function(a,b,c){var d=function(a,b){if(!e){var c=Object.keys(f);e={};for(var d=0;d<c.length;++d){var g=c[d];e[a[g]]=f[g]}}return e[b]},e=null,f={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=d},{}],22:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:23}],23:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],24:[function(a,c,e){(function(a){!function(d){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:x}function l(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<q;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=i<=t?y:i>=t+z?z:i-t,!(l<n);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;h<q;++h)p=a[h],p<128&&u.push(L(p));for(d=e=u.length,e&&u.push(E);d<q;){for(j=w,h=0;h<q;++h)p=a[h],p>=b&&p<j&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;h<q;++h)if(p=a[h],p<b&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=n<=g?y:n>=g+z?z:n-g,!(k<o);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof e&&e&&!e.nodeType&&e,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof a&&a;t.global!==t&&t.window!==t&&t.self!==t||(d=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof b&&"object"==typeof b.amd&&b.amd)b("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else d.punycode=u}(this)}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],26:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],27:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":25,"./encode":26}],28:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=d!==-1&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);C!==-1&&(A===-1||C<A)&&(A=C)}var D,E;E=A===-1?h.lastIndexOf("@"):h.lastIndexOf("@",A),E!==-1&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);C!==-1&&(A===-1||C<A)&&(A=C)}A===-1&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;K<L;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;B<H;B++){var R=p[B];if(h.indexOf(R)!==-1){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");T!==-1&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(U!==-1?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":29,punycode:24,querystring:27}],29:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],30:[function(a,b,c){"use strict";b.exports=function(a,b){b=b||{};for(var c={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=c.parser[b.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}},{}],31:[function(a,b,c){"use strict";function d(a,b){h.call(this),b=b||i,this.baseUrl=a||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=f.queue(this._boundLoadResource,b),this.resources={}}var e=a("parse-uri"),f=a("./async"),g=a("./Resource"),h=a("eventemitter3"),i=10,j=100;d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.add=d.prototype.enqueue=function(a,b,c,d){if(Array.isArray(a)){for(var e=0;e<a.length;++e)this.add(a[e]);return this}if("object"==typeof a&&(d=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url),"string"!=typeof b&&(d=c,c=b,b=a),"string"!=typeof b)throw new Error("No url passed to add resource to loader.");if("function"==typeof c&&(d=c,c=null),this.resources[a])throw new Error('Resource with name "'+a+'" already exists.');return b=this._prepareUrl(b),this.resources[a]=new g(a,b,c),"function"==typeof d&&this.resources[a].once("afterMiddleware",d),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[a]),this._progressChunk=(j-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[a]),this._progressChunk=j/this._buffer.length),this},d.prototype.before=d.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},d.prototype.after=d.prototype.use=function(a){return this._afterMiddleware.push(a),this},d.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var a in this.resources){var b=this.resources[a];b.off("complete",this._onLoad,this),b.isLoading&&b.abort()}return this.resources={},this},d.prototype.load=function(a){if("function"==typeof a&&this.once("complete",a),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var b=0;b<this._buffer.length;++b)this._queue.push(this._buffer[b]);return this._buffer.length=0,this},d.prototype._prepareUrl=function(a){var b=e(a,{strictMode:!0});return b.protocol||!b.path||0===b.path.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a},d.prototype._loadResource=function(a,b){var c=this;a._dequeue=b,f.eachSeries(this._beforeMiddleware,function(b,d){
b.call(c,a,function(){d(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a.once("complete",c._onLoad,c),a.load())})},d.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},d.prototype._onLoad=function(a){var b=this;f.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.emit("afterMiddleware",a),b._numToLoad--,b.progress+=b._progressChunk,b.emit("progress",b,a),a.error?b.emit("error",a.error,b,a):b.emit("load",b,a),0===b._numToLoad&&(b.progress=100,b._onComplete())}),a._dequeue()},d.LOAD_TYPE=g.LOAD_TYPE,d.XHR_RESPONSE_TYPE=g.XHR_RESPONSE_TYPE},{"./Resource":32,"./async":33,eventemitter3:3,"parse-uri":30}],32:[function(a,b,c){"use strict";function d(a,b,c){if(g.call(this),c=c||{},"string"!=typeof a||"string"!=typeof b)throw new Error("Both name and url are required for constructing a resource.");this.name=a,this.url=b,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=c.crossOrigin===!0?"anonymous":c.crossOrigin,this.loadType=c.loadType||this._determineLoadType(),this.xhrType=c.xhrType,this.metadata=c.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function e(a){return a.toString().replace("object ","")}function f(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1)),b&&(a[b]=c)}var g=a("eventemitter3"),h=a("parse-uri"),i=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),j=null,k=0,l=200,m=204;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},d.prototype.abort=function(a){if(!this.error){if(this.error=new Error(a),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},d.prototype.load=function(a){if(!this.isLoading)if(this.isComplete){if(a){var b=this;setTimeout(function(){a(b)},1)}}else switch(a&&this.once("complete",a),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case d.LOAD_TYPE.IMAGE:this._loadElement("image");break;case d.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case d.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case d.LOAD_TYPE.XHR:default:i&&this.crossOrigin?this._loadXdr():this._loadXhr()}},d.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===a&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var b="is"+a[0].toUpperCase()+a.substring(1);this[b]===!1&&(this[b]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},d.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===a&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(a),null===this.data)return void this.abort("Unsupported element "+a);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this["is"+a[0].toUpperCase()+a.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},d.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;a.open("GET",this.url,!0),this.xhrType===d.XHR_RESPONSE_TYPE.JSON||this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT?a.responseType=d.XHR_RESPONSE_TYPE.TEXT:a.responseType=this.xhrType,a.addEventListener("error",this._boundXhrOnError,!1),a.addEventListener("abort",this._boundXhrOnAbort,!1),a.addEventListener("progress",this._boundOnProgress,!1),a.addEventListener("load",this._boundXhrOnLoad,!1),a.send()},d.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXdrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){a.send()},0)},d.prototype._createSource=function(a,b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));var d=document.createElement("source");return d.src=b,d.type=c,d},d.prototype._onError=function(a){this.abort("Failed to load element using "+a.target.nodeName)},d.prototype._onProgress=function(a){a&&a.lengthComputable&&this.emit("progress",this,a.loaded/a.total)},d.prototype._xhrOnError=function(){var a=this.xhr;this.abort(e(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},d.prototype._xhrOnAbort=function(){this.abort(e(this.xhr)+" Request was aborted by the user.")},d.prototype._xdrOnTimeout=function(){this.abort(e(this.xhr)+" Request timed out.")},d.prototype._xhrOnLoad=function(){var a=this.xhr,b="undefined"==typeof a.status?a.status:l;if(!(b===l||b===m||b===k&&a.responseText.length>0))return void this.abort("["+a.status+"]"+a.statusText+":"+a.responseURL);if(this.xhrType===d.XHR_RESPONSE_TYPE.TEXT)this.data=a.responseText;else if(this.xhrType===d.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(a.responseText),this.isJson=!0}catch(a){return void this.abort("Error trying to parse loaded json:",a)}else if(this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var c=new DOMParser;this.data=c.parseFromString(a.responseText,"text/xml")}else{var e=document.createElement("div");e.innerHTML=a.responseText,this.data=e}this.isXml=!0}catch(a){return void this.abort("Error trying to parse loaded xml:",a)}else this.data=a.response||a.responseText;this.complete()},d.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,j||(j=document.createElement("a")),j.href=a,a=h(j.href,{strictMode:!0});var c=!a.port&&""===b.port||a.port===b.port,d=a.protocol?a.protocol+":":"";return a.host===b.hostname&&c&&d===b.protocol?"":"anonymous"},d.prototype._determineXhrType=function(){return d._xhrTypeMap[this._getExtension()]||d.XHR_RESPONSE_TYPE.TEXT},d.prototype._determineLoadType=function(){return d._loadTypeMap[this._getExtension()]||d.LOAD_TYPE.XHR},d.prototype._getExtension=function(){var a=this.url,b="";if(this.isDataUrl){var c=a.indexOf("/");b=a.substring(c+1,a.indexOf(";",c))}else{var d=a.indexOf("?");d!==-1&&(a=a.substring(0,d)),b=a.substring(a.lastIndexOf(".")+1)}return b.toLowerCase()},d.prototype._getMimeFromXhrType=function(a){switch(a){case d.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case d.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case d.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case d.XHR_RESPONSE_TYPE.JSON:return"application/json";case d.XHR_RESPONSE_TYPE.DEFAULT:case d.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT},d.setExtensionLoadType=function(a,b){f(d._loadTypeMap,a,b)},d.setExtensionXhrType=function(a,b){f(d._xhrTypeMap,a,b)}},{eventemitter3:3,"parse-uri":30}],33:[function(a,b,c){"use strict";function d(){}function e(a,b,c){var d=0,e=a.length;!function f(g){return g||d===e?void(c&&c(g)):void b(a[d++],f)}()}function f(a){return function(){if(null===a)throw new Error("Callback was already called.");var b=a;a=null,b.apply(this,arguments)}}function g(a,b){function c(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");if(h.started=!0,null==a&&h.idle())return void setTimeout(function(){h.drain()},1);var e={data:a,callback:"function"==typeof c?c:d};b?h._tasks.unshift(e):h._tasks.push(e),setTimeout(function(){h.process()},1)}function e(a){return function(){g-=1,a.callback.apply(a,arguments),null!=arguments[0]&&h.error(arguments[0],a.data),g<=h.concurrency-h.buffer&&h.unsaturated(),h.idle()&&h.drain(),h.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,h={_tasks:[],concurrency:b,saturated:d,unsaturated:d,buffer:b/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){h.drain=d,h._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!h.paused&&g<h.concurrency&&h._tasks.length;){var b=h._tasks.shift();0===h._tasks.length&&h.empty(),g+=1,g===h.concurrency&&h.saturated(),a(b.data,f(e(b)))}},length:function(){return h._tasks.length},running:function(){return g},idle:function(){return h._tasks.length+g===0},pause:function(){h.paused!==!0&&(h.paused=!0)},resume:function(){if(h.paused!==!1){h.paused=!1;for(var a=1;a<=h.concurrency;a++)h.process()}}};return h}b.exports={eachSeries:e,queue:g}},{}],34:[function(a,b,c){"use strict";b.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(a){for(var b,c="",d=new Array(4),e=0,f=0,g=0;e<a.length;){for(b=new Array(3),f=0;f<b.length;f++)e<a.length?b[f]=255&a.charCodeAt(e++):b[f]=0;switch(d[0]=b[0]>>2,d[1]=(3&b[0])<<4|b[1]>>4,d[2]=(15&b[1])<<2|b[2]>>6,d[3]=63&b[2],g=e-(a.length-1)){case 2:d[3]=64,d[2]=64;break;case 1:d[3]=64}for(f=0;f<d.length;f++)c+=this._keyStr.charAt(d[f])}return c}}},{}],35:[function(a,b,c){"use strict";b.exports=a("./Loader"),b.exports.Resource=a("./Resource"),b.exports.middleware={caching:{memory:a("./middlewares/caching/memory")},parsing:{blob:a("./middlewares/parsing/blob")}},b.exports.async=a("./async")},{"./Loader":31,"./Resource":32,"./async":33,"./middlewares/caching/memory":36,"./middlewares/parsing/blob":37}],36:[function(a,b,c){"use strict";var d={};b.exports=function(){return function(a,b){d[a.url]?(a.data=d[a.url],a.complete()):a.once("complete",function(){d[this.url]=this.data}),b()}}},{}],37:[function(a,b,c){"use strict";var d=a("../../Resource"),e=a("../../b64"),f=window.URL||window.webkitURL;b.exports=function(){return function(a,b){if(!a.data)return void b();if(a.xhr&&a.xhrType===d.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof a.data){if(0===a.data.type.indexOf("image")){var c=f.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=c,a.isImage=!0,void(a.data.onload=function(){f.revokeObjectURL(c),a.data.onload=null,b()})}}else{var g=a.xhr.getResponseHeader("content-type");if(g&&0===g.indexOf("image"))return a.data=new Image,a.data.src="data:"+g+";base64,"+e.encodeBinary(a.xhr.responseText),a.isImage=!0,void(a.data.onload=function(){a.data.onload=null,b()})}b()}}},{"../../Resource":32,"../../b64":34}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("../core"),h=e(g),i=a("ismobilejs"),j=d(i),k=a("./accessibleTarget"),l=d(k);Object.assign(h.DisplayObject.prototype,l.default);var m=9,n=100,o=0,p=0,q=2,r=1,s=-1e3,t=-1e3,u=2,v=function(){function a(b){f(this,a),!j.default.tablet&&!j.default.phone||navigator.isCocoonJS||this.createTouchHook();var c=document.createElement("div");c.style.width=n+"px",c.style.height=n+"px",c.style.position="absolute",c.style.top=o+"px",c.style.left=p+"px",c.style.zIndex=q,this.div=c,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=b,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return a.prototype.createTouchHook=function(){var a=this,b=document.createElement("button");b.style.width=r+"px",b.style.height=r+"px",b.style.position="absolute",b.style.top=s+"px",b.style.left=t+"px",b.style.zIndex=u,b.style.backgroundColor="#FF0000",b.title="HOOK DIV",b.addEventListener("focus",function(){a.isMobileAccessabillity=!0,a.activate(),document.body.removeChild(b)}),document.body.appendChild(b)},a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);for(var b=a.children,c=b.length-1;c>=0;c--)this.updateAccessibleObjects(b[c])}},a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),b=a.width/this.renderer.width,c=a.height/this.renderer.height,d=this.div;d.style.left=a.left+"px",d.style.top=a.top+"px",d.style.width=this.renderer.width+"px",d.style.height=this.renderer.height+"px";for(var e=0;e<this.children.length;e++){var f=this.children[e];if(f.renderId!==this.renderId)f._accessibleActive=!1,h.utils.removeItems(this.children,e,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,e--,0===this.children.length&&this.deactivate();else{d=f._accessibleDiv;var g=f.hitArea,i=f.worldTransform;f.hitArea?(d.style.left=(i.tx+g.x*i.a)*b+"px",d.style.top=(i.ty+g.y*i.d)*c+"px",d.style.width=g.width*i.a*b+"px",d.style.height=g.height*i.d*c+"px"):(g=f.getBounds(),this.capHitArea(g),d.style.left=g.x*b+"px",d.style.top=g.y*c+"px",d.style.width=g.width*b+"px",d.style.height=g.height*c+"px")}}this.renderId++}},a.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x),a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-a.y)},a.prototype.addChild=function(a){var b=this.pool.pop();b||(b=document.createElement("button"),b.style.width=n+"px",b.style.height=n+"px",b.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",b.style.position="absolute",b.style.zIndex=q,b.style.borderStyle="none",b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),b.addEventListener("focusout",this._onFocusOut.bind(this))),a.accessibleTitle?b.title=a.accessibleTitle:a.accessibleTitle||a.accessibleHint||(b.title="displayObject "+this.tabIndex),a.accessibleHint&&b.setAttribute("aria-label",a.accessibleHint),a._accessibleActive=!0,a._accessibleDiv=b,b.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},a.prototype._onClick=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"click",b.eventData)},a.prototype._onFocus=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseover",b.eventData)},a.prototype._onFocusOut=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseout",b.eventData)},a.prototype._onKeyDown=function(a){a.keyCode===m&&this.activate()},a.prototype._onMouseMove=function(){this.deactivate()},a.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a}();c.default=v,h.WebGLRenderer.registerPlugin("accessibility",v),h.CanvasRenderer.registerPlugin("accessibility",v)},{"../core":61,"./accessibleTarget":39,ismobilejs:4}],39:[function(a,b,c){"use strict";c.__esModule=!0,c.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],40:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./accessibleTarget");Object.defineProperty(c,"accessibleTarget",{enumerable:!0,get:function(){return d(e).default}});var f=a("./AccessibilityManager");Object.defineProperty(c,"AccessibilityManager",{enumerable:!0,get:function(){return d(f).default}})},{"./AccessibilityManager":38,"./accessibleTarget":39}],41:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var b=a.slice(0);return b.unshift("precision "+l+" float;"),b}}else if("precision"!==a.substring(0,9))return"precision "+l+" float;\n"+a;return a}c.__esModule=!0;var i=a("pixi-gl-core"),j=a("./settings"),k=d(j),l=k.default.PRECISION,m=function(a){function b(c,d,g){return e(this,b),f(this,a.call(this,c,h(d),h(g)))}return g(b,a),b}(i.GLShader);c.default=m},{"./settings":97,"pixi-gl-core":12}],42:[function(a,b,c){"use strict";c.__esModule=!0,c.VERSION="4.3.0",c.PI_2=2*Math.PI,c.RAD_TO_DEG=180/Math.PI,c.DEG_TO_RAD=Math.PI/180,c.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},c.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},c.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c.SCALE_MODES={LINEAR:0,NEAREST:1},c.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},c.GC_MODES={AUTO:0,MANUAL:1},c.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,c.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,c.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,c.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},c.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},c.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},c.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},{}],43:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math"),f=function(){function a(){d(this,a),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},a.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},a.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?e.Rectangle.EMPTY:(a=a||new e.Rectangle(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},a.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},a.prototype.addQuad=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,f=a[0],g=a[1];b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[2],g=a[3],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[4],g=a[5],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[6],g=a[7],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.addFrame=function(a,b,c,d,e){var f=a.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=g*b+i*c+k,r=h*b+j*c+l;m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*c+k,r=h*d+j*c+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*b+i*e+k,r=h*b+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*e+k,r=h*d+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},a.prototype.addVertices=function(a,b,c,d){for(var e=a.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=this.minX,m=this.minY,n=this.maxX,o=this.maxY,p=c;p<d;p+=2){var q=b[p],r=b[p+1],s=f*q+h*r+j,t=i*r+g*q+k;l=s<l?s:l,m=t<m?t:m,n=s>n?s:n,o=t>o?t:o}this.minX=l,this.minY=m,this.maxX=n,this.maxY=o},a.prototype.addBounds=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY;this.minX=a.minX<b?a.minX:b,this.minY=a.minY<c?a.minY:c,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>e?a.maxY:e},a.prototype.addBoundsMask=function(a,b){var c=a.minX>b.minX?a.minX:b.minX,d=a.minY>b.minY?a.minY:b.minY,e=a.maxX<b.maxX?a.maxX:b.maxX,f=a.maxY<b.maxY?a.maxY:b.maxY;if(c<=e&&d<=f){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=c<g?c:g,this.minY=d<h?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a.prototype.addBoundsArea=function(a,b){var c=a.minX>b.x?a.minX:b.x,d=a.minY>b.y?a.minY:b.y,e=a.maxX<b.x+b.width?a.maxX:b.x+b.width,f=a.maxY<b.y+b.height?a.maxY:b.y+b.height;if(c<=e&&d<=f){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=c<g?c:g,this.minY=d<h?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a}();c.default=f},{"../math":66}],44:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils"),j=a("./DisplayObject"),k=d(j),l=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.children=[],c}return g(b,a),b.prototype.onChildrenChange=function(){},b.prototype.addChild=function(a){var b=arguments.length;if(b>1)for(var c=0;c<b;c++)this.addChild(arguments[c]);else a.parent&&a.parent.removeChild(a),a.parent=this,this.transform._parentID=-1,this._boundsID++,this.children.push(a),this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},b.prototype.addChildAt=function(a,b){if(b<0||b>this.children.length)throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length);return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.onChildrenChange(b),a.emit("added",this),a},b.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);this.children[c]=b,this.children[d]=a,this.onChildrenChange(c<d?c:d)}},b.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(b===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return b},b.prototype.setChildIndex=function(a,b){if(b<0||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);(0,i.removeItems)(this.children,c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},b.prototype.getChildAt=function(a){if(a<0||a>=this.children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]},b.prototype.removeChild=function(a){var b=arguments.length;if(b>1)for(var c=0;c<b;c++)this.removeChild(arguments[c]);else{var d=this.children.indexOf(a);if(d===-1)return null;a.parent=null,(0,i.removeItems)(this.children,d,1),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(d),a.emit("removed",this)}return a},b.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,(0,i.removeItems)(this.children,a,1),this.onChildrenChange(a),b.emit("removed",this),b},b.prototype.removeChildren=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=a,d="number"==typeof b?b:this.children.length,e=d-c,f=void 0;if(e>0&&e<=d){f=this.children.splice(c,e);for(var g=0;g<f.length;++g)f[g].parent=null;this.onChildrenChange(a);for(var h=0;h<f.length;++h)f[h].emit("removed",this);return f}if(0===e&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},b.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;a<b;++a){var c=this.children[a];c.visible&&c.updateTransform()}},b.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var a=0;a<this.children.length;a++){var b=this.children[a];b.visible&&b.renderable&&(b.calculateBounds(),b._mask?(b._mask.calculateBounds(),this._bounds.addBoundsMask(b._bounds,b._mask._bounds)):b.filterArea?this._bounds.addBoundsArea(b._bounds,b.filterArea):this._bounds.addBounds(b._bounds))}this._lastBoundsID=this._boundsID},b.prototype._calculateBounds=function(){},b.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderWebGL(a)}},b.prototype.renderAdvancedWebGL=function(a){a.flush();var b=this._filters,c=this._mask;if(b){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var d=0;d<b.length;d++)b[d].enabled&&this._enabledFilters.push(b[d]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}c&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var e=0,f=this.children.length;e<f;e++)this.children[e].renderWebGL(a);a.flush(),c&&a.maskManager.popMask(this,this._mask),b&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},b.prototype._renderWebGL=function(a){},b.prototype._renderCanvas=function(a){},b.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.prototype.destroy=function(b){a.prototype.destroy.call(this);var c="boolean"==typeof b?b:b&&b.children,d=this.removeChildren(0,this.children.length);if(c)for(var e=0;e<d.length;++e)d[e].destroy(b)},h(b,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}}]),b}(k.default);c.default=l,l.prototype.containerUpdateTransform=l.prototype.updateTransform},{"../utils":117,"./DisplayObject":45}],45:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("eventemitter3"),j=d(i),k=a("../const"),l=a("../settings"),m=d(l),n=a("./TransformStatic"),o=d(n),p=a("./Transform"),q=d(p),r=a("./Bounds"),s=d(r),t=a("../math"),u=function(a){function b(){e(this,b);var c=f(this,a.call(this)),d=m.default.TRANSFORM_MODE===k.TRANSFORM_MODE.STATIC?o.default:q.default;return c.tempDisplayObjectParent=null,c.transform=new d,c.alpha=1,c.visible=!0,c.renderable=!0,c.parent=null,c.worldAlpha=1,c.filterArea=null,c._filters=null,c._enabledFilters=null,c._bounds=new s.default,c._boundsID=0,c._lastBoundsID=-1,c._boundsRect=null,c._localBoundsRect=null,c._mask=null,c}return g(b,a),b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),
this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},b.prototype.getBounds=function(a,b){return a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),b||(this._boundsRect||(this._boundsRect=new t.Rectangle),b=this._boundsRect),this._bounds.getRectangle(b)},b.prototype.getLocalBounds=function(a){var b=this.transform,c=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,a||(this._localBoundsRect||(this._localBoundsRect=new t.Rectangle),a=this._localBoundsRect);var d=this.getBounds(!1,a);return this.parent=c,this.transform=b,d},b.prototype.toGlobal=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(a,b)},b.prototype.toLocal=function(a,b,c,d){return b&&(a=b.toGlobal(a,c,d)),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,c)},b.prototype.renderWebGL=function(a){},b.prototype.renderCanvas=function(a){},b.prototype.setParent=function(a){if(!a||!a.addChild)throw new Error("setParent: Argument must be a Container");return a.addChild(this),a},b.prototype.setTransform=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=a,this.position.y=b,this.scale.x=c?c:1,this.scale.y=d?d:1,this.rotation=e,this.skew.x=f,this.skew.y=g,this.pivot.x=h,this.pivot.y=i,this},b.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1},h(b,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new b),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},{key:"y",get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},{key:"scale",get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},{key:"skew",get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},{key:"worldVisible",get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},{key:"mask",get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}]),b}(j.default);c.default=u,u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform},{"../const":42,"../math":66,"../settings":97,"./Bounds":43,"./Transform":46,"./TransformStatic":48,eventemitter3:3}],46:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("./TransformBase"),k=d(j),l=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.position=new i.Point(0,0),c.scale=new i.Point(1,1),c.skew=new i.ObservablePoint(c.updateSkew,c,0,0),c.pivot=new i.Point(0,0),c._rotation=0,c._cx=1,c._sx=0,c._cy=0,c._sy=1,c}return g(b,a),b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},b.prototype.updateLocalTransform=function(){var a=this.localTransform;a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)},b.prototype.updateTransform=function(a){var b=this.localTransform;b.a=this._cx*this.scale.x,b.b=this._sx*this.scale.x,b.c=this._cy*this.scale.y,b.d=this._sy*this.scale.y,b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c),b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d);var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._worldID++},b.prototype.setFromMatrix=function(a){a.decompose(this)},h(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),b}(k.default);c.default=l},{"../math":66,"./TransformBase":47}],47:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math"),f=function(){function a(){d(this,a),this.worldTransform=new e.Matrix,this.localTransform=new e.Matrix,this._worldID=0,this._parentID=0}return a.prototype.updateLocalTransform=function(){},a.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform;c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._worldID++},a}();c.default=f,f.prototype.updateWorldTransform=f.prototype.updateTransform,f.IDENTITY=new f},{"../math":66}],48:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("./TransformBase"),k=d(j),l=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.position=new i.ObservablePoint(c.onChange,c,0,0),c.scale=new i.ObservablePoint(c.onChange,c,1,1),c.pivot=new i.ObservablePoint(c.onChange,c,0,0),c.skew=new i.ObservablePoint(c.updateSkew,c,0,0),c._rotation=0,c._cx=1,c._sx=0,c._cy=0,c._sy=1,c._localID=0,c._currentLocalID=0,c}return g(b,a),b.prototype.onChange=function(){this._localID++},b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},b.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},b.prototype.updateTransform=function(a){var b=this.localTransform;if(this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale._x,b.b=this._sx*this.scale._x,b.c=this._cy*this.scale._y,b.d=this._sy*this.scale._y,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._parentID=a._worldID,this._worldID++}},b.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},h(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),b}(k.default);c.default=l},{"../math":66,"./TransformBase":47}],49:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../display/Container"),i=d(h),j=a("../textures/RenderTexture"),k=d(j),l=a("../textures/Texture"),m=d(l),n=a("./GraphicsData"),o=d(n),p=a("../sprites/Sprite"),q=d(p),r=a("../math"),s=a("../utils"),t=a("../const"),u=a("../display/Bounds"),v=d(u),w=a("./utils/bezierCurveTo"),x=d(w),y=a("../renderers/canvas/CanvasRenderer"),z=d(y),A=void 0,B=new r.Matrix,C=new r.Point,D=new Float32Array(4),E=new Float32Array(4),F=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.fillAlpha=1,c.lineWidth=0,c.lineColor=0,c.graphicsData=[],c.tint=16777215,c._prevTint=16777215,c.blendMode=t.BLEND_MODES.NORMAL,c.currentPath=null,c._webGL={},c.isMask=!1,c.boundsPadding=0,c._localBounds=new v.default,c.dirty=0,c.fastRectDirty=-1,c.clearDirty=0,c.boundsDirty=-1,c.cachedSpriteDirty=!1,c._spriteRect=null,c._fastRect=!1,c}return g(b,a),b.prototype.clone=function a(){var a=new b;a.renderable=this.renderable,a.fillAlpha=this.fillAlpha,a.lineWidth=this.lineWidth,a.lineColor=this.lineColor,a.tint=this.tint,a.blendMode=this.blendMode,a.isMask=this.isMask,a.boundsPadding=this.boundsPadding,a.dirty=0,a.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)a.graphicsData.push(this.graphicsData[c].clone());return a.currentPath=a.graphicsData[a.graphicsData.length-1],a.updateLocalBounds(),a},b.prototype.lineStyle=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this.currentPath)if(this.currentPath.shape.points.length){var d=new r.Polygon(this.currentPath.shape.points.slice(-2));d.closed=!1,this.drawShape(d)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},b.prototype.moveTo=function(a,b){var c=new r.Polygon([a,b]);return c.closed=!1,this.drawShape(c),this},b.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty++,this},b.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e=20,f=this.currentPath.shape.points,g=0,h=0;0===f.length&&this.moveTo(0,0);for(var i=f[f.length-2],j=f[f.length-1],k=1;k<=e;++k){var l=k/e;g=i+(a-i)*l,h=j+(b-j)*l,f.push(g+(a+(c-a)*l-g)*l,h+(b+(d-b)*l-h)*l)}return this.dirty++,this},b.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var g=this.currentPath.shape.points,h=g[g.length-2],i=g[g.length-1];return g.length-=2,(0,x.default)(h,i,a,b,c,d,e,f,g),this.dirty++,this},b.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(m<1e-8||0===e)f[f.length-2]===a&&f[f.length-1]===b||f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty++,this},b.prototype.arc=function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(d===e)return this;!f&&e<=d?e+=2*Math.PI:f&&d<=e&&(d+=2*Math.PI);var g=e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI));if(0===g)return this;var i=a+Math.cos(d)*c,j=b+Math.sin(d)*c,k=this.currentPath?this.currentPath.shape.points:null;k?k[k.length-2]===i&&k[k.length-1]===j||k.push(i,j):(this.moveTo(i,j),k=this.currentPath.shape.points);for(var l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;r<=p;++r){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty++,this},b.prototype.beginFill=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=a,this.fillAlpha=b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.prototype.drawRect=function(a,b,c,d){return this.drawShape(new r.Rectangle(a,b,c,d)),this},b.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new r.RoundedRectangle(a,b,c,d,e)),this},b.prototype.drawCircle=function(a,b,c){return this.drawShape(new r.Circle(a,b,c)),this},b.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new r.Ellipse(a,b,c,d)),this},b.prototype.drawPolygon=function(a){var b=a,c=!0;if(b instanceof r.Polygon&&(c=b.closed,b=b.points),!Array.isArray(b)){b=new Array(arguments.length);for(var d=0;d<b.length;++d)b[d]=arguments[d]}var e=new r.Polygon(b);return e.closed=c,this.drawShape(e),this},b.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this},b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===t.SHAPES.RECT&&!this.graphicsData[0].lineWidth},b.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))},b.prototype._renderSpriteRect=function(a){var c=this.graphicsData[0].shape;if(!this._spriteRect){if(!b._SPRITE_TEXTURE){b._SPRITE_TEXTURE=k.default.create(10,10);var d=document.createElement("canvas");d.width=10,d.height=10;var e=d.getContext("2d");e.fillStyle="white",e.fillRect(0,0,10,10),b._SPRITE_TEXTURE=m.default.fromCanvas(d)}this._spriteRect=new q.default(b._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var f=D,g=E;(0,s.hex2rgb)(this.graphicsData[0].fillColor,f),(0,s.hex2rgb)(this.tint,g),f[0]*=g[0],f[1]*=g[1],f[2]*=g[2],this._spriteRect.tint=(0,s.rgb2hex)(f)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,b._SPRITE_TEXTURE._frame.width=c.width,b._SPRITE_TEXTURE._frame.height=c.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-c.x/c.width,-c.y/c.height),this._spriteRect._onAnchorUpdate(),this._spriteRect._renderWebGL(a)},b.prototype._renderCanvas=function(a){this.isMask!==!0&&a.plugins.graphics.render(this)},b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.dirty++,this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,C);for(var b=this.graphicsData,c=0;c<b.length;++c){var d=b[c];if(d.fill&&d.shape&&d.shape.contains(C.x,C.y))return!0}return!1},b.prototype.updateLocalBounds=function(){var a=1/0,b=-(1/0),c=1/0,d=-(1/0);if(this.graphicsData.length)for(var e=0,f=0,g=0,h=0,i=0,j=0;j<this.graphicsData.length;j++){var k=this.graphicsData[j],l=k.type,m=k.lineWidth;if(e=k.shape,l===t.SHAPES.RECT||l===t.SHAPES.RREC)f=e.x-m/2,g=e.y-m/2,h=e.width+m,i=e.height+m,a=f<a?f:a,b=f+h>b?f+h:b,c=g<c?g:c,d=g+i>d?g+i:d;else if(l===t.SHAPES.CIRC)f=e.x,g=e.y,h=e.radius+m/2,i=e.radius+m/2,a=f-h<a?f-h:a,b=f+h>b?f+h:b,c=g-i<c?g-i:c,d=g+i>d?g+i:d;else if(l===t.SHAPES.ELIP)f=e.x,g=e.y,h=e.width+m/2,i=e.height+m/2,a=f-h<a?f-h:a,b=f+h>b?f+h:b,c=g-i<c?g-i:c,d=g+i>d?g+i:d;else for(var n=e.points,o=0,p=0,q=0,r=0,s=0,u=0,v=0,w=0,x=0;x+2<n.length;x+=2)f=n[x],g=n[x+1],o=n[x+2],p=n[x+3],q=Math.abs(o-f),r=Math.abs(p-g),i=m,h=Math.sqrt(q*q+r*r),h<1e-9||(s=(i/h*r+q)/2,u=(i/h*q+r)/2,v=(o+f)/2,w=(p+g)/2,a=v-s<a?v-s:a,b=v+s>b?v+s:b,c=w-u<c?w-u:c,d=w+u>d?w+u:d)}else a=0,b=0,c=0,d=0;var y=this.boundsPadding;this._localBounds.minX=a-y,this._localBounds.maxX=b+2*y,this._localBounds.minY=c-y,this._localBounds.maxY=d+2*y},b.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new o.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===t.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty++,b},b.prototype.generateCanvasTexture=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=this.getLocalBounds(),d=k.default.create(c.width,c.height,a,b);A||(A=new z.default),B.tx=-c.x,B.ty=-c.y,A.render(this,d,!1,B);var e=m.default.fromCanvas(d.baseTexture._canvasRenderTarget.canvas,a);return e.baseTexture.resolution=b,e.baseTexture.update(),e},b.prototype.closePath=function(){var a=this.currentPath;return a&&a.shape&&a.shape.close(),this},b.prototype.addHole=function(){var a=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(a.shape),this.currentPath=null,this},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);for(var c=0;c<this.graphicsData.length;++c)this.graphicsData[c].destroy();for(var d in this._webgl)for(var e=0;e<this._webgl[d].data.length;++e)this._webgl[d].data[e].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},b}(i.default);c.default=F,F._SPRITE_TEXTURE=null},{"../const":42,"../display/Bounds":43,"../display/Container":44,"../math":66,"../renderers/canvas/CanvasRenderer":73,"../sprites/Sprite":98,"../textures/RenderTexture":108,"../textures/Texture":109,"../utils":117,"./GraphicsData":50,"./utils/bezierCurveTo":52}],50:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b,c,e,f,g,h,i){d(this,a),this.lineWidth=b,this.lineColor=c,this.lineAlpha=e,this._lineTint=c,this.fillColor=f,this.fillAlpha=g,this._fillTint=f,this.fill=h,this.holes=[],this.shape=i,this.type=i.type}return a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},a.prototype.addHole=function(a){this.holes.push(a)},a.prototype.destroy=function(){this.shape=null,this.holes=null},a}();c.default=e},{}],51:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../renderers/canvas/CanvasRenderer"),g=d(f),h=a("../../const"),i=function(){function a(b){e(this,a),this.renderer=b}return a.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldAlpha,e=a.transform.worldTransform,f=b.resolution;this._prevTint!==this.tint&&(this.dirty=!0),c.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f,e.ty*f),a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),b.setBlendMode(a.blendMode);for(var g=0;g<a.graphicsData.length;g++){var i=a.graphicsData[g],j=i.shape,k=i._fillTint,l=i._lineTint;if(c.lineWidth=i.lineWidth,i.type===h.SHAPES.POLY){c.beginPath(),this.renderPolygon(j.points,j.closed,c);for(var m=0;m<i.holes.length;m++)this.renderPolygon(i.holes[m].points,!0,c);i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===h.SHAPES.RECT)(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fillRect(j.x,j.y,j.width,j.height)),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.strokeRect(j.x,j.y,j.width,j.height));else if(i.type===h.SHAPES.CIRC)c.beginPath(),c.arc(j.x,j.y,j.radius,0,2*Math.PI),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke());else if(i.type===h.SHAPES.ELIP){var n=2*j.width,o=2*j.height,p=j.x-n/2,q=j.y-o/2;c.beginPath();var r=.5522848,s=n/2*r,t=o/2*r,u=p+n,v=q+o,w=p+n/2,x=q+o/2;c.moveTo(p,x),c.bezierCurveTo(p,x-t,w-s,q,w,q),c.bezierCurveTo(w+s,q,u,x-t,u,x),c.bezierCurveTo(u,x+t,w+s,v,w,v),c.bezierCurveTo(w-s,v,p,x+t,p,x),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===h.SHAPES.RREC){var y=j.x,z=j.y,A=j.width,B=j.height,C=j.radius,D=Math.min(A,B)/2|0;C=C>D?D:C,c.beginPath(),c.moveTo(y,z+C),c.lineTo(y,z+B-C),c.quadraticCurveTo(y,z+B,y+C,z+B),c.lineTo(y+A-C,z+B),c.quadraticCurveTo(y+A,z+B,y+A,z+B-C),c.lineTo(y+A,z+C),c.quadraticCurveTo(y+A,z,y+A-C,z),c.lineTo(y+C,z),c.quadraticCurveTo(y,z,y,z+C),c.closePath(),(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}}},a.prototype.updateGraphicsTint=function(a){a._prevTint=a.tint;for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;++e){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},a.prototype.renderPolygon=function(a,b,c){c.moveTo(a[0],a[1]);for(var d=1;d<a.length/2;++d)c.lineTo(a[2*d],a[2*d+1]);b&&c.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c.default=i,g.default.registerPlugin("graphics",i)},{"../../const":42,"../../renderers/canvas/CanvasRenderer":73}],52:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],j=20,k=0,l=0,m=0,n=0,o=0;i.push(a,b);for(var p=1,q=0;p<=j;++p)q=p/j,k=1-q,l=k*k,m=l*k,n=q*q,o=n*q,i.push(m*a+3*l*q*c+3*k*n*e+o*g,m*b+3*l*q*d+3*k*n*f+o*h);return i}c.__esModule=!0,c.default=d},{}],53:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../utils"),i=a("../../const"),j=a("../../renderers/webgl/utils/ObjectRenderer"),k=d(j),l=a("../../renderers/webgl/WebGLRenderer"),m=d(l),n=a("./WebGLGraphicsData"),o=d(n),p=a("./shaders/PrimitiveShader"),q=d(p),r=a("./utils/buildPoly"),s=d(r),t=a("./utils/buildRectangle"),u=d(t),v=a("./utils/buildRoundedRectangle"),w=d(v),x=a("./utils/buildCircle"),y=d(x),z=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.graphicsDataPool=[],d.primitiveShader=null,d.gl=c.gl,d.CONTEXT_UID=0,d}return g(b,a),b.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new q.default(this.gl)},b.prototype.destroy=function(){k.default.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=void 0,e=a._webGL[this.CONTEXT_UID];e&&a.dirty===e.dirty||(this.updateGraphics(a),e=a._webGL[this.CONTEXT_UID]);var f=this.primitiveShader;b.bindShader(f),b.state.setBlendMode(a.blendMode);for(var g=0,i=e.data.length;g<i;g++){d=e.data[g];var j=d.shader;b.bindShader(j),j.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),j.uniforms.tint=(0,h.hex2rgb)(a.tint),j.uniforms.alpha=a.worldAlpha,b.bindVao(d.vao),d.vao.draw(c.TRIANGLE_STRIP,d.indices.length)}},b.prototype.updateGraphics=function(a){var b=this.renderer.gl,c=a._webGL[this.CONTEXT_UID];if(c||(c=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:b,clearDirty:-1,dirty:-1}),c.dirty=a.dirty,a.clearDirty!==c.clearDirty){c.clearDirty=a.clearDirty;for(var d=0;d<c.data.length;d++)this.graphicsDataPool.push(c.data[d]);c.data.length=0,c.lastIndex=0}for(var e=void 0,f=c.lastIndex;f<a.graphicsData.length;f++){var g=a.graphicsData[f];e=this.getWebGLData(c,0),g.type===i.SHAPES.POLY&&(0,s.default)(g,e),g.type===i.SHAPES.RECT?(0,u.default)(g,e):g.type===i.SHAPES.CIRC||g.type===i.SHAPES.ELIP?(0,y.default)(g,e):g.type===i.SHAPES.RREC&&(0,w.default)(g,e),c.lastIndex++}this.renderer.bindVao(null);for(var h=0;h<c.data.length;h++)e=c.data[h],e.dirty&&e.upload()},b.prototype.getWebGLData=function(a,b){var c=a.data[a.data.length-1];return(!c||c.points.length>32e4)&&(c=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),c.reset(b),a.data.push(c)),c.dirty=!0,c},b}(k.default);c.default=z,m.default.registerPlugin("graphics",z)},{"../../const":42,"../../renderers/webgl/WebGLRenderer":80,"../../renderers/webgl/utils/ObjectRenderer":90,"../../utils":117,"./WebGLGraphicsData":54,"./shaders/PrimitiveShader":55,"./utils/buildCircle":56,"./utils/buildPoly":58,"./utils/buildRectangle":59,"./utils/buildRoundedRectangle":60}],54:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=function(){function a(b,c,d){e(this,a),this.gl=b,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=g.default.GLBuffer.createVertexBuffer(b),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(b),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=c,this.vao=new g.default.VertexArrayObject(b,d).addIndex(this.indexBuffer).addAttribute(this.buffer,c.attributes.aVertexPosition,b.FLOAT,!1,24,0).addAttribute(this.buffer,c.attributes.aColor,b.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();c.default=h},{"pixi-gl-core":12}],55:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../../Shader"),i=d(h),j=function(a){function b(c){return e(this,b),f(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return g(b,a),b}(i.default);c.default=j},{"../../../Shader":41}],56:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a
}}function e(a,b){var c=a.shape,d=c.x,e=c.y,f=void 0,j=void 0;a.type===h.SHAPES.CIRC?(f=c.radius,j=c.radius):(f=c.width,j=c.height);var k=Math.floor(30*Math.sqrt(c.radius))||Math.floor(15*Math.sqrt(c.width+c.height)),l=2*Math.PI/k;if(a.fill){var m=(0,i.hex2rgb)(a.fillColor),n=a.fillAlpha,o=m[0]*n,p=m[1]*n,q=m[2]*n,r=b.points,s=b.indices,t=r.length/6;s.push(t);for(var u=0;u<k+1;u++)r.push(d,e,o,p,q,n),r.push(d+Math.sin(l*u)*f,e+Math.cos(l*u)*j,o,p,q,n),s.push(t++,t++);s.push(t-1)}if(a.lineWidth){var v=a.points;a.points=[];for(var w=0;w<k+1;w++)a.points.push(d+Math.sin(l*w)*f,e+Math.cos(l*w)*j);(0,g.default)(a,b),a.points=v}}c.__esModule=!0,c.default=e;var f=a("./buildLine"),g=d(f),h=a("../../../const"),i=a("../../../utils")},{"../../../const":42,"../../../utils":117,"./buildLine":57}],57:[function(a,b,c){"use strict";function d(a,b){var c=a.points;if(0!==c.length){var d=new e.Point(c[0],c[1]),g=new e.Point(c[c.length-2],c[c.length-1]);if(d.x===g.x&&d.y===g.y){c=c.slice(),c.pop(),c.pop(),g=new e.Point(c[c.length-2],c[c.length-1]);var h=g.x+.5*(d.x-g.x),i=g.y+.5*(d.y-g.y);c.unshift(h,i),c.push(h,i)}var j=b.points,k=b.indices,l=c.length/2,m=c.length,n=j.length/6,o=a.lineWidth/2,p=(0,f.hex2rgb)(a.lineColor),q=a.lineAlpha,r=p[0]*q,s=p[1]*q,t=p[2]*q,u=c[0],v=c[1],w=c[2],x=c[3],y=0,z=0,A=-(v-x),B=u-w,C=0,D=0,E=0,F=0,G=Math.sqrt(A*A+B*B);A/=G,B/=G,A*=o,B*=o,j.push(u-A,v-B,r,s,t,q),j.push(u+A,v+B,r,s,t,q);for(var H=1;H<l-1;++H){u=c[2*(H-1)],v=c[2*(H-1)+1],w=c[2*H],x=c[2*H+1],y=c[2*(H+1)],z=c[2*(H+1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,C=-(x-z),D=w-y,G=Math.sqrt(C*C+D*D),C/=G,D/=G,C*=o,D*=o;var I=-B+v-(-B+x),J=-A+w-(-A+u),K=(-A+u)*(-B+x)-(-A+w)*(-B+v),L=-D+z-(-D+x),M=-C+w-(-C+y),N=(-C+y)*(-D+x)-(-C+w)*(-D+z),O=I*M-L*J;if(Math.abs(O)<.1)O+=10.1,j.push(w-A,x-B,r,s,t,q),j.push(w+A,x+B,r,s,t,q);else{var P=(J*N-M*K)/O,Q=(L*K-I*N)/O,R=(P-w)*(P-w)+(Q-x)*(Q-x);R>196*o*o?(E=A-C,F=B-D,G=Math.sqrt(E*E+F*F),E/=G,F/=G,E*=o,F*=o,j.push(w-E,x-F),j.push(r,s,t,q),j.push(w+E,x+F),j.push(r,s,t,q),j.push(w-E,x-F),j.push(r,s,t,q),m++):(j.push(P,Q),j.push(r,s,t,q),j.push(w-(P-w),x-(Q-x)),j.push(r,s,t,q))}}u=c[2*(l-2)],v=c[2*(l-2)+1],w=c[2*(l-1)],x=c[2*(l-1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,j.push(w-A,x-B),j.push(r,s,t,q),j.push(w+A,x+B),j.push(r,s,t,q),k.push(n);for(var S=0;S<m;++S)k.push(n++);k.push(n-1)}}c.__esModule=!0,c.default=d;var e=a("../../../math"),f=a("../../../utils")},{"../../../math":66,"../../../utils":117}],58:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){a.points=a.shape.points.slice();var c=a.points;if(a.fill&&c.length>=6){for(var d=[],e=a.holes,f=0;f<e.length;f++){var i=e[f];d.push(c.length/2),c=c.concat(i.points)}var k=b.points,l=b.indices,m=c.length/2,n=(0,h.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=(0,j.default)(c,d,2);if(!s)return;for(var t=k.length/6,u=0;u<s.length;u+=3)l.push(s[u]+t),l.push(s[u]+t),l.push(s[u+1]+t),l.push(s[u+2]+t),l.push(s[u+2]+t);for(var v=0;v<m;v++)k.push(c[2*v],c[2*v+1],p,q,r,o)}a.lineWidth>0&&(0,g.default)(a,b)}c.__esModule=!0,c.default=e;var f=a("./buildLine"),g=d(f),h=a("../../../utils"),i=a("earcut"),j=d(i)},{"../../../utils":117,"./buildLine":57,earcut:2}],59:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c=a.shape,d=c.x,e=c.y,f=c.width,i=c.height;if(a.fill){var j=(0,h.hex2rgb)(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6;o.push(d,e),o.push(l,m,n,k),o.push(d+f,e),o.push(l,m,n,k),o.push(d,e+i),o.push(l,m,n,k),o.push(d+f,e+i),o.push(l,m,n,k),p.push(q,q,q+1,q+2,q+3,q+3)}if(a.lineWidth){var r=a.points;a.points=[d,e,d+f,e,d+f,e+i,d,e+i,d,e],(0,g.default)(a,b),a.points=r}}c.__esModule=!0,c.default=e;var f=a("./buildLine"),g=d(f),h=a("../../../utils")},{"../../../utils":117,"./buildLine":57}],60:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c=a.shape,d=c.x,e=c.y,g=c.width,i=c.height,l=c.radius,m=[];if(m.push(d,e+l),f(d,e+i-l,d,e+i,d+l,e+i,m),f(d+g-l,e+i,d+g,e+i,d+g,e+i-l,m),f(d+g,e+l,d+g,e,d+g-l,e,m),f(d+l,e,d,e,d,e+l+1e-10,m),a.fill){for(var n=(0,k.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=b.points,t=b.indices,u=s.length/6,v=(0,h.default)(m,null,2),w=0,x=v.length;w<x;w+=3)t.push(v[w]+u),t.push(v[w]+u),t.push(v[w+1]+u),t.push(v[w+2]+u),t.push(v[w+2]+u);for(var y=0,z=m.length;y<z;y++)s.push(m[y],m[++y],p,q,r,o)}if(a.lineWidth){var A=a.points;a.points=m,(0,j.default)(a,b),a.points=A}}function f(a,b,c,d,e,f){function g(a,b,c){var d=b-a;return a+d*c}for(var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],i=20,j=h,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;q<=i;++q)r=q/i,k=g(a,c,r),l=g(b,d,r),m=g(c,e,r),n=g(d,f,r),o=g(k,m,r),p=g(l,n,r),j.push(o,p);return j}c.__esModule=!0,c.default=e;var g=a("earcut"),h=d(g),i=a("./buildLine"),j=d(i),k=a("../../../utils")},{"../../../utils":117,"./buildLine":57,earcut:2}],61:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,c=arguments[2],d=arguments[3];return!d&&O.isWebGLSupported()?new W.default(a,b,c):new U.default(a,b,c)}c.__esModule=!0,c.Filter=c.SpriteMaskFilter=c.Quad=c.RenderTarget=c.ObjectRenderer=c.WebGLManager=c.Shader=c.CanvasRenderTarget=c.TextureUvs=c.VideoBaseTexture=c.BaseRenderTexture=c.RenderTexture=c.BaseTexture=c.Texture=c.CanvasGraphicsRenderer=c.GraphicsRenderer=c.GraphicsData=c.Graphics=c.TextStyle=c.Text=c.SpriteRenderer=c.CanvasTinter=c.CanvasSpriteRenderer=c.Sprite=c.TransformBase=c.TransformStatic=c.Transform=c.Container=c.DisplayObject=c.Bounds=c.glCore=c.WebGLRenderer=c.CanvasRenderer=c.ticker=c.utils=c.settings=void 0;var g=a("./const");Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return g[a]}})});var h=a("./math");Object.keys(h).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return h[a]}})});var i=a("pixi-gl-core");Object.defineProperty(c,"glCore",{enumerable:!0,get:function(){return e(i).default}});var j=a("./display/Bounds");Object.defineProperty(c,"Bounds",{enumerable:!0,get:function(){return e(j).default}});var k=a("./display/DisplayObject");Object.defineProperty(c,"DisplayObject",{enumerable:!0,get:function(){return e(k).default}});var l=a("./display/Container");Object.defineProperty(c,"Container",{enumerable:!0,get:function(){return e(l).default}});var m=a("./display/Transform");Object.defineProperty(c,"Transform",{enumerable:!0,get:function(){return e(m).default}});var n=a("./display/TransformStatic");Object.defineProperty(c,"TransformStatic",{enumerable:!0,get:function(){return e(n).default}});var o=a("./display/TransformBase");Object.defineProperty(c,"TransformBase",{enumerable:!0,get:function(){return e(o).default}});var p=a("./sprites/Sprite");Object.defineProperty(c,"Sprite",{enumerable:!0,get:function(){return e(p).default}});var q=a("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(c,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return e(q).default}});var r=a("./sprites/canvas/CanvasTinter");Object.defineProperty(c,"CanvasTinter",{enumerable:!0,get:function(){return e(r).default}});var s=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(c,"SpriteRenderer",{enumerable:!0,get:function(){return e(s).default}});var t=a("./text/Text");Object.defineProperty(c,"Text",{enumerable:!0,get:function(){return e(t).default}});var u=a("./text/TextStyle");Object.defineProperty(c,"TextStyle",{enumerable:!0,get:function(){return e(u).default}});var v=a("./graphics/Graphics");Object.defineProperty(c,"Graphics",{enumerable:!0,get:function(){return e(v).default}});var w=a("./graphics/GraphicsData");Object.defineProperty(c,"GraphicsData",{enumerable:!0,get:function(){return e(w).default}});var x=a("./graphics/webgl/GraphicsRenderer");Object.defineProperty(c,"GraphicsRenderer",{enumerable:!0,get:function(){return e(x).default}});var y=a("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(c,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return e(y).default}});var z=a("./textures/Texture");Object.defineProperty(c,"Texture",{enumerable:!0,get:function(){return e(z).default}});var A=a("./textures/BaseTexture");Object.defineProperty(c,"BaseTexture",{enumerable:!0,get:function(){return e(A).default}});var B=a("./textures/RenderTexture");Object.defineProperty(c,"RenderTexture",{enumerable:!0,get:function(){return e(B).default}});var C=a("./textures/BaseRenderTexture");Object.defineProperty(c,"BaseRenderTexture",{enumerable:!0,get:function(){return e(C).default}});var D=a("./textures/VideoBaseTexture");Object.defineProperty(c,"VideoBaseTexture",{enumerable:!0,get:function(){return e(D).default}});var E=a("./textures/TextureUvs");Object.defineProperty(c,"TextureUvs",{enumerable:!0,get:function(){return e(E).default}});var F=a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(c,"CanvasRenderTarget",{enumerable:!0,get:function(){return e(F).default}});var G=a("./Shader");Object.defineProperty(c,"Shader",{enumerable:!0,get:function(){return e(G).default}});var H=a("./renderers/webgl/managers/WebGLManager");Object.defineProperty(c,"WebGLManager",{enumerable:!0,get:function(){return e(H).default}});var I=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(c,"ObjectRenderer",{enumerable:!0,get:function(){return e(I).default}});var J=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(c,"RenderTarget",{enumerable:!0,get:function(){return e(J).default}});var K=a("./renderers/webgl/utils/Quad");Object.defineProperty(c,"Quad",{enumerable:!0,get:function(){return e(K).default}});var L=a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(c,"SpriteMaskFilter",{enumerable:!0,get:function(){return e(L).default}});var M=a("./renderers/webgl/filters/Filter");Object.defineProperty(c,"Filter",{enumerable:!0,get:function(){return e(M).default}}),c.autoDetectRenderer=f;var N=a("./utils"),O=d(N),P=a("./ticker"),Q=d(P),R=a("./settings"),S=e(R),T=a("./renderers/canvas/CanvasRenderer"),U=e(T),V=a("./renderers/webgl/WebGLRenderer"),W=e(V);c.settings=S.default,c.utils=O,c.ticker=Q,c.CanvasRenderer=U.default,c.WebGLRenderer=W.default},{"./Shader":41,"./const":42,"./display/Bounds":43,"./display/Container":44,"./display/DisplayObject":45,"./display/Transform":46,"./display/TransformBase":47,"./display/TransformStatic":48,"./graphics/Graphics":49,"./graphics/GraphicsData":50,"./graphics/canvas/CanvasGraphicsRenderer":51,"./graphics/webgl/GraphicsRenderer":53,"./math":66,"./renderers/canvas/CanvasRenderer":73,"./renderers/canvas/utils/CanvasRenderTarget":75,"./renderers/webgl/WebGLRenderer":80,"./renderers/webgl/filters/Filter":82,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":85,"./renderers/webgl/managers/WebGLManager":89,"./renderers/webgl/utils/ObjectRenderer":90,"./renderers/webgl/utils/Quad":91,"./renderers/webgl/utils/RenderTarget":92,"./settings":97,"./sprites/Sprite":98,"./sprites/canvas/CanvasSpriteRenderer":99,"./sprites/canvas/CanvasTinter":100,"./sprites/webgl/SpriteRenderer":102,"./text/Text":104,"./text/TextStyle":105,"./textures/BaseRenderTexture":106,"./textures/BaseTexture":107,"./textures/RenderTexture":108,"./textures/Texture":109,"./textures/TextureUvs":110,"./textures/VideoBaseTexture":111,"./ticker":113,"./utils":117,"pixi-gl-core":12}],62:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return a<0?-1:a>0?1:0}function f(){for(var a=0;a<16;a++){var b=[];n.push(b);for(var c=0;c<16;c++)for(var d=e(i[a]*i[c]+k[a]*j[c]),f=e(j[a]*i[c]+l[a]*j[c]),g=e(i[a]*k[c]+k[a]*l[c]),o=e(j[a]*k[c]+l[a]*l[c]),p=0;p<16;p++)if(i[p]===d&&j[p]===f&&k[p]===g&&l[p]===o){b.push(p);break}}for(var q=0;q<16;q++){var r=new h.default;r.set(i[q],j[q],k[q],l[q],0,0),m.push(r)}}c.__esModule=!0;var g=a("./Matrix"),h=d(g),i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],j=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],k=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m=[],n=[];f();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return i[a]},uY:function(a){return j[a]},vX:function(a){return k[a]},vY:function(a){return l[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return n[a][b]},sub:function(a,b){return n[a][o.inv(b)]},rotate180:function(a){return 4^a},isSwapWidthHeight:function(a){return 2===(3&a)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?o.S:o.N:2*Math.abs(b)<=Math.abs(a)?a>0?o.E:o.W:b>0?a>0?o.SE:o.SW:a>0?o.NE:o.NW},matrixAppendRotationInv:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=m[o.inv(b)];e.tx=c,e.ty=d,a.append(e)}};c.default=o},{"./Matrix":63}],63:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./Point"),h=d(g),i=function(){function a(){e(this,a),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}return a.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},a.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},a.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},a.prototype.apply=function(a,b){b=b||new h.default;var c=a.x,d=a.y;return b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},a.prototype.applyInverse=function(a,b){b=b||new h.default;var c=1/(this.a*this.d+this.c*-this.b),d=a.x,e=a.y;return b.x=this.d*c*d+-this.c*c*e+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*e+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},a.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},a.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},a.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},a.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},a.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){var j=Math.sin(g),k=Math.cos(g),l=Math.cos(i),m=Math.sin(i),n=-Math.sin(h),o=Math.cos(h),p=k*e,q=j*e,r=-j*f,s=k*f;return this.a=l*p+m*r,this.b=l*q+m*s,this.c=n*p+o*r,this.d=n*q+o*s,this.tx=a+(c*p+d*r),this.ty=b+(c*q+d*s),this},a.prototype.prepend=function(a){var b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c,this.b=c*a.b+this.b*a.d,this.c=d*a.a+this.d*a.c,this.d=d*a.b+this.d*a.d}return this.tx=b*a.a+this.ty*a.c+a.tx,this.ty=b*a.b+this.ty*a.d+a.ty,this},a.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,f=-Math.atan2(-d,e),g=Math.atan2(c,b),h=Math.abs(f+g);return h<1e-5?(a.rotation=g,b<0&&e>=0&&(a.rotation+=a.rotation<=0?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=f,a.skew.y=g),a.scale.x=Math.sqrt(b*b+c*c),a.scale.y=Math.sqrt(d*d+e*e),a.position.x=this.tx,a.position.y=this.ty,a},a.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var b=new a;return b.a=this.a,b.b=this.b,b.c=this.c,b.d=this.d,b.tx=this.tx,b.ty=this.ty,b},a.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},f(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();c.default=i},{"./Point":65}],64:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this._x=e,this._y=f,this.cb=b,this.scope=c}return a.prototype.set=function(a,b){var c=a||0,d=b||(0!==b?c:0);this._x===c&&this._y===d||(this._x=c,this._y=d,this.cb.call(this.scope))},a.prototype.copy=function(a){this._x===a.x&&this._y===a.y||(this._x=a.x,this._y=a.y,this.cb.call(this.scope))},e(a,[{key:"x",get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}]),a}();c.default=f},{}],65:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this.x=b,this.y=c}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copy=function(a){this.set(a.x,a.y)},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)},a}();c.default=e},{}],66:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./Point");Object.defineProperty(c,"Point",{enumerable:!0,get:function(){return d(e).default}});var f=a("./ObservablePoint");Object.defineProperty(c,"ObservablePoint",{enumerable:!0,get:function(){return d(f).default}});var g=a("./Matrix");Object.defineProperty(c,"Matrix",{enumerable:!0,get:function(){return d(g).default}});var h=a("./GroupD8");Object.defineProperty(c,"GroupD8",{enumerable:!0,get:function(){return d(h).default}});var i=a("./shapes/Circle");Object.defineProperty(c,"Circle",{enumerable:!0,get:function(){return d(i).default}});var j=a("./shapes/Ellipse");Object.defineProperty(c,"Ellipse",{enumerable:!0,get:function(){return d(j).default}});var k=a("./shapes/Polygon");Object.defineProperty(c,"Polygon",{enumerable:!0,get:function(){return d(k).default}});var l=a("./shapes/Rectangle");Object.defineProperty(c,"Rectangle",{enumerable:!0,get:function(){return d(l).default}});var m=a("./shapes/RoundedRectangle");Object.defineProperty(c,"RoundedRectangle",{enumerable:!0,get:function(){return d(m).default}})},{"./GroupD8":62,"./Matrix":63,"./ObservablePoint":64,"./Point":65,"./shapes/Circle":67,"./shapes/Ellipse":68,"./shapes/Polygon":69,"./shapes/Rectangle":70,"./shapes/RoundedRectangle":71}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./Rectangle"),g=d(f),h=a("../../const"),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e(this,a),this.x=b,this.y=c,this.radius=d,this.type=h.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.radius*this.radius,d=this.x-a,e=this.y-b;return d*=d,e*=e,d+e<=c},a.prototype.getBounds=function(){return new g.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();c.default=i},{"../../const":42,"./Rectangle":70}],68:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./Rectangle"),g=d(f),h=a("../../const"),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,a),this.x=b,this.y=c,this.width=d,this.height=f,this.type=h.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,c+d<=1},a.prototype.getBounds=function(){return new g.default(this.x-this.width,this.y-this.height,this.width,this.height)},a}();c.default=i},{"../../const":42,"./Rectangle":70}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../Point"),g=d(f),h=a("../../const"),i=function(){function a(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];if(e(this,a),Array.isArray(c[0])&&(c=c[0]),c[0]instanceof g.default){for(var f=[],i=0,j=c.length;i<j;i++)f.push(c[i].x,c[i].y);c=f}this.closed=!0,this.points=c,this.type=h.SHAPES.POLY}return a.prototype.clone=function(){return new a(this.points.slice())},a.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])},a.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;e<d;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&a<(i-g)*((b-h)/(j-h))+g;k&&(c=!c)}return c},a}();c.default=i},{"../../const":42,"../Point":65}],70:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../const"),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this.x=b,this.y=c,this.width=e,this.height=g,this.type=f.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},a.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height},a.prototype.pad=function(a,b){a=a||0,b=b||(0!==b?a:0),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b},a.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=a.x),this.y<a.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=a.y),this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,this.height<0&&(this.height=0))},a.prototype.enlarge=function(b){if(b!==a.EMPTY){var c=Math.min(this.x,b.x),d=Math.max(this.x+this.width,b.x+b.width),e=Math.min(this.y,b.y),f=Math.max(this.y+this.height,b.y+b.height);this.x=c,this.width=d-c,this.y=e,this.height=f-e}},e(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}();c.default=g},{"../../const":42}],71:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../const"),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;d(this,a),this.x=b,this.y=c,this.width=f,this.height=g,this.radius=h,this.type=e.SHAPES.RREC}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){if(b>=this.y+this.radius&&b<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var c=a-(this.x+this.radius),d=b-(this.y+this.radius),e=this.radius*this.radius;if(c*c+d*d<=e)return!0;if(c=a-(this.x+this.width-this.radius),c*c+d*d<=e)return!0;if(d=b-(this.y+this.height-this.radius),c*c+d*d<=e)return!0;if(c=a-(this.x+this.radius),c*c+d*d<=e)return!0}return!1},a}();c.default=f},{"../../const":42}],72:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils"),j=a("../math"),k=a("../const"),l=a("../settings"),m=d(l),n=a("../display/Container"),o=d(n),p=a("../textures/RenderTexture"),q=d(p),r=a("eventemitter3"),s=d(r),t=new j.Matrix,u=function(a){function b(c,d,g,h){e(this,b);var j=f(this,a.call(this));if((0,i.sayHello)(c),h)for(var l in m.default.RENDER_OPTIONS)"undefined"==typeof h[l]&&(h[l]=m.default.RENDER_OPTIONS[l]);else h=m.default.RENDER_OPTIONS;return j.type=k.RENDERER_TYPE.UNKNOWN,j.width=d||800,j.height=g||600,j.view=h.view||document.createElement("canvas"),j.resolution=h.resolution||m.default.RESOLUTION,j.transparent=h.transparent,j.autoResize=h.autoResize||!1,j.blendModes=null,j.preserveDrawingBuffer=h.preserveDrawingBuffer,j.clearBeforeRender=h.clearBeforeRender,j.roundPixels=h.roundPixels,j._backgroundColor=0,j._backgroundColorRgba=[0,0,0,0],j._backgroundColorString="#000000",j.backgroundColor=h.backgroundColor||j._backgroundColor,j._tempDisplayObjectParent=new o.default,j._lastObjectRendered=j._tempDisplayObjectParent,j}return g(b,a),b.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},b.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds(),e=q.default.create(0|d.width,0|d.height,b,c);return t.tx=-d.x,t.ty=-d.y,this.render(a,e,!1,t,!0),e},b.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=k.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},h(b,[{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=(0,i.hex2string)(a),(0,i.hex2rgb)(a,this._backgroundColorRgba)}}]),b}(s.default);c.default=u},{"../const":42,"../display/Container":44,"../math":66,"../settings":97,"../textures/RenderTexture":108,"../utils":117,eventemitter3:3}],73:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../SystemRenderer"),i=d(h),j=a("./utils/CanvasMaskManager"),k=d(j),l=a("./utils/CanvasRenderTarget"),m=d(l),n=a("./utils/mapCanvasBlendModesToPixi"),o=d(n),p=a("../../utils"),q=a("../../const"),r=a("../../settings"),s=d(r),t=function(a){function b(c,d){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,b);var h=f(this,a.call(this,"Canvas",c,d,g));return h.type=q.RENDERER_TYPE.CANVAS,h.rootContext=h.view.getContext("2d",{alpha:h.transparent}),h.refresh=!0,h.maskManager=new k.default(h),h.smoothProperty="imageSmoothingEnabled",h.rootContext.imageSmoothingEnabled||(h.rootContext.webkitImageSmoothingEnabled?h.smoothProperty="webkitImageSmoothingEnabled":h.rootContext.mozImageSmoothingEnabled?h.smoothProperty="mozImageSmoothingEnabled":h.rootContext.oImageSmoothingEnabled?h.smoothProperty="oImageSmoothingEnabled":h.rootContext.msImageSmoothingEnabled&&(h.smoothProperty="msImageSmoothingEnabled")),h.initPlugins(),h.blendModes=(0,o.default)(),h._activeBlendMode=null,h.context=null,h.renderingToScreen=!1,h.resize(c,d),h}return g(b,a),b.prototype.render=function(a,b,c,d,e){if(this.view){this.renderingToScreen=!b,this.emit("prerender"),b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new m.default(b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):this.context=this.rootContext;var f=this.context;if(b||(this._lastObjectRendered=a),!e){var g=a.parent,h=this._tempDisplayObjectParent.transform.worldTransform;d?d.copy(h):h.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=g}f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.globalCompositeOperation=this.blendModes[q.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(f.fillStyle="black",
f.clear()),(void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?f.clearRect(0,0,this.width,this.height):(f.fillStyle=this._backgroundColorString,f.fillRect(0,0,this.width,this.height)));var i=this.context;this.context=f,a.renderCanvas(this),this.context=i,this.emit("postrender")}},b.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this._activeBlendMode=a,this.context.globalCompositeOperation=this.blendModes[a])},b.prototype.destroy=function(b){this.destroyPlugins(),a.prototype.destroy.call(this,b),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c),this.smoothProperty&&(this.rootContext[this.smoothProperty]=s.default.SCALE_MODE===q.SCALE_MODES.LINEAR)},b}(i.default);c.default=t,p.pluginTarget.mixin(t)},{"../../const":42,"../../settings":97,"../../utils":117,"../SystemRenderer":72,"./utils/CanvasMaskManager":74,"./utils/CanvasRenderTarget":75,"./utils/mapCanvasBlendModesToPixi":77}],74:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../../const"),f=function(){function a(b){d(this,a),this.renderer=b}return a.prototype.pushMask=function(a){var b=this.renderer;b.context.save();var c=a.alpha,d=a.transform.worldTransform,e=b.resolution;b.context.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),a._texture||(this.renderGraphicsShape(a),b.context.clip()),a.worldAlpha=c},a.prototype.renderGraphicsShape=function(a){var b=this.renderer.context,c=a.graphicsData.length;if(0!==c){b.beginPath();for(var d=0;d<c;d++){var f=a.graphicsData[d],g=f.shape;if(f.type===e.SHAPES.POLY){var h=g.points;b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(f.type===e.SHAPES.RECT)b.rect(g.x,g.y,g.width,g.height),b.closePath();else if(f.type===e.SHAPES.CIRC)b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath();else if(f.type===e.SHAPES.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2,n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;b.moveTo(l,t),b.bezierCurveTo(l,t-p,s-o,m,s,m),b.bezierCurveTo(s+o,m,q,t-p,q,t),b.bezierCurveTo(q,t+p,s+o,r,s,r),b.bezierCurveTo(s-o,r,l,t+p,l,t),b.closePath()}else if(f.type===e.SHAPES.RREC){var u=g.x,v=g.y,w=g.width,x=g.height,y=g.radius,z=Math.min(w,x)/2|0;y=y>z?z:y,b.moveTo(u,v+y),b.lineTo(u,v+x-y),b.quadraticCurveTo(u,v+x,u+y,v+x),b.lineTo(u+w-y,v+x),b.quadraticCurveTo(u+w,v+x,u+w,v+x-y),b.lineTo(u+w,v+y),b.quadraticCurveTo(u+w,v,u+w-y,v),b.lineTo(u+y,v),b.quadraticCurveTo(u,v,u,v+y),b.closePath()}}}},a.prototype.popMask=function(a){a.context.restore()},a.prototype.destroy=function(){},a}();c.default=f},{"../../../const":42}],75:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../../../settings"),h=d(g),i=h.default.RESOLUTION,j=function(){function a(b,c,d){e(this,a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=d||i,this.resize(b,c)}return a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(a,b){this.canvas.width=a*this.resolution,this.canvas.height=b*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},f(a,[{key:"width",get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},{key:"height",get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}]),a}();c.default=j},{"../../../settings":97}],76:[function(a,b,c){"use strict";function d(a){var b=document.createElement("canvas");b.width=6,b.height=1;var c=b.getContext("2d");return c.fillStyle=a,c.fillRect(0,0,6,1),b}function e(){if("undefined"==typeof document)return!1;var a=d("#ff00ff"),b=d("#ffff00"),c=document.createElement("canvas");c.width=6,c.height=1;var e=c.getContext("2d");e.globalCompositeOperation="multiply",e.drawImage(a,0,0),e.drawImage(b,2,0);var f=e.getImageData(2,0,1,1);if(!f)return!1;var g=f.data;return 255===g[0]&&0===g[1]&&0===g[2]}c.__esModule=!0,c.default=e},{}],77:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h.default)()?(a[f.BLEND_MODES.NORMAL]="source-over",a[f.BLEND_MODES.ADD]="lighter",a[f.BLEND_MODES.MULTIPLY]="multiply",a[f.BLEND_MODES.SCREEN]="screen",a[f.BLEND_MODES.OVERLAY]="overlay",a[f.BLEND_MODES.DARKEN]="darken",a[f.BLEND_MODES.LIGHTEN]="lighten",a[f.BLEND_MODES.COLOR_DODGE]="color-dodge",a[f.BLEND_MODES.COLOR_BURN]="color-burn",a[f.BLEND_MODES.HARD_LIGHT]="hard-light",a[f.BLEND_MODES.SOFT_LIGHT]="soft-light",a[f.BLEND_MODES.DIFFERENCE]="difference",a[f.BLEND_MODES.EXCLUSION]="exclusion",a[f.BLEND_MODES.HUE]="hue",a[f.BLEND_MODES.SATURATION]="saturate",a[f.BLEND_MODES.COLOR]="color",a[f.BLEND_MODES.LUMINOSITY]="luminosity"):(a[f.BLEND_MODES.NORMAL]="source-over",a[f.BLEND_MODES.ADD]="lighter",a[f.BLEND_MODES.MULTIPLY]="source-over",a[f.BLEND_MODES.SCREEN]="source-over",a[f.BLEND_MODES.OVERLAY]="source-over",a[f.BLEND_MODES.DARKEN]="source-over",a[f.BLEND_MODES.LIGHTEN]="source-over",a[f.BLEND_MODES.COLOR_DODGE]="source-over",a[f.BLEND_MODES.COLOR_BURN]="source-over",a[f.BLEND_MODES.HARD_LIGHT]="source-over",a[f.BLEND_MODES.SOFT_LIGHT]="source-over",a[f.BLEND_MODES.DIFFERENCE]="source-over",a[f.BLEND_MODES.EXCLUSION]="source-over",a[f.BLEND_MODES.HUE]="source-over",a[f.BLEND_MODES.SATURATION]="source-over",a[f.BLEND_MODES.COLOR]="source-over",a[f.BLEND_MODES.LUMINOSITY]="source-over"),a}c.__esModule=!0,c.default=e;var f=a("../../../const"),g=a("./canUseNewCanvasBlendModes"),h=d(g)},{"../../../const":42,"./canUseNewCanvasBlendModes":76}],78:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../const"),g=a("../../settings"),h=d(g),i=function(){function a(b){e(this,a),this.renderer=b,this.count=0,this.checkCount=0,this.maxIdle=h.default.GC_MAX_IDLE,this.checkCountMax=h.default.GC_MAX_CHECK_COUNT,this.mode=h.default.GC_MODE}return a.prototype.update=function(){this.count++,this.mode!==f.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},a.prototype.run=function(){for(var a=this.renderer.textureManager,b=a._managedTextures,c=!1,d=0;d<b.length;d++){var e=b[d];!e._glRenderTargets&&this.count-e.touched>this.maxIdle&&(a.destroyTexture(e,!0),b[d]=null,c=!0)}if(c){for(var f=0,g=0;g<b.length;g++)null!==b[g]&&(b[f++]=b[g]);b.length=f}},a.prototype.unload=function(a){var b=this.renderer.textureManager;a._texture&&b.destroyTexture(a._texture,!0);for(var c=a.children.length-1;c>=0;c--)this.unload(a.children[c])},a}();c.default=i},{"../../const":42,"../../settings":97}],79:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=a("../../const"),h=a("./utils/RenderTarget"),i=d(h),j=a("../../utils"),k=function(){function a(b){e(this,a),this.renderer=b,this.gl=b.gl,this._managedTextures=[]}return a.prototype.bindTexture=function(){},a.prototype.getTexture=function(){},a.prototype.updateTexture=function(a,b){b=b||0;var c=this.gl,d=!!a._glRenderTargets;if(!a.hasLoaded)return null;c.activeTexture(c.TEXTURE0+b);var e=a._glTextures[this.renderer.CONTEXT_UID];if(e)d?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):e.upload(a.source);else{if(d){var h=new i.default(this.gl,a.width,a.height,a.scaleMode,a.resolution);h.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=h,e=h.texture}else e=new f.GLTexture(this.gl,null,null,null,null),e.bind(b),e.premultiplyAlpha=!0,e.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=e,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&e.enableMipmap(),a.wrapMode===g.WRAP_MODES.CLAMP?e.enableWrapClamp():a.wrapMode===g.WRAP_MODES.REPEAT?e.enableWrapRepeat():e.enableWrapMirrorRepeat()):e.enableWrapClamp(),a.scaleMode===g.SCALE_MODES.NEAREST?e.enableNearestScaling():e.enableLinearScaling()}return this.renderer.boundTextures[b]=a,e},a.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(a),a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.renderer.CONTEXT_UID],!b)){var c=this._managedTextures.indexOf(a);c!==-1&&(0,j.removeItems)(this._managedTextures,c,1)}},a.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]}},a.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];this.destroyTexture(b,!0),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this)}this._managedTextures=null},a}();c.default=k},{"../../const":42,"../../utils":117,"./utils/RenderTarget":92,"pixi-gl-core":12}],80:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../SystemRenderer"),i=d(h),j=a("./managers/MaskManager"),k=d(j),l=a("./managers/StencilManager"),m=d(l),n=a("./managers/FilterManager"),o=d(n),p=a("./utils/RenderTarget"),q=d(p),r=a("./utils/ObjectRenderer"),s=d(r),t=a("./TextureManager"),u=d(t),v=a("../../textures/BaseTexture"),w=d(v),x=a("./TextureGarbageCollector"),y=d(x),z=a("./WebGLState"),A=d(z),B=a("./utils/mapWebGLDrawModesToPixi"),C=d(B),D=a("./utils/validateContext"),E=d(D),F=a("../../utils"),G=a("pixi-gl-core"),H=d(G),I=a("../../const"),J=0,K=function(a){function b(c,d){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,b);var h=f(this,a.call(this,"WebGL",c,d,g));return h.type=I.RENDERER_TYPE.WEBGL,h.handleContextLost=h.handleContextLost.bind(h),h.handleContextRestored=h.handleContextRestored.bind(h),h.view.addEventListener("webglcontextlost",h.handleContextLost,!1),h.view.addEventListener("webglcontextrestored",h.handleContextRestored,!1),h._contextOptions={alpha:h.transparent,antialias:g.antialias,premultipliedAlpha:h.transparent&&"notMultiplied"!==h.transparent,stencil:!0,preserveDrawingBuffer:g.preserveDrawingBuffer},h._backgroundColorRgba[3]=h.transparent?0:1,h.maskManager=new k.default(h),h.stencilManager=new m.default(h),h.emptyRenderer=new s.default(h),h.currentRenderer=h.emptyRenderer,h.initPlugins(),g.context&&(0,E.default)(g.context),h.gl=g.context||H.default.createContext(h.view,h._contextOptions),h.CONTEXT_UID=J++,h.state=new A.default(h.gl),h.renderingToScreen=!0,h.boundTextures=null,h._initContext(),h.filterManager=new o.default(h),h.drawModes=(0,C.default)(h.gl),h._activeShader=null,h._activeVao=null,h._activeRenderTarget=null,h._nextTextureLocation=0,h.setBlendMode(0),h}return g(b,a),b.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext();var b=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(b),this.emptyTextures=new Array(b),this.textureManager=new u.default(this),this.textureGC=new y.default(this),this.state.resetToDefault(),this.rootRenderTarget=new q.default(a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var c=new H.default.GLTexture.fromData(a,null,1,1),d={_glTextures:{}};d._glTextures[this.CONTEXT_UID]={};for(var e=0;e<b;e++){var f=new w.default;f._glTextures[this.CONTEXT_UID]=c,this.boundTextures[e]=d,this.emptyTextures[e]=f,this.bindTexture(null,e)}this.emit("context",a),this.resize(this.width,this.height)},b.prototype.render=function(a,b,c,d,e){if(this.renderingToScreen=!b,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,b||(this._lastObjectRendered=a),!e){var f=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=f}this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},b.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},b.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},b.prototype.resize=function(a,b){i.default.prototype.resize.call(this,a,b),this.rootRenderTarget.resize(a,b),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},b.prototype.setBlendMode=function(a){this.state.setBlendMode(a)},b.prototype.clear=function(a){this._activeRenderTarget.clear(a)},b.prototype.setTransform=function(a){this._activeRenderTarget.transform=a},b.prototype.bindRenderTexture=function(a,b){var c=void 0;if(a){var d=a.baseTexture;d._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(d,0),this.unbindTexture(d),c=d._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)}else c=this.rootRenderTarget;return c.transform=b,this.bindRenderTarget(c),this},b.prototype.bindRenderTarget=function(a){return a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack)),this},b.prototype.bindShader=function(a){return this._activeShader!==a&&(this._activeShader=a,a.bind(),a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},b.prototype.bindTexture=function(a,b,c){if(a=a||this.emptyTextures[b],a=a.baseTexture||a,a.touched=this.textureGC.count,c)b=b||0;else{for(var d=0;d<this.boundTextures.length;d++)if(this.boundTextures[d]===a)return d;void 0===b&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,b=this.boundTextures.length-this._nextTextureLocation-1)}var e=this.gl,f=a._glTextures[this.CONTEXT_UID];return f?(this.boundTextures[b]=a,e.activeTexture(e.TEXTURE0+b),e.bindTexture(e.TEXTURE_2D,f.texture)):this.textureManager.updateTexture(a,b),b},b.prototype.unbindTexture=function(a){var b=this.gl;a=a.baseTexture||a;for(var c=0;c<this.boundTextures.length;c++)this.boundTextures[c]===a&&(this.boundTextures[c]=this.emptyTextures[c],b.activeTexture(b.TEXTURE0+c),b.bindTexture(b.TEXTURE_2D,this.emptyTextures[c]._glTextures[this.CONTEXT_UID].texture));return this},b.prototype.createVao=function(){return new H.default.VertexArrayObject(this.gl,this.state.attribState)},b.prototype.bindVao=function(a){return this._activeVao===a?this:(a?a.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=a,this)},b.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},b.prototype.handleContextLost=function(a){a.preventDefault()},b.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},b.prototype.destroy=function(b){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),a.prototype.destroy.call(this,b),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},b}(i.default);c.default=K,F.pluginTarget.mixin(K)},{"../../const":42,"../../textures/BaseTexture":107,"../../utils":117,"../SystemRenderer":72,"./TextureGarbageCollector":78,"./TextureManager":79,"./WebGLState":81,"./managers/FilterManager":86,"./managers/MaskManager":87,"./managers/StencilManager":88,"./utils/ObjectRenderer":90,"./utils/RenderTarget":92,"./utils/mapWebGLDrawModesToPixi":95,"./utils/validateContext":96,"pixi-gl-core":12}],81:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./utils/mapWebGLBlendModesToPixi"),g=d(f),h=0,i=1,j=2,k=3,l=4,m=function(){function a(b){e(this,a),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=b,this.maxAttribs=b.getParameter(b.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,g.default)(b),this.nativeVaoExtension=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object")}return a.prototype.push=function(){var a=this.stack[++this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16));for(var b=0;b<this.activeState.length;b++)this.activeState[b]=a[b]},a.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)},a.prototype.setState=function(a){this.setBlend(a[h]),this.setDepthTest(a[i]),this.setFrontFace(a[j]),this.setCullFace(a[k]),this.setBlendMode(a[l])},a.prototype.setBlend=function(a){a=a?1:0,this.activeState[h]!==a&&(this.activeState[h]=a,this.gl[a?"enable":"disable"](this.gl.BLEND))},a.prototype.setBlendMode=function(a){a!==this.activeState[l]&&(this.activeState[l]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))},a.prototype.setDepthTest=function(a){a=a?1:0,this.activeState[i]!==a&&(this.activeState[i]=a,this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST))},a.prototype.setCullFace=function(a){a=a?1:0,this.activeState[k]!==a&&(this.activeState[k]=a,this.gl[a?"enable":"disable"](this.gl.CULL_FACE))},a.prototype.setFrontFace=function(a){a=a?1:0,this.activeState[j]!==a&&(this.activeState[j]=a,this.gl.frontFace(this.gl[a?"CW":"CCW"]))},a.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(var b=0;b<this.attribState.attribState.length;b++)this.attribState.attribState[b]=0;for(var c=1;c<this.maxAttribs;c++)this.gl.disableVertexAttribArray(c)},a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var a=0;a<this.activeState.length;++a)this.activeState[a]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},a}();c.default=m},{"./utils/mapWebGLBlendModesToPixi":94}],82:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./extractUniformsFromSrc"),h=d(g),i=a("../../../utils"),j=a("../../../const"),k={},l=function(){function a(b,c,d){e(this,a),this.vertexSrc=b||a.defaultVertexSrc,this.fragmentSrc=c||a.defaultFragmentSrc,this.blendMode=j.BLEND_MODES.NORMAL,this.uniformData=d||(0,h.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var f in this.uniformData)this.uniforms[f]=this.uniformData[f].value;this.glShaders={},k[this.vertexSrc+this.fragmentSrc]||(k[this.vertexSrc+this.fragmentSrc]=(0,i.uid)()),this.glShaderKey=k[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}return a.prototype.apply=function(a,b,c,d){a.applyFilter(this,b,c,d)},f(a,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),a}();c.default=l},{"../../../const":42,"../../../utils":117,"./extractUniformsFromSrc":83}],83:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=f(a,c),e=f(b,c);return Object.assign(d,e)}function f(a){for(var b=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),c={},d=void 0,e=a.replace(/\s+/g," ").split(/\s*;\s*/),f=0;f<e.length;f++){var g=e[f].trim();if(g.indexOf("uniform")>-1){var h=g.split(" "),j=h[1],k=h[2],l=1;k.indexOf("[")>-1&&(d=k.split(/\[|]/),k=d[0],l*=Number(d[1])),k.match(b)||(c[k]={value:i(j,l),name:k,type:j})}}return c}c.__esModule=!0,c.default=e;var g=a("pixi-gl-core"),h=d(g),i=h.default.shader.defaultValue},{"pixi-gl-core":12}],84:[function(a,b,c){"use strict";function d(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d}function e(a,b,c){var d=a.identity();d.translate(b.x/c.width,b.y/c.height);var e=c.width/b.width,f=c.height/b.height;return d.scale(e,f),d}function f(a,b,c,d){var e=d.worldTransform.copy(g.Matrix.TEMP_MATRIX),f=d._texture.baseTexture,h=a.identity(),i=c.height/c.width;h.translate(b.x/c.width,b.y/c.height),h.scale(1,i);var j=c.width/f.width,k=c.height/f.height;return e.tx/=f.width*j,e.ty/=f.width*j,e.invert(),h.prepend(e),h.scale(1,1/i),h.scale(j,k),h.translate(d.anchor.x,d.anchor.y),h}c.__esModule=!0,c.calculateScreenSpaceMatrix=d,c.calculateNormalizedScreenSpaceMatrix=e,c.calculateSpriteMatrix=f;var g=a("../../../math")},{"../../../math":66}],85:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../Filter"),i=d(h),j=a("../../../../math"),k=(a("path"),function(a){function b(c){e(this,b);var d=new j.Matrix,g=f(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return c.renderable=!1,g.maskSprite=c,g.maskMatrix=d,g}return g(b,a),b.prototype.apply=function(a,b,c){var d=this.maskSprite;this.uniforms.mask=d._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d),this.uniforms.alpha=d.worldAlpha,a.applyFilter(this,b,c)},b}(i.default));c.default=k},{"../../../../math":66,"../Filter":82,path:22}],86:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var i=a("./WebGLManager"),j=e(i),k=a("../utils/RenderTarget"),l=e(k),m=a("../utils/Quad"),n=e(m),o=a("../../../math"),p=a("../../../Shader"),q=e(p),r=a("../filters/filterTransforms"),s=d(r),t=a("bit-twiddle"),u=e(t),v=function a(){h(this,a),this.renderTarget=null,this.sourceFrame=new o.Rectangle,this.destinationFrame=new o.Rectangle,this.filters=[],this.target=null,this.resolution=1},w=function(a){function b(c){h(this,b);var d=f(this,a.call(this,c));return d.gl=d.renderer.gl,d.quad=new n.default(d.gl,c.state.attribState),d.shaderCache={},d.pool={},d.filterData=null,d}return g(b,a),b.prototype.pushFilter=function(a,b){var c=this.renderer,d=this.filterData;if(!d){d=this.renderer._activeRenderTarget.filterStack;var e=new v;e.sourceFrame=e.destinationFrame=this.renderer._activeRenderTarget.size,e.renderTarget=c._activeRenderTarget,this.renderer._activeRenderTarget.filterData=d={index:0,stack:[e]},this.filterData=d}var f=d.stack[++d.index];f||(f=d.stack[d.index]=new v);var g=b[0].resolution,h=0|b[0].padding,i=a.filterArea||a.getBounds(!0),j=f.sourceFrame,k=f.destinationFrame;j.x=(i.x*g|0)/g,j.y=(i.y*g|0)/g,j.width=(i.width*g|0)/g,j.height=(i.height*g|0)/g,d.stack[0].renderTarget.transform||j.fit(d.stack[0].destinationFrame),j.pad(h),k.width=j.width,k.height=j.height;var l=this.getPotRenderTarget(c.gl,j.width,j.height,g);f.target=a,f.filters=b,f.resolution=g,f.renderTarget=l,l.setFrame(k,j),c.bindRenderTarget(l),c.clear()},b.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var d=c.filters;if(1===d.length)d[0].apply(this,c.renderTarget,b.renderTarget,!1),this.freePotRenderTarget(c.renderTarget);else{var e=c.renderTarget,f=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,c.resolution);f.setFrame(c.destinationFrame,c.sourceFrame);var g=0;for(g=0;g<d.length-1;++g){d[g].apply(this,e,f,!0);var h=e;e=f,f=h}d[g].apply(this,e,b.renderTarget,!1),this.freePotRenderTarget(e),this.freePotRenderTarget(f)}a.index--,0===a.index&&(this.filterData=null)},b.prototype.applyFilter=function(a,b,c,d){var e=this.renderer,f=e.gl,g=a.glShaders[e.CONTEXT_UID];g||(a.glShaderKey?(g=this.shaderCache[a.glShaderKey],g||(g=new q.default(this.gl,a.vertexSrc,a.fragmentSrc),a.glShaders[e.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=g)):g=a.glShaders[e.CONTEXT_UID]=new q.default(this.gl,a.vertexSrc,a.fragmentSrc),e.bindVao(null),this.quad.initVao(g)),e.bindVao(this.quad.vao),e.bindRenderTarget(c),d&&(f.disable(f.SCISSOR_TEST),e.clear(),f.enable(f.SCISSOR_TEST)),c===e.maskManager.scissorRenderTarget&&e.maskManager.pushScissorMask(null,e.maskManager.scissorData),e.bindShader(g),this.syncUniforms(g,a),e.state.setBlendMode(a.blendMode);var h=this.renderer.boundTextures[0];f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,b.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),f.bindTexture(f.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},b.prototype.syncUniforms=function(a,b){var c=b.uniformData,d=b.uniforms,e=1,f=void 0;if(a.uniforms.data.filterArea){f=this.filterData.stack[this.filterData.index];var g=a.uniforms.filterArea;g[0]=f.renderTarget.size.width,g[1]=f.renderTarget.size.height,g[2]=f.sourceFrame.x,g[3]=f.sourceFrame.y,a.uniforms.filterArea=g}if(a.uniforms.data.filterClamp){f=this.filterData.stack[this.filterData.index];var h=a.uniforms.filterClamp;h[0]=0,h[1]=0,h[2]=(f.sourceFrame.width-1)/f.renderTarget.size.width,h[3]=(f.sourceFrame.height-1)/f.renderTarget.size.height,a.uniforms.filterClamp=h}for(var i in c)if("sampler2D"===c[i].type&&0!==d[i]){if(d[i].baseTexture)a.uniforms[i]=this.renderer.bindTexture(d[i].baseTexture,e);else{a.uniforms[i]=e;var j=this.renderer.gl;j.activeTexture(j.TEXTURE0+e),d[i].texture.bind()}e++}else if("mat3"===c[i].type)void 0!==d[i].a?a.uniforms[i]=d[i].toArray(!0):a.uniforms[i]=d[i];else if("vec2"===c[i].type)if(void 0!==d[i].x){var k=a.uniforms[i]||new Float32Array(2);k[0]=d[i].x,k[1]=d[i].y,a.uniforms[i]=k}else a.uniforms[i]=d[i];else"float"===c[i].type?a.uniforms.data[i].value!==c[i]&&(a.uniforms[i]=d[i]):a.uniforms[i]=d[i]},b.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],d=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,b||c.resolution);return d.setFrame(c.destinationFrame,c.sourceFrame),d},b.prototype.returnRenderTarget=function(a){this.freePotRenderTarget(a)},b.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return s.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)},b.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return s.calculateNormalizedScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size,b.destinationFrame)},b.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return s.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b);
},b.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},b.prototype.getPotRenderTarget=function(a,b,c,d){b=u.default.nextPow2(b*d),c=u.default.nextPow2(c*d);var e=(65535&b)<<16|65535&c;this.pool[e]||(this.pool[e]=[]);var f=this.pool[e].pop();if(!f){var g=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0),f=new l.default(a,b,c,null,1),a.bindTexture(a.TEXTURE_2D,g._glTextures[this.renderer.CONTEXT_UID].texture)}return f.resolution=d,f.defaultFrame.width=f.size.width=b/d,f.defaultFrame.height=f.size.height=c/d,f},b.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}},b.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,d=(65535&b)<<16|65535&c;this.pool[d].push(a)},b}(j.default);c.default=w},{"../../../Shader":41,"../../../math":66,"../filters/filterTransforms":84,"../utils/Quad":91,"../utils/RenderTarget":92,"./WebGLManager":89,"bit-twiddle":1}],87:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./WebGLManager"),i=d(h),j=a("../filters/spriteMask/SpriteMaskFilter"),k=d(j),l=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.scissor=!1,d.scissorData=null,d.scissorRenderTarget=null,d.enableScissor=!0,d.alphaMaskPool=[],d.alphaMaskIndex=0,d}return g(b,a),b.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,d=Math.atan2(c.b,c.a);d=Math.round(d*(180/Math.PI)),d%90?this.pushStencilMask(b):this.pushScissorMask(a,b)}else this.pushStencilMask(b)},b.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)},b.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new k.default(b)]),c[0].resolution=this.renderer.resolution,c[0].maskSprite=b,a.filterArea=b.getBounds(!0),this.renderer.filterManager.pushFilter(a,c),this.alphaMaskIndex++},b.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},b.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},b.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},b.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size),b.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e),this.scissorRenderTarget=c,this.scissorData=b,this.scissor=!0},b.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)},b}(i.default);c.default=l},{"../filters/spriteMask/SpriteMaskFilter":85,"./WebGLManager":89}],88:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./WebGLManager"),i=d(h),j=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.stencilMaskStack=null,d}return g(b,a),b.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},b.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,1,1)),c.push(a),b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.INCR),this.renderer.plugins.graphics.render(a),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},b.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack,c=b.pop();0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(c),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))},b.prototype.destroy=function(){i.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},b}(i.default);c.default=j},{"./WebGLManager":89}],89:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.renderer=b,this.renderer.on("context",this.onContextChange,this)}return a.prototype.onContextChange=function(){},a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},a}();c.default=e},{}],90:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../managers/WebGLManager"),i=d(h),j=function(a){function b(){return e(this,b),f(this,a.apply(this,arguments))}return g(b,a),b.prototype.start=function(){},b.prototype.stop=function(){this.flush()},b.prototype.flush=function(){},b.prototype.render=function(a){},b}(i.default);c.default=j},{"../managers/WebGLManager":89}],91:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=a("../../../utils/createIndicesForQuads"),i=d(h),j=function(){function a(b,c){e(this,a),this.gl=b,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var d=0;d<4;d++)this.interleaved[4*d]=this.vertices[2*d],this.interleaved[4*d+1]=this.vertices[2*d+1],this.interleaved[4*d+2]=this.uvs[2*d],this.interleaved[4*d+3]=this.uvs[2*d+1];this.indices=(0,i.default)(1),this.vertexBuffer=g.default.GLBuffer.createVertexBuffer(b,this.interleaved,b.STATIC_DRAW),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),this.vao=new g.default.VertexArrayObject(b,c)}return a.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this},a.prototype.upload=function(){for(var a=0;a<4;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},a}();c.default=j},{"../../../utils/createIndicesForQuads":115,"pixi-gl-core":12}],92:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../../math"),g=a("../../../const"),h=a("../../../settings"),i=d(h),j=a("pixi-gl-core"),k=function(){function a(b,c,d,h,k,l){e(this,a),this.gl=b,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new f.Rectangle(0,0,1,1),this.resolution=k||i.default.RESOLUTION,this.projectionMatrix=new f.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new f.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=h||i.default.SCALE_MODE,this.root=l,this.root?(this.frameBuffer=new j.GLFramebuffer(b,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=j.GLFramebuffer.createRGBA(b,100,100),this.scaleMode===g.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(c,d)}return a.prototype.clear=function(a){var b=a||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])},a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},a.prototype.setFrame=function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a},a.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST),a.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},a.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a,c.identity(),this.root?(c.a=1/a.width*2,c.d=-1/a.height*2,c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=1/a.width*2,c.d=1/a.height*2,c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)},a.prototype.resize=function(a,b){if(a|=0,b|=0,this.size.width!==a||this.size.height!==b){this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution);var c=this.frame||this.size;this.calculateProjection(c)}},a.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},a}();c.default=k},{"../../../const":42,"../../../math":66,"../../../settings":97,"pixi-gl-core":12}],93:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c=!b;if(c){var d=document.createElement("canvas");d.width=1,d.height=1,b=h.default.createContext(d)}for(var e=b.createShader(b.FRAGMENT_SHADER);;){var g=i.replace(/%forloop%/gi,f(a));if(b.shaderSource(e,g),b.compileShader(e),b.getShaderParameter(e,b.COMPILE_STATUS))break;a=a/2|0}return c&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a}function f(a){for(var b="",c=0;c<a;++c)c>0&&(b+="\nelse "),c<a-1&&(b+="if(test == "+c+".0){}");return b}c.__esModule=!0,c.default=e;var g=a("pixi-gl-core"),h=d(g),i=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],94:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return b[e.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[e.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[e.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}c.__esModule=!0,c.default=d;var e=a("../../../const")},{"../../../const":42}],95:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b[e.DRAW_MODES.POINTS]=a.POINTS,b[e.DRAW_MODES.LINES]=a.LINES,b[e.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[e.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[e.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[e.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[e.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN,b}c.__esModule=!0,c.default=d;var e=a("../../../const")},{"../../../const":42}],96:[function(a,b,c){"use strict";function d(a){var b=a.getContextAttributes();b.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}c.__esModule=!0,c.default=d},{}],97:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./utils/maxRecommendedTextures"),f=d(e),g=a("./utils/canUploadSameBuffer"),h=d(g);c.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,f.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,h.default)()}},{"./utils/canUploadSameBuffer":114,"./utils/maxRecommendedTextures":118}],98:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("../utils"),k=a("../const"),l=a("../textures/Texture"),m=d(l),n=a("../display/Container"),o=d(n),p=new i.Point,q=function(a){function b(c){e(this,b);var d=f(this,a.call(this));return d._anchor=new i.ObservablePoint(d._onAnchorUpdate,d),d._texture=null,d._width=0,d._height=0,d._tint=null,d._tintRGB=null,d.tint=16777215,d.blendMode=k.BLEND_MODES.NORMAL,d.shader=null,d.cachedTint=16777215,d.texture=c||m.default.EMPTY,d.vertexData=new Float32Array(8),d.vertexTrimmedData=null,d._transformID=-1,d._textureID=-1,d.pluginName="sprite",d}return g(b,a),b.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=(0,j.sign)(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=(0,j.sign)(this.scale.y)*this._height/this.texture.orig.height)},b.prototype._onAnchorUpdate=function(){this._transformID=-1},b.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var a=this._texture,b=this.transform.worldTransform,c=b.a,d=b.b,e=b.c,f=b.d,g=b.tx,h=b.ty,i=this.vertexData,j=a.trim,k=a.orig,l=this._anchor,m=0,n=0,o=0,p=0;j?(n=j.x-l._x*k.width,m=n+j.width,p=j.y-l._y*k.height,o=p+j.height):(m=k.width*(1-l._x),n=k.width*-l._x,o=k.height*(1-l._y),p=k.height*-l._y),i[0]=c*n+e*p+g,i[1]=f*p+d*n+h,i[2]=c*m+e*p+g,i[3]=f*p+d*m+h,i[4]=c*m+e*o+g,i[5]=f*o+d*m+h,i[6]=c*n+e*o+g,i[7]=f*o+d*n+h}},b.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var a=this._texture,b=this.vertexTrimmedData,c=a.orig,d=this._anchor,e=this.transform.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=c.width*(1-d._x),m=c.width*-d._x,n=c.height*(1-d._y),o=c.height*-d._y;b[0]=f*m+h*o+j,b[1]=i*o+g*m+k,b[2]=f*l+h*o+j,b[3]=i*o+g*l+k,b[4]=f*l+h*n+j,b[5]=i*n+g*l+k,b[6]=f*m+h*n+j,b[7]=i*n+g*m+k},b.prototype._renderWebGL=function(a){this.calculateVertices(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)},b.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var b=this._texture.orig.width,c=this._texture.orig.height,d=-b*this.anchor.x,e=0;return p.x>d&&p.x<d+b&&(e=-c*this.anchor.y,p.y>e&&p.y<e+c)},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b),this._anchor=null;var c="boolean"==typeof b?b:b&&b.texture;if(c){var d="boolean"==typeof b?b:b&&b.baseTexture;this._texture.destroy(!!d)}this._texture=null,this.shader=null},b.from=function(a){return new b(m.default.from(a))},b.fromFrame=function(a){var c=j.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return new b(c)},b.fromImage=function(a,c,d){return new b(m.default.fromImage(a,c,d))},h(b,[{key:"width",get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){var b=(0,j.sign)(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},{key:"height",get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(a){var b=(0,j.sign)(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},{key:"anchor",get:function(){return this._anchor},set:function(a){this._anchor.copy(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}},{key:"texture",get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureID=-1,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}]),b}(o.default);c.default=q},{"../const":42,"../display/Container":44,"../math":66,"../textures/Texture":109,"../utils":117}],99:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../renderers/canvas/CanvasRenderer"),g=d(f),h=a("../../const"),i=a("../../math"),j=a("./CanvasTinter"),k=d(j),l=new i.Matrix,m=function(){function a(b){e(this,a),this.renderer=b}return a.prototype.render=function(a){var b=a._texture,c=this.renderer,d=b._frame.width,e=b._frame.height,f=a.transform.worldTransform,g=0,j=0;if(!(b.orig.width<=0||b.orig.height<=0)&&b.baseTexture.source&&(c.setBlendMode(a.blendMode),b.valid)){c.context.globalAlpha=a.worldAlpha;var m=b.baseTexture.scaleMode===h.SCALE_MODES.LINEAR;c.smoothProperty&&c.context[c.smoothProperty]!==m&&(c.context[c.smoothProperty]=m),b.trim?(g=b.trim.width/2+b.trim.x-a.anchor.x*b.orig.width,j=b.trim.height/2+b.trim.y-a.anchor.y*b.orig.height):(g=(.5-a.anchor.x)*b.orig.width,j=(.5-a.anchor.y)*b.orig.height),b.rotate&&(f.copy(l),f=l,i.GroupD8.matrixAppendRotationInv(f,b.rotate,g,j),g=0,j=0),g-=d/2,j-=e/2,c.roundPixels?(c.context.setTransform(f.a,f.b,f.c,f.d,f.tx*c.resolution|0,f.ty*c.resolution|0),g|=0,j|=0):c.context.setTransform(f.a,f.b,f.c,f.d,f.tx*c.resolution,f.ty*c.resolution);var n=b.baseTexture.resolution;16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=k.default.getTintedTexture(a,a.tint)),c.context.drawImage(a.tintedTexture,0,0,d*n,e*n,g*c.resolution,j*c.resolution,d*c.resolution,e*c.resolution)):c.context.drawImage(b.baseTexture.source,b._frame.x*n,b._frame.y*n,d*n,e*n,g*c.resolution,j*c.resolution,d*c.resolution,e*c.resolution)}},a.prototype.destroy=function(){this.renderer=null},a}();c.default=m,g.default.registerPlugin("sprite",m)},{"../../const":42,"../../math":66,"../../renderers/canvas/CanvasRenderer":73,"./CanvasTinter":100}],100:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("../../utils"),f=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),g=d(f),h={getTintedTexture:function(a,b){var c=a.texture;b=h.roundColor(b);var d="#"+("00000"+(0|b).toString(16)).substr(-6);if(c.tintCache=c.tintCache||{},c.tintCache[d])return c.tintCache[d];var e=h.canvas||document.createElement("canvas");if(h.tintMethod(c,b,e),h.convertTintToImage){var f=new Image;f.src=e.toDataURL(),c.tintCache[d]=f}else c.tintCache[d]=e,h.canvas=null;return e},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithPerPixel:function(a,b,c){var d=c.getContext("2d"),f=a._frame.clone(),g=a.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,c.width=f.width,c.height=f.height,d.globalCompositeOperation="copy",d.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var h=(0,e.hex2rgb)(b),i=h[0],j=h[1],k=h[2],l=d.getImageData(0,0,f.width,f.height),m=l.data,n=0;n<m.length;n+=4)m[n+0]*=i,m[n+1]*=j,m[n+2]*=k;d.putImageData(l,0,0)},roundColor:function(a){var b=h.cacheStepsPerColorChannel,c=(0,e.hex2rgb)(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),(0,e.rgb2hex)(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,g.default)(),tintMethod:0};h.tintMethod=h.canUseMultiply?h.tintWithMultiply:h.tintWithPerPixel,c.default=h},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":76,"../../utils":117}],101:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.vertices=new ArrayBuffer(b),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return a.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},a}();c.default=e},{}],102:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../renderers/webgl/utils/ObjectRenderer"),i=d(h),j=a("../../renderers/webgl/WebGLRenderer"),k=d(j),l=a("../../utils/createIndicesForQuads"),m=d(l),n=a("./generateMultiTextureShader"),o=d(n),p=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),q=d(p),r=a("./BatchBuffer"),s=d(r),t=a("../../settings"),u=d(t),v=a("pixi-gl-core"),w=d(v),x=a("bit-twiddle"),y=d(x),z=0,A=0,B=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));d.vertSize=5,d.vertByteSize=4*d.vertSize,d.size=u.default.SPRITE_BATCH_SIZE,d.buffers=[];for(var g=1;g<=y.default.nextPow2(d.size);g*=2)d.buffers.push(new s.default(4*g*d.vertByteSize));d.indices=(0,m.default)(d.size),d.shader=null,d.currentIndex=0,z=0,d.groups=[];for(var h=0;h<d.size;h++)d.groups[h]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return d.sprites=[],d.vertexBuffers=[],d.vaos=[],d.vaoMax=2,d.vertexCount=0,d.renderer.on("prerender",d.onPrerender,d),d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),u.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,q.default)(this.MAX_TEXTURES,a);var b=this.shader=(0,o.default)(a,this.MAX_TEXTURES);this.indexBuffer=w.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.renderer.bindVao(null);for(var c=0;c<this.vaoMax;c++)this.vertexBuffers[c]=w.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[c]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[c],b.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[c],b.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[c],b.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[c],b.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},b.prototype.onPrerender=function(){this.vertexCount=0},b.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a.texture._uvs&&(this.sprites[this.currentIndex++]=a)},b.prototype.flush=function(){if(0!==this.currentIndex){var a=this.renderer.gl,b=this.MAX_TEXTURES,c=y.default.nextPow2(this.currentIndex),d=y.default.log2(c),e=this.buffers[d],f=this.sprites,g=this.groups,h=e.float32View,i=e.uint32View,j=this.boundTextures,k=this.renderer.boundTextures,l=this.renderer.textureGC.count,m=0,n=void 0,o=void 0,p=1,q=0,r=g[0],s=void 0,t=void 0,v=f[0].blendMode;r.textureCount=0,r.start=0,r.blend=v,z++;var x=void 0;for(x=0;x<b;++x)j[x]=k[x],j[x]._virtalBoundId=x;for(x=0;x<this.currentIndex;++x){var B=f[x];if(n=B._texture.baseTexture,v!==B.blendMode&&(v=B.blendMode,o=null,q=b,z++),o!==n&&(o=n,n._enabled!==z)){if(q===b&&(z++,r.size=x-r.start,q=0,r=g[p++],r.blend=v,r.textureCount=0,r.start=x),n.touched=l,n._virtalBoundId===-1)for(var C=0;C<b;++C){var D=(C+A)%b,E=j[D];if(E._enabled!==z){A++,E._virtalBoundId=-1,n._virtalBoundId=D,j[D]=n;break}}n._enabled=z,r.textureCount++,r.ids[q]=n._virtalBoundId,r.textures[q++]=n}if(s=B.vertexData,t=B._texture._uvs.uvsUint32,this.renderer.roundPixels){var F=this.renderer.resolution;h[m]=(s[0]*F|0)/F,h[m+1]=(s[1]*F|0)/F,h[m+5]=(s[2]*F|0)/F,h[m+6]=(s[3]*F|0)/F,h[m+10]=(s[4]*F|0)/F,h[m+11]=(s[5]*F|0)/F,h[m+15]=(s[6]*F|0)/F,h[m+16]=(s[7]*F|0)/F}else h[m]=s[0],h[m+1]=s[1],h[m+5]=s[2],h[m+6]=s[3],h[m+10]=s[4],h[m+11]=s[5],h[m+15]=s[6],h[m+16]=s[7];i[m+2]=t[0],i[m+7]=t[1],i[m+12]=t[2],i[m+17]=t[3],i[m+3]=i[m+8]=i[m+13]=i[m+18]=B._tintRGB+(255*B.worldAlpha<<24),h[m+4]=h[m+9]=h[m+14]=h[m+19]=n._virtalBoundId,m+=20}for(r.size=x-r.start,u.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=w.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!1),this.vertexCount++),x=0;x<b;++x)k[x]._virtalBoundId=-1;for(x=0;x<p;++x){for(var G=g[x],H=G.textureCount,I=0;I<H;I++)o=G.textures[I],k[G.ids[I]]!==o&&this.renderer.bindTexture(o,G.ids[I],!0),o._virtalBoundId=-1;this.renderer.state.setBlendMode(G.blend),a.drawElements(a.TRIANGLES,6*G.size,a.UNSIGNED_SHORT,6*G.start*2)}this.currentIndex=0}},b.prototype.start=function(){this.renderer.bindShader(this.shader),u.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},b.prototype.stop=function(){this.flush()},b.prototype.destroy=function(){for(var b=0;b<this.vaoMax;b++)this.vertexBuffers[b]&&this.vertexBuffers[b].destroy(),this.vaos[b]&&this.vaos[b].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),a.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,
this.indices=null,this.sprites=null;for(var c=0;c<this.buffers.length;++c)this.buffers[c].destroy()},b}(i.default);c.default=B,k.default.registerPlugin("sprite",B)},{"../../renderers/webgl/WebGLRenderer":80,"../../renderers/webgl/utils/ObjectRenderer":90,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":93,"../../settings":97,"../../utils/createIndicesForQuads":115,"./BatchBuffer":101,"./generateMultiTextureShader":103,"bit-twiddle":1,"pixi-gl-core":12}],103:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d=i;d=d.replace(/%count%/gi,b),d=d.replace(/%forloop%/gi,f(b));for(var e=new h.default(a,c,d),g=[],j=0;j<b;j++)g[j]=j;return e.bind(),e.uniforms.uSamplers=g,e}function f(a){var b="";b+="\n",b+="\n";for(var c=0;c<a;c++)c>0&&(b+="\nelse "),c<a-1&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";return b+="\n",b+="\n"}c.__esModule=!0,c.default=e;var g=a("../../Shader"),h=d(g),i=(a("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":41,path:22}],104:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../sprites/Sprite"),j=d(i),k=a("../textures/Texture"),l=d(k),m=a("../math"),n=a("../utils"),o=a("../const"),p=a("../settings"),q=d(p),r=a("./TextStyle"),s=d(r),t={texture:!0,children:!1,baseTexture:!0},u=function(a){function b(c,d){e(this,b);var g=document.createElement("canvas");g.width=3,g.height=3;var h=l.default.fromCanvas(g);h.orig=new m.Rectangle,h.trim=new m.Rectangle;var i=f(this,a.call(this,h));return i.canvas=g,i.context=i.canvas.getContext("2d"),i.resolution=q.default.RESOLUTION,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=c,i.style=d,i.localStyleID=-1,i}return g(b,a),b.prototype.updateText=function(a){var c=this._style;if(this.localStyleID!==c.styleID&&(this.dirty=!0,this.localStyleID=c.styleID),this.dirty||!a){this._font=b.getFontStyle(c),this.context.font=this._font;for(var d=c.wordWrap?this.wordWrap(this._text):this._text,e=d.split(/(?:\r\n|\r|\n)/),f=new Array(e.length),g=0,h=b.calculateFontProperties(this._font),i=0;i<e.length;i++){var j=this.context.measureText(e[i]).width+(e[i].length-1)*c.letterSpacing;f[i]=j,g=Math.max(g,j)}var k=g+c.strokeThickness;c.dropShadow&&(k+=c.dropShadowDistance),k+=2*c.padding,this.canvas.width=Math.ceil((k+this.context.lineWidth)*this.resolution);var l=this.style.lineHeight||h.fontSize+c.strokeThickness,m=Math.max(l,h.fontSize+c.strokeThickness)+(e.length-1)*l;c.dropShadow&&(m+=c.dropShadowDistance),this.canvas.height=Math.ceil((m+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=c.stroke,this.context.lineWidth=c.strokeThickness,this.context.textBaseline=c.textBaseline,this.context.lineJoin=c.lineJoin,this.context.miterLimit=c.miterLimit;var n=void 0,o=void 0;if(c.dropShadow){c.dropShadowBlur>0?(this.context.shadowColor=c.dropShadowColor,this.context.shadowBlur=c.dropShadowBlur):this.context.fillStyle=c.dropShadowColor;for(var p=Math.cos(c.dropShadowAngle)*c.dropShadowDistance,q=Math.sin(c.dropShadowAngle)*c.dropShadowDistance,r=0;r<e.length;r++)n=c.strokeThickness/2,o=c.strokeThickness/2+r*l+h.ascent,"right"===c.align?n+=g-f[r]:"center"===c.align&&(n+=(g-f[r])/2),c.fill&&(this.drawLetterSpacing(e[r],n+p+c.padding,o+q+c.padding),c.stroke&&c.strokeThickness&&(this.context.strokeStyle=c.dropShadowColor,this.drawLetterSpacing(e[r],n+p+c.padding,o+q+c.padding,!0),this.context.strokeStyle=c.stroke))}this.context.fillStyle=this._generateFillStyle(c,e);for(var s=0;s<e.length;s++)n=c.strokeThickness/2,o=c.strokeThickness/2+s*l+h.ascent,"right"===c.align?n+=g-f[s]:"center"===c.align&&(n+=(g-f[s])/2),c.stroke&&c.strokeThickness&&this.drawLetterSpacing(e[s],n+c.padding,o+c.padding,!0),c.fill&&this.drawLetterSpacing(e[s],n+c.padding,o+c.padding);this.updateTexture()}},b.prototype.drawLetterSpacing=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=this._style,f=e.letterSpacing;if(0===f)return void(d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c));for(var g=String.prototype.split.call(a,""),h=b,i=0,j="";i<a.length;)j=g[i++],d?this.context.strokeText(j,h,c):this.context.fillText(j,h,c),h+=this.context.measureText(j).width+f},b.prototype.updateTexture=function(){var a=this._texture,b=this._style;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.realWidth=this.canvas.width,a.baseTexture.realHeight=this.canvas.height,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.trim.width=a._frame.width=this.canvas.width/this.resolution,a.trim.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=-b.padding,a.trim.y=-b.padding,a.orig.width=a._frame.width-2*b.padding,a.orig.height=a._frame.height-2*b.padding,this._onTextureUpdate(),a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},b.prototype.renderWebGL=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype.renderWebGL.call(this,b)},b.prototype._renderCanvas=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype._renderCanvas.call(this,b)},b.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=this._style.wordWrapWidth,e=0;e<c.length;e++){for(var f=d,g=c[e].split(" "),h=0;h<g.length;h++){var i=this.context.measureText(g[h]).width;if(this._style.breakWords&&i>d)for(var j=g[h].split(""),k=0;k<j.length;k++){var l=this.context.measureText(j[k]).width;l>f?(b+="\n"+j[k],f=d-l):(0===k&&(b+=" "),b+=j[k],f-=l)}else{var m=i+this.context.measureText(" ").width;0===h||m>f?(h>0&&(b+="\n"),b+=g[h],f=d-i):(f-=m,b+=" "+g[h])}}e<c.length-1&&(b+="\n")}return b},b.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},b.prototype._onStyleChange=function(){this.dirty=!0},b.prototype._generateFillStyle=function(a,b){if(!Array.isArray(a.fill))return a.fill;if(navigator.isCocoonJS)return a.fill[0];var c=void 0,d=void 0,e=void 0,f=void 0,g=this.canvas.width/this.resolution,h=this.canvas.height/this.resolution;if(a.fillGradientType===o.TEXT_GRADIENT.LINEAR_VERTICAL){c=this.context.createLinearGradient(g/2,0,g/2,h),d=(a.fill.length+1)*b.length,e=0;for(var i=0;i<b.length;i++){e+=1;for(var j=0;j<a.fill.length;j++)f=e/d,c.addColorStop(f,a.fill[j]),e++}}else{c=this.context.createLinearGradient(0,h/2,g,h/2),d=a.fill.length+1,e=1;for(var k=0;k<a.fill.length;k++)f=e/d,c.addColorStop(f,a.fill[k]),e++}return c},b.prototype.destroy=function(b){"boolean"==typeof b&&(b={children:b}),b=Object.assign({},t,b),a.prototype.destroy.call(this,b),this.context=null,this.canvas=null,this._style=null},b.getFontStyle=function(a){a=a||{},a instanceof s.default||(a=new s.default(a));var b="number"==typeof a.fontSize?a.fontSize+"px":a.fontSize;return a.fontStyle+" "+a.fontVariant+" "+a.fontWeight+" "+b+' "'+a.fontFamily+'"'},b.calculateFontProperties=function(a){if(b.fontPropertiesCache[a])return b.fontPropertiesCache[a];var c={},d=b.fontPropertiesCanvas,e=b.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|MÉq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,d.width=f,d.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|MÉq",0,g);var i=e.getImageData(0,0,f,h).data,j=i.length,k=4*f,l=0,m=0,n=!1;for(l=0;l<g;++l){for(var o=0;o<k;o+=4)if(255!==i[m+o]){n=!0;break}if(n)break;m+=k}for(c.ascent=g-l,m=j-k,n=!1,l=h;l>g;--l){for(var p=0;p<k;p+=4)if(255!==i[m+p]){n=!0;break}if(n)break;m-=k}return c.descent=l-g,c.fontSize=c.ascent+c.descent,b.fontPropertiesCache[a]=c,c},h(b,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){this.updateText(!0);var b=(0,n.sign)(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=(0,n.sign)(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},{key:"style",get:function(){return this._style},set:function(a){a=a||{},a instanceof s.default?this._style=a:this._style=new s.default(a),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){a=a||" ",a=a.toString(),this._text!==a&&(this._text=a,this.dirty=!0)}}]),b}(j.default);c.default=u,u.fontPropertiesCache={},u.fontPropertiesCanvas=document.createElement("canvas"),u.fontPropertiesContext=u.fontPropertiesCanvas.getContext("2d")},{"../const":42,"../math":66,"../settings":97,"../sprites/Sprite":98,"../textures/Texture":109,"../utils":117,"./TextStyle":105}],105:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return"number"==typeof a?(0,i.hex2string)(a):("string"==typeof a&&0===a.indexOf("0x")&&(a=a.replace("0x","#")),a)}function f(a){if(Array.isArray(a)){for(var b=0;b<a.length;++b)a[b]=e(a[b]);return a}return e(a)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../const"),i=a("../utils"),j={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:h.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},k=function(){function a(b){d(this,a),this.styleID=0,Object.assign(this,j,b)}return a.prototype.clone=function(){var b={};for(var c in j)b[c]=this[c];return new a(b)},a.prototype.reset=function(){Object.assign(this,j)},g(a,[{key:"align",get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(a){var b=f(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(a){var b=f(a);this._fill!==b&&(this._fill=b,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(a){var b=f(a);this._stroke!==b&&(this._stroke=b,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}]),a}();c.default=k},{"../const":42,"../utils":117}],106:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./BaseTexture"),i=d(h),j=a("../settings"),k=d(j),l=k.default.RESOLUTION,m=k.default.SCALE_MODE,n=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,g=arguments[2],h=arguments[3];e(this,b);var i=f(this,a.call(this,null,g));return i.resolution=h||l,i.width=c,i.height=d,i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=g||m,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return g(b,a),b.prototype.resize=function(a,b){a===this.width&&b===this.height||(this.valid=a>0&&b>0,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},b.prototype.destroy=function(){a.prototype.destroy.call(this,!0),this.renderer=null},b}(i.default);c.default=n},{"../settings":97,"./BaseTexture":107}],107:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a("../utils"),j=a("../settings"),k=d(j),l=a("eventemitter3"),m=d(l),n=a("../utils/determineCrossOrigin"),o=d(n),p=a("bit-twiddle"),q=d(p),r=function(a){function b(c,d,g){e(this,b);var h=f(this,a.call(this));return h.uid=(0,i.uid)(),h.touched=0,h.resolution=g||k.default.RESOLUTION,h.width=100,h.height=100,h.realWidth=100,h.realHeight=100,h.scaleMode=d||k.default.SCALE_MODE,h.hasLoaded=!1,h.isLoading=!1,h.source=null,h.origSource=null,h.imageType=null,h.sourceScale=1,h.premultipliedAlpha=!0,h.imageUrl=null,h.isPowerOfTwo=!1,h.mipmap=k.default.MIPMAP_TEXTURES,h.wrapMode=k.default.WRAP_MODE,h._glTextures={},h._enabled=0,h._virtalBoundId=-1,c&&h.loadSource(c),h}return g(b,a),b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=q.default.isPow2(this.realWidth)&&q.default.isPow2(this.realHeight)),this.emit("update",this)},b.prototype.loadSource=function(a){var b=this,c=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,c&&this.source&&(this.source.onload=null,this.source.onerror=null);var d=!this.source;if(this.source=a,(a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),d&&this.emit("loaded",this);else if(!a.getContext){var e=function(){b.isLoading=!0;var d=b;if(a.onload=function(){if(d._updateImageType(),a.onload=null,a.onerror=null,d.isLoading)return d.isLoading=!1,d._sourceLoaded(),"svg"===d.imageType?void d._loadSvgSource():void d.emit("loaded",d)},a.onerror=function(){a.onload=null,a.onerror=null,d.isLoading&&(d.isLoading=!1,d.emit("error",d))},a.complete&&a.src){if(a.onload=null,a.onerror=null,"svg"===d.imageType)return d._loadSvgSource(),{v:void 0};b.isLoading=!1,a.width&&a.height?(b._sourceLoaded(),c&&b.emit("loaded",b)):c&&b.emit("error",b)}}();if("object"===("undefined"==typeof e?"undefined":h(e)))return e.v}},b.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,i.decomposeDataUri)(this.imageUrl),b=void 0;if(a&&"image"===a.mediaType){var c=a.subType.split("+")[0];if(b=(0,i.getUrlFileExtension)("."+c),!b)throw new Error("Invalid image type in data URI.")}else b=(0,i.getUrlFileExtension)(this.imageUrl),b||(b="png");this.imageType=b}},b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var a=(0,i.decomposeDataUri)(this.imageUrl);a?this._loadSvgSourceUsingDataUri(a):this._loadSvgSourceUsingXhr()}},b.prototype._loadSvgSourceUsingDataUri=function(a){var b=void 0;if("base64"===a.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");b=atob(a.data)}else b=a.data;this._loadSvgSourceUsingString(b)},b.prototype._loadSvgSourceUsingXhr=function(){var a=this,b=new XMLHttpRequest;b.onload=function(){if(b.readyState!==b.DONE||200!==b.status)throw new Error("Failed to load SVG using XHR.");a._loadSvgSourceUsingString(b.response)},b.onerror=function(){return a.emit("error",a)},b.open("GET",this.imageUrl,!0),b.send()},b.prototype._loadSvgSourceUsingString=function(a){var b=(0,i.getSvgSize)(a),c=b.width,d=b.height;if(!c||!d)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(c*this.sourceScale),this.realHeight=Math.round(d*this.sourceScale),this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=q.default.isPow2(this.realWidth)&&q.default.isPow2(this.realHeight);var e=document.createElement("canvas");e.width=this.realWidth,e.height=this.realHeight,e._pixiId="canvas_"+(0,i.uid)(),e.getContext("2d").drawImage(this.source,0,0,c,d,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=e,i.BaseTextureCache[e._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},b.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},b.prototype.destroy=function(){this.imageUrl&&(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},b.prototype.dispose=function(){this.emit("dispose",this)},b.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},b.fromImage=function(a,c,d,e){var f=i.BaseTextureCache[a];if(!f){var g=new Image;void 0===c&&0!==a.indexOf("data:")&&(g.crossOrigin=(0,o.default)(a)),f=new b(g,d),f.imageUrl=a,e&&(f.sourceScale=e),f.resolution=(0,i.getResolutionOfUrl)(a),g.src=a,i.BaseTextureCache[a]=f}return f},b.fromCanvas=function(a,c){a._pixiId||(a._pixiId="canvas_"+(0,i.uid)());var d=i.BaseTextureCache[a._pixiId];return d||(d=new b(a,c),i.BaseTextureCache[a._pixiId]=d),d},b}(m.default);c.default=r},{"../settings":97,"../utils":117,"../utils/determineCrossOrigin":116,"bit-twiddle":1,eventemitter3:3}],108:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./BaseRenderTexture"),i=d(h),j=a("./Texture"),k=d(j),l=function(a){function b(c,d){e(this,b);var g=null;if(!(c instanceof i.default)){var h=arguments[1],j=arguments[2],k=arguments[3]||0,l=arguments[4]||1;console.warn("Please use RenderTexture.create("+h+", "+j+") instead of the ctor directly."),g=arguments[0],d=null,c=new i.default(h,j,k,l)}var m=f(this,a.call(this,c,d));return m.legacyRenderer=g,m.valid=!0,m._updateUvs(),m}return g(b,a),b.prototype.resize=function(a,b,c){this.valid=a>0&&b>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=b,c||this.baseTexture.resize(a,b),this._updateUvs()},b.create=function(a,c,d,e){return new b(new i.default(a,c,d,e))},b}(k.default);c.default=l},{"./BaseRenderTexture":106,"./Texture":109}],109:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./BaseTexture"),j=d(i),k=a("./VideoBaseTexture"),l=d(k),m=a("./TextureUvs"),n=d(m),o=a("eventemitter3"),p=d(o),q=a("../math"),r=a("../utils"),s=function(a){function b(c,d,g,h,i){e(this,b);var j=f(this,a.call(this));if(j.noFrame=!1,d||(j.noFrame=!0,d=new q.Rectangle(0,0,1,1)),c instanceof b&&(c=c.baseTexture),j.baseTexture=c,j._frame=d,j.trim=h,j.valid=!1,j.requiresUpdate=!1,j._uvs=null,j.orig=g||d,j._rotate=Number(i||0),i===!0)j._rotate=2;else if(j._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.hasLoaded?(j.noFrame&&(d=new q.Rectangle(0,0,c.width,c.height),c.on("update",j.onBaseTextureUpdated,j)),j.frame=d):c.once("loaded",j.onBaseTextureLoaded,j),j._updateID=0,j.transform=null,j}return g(b,a),b.prototype.update=function(){this.baseTexture.update()},b.prototype.onBaseTextureLoaded=function(a){this._updateID++,this.noFrame?this.frame=new q.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},b.prototype.onBaseTextureUpdated=function(a){this._updateID++,this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},b.prototype.destroy=function(a){this.baseTexture&&(a&&(r.TextureCache[this.baseTexture.imageUrl]&&delete r.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},b.prototype._updateUvs=function(){this._uvs||(this._uvs=new n.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},b.fromImage=function(a,c,d,e){var f=r.TextureCache[a];return f||(f=new b(j.default.fromImage(a,c,d,e)),r.TextureCache[a]=f),f},b.fromFrame=function(a){var b=r.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return b},b.fromCanvas=function(a,c){return new b(j.default.fromCanvas(a,c))},b.fromVideo=function(a,c){return"string"==typeof a?b.fromVideoUrl(a,c):new b(l.default.fromVideo(a,c))},b.fromVideoUrl=function(a,c){return new b(l.default.fromUrl(a,c))},b.from=function(a){if("string"==typeof a){var c=r.TextureCache[a];if(!c){var d=null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return d?b.fromVideoUrl(a):b.fromImage(a)}return c}return a instanceof HTMLImageElement?new b(new j.default(a)):a instanceof HTMLCanvasElement?b.fromCanvas(a):a instanceof HTMLVideoElement?b.fromVideo(a):a instanceof j.default?new b(a):a},b.addTextureToCache=function(a,b){r.TextureCache[b]=a},b.removeTextureFromCache=function(a){var b=r.TextureCache[a];return delete r.TextureCache[a],delete r.BaseTextureCache[a],b},h(b,[{key:"frame",get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=a),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig?this.orig.width:0}},{key:"height",get:function(){return this.orig?this.orig.height:0}}]),b}(p.default);c.default=s,s.EMPTY=new s(new j.default),s.EMPTY.destroy=function(){},s.EMPTY.on=function(){},s.EMPTY.once=function(){},s.EMPTY.emit=function(){}},{"../math":66,"../utils":117,"./BaseTexture":107,"./TextureUvs":110,"./VideoBaseTexture":111,eventemitter3:3}],110:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../math/GroupD8"),g=d(f),h=function(){function a(){e(this,a),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return a.prototype.set=function(a,b,c){var d=b.width,e=b.height;if(c){var f=a.width/2/d,h=a.height/2/e,i=a.x/d+f,j=a.y/e+h;c=g.default.add(c,g.default.NW),this.x0=i+f*g.default.uX(c),this.y0=j+h*g.default.uY(c),c=g.default.add(c,2),this.x1=i+f*g.default.uX(c),this.y1=j+h*g.default.uY(c),c=g.default.add(c,2),this.x2=i+f*g.default.uX(c),this.y2=j+h*g.default.uY(c),c=g.default.add(c,2),this.x3=i+f*g.default.uX(c),this.y3=j+h*g.default.uY(c)}else this.x0=a.x/d,this.y0=a.y/e,this.x1=(a.x+a.width)/d,this.y1=a.y/e,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/e,this.x3=a.x/d,this.y3=(a.y+a.height)/e;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},a}();c.default=h},{"../math/GroupD8":62}],111:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}c.__esModule=!0;var j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("./BaseTexture"),l=e(k),m=a("../utils"),n=a("../ticker"),o=d(n),p=function(a){function b(c,d){if(f(this,b),!c)throw new Error("No video source element specified.");(c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height&&(c.complete=!0);var e=g(this,a.call(this,c,d));return e.width=c.videoWidth,e.height=c.videoHeight,e._autoUpdate=!0,e._isAutoUpdating=!1,e.autoPlay=!0,e.update=e.update.bind(e),e._onCanPlay=e._onCanPlay.bind(e),
c.addEventListener("play",e._onPlayStart.bind(e)),c.addEventListener("pause",e._onPlayStop.bind(e)),e.hasLoaded=!1,e.__loaded=!1,e._isSourceReady()?e._onCanPlay():(c.addEventListener("canplay",e._onCanPlay),c.addEventListener("canplaythrough",e._onCanPlay)),e}return h(b,a),b.prototype._isSourcePlaying=function(){var a=this.source;return a.currentTime>0&&a.paused===!1&&a.ended===!1&&a.readyState>2},b.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},b.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(o.shared.add(this.update,this),this._isAutoUpdating=!0)},b.prototype._onPlayStop=function(){this._isAutoUpdating&&(o.shared.remove(this.update,this),this._isAutoUpdating=!1)},b.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},b.prototype.destroy=function(){this._isAutoUpdating&&o.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete m.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),a.prototype.destroy.call(this)},b.fromVideo=function(a,c){a._pixiId||(a._pixiId="video_"+(0,m.uid)());var d=m.BaseTextureCache[a._pixiId];return d||(d=new b(a,c),m.BaseTextureCache[a._pixiId]=d),d},b.fromUrl=function(a,c){var d=document.createElement("video");if(d.setAttribute("webkit-playsinline",""),d.setAttribute("playsinline",""),Array.isArray(a))for(var e=0;e<a.length;++e)d.appendChild(i(a[e].src||a[e],a[e].mime));else d.appendChild(i(a.src||a,a.mime));return d.load(),b.fromVideo(d,c)},j(b,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isAutoUpdating?(o.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(o.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),b}(l.default);c.default=p,p.fromUrls=p.fromUrl},{"../ticker":113,"../utils":117,"./BaseTexture":107}],112:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../settings"),h=d(g),i=a("eventemitter3"),j=d(i),k="tick",l=function(){function a(){var b=this;e(this,a),this._emitter=new j.default,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/h.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(a){b._requestId=null,b.started&&(b.update(a),b.started&&null===b._requestId&&b._emitter.listeners(k,!0)&&(b._requestId=requestAnimationFrame(b._tick)))}}return a.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(k,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(a,b){return this._emitter.on(k,a,b),this._startIfPossible(),this},a.prototype.addOnce=function(a,b){return this._emitter.once(k,a,b),this._startIfPossible(),this},a.prototype.remove=function(a,b){return this._emitter.off(k,a,b),this._emitter.listeners(k,!0)||this._cancelIfNeeded(),this},a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.update=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),b=void 0;a>this.lastTime?(b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*h.default.TARGET_FPMS*this.speed,this._emitter.emit(k,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=a},f(a,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,h.default.TARGET_FPMS);this._maxElapsedMS=1/b}}]),a}();c.default=l},{"../settings":97,eventemitter3:3}],113:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.Ticker=c.shared=void 0;var e=a("./Ticker"),f=d(e),g=new f.default;g.autoStart=!0,c.shared=g,c.Ticker=f.default},{"./Ticker":112}],114:[function(a,b,c){"use strict";function d(){var a=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!a}c.__esModule=!0,c.default=d},{}],115:[function(a,b,c){"use strict";function d(a){for(var b=6*a,c=new Uint16Array(b),d=0,e=0;d<b;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c}c.__esModule=!0,c.default=d},{}],116:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";b=b||window.location,h||(h=document.createElement("a")),h.href=a,a=g.default.parse(h.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"}c.__esModule=!0,c.default=e;var f=a("url"),g=d(f),h=void 0},{url:28}],117:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(){return++B}function g(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b}function h(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a}function i(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}function j(a,b){var c=u.default.RETINA_PREFIX.exec(a);return c?parseFloat(c[1]):void 0!==b?b:1}function k(a){var b=s.DATA_URI.exec(a);if(b)return{mediaType:b[1]?b[1].toLowerCase():void 0,subType:b[2]?b[2].toLowerCase():void 0,encoding:b[3]?b[3].toLowerCase():void 0,data:b[4]}}function l(a){var b=s.URL_FILE_EXTENSION.exec(a);if(b)return b[1].toLowerCase()}function m(a){var b=s.SVG_SIZE.exec(a),c={};return b&&(c[b[1]]=Math.round(parseFloat(b[3])),c[b[5]]=Math.round(parseFloat(b[7]))),c}function n(){C=!0}function o(a){if(!C){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+s.VERSION+" - ✰ "+a+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+s.VERSION+" - "+a+" - http://www.pixijs.com/");C=!0}}function p(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}}function q(a){return 0===a?0:a<0?-1:1}function r(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(var e=d-c,f=b;f<e;++f)a[f]=a[f+c];a.length=e}}c.__esModule=!0,c.BaseTextureCache=c.TextureCache=c.pluginTarget=c.EventEmitter=c.isMobile=void 0,c.uid=f,c.hex2rgb=g,c.hex2string=h,c.rgb2hex=i,c.getResolutionOfUrl=j,c.decomposeDataUri=k,c.getUrlFileExtension=l,c.getSvgSize=m,c.skipHello=n,c.sayHello=o,c.isWebGLSupported=p,c.sign=q,c.removeItems=r;var s=a("../const"),t=a("../settings"),u=e(t),v=a("eventemitter3"),w=e(v),x=a("./pluginTarget"),y=e(x),z=a("ismobilejs"),A=d(z),B=0,C=!1;c.isMobile=A,c.EventEmitter=w.default,c.pluginTarget=y.default,c.TextureCache={},c.BaseTextureCache={}},{"../const":42,"../settings":97,"./pluginTarget":119,eventemitter3:3,ismobilejs:4}],118:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return g.default.tablet||g.default.phone?4:a}c.__esModule=!0,c.default=e;var f=a("ismobilejs"),g=d(f)},{ismobilejs:4}],119:[function(a,b,c){"use strict";function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}c.__esModule=!0,c.default={mixin:function(a){d(a)}}},{}],120:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){}var f=a("./core"),g=d(f),h=a("./mesh"),i=d(h),j=a("./particles"),k=d(j),l=a("./extras"),m=d(l),n=a("./filters"),o=d(n),p=a("./prepare"),q=d(p);g.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},g.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(g,{Stage:{enumerable:!0,get:function(){return e("You do not need to use a PIXI Stage any more, you can simply render any container."),g.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return e("DisplayObjectContainer has been shortened to Container, please use Container from now on."),g.Container}},Strip:{enumerable:!0,get:function(){return e("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),i.Mesh}},Rope:{enumerable:!0,get:function(){return e("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),i.Rope}},ParticleContainer:{enumerable:!0,get:function(){return e("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),k.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return e("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),m.AnimatedSprite}},TilingSprite:{enumerable:!0,get:function(){return e("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),m.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return e("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),m.BitmapText}},blendModes:{enumerable:!0,get:function(){return e("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),g.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return e("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),g.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return e("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),g.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return e("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),g.utils.TextureCache}},math:{enumerable:!0,get:function(){return e("The math namespace is deprecated, please access members already accessible on PIXI."),g}},AbstractFilter:{enumerable:!0,get:function(){return e("AstractFilter has been renamed to Filter, please use PIXI.Filter"),g.Filter}},TransformManual:{enumerable:!0,get:function(){return e("TransformManual has been renamed to TransformBase, please update your pixi-spine"),g.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){return e("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),g.settings.TARGET_FPMS},set:function(a){e("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),g.settings.TARGET_FPMS=a}},FILTER_RESOLUTION:{enumerable:!0,get:function(){return e("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),g.settings.FILTER_RESOLUTION},set:function(a){e("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),g.settings.FILTER_RESOLUTION=a}},RESOLUTION:{enumerable:!0,get:function(){return e("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),g.settings.RESOLUTION},set:function(a){e("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),g.settings.RESOLUTION=a}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){return e("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),g.settings.MIPMAP_TEXTURES},set:function(a){e("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),g.settings.MIPMAP_TEXTURES=a}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){return e("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),g.settings.SPRITE_BATCH_SIZE},set:function(a){e("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),g.settings.SPRITE_BATCH_SIZE=a}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){return e("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),g.settings.SPRITE_MAX_TEXTURES},set:function(a){e("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),g.settings.SPRITE_MAX_TEXTURES=a}},RETINA_PREFIX:{enumerable:!0,get:function(){return e("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),g.settings.RETINA_PREFIX},set:function(a){e("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),g.settings.RETINA_PREFIX=a}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){return e("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),g.settings.RENDER_OPTIONS}}});for(var r=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION"}],s=function(a){var b=r[a];Object.defineProperty(g[b.parent],"DEFAULT",{enumerable:!0,get:function(){return e("PIXI."+b.parent+".DEFAULT has been deprecated, please use PIXI.settings."+b.target),g.settings[b.target]},set:function(a){e("PIXI."+b.parent+".DEFAULT has been deprecated, please use PIXI.settings."+b.target),g.settings[b.target]=a}})},t=0;t<r.length;t++)s(t);Object.defineProperties(m,{MovieClip:{enumerable:!0,get:function(){return e("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),m.AnimatedSprite}}}),g.DisplayObject.prototype.generateTexture=function(a,b,c){return e("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),a.generateTexture(this,b,c)},g.Graphics.prototype.generateTexture=function(a,b){return e("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(a,b)},g.RenderTexture.prototype.render=function(a,b,c,d){this.legacyRenderer.render(a,this,c,b,!d),e("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},g.RenderTexture.prototype.getImage=function(a){return e("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(a)},g.RenderTexture.prototype.getBase64=function(a){return e("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(a)},g.RenderTexture.prototype.getCanvas=function(a){return e("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(a)},g.RenderTexture.prototype.getPixels=function(a){return e("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(a)},g.Sprite.prototype.setTexture=function(a){this.texture=a,e("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},m.BitmapText.prototype.setText=function(a){this.text=a,e("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},g.Text.prototype.setText=function(a){this.text=a,e("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},g.Text.prototype.setStyle=function(a){this.style=a,e("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},g.Text.prototype.determineFontProperties=function(a){return e("determineFontProperties is now deprecated, please use the static calculateFontProperties method, e.g : Text.calculateFontProperties(fontStyle);"),Text.calculateFontProperties(a)},Object.defineProperties(g.TextStyle.prototype,{font:{get:function(){e("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var a="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+a+" "+this._fontFamily},set:function(a){e("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),a.indexOf("italic")>1?this._fontStyle="italic":a.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",a.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var b=a.split(" "),c=-1;this._fontSize=26;for(var d=0;d<b.length;++d)if(b[d].match(/(px|pt|em|%)/)){c=d,this._fontSize=b[d];break}this._fontWeight="normal";for(var f=0;f<c;++f)if(b[f].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=b[f];break}if(c>-1&&c<b.length-1){this._fontFamily="";for(var g=c+1;g<b.length;++g)this._fontFamily+=b[g]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),g.Texture.prototype.setFrame=function(a){this.frame=a,e("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Object.defineProperties(o,{AbstractFilter:{get:function(){return e("AstractFilter has been renamed to Filter, please use PIXI.Filter"),g.AbstractFilter}},SpriteMaskFilter:{get:function(){return e("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),g.SpriteMaskFilter}}}),g.utils.uuid=function(){return e("utils.uuid() is deprecated, please use utils.uid() from now on."),g.utils.uid()},g.utils.canUseNewCanvasBlendModes=function(){return e("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),g.CanvasTinter.canUseMultiply};var u=!0;Object.defineProperty(g.utils,"_saidHello",{set:function(a){a&&(e("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),u=a},get:function(){return u}}),Object.defineProperty(q.canvas,"UPLOADS_PER_FRAME",{set:function(){e("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return e("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(q.webgl,"UPLOADS_PER_FRAME",{set:function(){e("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return e("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}})},{"./core":61,"./extras":131,"./filters":142,"./mesh":160,"./particles":163,"./prepare":173}],121:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../core"),g=d(f),h=new g.Rectangle,i=function(){function a(b){e(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function a(b){var a=new Image;return a.src=this.base64(b),a},a.prototype.base64=function(a){return this.canvas(a).toDataURL()},a.prototype.canvas=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=void 0;a&&(f=a instanceof g.RenderTexture?a:b.generateTexture(a)),f?(c=f.baseTexture._canvasRenderTarget.context,d=f.baseTexture._canvasRenderTarget.resolution,e=f.frame):(c=b.rootContext,e=h,e.width=this.renderer.width,e.height=this.renderer.height);var i=e.width*d,j=e.height*d,k=new g.CanvasRenderTarget(i,j),l=c.getImageData(e.x*d,e.y*d,i,j);return k.context.putImageData(l,0,0),k.canvas},a.prototype.pixels=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=void 0;return a&&(f=a instanceof g.RenderTexture?a:b.generateTexture(a)),f?(c=f.baseTexture._canvasRenderTarget.context,d=f.baseTexture._canvasRenderTarget.resolution,e=f.frame):(c=b.rootContext,e=h,e.width=b.width,e.height=b.height),c.getImageData(0,0,e.width*d,e.height*d).data},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c.default=i,g.CanvasRenderer.registerPlugin("extract",i)},{"../../core":61}],122:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./webgl/WebGLExtract");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e).default}});var f=a("./canvas/CanvasExtract");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(f).default}})},{"./canvas/CanvasExtract":121,"./webgl/WebGLExtract":123}],123:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../core"),g=d(f),h=new g.Rectangle,i=4,j=function(){function a(b){e(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function a(b){var a=new Image;return a.src=this.base64(b),a},a.prototype.base64=function(a){return this.canvas(a).toDataURL()},a.prototype.canvas=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=!1,j=void 0;a&&(j=a instanceof g.RenderTexture?a:this.renderer.generateTexture(a)),j?(c=j.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],d=c.resolution,e=j.frame,f=!1):(c=this.renderer.rootRenderTarget,d=c.resolution,f=!0,e=h,e.width=c.size.width,e.height=c.size.height);var k=e.width*d,l=e.height*d,m=new g.CanvasRenderTarget(k,l);if(c){b.bindRenderTarget(c);var n=new Uint8Array(i*k*l),o=b.gl;o.readPixels(e.x*d,e.y*d,k,l,o.RGBA,o.UNSIGNED_BYTE,n);var p=m.context.getImageData(0,0,k,l);p.data.set(n),m.context.putImageData(p,0,0),f&&(m.context.scale(1,-1),m.context.drawImage(m.canvas,0,-l))}return m.canvas},a.prototype.pixels=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=void 0;a&&(f=a instanceof g.RenderTexture?a:this.renderer.generateTexture(a)),f?(c=f.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],d=c.resolution,e=f.frame):(c=this.renderer.rootRenderTarget,d=c.resolution,e=h,e.width=c.size.width,e.height=c.size.height);var j=e.width*d,k=e.height*d,l=new Uint8Array(i*j*k);if(c){b.bindRenderTarget(c);var m=b.gl;m.readPixels(e.x*d,e.y*d,j,k,m.RGBA,m.UNSIGNED_BYTE,l)}return l},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c.default=j,g.WebGLRenderer.registerPlugin("extract",j)},{"../../core":61}],124:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../core"),j=d(i),k=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c[0]instanceof j.Texture?c[0]:c[0].texture));return d._textures=null,d._durations=null,d.textures=c,d.animationSpeed=1,d.loop=!0,d.onComplete=null,d.onFrameChange=null,d._currentTime=0,d.playing=!1,d}return g(b,a),b.prototype.stop=function(){this.playing&&(this.playing=!1,j.ticker.shared.remove(this.update,this))},b.prototype.play=function(){this.playing||(this.playing=!0,j.ticker.shared.add(this.update,this))},b.prototype.gotoAndStop=function(a){this.stop();var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture()},b.prototype.gotoAndPlay=function(a){var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture(),this.play()},b.prototype.update=function(a){var b=this.animationSpeed*a,c=this.currentFrame;if(null!==this._durations){var d=this._currentTime%1*this._durations[this.currentFrame];for(d+=b/60*1e3;d<0;)this._currentTime--,d+=this._durations[this.currentFrame];var e=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*e,this._currentTime+=e;this._currentTime+=d/this._durations[this.currentFrame]}else this._currentTime+=b;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):c!==this.currentFrame&&this.updateTexture()},b.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},b.prototype.destroy=function(){this.stop(),a.prototype.destroy.call(this)},b.fromFrames=function(a){for(var c=[],d=0;d<a.length;++d)c.push(j.Texture.fromFrame(a[d]));return new b(c)},b.fromImages=function(a){for(var c=[],d=0;d<a.length;++d)c.push(j.Texture.fromImage(a[d]));return new b(c)},h(b,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(a){if(a[0]instanceof j.Texture)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},{key:"currentFrame",get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return a<0&&(a+=this._textures.length),a}}]),b}(j.Sprite);c.default=k},{"../core":61}],125:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../core"),k=e(j),l=a("../core/math/ObservablePoint"),m=d(l),n=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,b);var e=g(this,a.call(this));return e.textWidth=0,e.textHeight=0,e._glyphs=[],e._font={tint:void 0!==d.tint?d.tint:16777215,align:d.align||"left",name:null,size:0},e.font=d.font,e._text=c,e.maxWidth=0,e.maxLineHeight=0,e._anchor=new m.default(function(){e.dirty=!0},e,0,0),e.dirty=!1,e.updateText(),e}return h(b,a),b.prototype.updateText=function(){for(var a=b.fonts[this._font.name],c=this._font.size/a.size,d=new k.Point,e=[],f=[],g=null,h=0,i=0,j=0,l=-1,m=0,n=0,o=0;o<this.text.length;o++){var p=this.text.charCodeAt(o);if(/(\s)/.test(this.text.charAt(o))&&(l=o,m=h),/(?:\r\n|\r|\n)/.test(this.text.charAt(o)))f.push(h),i=Math.max(i,h),j++,d.x=0,d.y+=a.lineHeight,g=null;else if(l!==-1&&this.maxWidth>0&&d.x*c>this.maxWidth)k.utils.removeItems(e,l,o-l),o=l,l=-1,f.push(m),i=Math.max(i,m),j++,d.x=0,d.y+=a.lineHeight,g=null;else{var q=a.chars[p];q&&(g&&q.kerning[g]&&(d.x+=q.kerning[g]),e.push({texture:q.texture,line:j,charCode:p,position:new k.Point(d.x+q.xOffset,d.y+q.yOffset)}),h=d.x+(q.texture.width+q.xOffset),d.x+=q.xAdvance,n=Math.max(n,q.yOffset+q.texture.height),g=p)}}f.push(h),i=Math.max(i,h);for(var r=[],s=0;s<=j;s++){var t=0;"right"===this._font.align?t=i-f[s]:"center"===this._font.align&&(t=(i-f[s])/2),r.push(t)}for(var u=e.length,v=this.tint,w=0;w<u;w++){var x=this._glyphs[w];x?x.texture=e[w].texture:(x=new k.Sprite(e[w].texture),this._glyphs.push(x)),x.position.x=(e[w].position.x+r[e[w].line])*c,x.position.y=e[w].position.y*c,x.scale.x=x.scale.y=c,x.tint=v,x.parent||this.addChild(x)}for(var y=u;y<this._glyphs.length;++y)this.removeChild(this._glyphs[y]);if(this.textWidth=i*c,this.textHeight=(d.y+a.lineHeight)*c,0!==this.anchor.x||0!==this.anchor.y)for(var z=0;z<u;z++)this._glyphs[z].x-=this.textWidth*this.anchor.x,this._glyphs[z].y-=this.textHeight*this.anchor.y;this.maxLineHeight=n*c},b.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},b.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i(b,[{key:"tint",get:function(){return this._font.tint},set:function(a){this._font.tint="number"==typeof a&&a>=0?a:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(a){this._font.align=a||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(a){"number"==typeof a?this._anchor.set(a):this._anchor.copy(a)}},{key:"font",get:function(){return this._font},set:function(a){a&&("string"==typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),
this._font.size=a.length>=2?parseInt(a[0],10):b.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"==typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(a){a=a.toString()||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}]),b}(k.Container);c.default=n,n.fonts={}},{"../core":61,"../core/math/ObservablePoint":64}],126:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../core/math/Matrix"),h=d(g),i=new h.default,j=function(){function a(b,c){e(this,a),this._texture=b,this.mapCoord=new h.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof c?.5:c}return a.prototype.update=function(a){var b=this.texture;if(b&&b.valid&&(a||this._lastTextureID!==this.texture._updateID)){this._lastTextureID=this.texture._updateID;var c=this.texture._uvs;this.mapCoord.set(c.x1-c.x0,c.y1-c.y0,c.x3-c.x0,c.y3-c.y0,c.x0,c.y0);var d=b.orig,e=b.trim;e&&(i.set(d.width/e.width,0,0,d.height/e.height,-e.x/e.width,-e.y/e.height),this.mapCoord.append(i));var f=b.baseTexture,g=this.uClampFrame,h=this.clampMargin/f.resolution,j=this.clampOffset;g[0]=(b._frame.x+h+j)/f.width,g[1]=(b._frame.y+h+j)/f.height,g[2]=(b._frame.x+b._frame.width-h+j)/f.width,g[3]=(b._frame.y+b._frame.height-h+j)/f.height,this.uClampOffset[0]=j/f.realWidth,this.uClampOffset[1]=j/f.realHeight}},f(a,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture=a,this._lastTextureID=-1}}]),a}();c.default=j},{"../core/math/Matrix":63}],127:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../core"),k=e(j),l=a("../core/sprites/canvas/CanvasTinter"),m=d(l),n=a("./TextureTransform"),o=d(n),p=new k.Point,q=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;f(this,b);var h=g(this,a.call(this,c));return h.tileTransform=new k.TransformStatic,h._width=d,h._height=e,h._canvasPattern=null,h.uvTransform=c.transform||new o.default(c),h.pluginName="tilingSprite",h}return h(b,a),b.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},b.prototype._renderWebGL=function(a){var b=this._texture;b&&b.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))},b.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,d=this.worldTransform,e=a.resolution,f=b.baseTexture,g=b.baseTexture.resolution,h=this.tilePosition.x/this.tileScale.x%b._frame.width,i=this.tilePosition.y/this.tileScale.y%b._frame.height;if(!this._canvasPattern){var j=new k.CanvasRenderTarget(b._frame.width,b._frame.height,g);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=m.default.getTintedTexture(this,this.tint)),j.context.drawImage(this.tintedTexture,0,0)):j.context.drawImage(f.source,-b._frame.x,-b._frame.y),this._canvasPattern=j.context.createPattern(j.canvas,"repeat")}c.globalAlpha=this.worldAlpha,c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),c.scale(this.tileScale.x/g,this.tileScale.y/g),c.translate(h+this.anchor.x*-this._width,i+this.anchor.y*-this._height),a.setBlendMode(this.blendMode),c.fillStyle=this._canvasPattern,c.fillRect(-h,-i,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g)}},b.prototype._calculateBounds=function(){var a=this._width*-this._anchor._x,b=this._height*-this._anchor._y,c=this._width*(1-this._anchor._x),d=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,b,c,d)},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new k.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var b=this._width,c=this._height,d=-b*this.anchor._x;if(p.x>d&&p.x<d+b){var e=-c*this.anchor._y;if(p.y>e&&p.y<e+c)return!0}return!1},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},b.from=function(a,c,d){return new b(k.Texture.from(a),c,d)},b.fromFrame=function(a,c,d){var e=k.utils.TextureCache[a];if(!e)throw new Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new b(e,c,d)},b.fromImage=function(a,c,d,e,f){return new b(k.Texture.fromImage(a,e,f),c,d)},i(b,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(a){this.uvTransform.clampMargin=a,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copy(a)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(a){this.tileTransform.position.copy(a)}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]),b}(k.Sprite);c.default=q},{"../core":61,"../core/sprites/canvas/CanvasTinter":100,"./TextureTransform":126}],128:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=a("../core"),g=d(f),h=g.DisplayObject,i=new g.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var j=function a(){e(this,a),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var b=void 0;a?(this._cacheData||(this._cacheData=new j),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=this._calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this._calculateBounds=b.originalCalculateBounds,this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))},h.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.alpha;this.alpha=1,a.currentRenderer.flush();var c=this.getLocalBounds().clone();if(this._filters){var d=this._filters[0].padding;c.pad(d)}var e=a._activeRenderTarget,f=a.filterManager.filterStack,h=g.RenderTexture.create(0|c.width,0|c.height),j=i;j.tx=-c.x,j.ty=-c.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,a.render(this,h,!0,j,!0),a.bindRenderTarget(e),a.filterManager.filterStack=f,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var k=new g.Sprite(h);k.transform.worldTransform=this.transform.worldTransform,k.anchor.x=-(c.x/c.width),k.anchor.y=-(c.y/c.height),k.alpha=b,k._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=k,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=k.containsPoint.bind(k)}},h.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))},h.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),c=this.alpha;this.alpha=1;var d=a.context,e=g.RenderTexture.create(0|b.width,0|b.height),f=i;this.transform.worldTransform.copy(f),f.invert(),f.tx-=b.x,f.ty-=b.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,e,!0,f,!1),a.context=d,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var h=new g.Sprite(e);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(b.x/b.width),h.anchor.y=-(b.y/b.height),h._bounds=this._bounds,h.alpha=c,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},h.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},h.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":61}],129:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}var e=a("../core"),f=d(e);f.DisplayObject.prototype.name=null,f.Container.prototype.getChildByName=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].name===a)return this.children[b];return null}},{"../core":61}],130:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}var e=a("../core"),f=d(e);f.DisplayObject.prototype.getGlobalPosition=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f.Point,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,a,b):(a.x=this.position.x,a.y=this.position.y),a}},{"../core":61}],131:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.BitmapText=c.TilingSpriteRenderer=c.TilingSprite=c.AnimatedSprite=c.TextureTransform=void 0;var e=a("./TextureTransform");Object.defineProperty(c,"TextureTransform",{enumerable:!0,get:function(){return d(e).default}});var f=a("./AnimatedSprite");Object.defineProperty(c,"AnimatedSprite",{enumerable:!0,get:function(){return d(f).default}});var g=a("./TilingSprite");Object.defineProperty(c,"TilingSprite",{enumerable:!0,get:function(){return d(g).default}});var h=a("./webgl/TilingSpriteRenderer");Object.defineProperty(c,"TilingSpriteRenderer",{enumerable:!0,get:function(){return d(h).default}});var i=a("./BitmapText");Object.defineProperty(c,"BitmapText",{enumerable:!0,get:function(){return d(i).default}}),a("./cacheAsBitmap"),a("./getChildByName"),a("./getGlobalPosition")},{"./AnimatedSprite":124,"./BitmapText":125,"./TextureTransform":126,"./TilingSprite":127,"./cacheAsBitmap":128,"./getChildByName":129,"./getGlobalPosition":130,"./webgl/TilingSpriteRenderer":132}],132:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=d(h),j=a("../../core/const"),k=(a("path"),new i.Matrix),l=new Float32Array(4),m=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.shader=null,d.simpleShader=null,d.quad=null,d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new i.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new i.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new i.Quad(a,this.renderer.state.attribState),this.quad.initVao(this.shader)},b.prototype.render=function(a){var b=this.renderer,c=this.quad;b.bindVao(c.vao);var d=c.vertices;d[0]=d[6]=a._width*-a.anchor.x,d[1]=d[3]=a._height*-a.anchor.y,d[2]=d[4]=a._width*(1-a.anchor.x),d[5]=d[7]=a._height*(1-a.anchor.y),d=c.uvs,d[0]=d[6]=-a.anchor.x,d[1]=d[3]=-a.anchor.y,d[2]=d[4]=1-a.anchor.x,d[5]=d[7]=1-a.anchor.y,c.upload();var e=a._texture,f=e.baseTexture,g=a.tileTransform.localTransform,h=a.uvTransform,m=f.isPowerOfTwo&&e.frame.width===f.width&&e.frame.height===f.height;m&&(f._glTextures[b.CONTEXT_UID]?m=f.wrapMode!==j.WRAP_MODES.CLAMP:f.wrapMode===j.WRAP_MODES.CLAMP&&(f.wrapMode=j.WRAP_MODES.REPEAT));var n=m?this.simpleShader:this.shader;b.bindShader(n);var o=e.width,p=e.height,q=a._width,r=a._height;k.set(g.a*o/q,g.b*o/r,g.c*p/q,g.d*p/r,g.tx/q,g.ty/r),k.invert(),m?k.append(h.mapCoord):(n.uniforms.uMapCoord=h.mapCoord.toArray(!0),n.uniforms.uClampFrame=h.uClampFrame,n.uniforms.uClampOffset=h.uClampOffset),n.uniforms.uTransform=k.toArray(!0);var s=l;i.utils.hex2rgb(a.tint,s),s[3]=a.worldAlpha,n.uniforms.uColor=s,n.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),n.uniforms.uSampler=b.bindTexture(e),b.setBlendMode(a.blendMode),c.vao.draw(this.renderer.gl.TRIANGLES,6,0)},b}(i.ObjectRenderer);c.default=m,i.WebGLRenderer.registerPlugin("tilingSprite",m)},{"../../core":61,"../../core/const":42,path:22}],133:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../../core"),k=e(j),l=a("./BlurXFilter"),m=d(l),n=a("./BlurYFilter"),o=d(n),p=function(a){function b(c,d,e,h){f(this,b);var i=g(this,a.call(this));return i.blurXFilter=new m.default(c,d,e,h),i.blurYFilter=new o.default(c,d,e,h),i.resolution=1,i.padding=0,i.resolution=e||1,i.quality=d||4,i.blur=c||8,i}return h(b,a),b.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0),this.blurYFilter.apply(a,d,c,!1),a.returnRenderTarget(d)},i(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),b}(k.Filter);c.default=p},{"../../core":61,"./BlurXFilter":134,"./BlurYFilter":135}],134:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../../core"),k=e(j),l=a("./generateBlurVertSource"),m=d(l),n=a("./generateBlurFragSource"),o=d(n),p=a("./getMaxBlurKernelSize"),q=d(p),r=function(a){function b(c,d,e,h){f(this,b),h=h||5;var i=(0,m.default)(h,!0),j=(0,o.default)(h),k=g(this,a.call(this,i,j));return k.resolution=e||1,k._quality=0,k.quality=d||4,k.strength=c||8,k.firstRun=!0,k}return h(b,a),b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,f=(0,q.default)(e);this.vertexSrc=(0,m.default)(f,!0),this.fragmentSrc=(0,o.default)(f),this.firstRun=!1}if(this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=a.getRenderTarget(!0),h=b,i=g,j=0;j<this.passes-1;j++){a.applyFilter(this,h,i,!0);var k=i;i=h,h=k}a.applyFilter(this,h,c,d),a.returnRenderTarget(g)}},i(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}]),b}(k.Filter);c.default=r},{"../../core":61,"./generateBlurFragSource":136,"./generateBlurVertSource":137,"./getMaxBlurKernelSize":138}],135:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../../core"),k=e(j),l=a("./generateBlurVertSource"),m=d(l),n=a("./generateBlurFragSource"),o=d(n),p=a("./getMaxBlurKernelSize"),q=d(p),r=function(a){function b(c,d,e,h){f(this,b),h=h||5;var i=(0,m.default)(h,!1),j=(0,o.default)(h),k=g(this,a.call(this,i,j));return k.resolution=e||1,k._quality=0,k.quality=d||4,k.strength=c||8,k.firstRun=!0,k}return h(b,a),b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,f=(0,q.default)(e);this.vertexSrc=(0,m.default)(f,!1),this.fragmentSrc=(0,o.default)(f),this.firstRun=!1}if(this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=a.getRenderTarget(!0),h=b,i=g,j=0;j<this.passes-1;j++){a.applyFilter(this,h,i,!0);var k=i;i=h,h=k}a.applyFilter(this,h,c,d),a.returnRenderTarget(g)}},i(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}]),b}(k.Filter);c.default=r},{"../../core":61,"./generateBlurFragSource":136,"./generateBlurVertSource":137,"./getMaxBlurKernelSize":138}],136:[function(a,b,c){"use strict";function d(a){for(var b=e[a],c=b.length,d=f,g="",h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",i=void 0,j=0;j<a;j++){var k=h.replace("%index%",j);i=j,j>=c&&(i=a-j-1),k=k.replace("%value%",b[i]),g+=k,g+="\n"}return d=d.replace("%blur%",g),d=d.replace("%size%",a)}c.__esModule=!0,c.default=d;var e={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},f=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],137:[function(a,b,c){"use strict";function d(a,b){var c=Math.ceil(a/2),d=e,f="",g=void 0;g=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<a;h++){var i=g.replace("%index%",h);i=i.replace("%sampleIndex%",h-(c-1)+".0"),f+=i,f+="\n"}return d=d.replace("%blur%",f),d=d.replace("%size%",a)}c.__esModule=!0,c.default=d;var e=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],138:[function(a,b,c){"use strict";function d(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c}c.__esModule=!0,c.default=d},{}],139:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=d(i),k=(a("path"),function(a){function b(){e(this,b);var c=f(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n"));return c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],c}return g(b,a),b.prototype._loadMatrix=function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a;b&&(this._multiply(c,this.uniforms.m,a),c=this._colorMatrix(c)),this.uniforms.m=c},b.prototype._multiply=function(a,b,c){return a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15],a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16],a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17],a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18],a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19],a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15],a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16],a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17],a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18],a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19],a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15],a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16],a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17],a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18],a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19],a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15],a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16],a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17],a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18],a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19],a},b.prototype._colorMatrix=function(a){var b=new Float32Array(a);return b[4]/=255,b[9]/=255,b[14]/=255,b[19]/=255,b},b.prototype.brightness=function(a,b){var c=[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.greyscale=function(a,b){var c=[a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.blackAndWhite=function(a){var b=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,f=1/3,g=e(f),h=c+(1-c)*f,i=f*(1-c)-g*d,j=f*(1-c)+g*d,k=f*(1-c)+g*d,l=c+f*(1-c),m=f*(1-c)-g*d,n=f*(1-c)-g*d,o=f*(1-c)+g*d,p=c+f*(1-c),q=[h,i,j,0,0,k,l,m,0,0,n,o,p,0,0,0,0,0,1,0];this._loadMatrix(q,b)},b.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1),e=[c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0];this._loadMatrix(e,b)},b.prototype.saturate=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=2*a/3+1,d=(c-1)*-.5,e=[c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0];this._loadMatrix(e,b)},b.prototype.desaturate=function(){this.saturate(-1)},b.prototype.negative=function(a){var b=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.sepia=function(a){var b=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.technicolor=function(a){var b=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.polaroid=function(a){var b=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.toBGR=function(a){
var b=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.kodachrome=function(a){var b=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.browni=function(a){var b=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.vintage=function(a){var b=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.colorTone=function(a,b,c,d,e){a=a||.2,b=b||.15,c=c||16770432,d=d||3375104;var f=(c>>16&255)/255,g=(c>>8&255)/255,h=(255&c)/255,i=(d>>16&255)/255,j=(d>>8&255)/255,k=(255&d)/255,l=[.3,.59,.11,0,0,f,g,h,a,0,i,j,k,b,0,f-i,g-j,h-k,0,0];this._loadMatrix(l,e)},b.prototype.night=function(a,b){a=a||.1;var c=[a*-2,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.predator=function(a,b){var c=[11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.lsd=function(a){var b=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.reset=function(){var a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(a,!1)},h(b,[{key:"matrix",get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}}]),b}(j.Filter));c.default=k,k.prototype.grayscale=k.prototype.greyscale},{"../../core":61,path:22}],140:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=d(i),k=(a("path"),function(a){function b(c,d){e(this,b);var g=new j.Matrix;c.renderable=!1;var h=f(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return h.maskSprite=c,h.maskMatrix=g,h.uniforms.mapSampler=c.texture,h.uniforms.filterMatrix=g.toArray(!0),h.uniforms.scale={x:1,y:1},null!==d&&void 0!==d||(d=20),h.scale=new j.Point(d,d),h}return g(b,a),b.prototype.apply=function(a,b,c){var d=1/c.destinationFrame.width*(c.size.width/b.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*d,this.uniforms.scale.y=this.scale.y*d,a.applyFilter(this,b,c)},h(b,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a}}]),b}(j.Filter));c.default=k},{"../../core":61,path:22}],141:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=d(h),j=(a("path"),function(a){function b(){return e(this,b),f(this,a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return g(b,a),b}(i.Filter));c.default=j},{"../../core":61,path:22}],142:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./fxaa/FXAAFilter");Object.defineProperty(c,"FXAAFilter",{enumerable:!0,get:function(){return d(e).default}});var f=a("./noise/NoiseFilter");Object.defineProperty(c,"NoiseFilter",{enumerable:!0,get:function(){return d(f).default}});var g=a("./displacement/DisplacementFilter");Object.defineProperty(c,"DisplacementFilter",{enumerable:!0,get:function(){return d(g).default}});var h=a("./blur/BlurFilter");Object.defineProperty(c,"BlurFilter",{enumerable:!0,get:function(){return d(h).default}});var i=a("./blur/BlurXFilter");Object.defineProperty(c,"BlurXFilter",{enumerable:!0,get:function(){return d(i).default}});var j=a("./blur/BlurYFilter");Object.defineProperty(c,"BlurYFilter",{enumerable:!0,get:function(){return d(j).default}});var k=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(c,"ColorMatrixFilter",{enumerable:!0,get:function(){return d(k).default}});var l=a("./void/VoidFilter");Object.defineProperty(c,"VoidFilter",{enumerable:!0,get:function(){return d(l).default}})},{"./blur/BlurFilter":133,"./blur/BlurXFilter":134,"./blur/BlurYFilter":135,"./colormatrix/ColorMatrixFilter":139,"./displacement/DisplacementFilter":140,"./fxaa/FXAAFilter":141,"./noise/NoiseFilter":143,"./void/VoidFilter":144}],143:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=d(i),k=(a("path"),function(a){function b(){e(this,b);var c=f(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"));return c.noise=.5,c}return g(b,a),h(b,[{key:"noise",get:function(){return this.uniforms.noise},set:function(a){this.uniforms.noise=a}}]),b}(j.Filter));c.default=k},{"../../core":61,path:22}],144:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=d(h),j=(a("path"),function(a){function b(){e(this,b);var c=f(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return c.glShaderKey="void",c}return g(b,a),b}(i.Filter));c.default=j},{"../../core":61,path:22}],145:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../core"),g=d(f),h=function(){function a(){e(this,a),this.global=new g.Point,this.target=null,this.originalEvent=null}return a.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)},a}();c.default=h},{"../core":61}],146:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){d(this,a),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return a.prototype.stopPropagation=function(){this.stopped=!0},a.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},a}();c.default=e},{}],147:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("../core"),j=e(i),k=a("./InteractionData"),l=d(k),m=a("./InteractionEvent"),n=d(m),o=a("eventemitter3"),p=d(o),q=a("./interactiveTarget"),r=d(q),s=a("ismobilejs"),t=d(s);Object.assign(j.DisplayObject.prototype,r.default);var u=function(a){function b(c,d){f(this,b);var e=g(this,a.call(this));return d=d||{},e.renderer=c,e.autoPreventDefault=void 0===d.autoPreventDefault||d.autoPreventDefault,e.interactionFrequency=d.interactionFrequency||10,e.mouse=new l.default,e.mouse.global.set(-999999),e.pointer=new l.default,e.pointer.global.set(-999999),e.eventData=new n.default,e.interactiveDataPool=[],e.interactionDOMElement=null,e.moveWhenInside=!1,e.eventsAdded=!1,e.mouseOverRenderer=!1,e.supportsTouchEvents="ontouchstart"in window,e.supportsPointerEvents=!!window.PointerEvent,e.normalizeTouchEvents=!e.supportsPointerEvents&&e.supportsTouchEvents,e.normalizeMouseEvents=!e.supportsPointerEvents&&!t.default.any,e.onMouseUp=e.onMouseUp.bind(e),e.processMouseUp=e.processMouseUp.bind(e),e.onMouseDown=e.onMouseDown.bind(e),e.processMouseDown=e.processMouseDown.bind(e),e.onMouseMove=e.onMouseMove.bind(e),e.processMouseMove=e.processMouseMove.bind(e),e.onMouseOut=e.onMouseOut.bind(e),e.processMouseOverOut=e.processMouseOverOut.bind(e),e.onMouseOver=e.onMouseOver.bind(e),e.onPointerUp=e.onPointerUp.bind(e),e.processPointerUp=e.processPointerUp.bind(e),e.onPointerDown=e.onPointerDown.bind(e),e.processPointerDown=e.processPointerDown.bind(e),e.onPointerMove=e.onPointerMove.bind(e),e.processPointerMove=e.processPointerMove.bind(e),e.onPointerOut=e.onPointerOut.bind(e),e.processPointerOverOut=e.processPointerOverOut.bind(e),e.onPointerOver=e.onPointerOver.bind(e),e.onTouchStart=e.onTouchStart.bind(e),e.processTouchStart=e.processTouchStart.bind(e),e.onTouchEnd=e.onTouchEnd.bind(e),e.processTouchEnd=e.processTouchEnd.bind(e),e.onTouchMove=e.onTouchMove.bind(e),e.processTouchMove=e.processTouchMove.bind(e),e.defaultCursorStyle="inherit",e.currentCursorStyle="inherit",e._tempPoint=new j.Point,e.resolution=1,e.setTargetElement(e.renderer.view,e.renderer.resolution),e}return h(b,a),b.prototype.setTargetElement=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=a,this.resolution=b,this.addEvents()},b.prototype.addEvents=function(){this.interactionDOMElement&&(j.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0))),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0)),this.eventsAdded=!0)},b.prototype.removeEvents=function(){this.interactionDOMElement&&(j.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0))),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),window.removeEventListener("mouseup",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},b.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle,this.eventData._reset(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},b.prototype.dispatchEvent=function(a,b,c){c.stopped||(c.currentTarget=a,c.type=b,a.emit(b,c),a[b]&&a[b](c))},b.prototype.mapPositionToPoint=function(a,b,c){var d=void 0;d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var e=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=(b-d.left)*(this.interactionDOMElement.width/d.width)*e,a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)*e},b.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;e=b.interactive||e;var f=!1,g=e;if(b.hitArea&&(g=!1),d&&b._mask&&(b._mask.containsPoint(a)||(d=!1)),d&&b.filterArea&&(b.filterArea.contains(a.x,a.y)||(d=!1)),b.interactiveChildren&&b.children)for(var h=b.children,i=h.length-1;i>=0;i--){var j=h[i];if(this.processInteractive(a,j,c,d,g)){if(!j.parent)continue;f=!0,g=!1,d=!1}}return e&&(d&&!f&&(b.hitArea?(b.worldTransform.applyInverse(a,this._tempPoint),f=b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(f=b.containsPoint(a))),b.interactive&&(f&&!this.eventData.target&&(this.eventData.target=b,this.mouse.target=b,this.pointer.target=b),c(b,f))),f},b.prototype.onMouseDown=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var b=2===a.button||3===a.which;this.emit(b?"rightdown":"mousedown",this.eventData)},b.prototype.processMouseDown=function(a,b){var c=this.mouse.originalEvent,d=2===c.button||3===c.which;b&&(a[d?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(a,d?"rightdown":"mousedown",this.eventData))},b.prototype.onMouseUp=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var b=2===a.button||3===a.which;this.emit(b?"rightup":"mouseup",this.eventData)},b.prototype.processMouseUp=function(a,b){var c=this.mouse.originalEvent,d=2===c.button||3===c.which,e=d?"_isRightDown":"_isLeftDown";b?(this.dispatchEvent(a,d?"rightup":"mouseup",this.eventData),a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightclick":"click",this.eventData))):a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightupoutside":"mouseupoutside",this.eventData))},b.prototype.onMouseMove=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit("mousemove",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},b.prototype.processMouseMove=function(a,b){this.processMouseOverOut(a,b),this.moveWhenInside&&!b||this.dispatchEvent(a,"mousemove",this.eventData)},b.prototype.onMouseOut=function(a){this.mouseOverRenderer=!1,this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("mouseout",this.eventData)},b.prototype.processMouseOverOut=function(a,b){b&&this.mouseOverRenderer?(a._mouseOver||(a._mouseOver=!0,this.dispatchEvent(a,"mouseover",this.eventData)),a.buttonMode&&(this.cursor=a.defaultCursor)):a._mouseOver&&(a._mouseOver=!1,this.dispatchEvent(a,"mouseout",this.eventData))},b.prototype.onMouseOver=function(a){this.mouseOverRenderer=!0,this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData._reset(),this.emit("mouseover",this.eventData)},b.prototype.onPointerDown=function(a){this.normalizeToPointerData(a),this.pointer.originalEvent=a,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,a.clientX,a.clientY),this.autoPreventDefault&&(this.normalizeMouseEvents||this.normalizeTouchEvents)&&this.pointer.originalEvent.preventDefault(),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",this.eventData)},b.prototype.processPointerDown=function(a,b){b&&(a._pointerDown=!0,this.dispatchEvent(a,"pointerdown",this.eventData))},b.prototype.onPointerUp=function(a){this.normalizeToPointerData(a),this.pointer.originalEvent=a,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,a.clientX,a.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerUp,!0),this.emit("pointerup",this.eventData)},b.prototype.processPointerUp=function(a,b){b?(this.dispatchEvent(a,"pointerup",this.eventData),a._pointerDown&&(a._pointerDown=!1,this.dispatchEvent(a,"pointertap",this.eventData))):a._pointerDown&&(a._pointerDown=!1,this.dispatchEvent(a,"pointerupoutside",this.eventData))},b.prototype.onPointerMove=function(a){this.normalizeToPointerData(a),this.pointer.originalEvent=a,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,a.clientX,a.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",this.eventData)},b.prototype.processPointerMove=function(a,b){this.pointer.originalEvent.changedTouches||this.processPointerOverOut(a,b),this.moveWhenInside&&!b||this.dispatchEvent(a,"pointermove",this.eventData)},b.prototype.onPointerOut=function(a){this.normalizeToPointerData(a),this.pointer.originalEvent=a,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,a.clientX,a.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",this.eventData)},b.prototype.processPointerOverOut=function(a,b){b&&this.mouseOverRenderer?a._pointerOver||(a._pointerOver=!0,this.dispatchEvent(a,"pointerover",this.eventData)):a._pointerOver&&(a._pointerOver=!1,this.dispatchEvent(a,"pointerout",this.eventData))},b.prototype.onPointerOver=function(a){this.pointer.originalEvent=a,this.eventData.data=this.pointer,this.eventData._reset(),this.emit("pointerover",this.eventData)},b.prototype.onTouchStart=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;d<c;d++){var e=b[d],f=this.getTouchData(e);
f.originalEvent=a,this.eventData.data=f,this.eventData._reset(),this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit("touchstart",this.eventData),this.returnTouchData(f)}},b.prototype.processTouchStart=function(a,b){b&&(a._touchDown=!0,this.dispatchEvent(a,"touchstart",this.eventData))},b.prototype.onTouchEnd=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;d<c;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData._reset(),this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit("touchend",this.eventData),this.returnTouchData(f)}},b.prototype.processTouchEnd=function(a,b){b?(this.dispatchEvent(a,"touchend",this.eventData),a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"tap",this.eventData))):a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"touchendoutside",this.eventData))},b.prototype.onTouchMove=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;d<c;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData._reset(),this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit("touchmove",this.eventData),this.returnTouchData(f)}},b.prototype.processTouchMove=function(a,b){this.moveWhenInside&&!b||this.dispatchEvent(a,"touchmove",this.eventData)},b.prototype.getTouchData=function(a){var b=this.interactiveDataPool.pop()||new l.default;return b.identifier=a.identifier,this.mapPositionToPoint(b.global,a.clientX,a.clientY),navigator.isCocoonJS&&(b.global.x=b.global.x/this.resolution,b.global.y=b.global.y/this.resolution),a.globalX=b.global.x,a.globalY=b.global.y,b},b.prototype.returnTouchData=function(a){this.interactiveDataPool.push(a)},b.prototype.normalizeToPointerData=function(a){this.normalizeTouchEvents&&a.changedTouches?("undefined"==typeof a.button&&(a.button=a.touches.length?1:0),"undefined"==typeof a.buttons&&(a.buttons=a.touches.length?1:0),"undefined"==typeof a.isPrimary&&(a.isPrimary=1===a.touches.length),"undefined"==typeof a.width&&(a.width=a.changedTouches[0].radiusX||1),"undefined"==typeof a.height&&(a.height=a.changedTouches[0].radiusY||1),"undefined"==typeof a.tiltX&&(a.tiltX=0),"undefined"==typeof a.tiltY&&(a.tiltY=0),"undefined"==typeof a.pointerType&&(a.pointerType="touch"),"undefined"==typeof a.pointerId&&(a.pointerId=a.changedTouches[0].identifier||0),"undefined"==typeof a.pressure&&(a.pressure=a.changedTouches[0].force||.5),"undefined"==typeof a.rotation&&(a.rotation=a.changedTouches[0].rotationAngle||0),"undefined"==typeof a.clientX&&(a.clientX=a.changedTouches[0].clientX),"undefined"==typeof a.clientY&&(a.clientY=a.changedTouches[0].clientY),"undefined"==typeof a.pageX&&(a.pageX=a.changedTouches[0].pageX),"undefined"==typeof a.pageY&&(a.pageY=a.changedTouches[0].pageY),"undefined"==typeof a.screenX&&(a.screenX=a.changedTouches[0].screenX),"undefined"==typeof a.screenY&&(a.screenY=a.changedTouches[0].screenY),"undefined"==typeof a.layerX&&(a.layerX=a.offsetX=a.clientX),"undefined"==typeof a.layerY&&(a.layerY=a.offsetY=a.clientY)):this.normalizeMouseEvents&&("undefined"==typeof a.isPrimary&&(a.isPrimary=!0),"undefined"==typeof a.width&&(a.width=1),"undefined"==typeof a.height&&(a.height=1),"undefined"==typeof a.tiltX&&(a.tiltX=0),"undefined"==typeof a.tiltY&&(a.tiltY=0),"undefined"==typeof a.pointerType&&(a.pointerType="mouse"),"undefined"==typeof a.pointerId&&(a.pointerId=1),"undefined"==typeof a.pressure&&(a.pressure=.5),"undefined"==typeof a.rotation&&(a.rotation=0))},b.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},b}(p.default);c.default=u,j.WebGLRenderer.registerPlugin("interaction",u),j.CanvasRenderer.registerPlugin("interaction",u)},{"../core":61,"./InteractionData":145,"./InteractionEvent":146,"./interactiveTarget":149,eventemitter3:3,ismobilejs:4}],148:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./InteractionData");Object.defineProperty(c,"InteractionData",{enumerable:!0,get:function(){return d(e).default}});var f=a("./InteractionManager");Object.defineProperty(c,"InteractionManager",{enumerable:!0,get:function(){return d(f).default}});var g=a("./interactiveTarget");Object.defineProperty(c,"interactiveTarget",{enumerable:!0,get:function(){return d(g).default}})},{"./InteractionData":145,"./InteractionManager":147,"./interactiveTarget":149}],149:[function(a,b,c){"use strict";c.__esModule=!0,c.default={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",_over:!1,_isLeftDown:!1,_isRightDown:!1,_pointerOver:!1,_pointerDown:!1,_touchDown:!1}},{}],150:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){var c={},d=a.data.getElementsByTagName("info")[0],e=a.data.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=parseInt(d.getAttribute("size"),10),c.lineHeight=parseInt(e.getAttribute("lineHeight"),10),c.chars={};for(var f=a.data.getElementsByTagName("char"),g=0;g<f.length;g++){var i=parseInt(f[g].getAttribute("id"),10),k=new h.Rectangle(parseInt(f[g].getAttribute("x"),10)+b.frame.x,parseInt(f[g].getAttribute("y"),10)+b.frame.y,parseInt(f[g].getAttribute("width"),10),parseInt(f[g].getAttribute("height"),10));c.chars[i]={xOffset:parseInt(f[g].getAttribute("xoffset"),10),yOffset:parseInt(f[g].getAttribute("yoffset"),10),xAdvance:parseInt(f[g].getAttribute("xadvance"),10),kerning:{},texture:new h.Texture(b.baseTexture,k)}}for(var l=a.data.getElementsByTagName("kerning"),m=0;m<l.length;m++){var n=parseInt(l[m].getAttribute("first"),10),o=parseInt(l[m].getAttribute("second"),10),p=parseInt(l[m].getAttribute("amount"),10);c.chars[o]&&(c.chars[o].kerning[n]=p)}a.bitmapFont=c,j.BitmapText.fonts[c.font]=c}c.__esModule=!0,c.parse=e,c.default=function(){return function(a,b){if(!a.data||!a.isXml)return void b();if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===a.data.getElementsByTagName("info")[0].getAttribute("face"))return void b();var c=a.isDataUrl?"":g.dirname(a.url);a.isDataUrl&&("."===c&&(c=""),this.baseUrl&&c&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(c+="/"),c=c.replace(this.baseUrl,""))),c&&"/"!==c.charAt(c.length-1)&&(c+="/");var d=c+a.data.getElementsByTagName("page")[0].getAttribute("file");if(h.utils.TextureCache[d])e(a,h.utils.TextureCache[d]),b();else{var f={crossOrigin:a.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};this.add(a.name+"_image",d,f,function(c){e(a,c.texture),b()})}}};var f=a("path"),g=d(f),h=a("../core"),i=a("resource-loader"),j=a("../extras")},{"../core":61,"../extras":131,path:22,"resource-loader":35}],151:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./loader");Object.defineProperty(c,"Loader",{enumerable:!0,get:function(){return d(e).default}});var f=a("./bitmapFontParser");Object.defineProperty(c,"bitmapFontParser",{enumerable:!0,get:function(){return d(f).default}}),Object.defineProperty(c,"parseBitmapFontData",{enumerable:!0,get:function(){return f.parse}});var g=a("./spritesheetParser");Object.defineProperty(c,"spritesheetParser",{enumerable:!0,get:function(){return d(g).default}});var h=a("./textureParser");Object.defineProperty(c,"textureParser",{enumerable:!0,get:function(){return d(h).default}});var i=a("resource-loader");Object.defineProperty(c,"Resource",{enumerable:!0,get:function(){return i.Resource}})},{"./bitmapFontParser":150,"./loader":152,"./spritesheetParser":153,"./textureParser":154,"resource-loader":35}],152:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("resource-loader"),i=d(h),j=a("./textureParser"),k=d(j),l=a("./spritesheetParser"),m=d(l),n=a("./bitmapFontParser"),o=d(n),p=function(a){function b(c,d){e(this,b);for(var g=f(this,a.call(this,c,d)),h=0;h<b._pixiMiddleware.length;++h)g.use(b._pixiMiddleware[h]());return g}return g(b,a),b.addPixiMiddleware=function(a){b._pixiMiddleware.push(a)},b}(i.default);c.default=p,p._pixiMiddleware=[i.default.middleware.parsing.blob,k.default,m.default,o.default];var q=i.default.Resource;q.setExtensionXhrType("fnt",q.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":150,"./spritesheetParser":153,"./textureParser":154,"resource-loader":35}],153:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.default=function(){return function(a,b){var c=void 0,d=a.name+"_image";if(!a.data||!a.isJson||!a.data.frames||this.resources[d])return void b();var e={crossOrigin:a.crossOrigin,loadType:f.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};c=a.isDataUrl?a.data.meta.image:h.default.dirname(a.url.replace(this.baseUrl,""))+"/"+a.data.meta.image,this.add(d,c,e,function(c){function d(b,c){for(var d=b;d-b<c&&d<i.length;){var e=i[d],f=h[e].frame;if(f){var g=null,k=null,m=new j.Rectangle(0,0,h[e].sourceSize.w/n,h[e].sourceSize.h/n);g=h[e].rotated?new j.Rectangle(f.x/n,f.y/n,f.h/n,f.w/n):new j.Rectangle(f.x/n,f.y/n,f.w/n,f.h/n),h[e].trimmed&&(k=new j.Rectangle(h[e].spriteSourceSize.x/n,h[e].spriteSourceSize.y/n,f.w/n,f.h/n)),a.textures[e]=new j.Texture(l,g,m,k,h[e].rotated?2:0),j.utils.TextureCache[e]=a.textures[e]}d++}}function e(){return o*k<i.length}function f(a){d(o*k,k),o++,setTimeout(a,0)}function g(){f(function(){e()?g():b()})}a.textures={};var h=a.data.frames,i=Object.keys(h),l=c.texture.baseTexture,m=a.data.meta.scale,n=j.utils.getResolutionOfUrl(a.url,null);null===n&&(n=void 0!==m?m:1),1!==n&&(l.resolution=n,l.update());var o=0;i.length<=k?(d(0,k),b()):g()})}};var f=a("resource-loader"),g=a("path"),h=e(g),i=a("../core"),j=d(i),k=1e3},{"../core":61,path:22,"resource-loader":35}],154:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}c.__esModule=!0,c.default=function(){return function(a,b){if(a.data&&a.isImage){var c=new f.BaseTexture(a.data,null,f.utils.getResolutionOfUrl(a.url));c.imageUrl=a.url,a.texture=new f.Texture(c),f.utils.BaseTextureCache[a.name]=c,f.utils.TextureCache[a.name]=a.texture,a.name!==a.url&&(f.utils.BaseTextureCache[a.url]=c,f.utils.TextureCache[a.url]=a.texture)}b()}};var e=a("../core"),f=d(e)},{"../core":61}],155:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../core"),j=d(i),k=new j.Point,l=new j.Polygon,m=function(a){function b(c,d,g,h,i){e(this,b);var k=f(this,a.call(this));return k._texture=null,k.uvs=g||new Float32Array([0,0,1,0,1,1,0,1]),k.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]),k.indices=h||new Uint16Array([0,1,3,2]),k.dirty=0,k.indexDirty=0,k.blendMode=j.BLEND_MODES.NORMAL,k.canvasPadding=0,k.drawMode=i||b.DRAW_MODES.TRIANGLE_MESH,k.texture=c,k.shader=null,k.tintRgb=new Float32Array([1,1,1]),k._glDatas={},k.pluginName="mesh",k}return g(b,a),b.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)},b.prototype._onTextureUpdate=function(){},b.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},b.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,k);for(var c=this.vertices,d=l.points,e=this.indices,f=this.indices.length,g=this.drawMode===b.DRAW_MODES.TRIANGLES?3:1,h=0;h+2<f;h+=g){var i=2*e[h],j=2*e[h+1],m=2*e[h+2];if(d[0]=c[i],d[1]=c[i+1],d[2]=c[j],d[3]=c[j+1],d[4]=c[m],d[5]=c[m+1],l.contains(k.x,k.y))return!0}return!1},h(b,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return j.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=j.utils.hex2rgb(a,this.tintRgb)}}]),b}(j.Container);c.default=m,m.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":61}],156:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Plane"),j=d(i),k=10,l=function(a){function b(c,d,g,h,i){e(this,b);var j=f(this,a.call(this,c,4,4)),l=j.uvs;return l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1,j._origWidth=c.width,j._origHeight=c.height,j._uvw=1/j._origWidth,j._uvh=1/j._origHeight,j.width=c.width,j.height=c.height,l[2]=l[10]=l[18]=l[26]=j._uvw*d,l[4]=l[12]=l[20]=l[28]=1-j._uvw*h,l[9]=l[11]=l[13]=l[15]=j._uvh*g,l[17]=l[19]=l[21]=l[23]=1-j._uvh*i,j.leftWidth="undefined"!=typeof d?d:k,j.rightWidth="undefined"!=typeof h?h:k,j.topHeight="undefined"!=typeof g?g:k,j.bottomHeight="undefined"!=typeof i?i:k,j}return g(b,a),b.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight,a[25]=a[27]=a[29]=a[31]=this._height},b.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth,a[6]=a[14]=a[22]=a[30]=this._width},b.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);var e=this._texture.baseTexture,f=e.source,g=e.width,h=e.height;this.drawSegment(b,f,g,h,0,1,10,11),this.drawSegment(b,f,g,h,2,3,12,13),this.drawSegment(b,f,g,h,4,5,14,15),this.drawSegment(b,f,g,h,8,9,18,19),this.drawSegment(b,f,g,h,10,11,20,21),this.drawSegment(b,f,g,h,12,13,22,23),this.drawSegment(b,f,g,h,16,17,26,27),this.drawSegment(b,f,g,h,18,19,28,29),this.drawSegment(b,f,g,h,20,21,30,31)},b.prototype.drawSegment=function(a,b,c,d,e,f,g,h){var i=this.uvs,j=this.vertices,k=(i[g]-i[e])*c,l=(i[h]-i[f])*d,m=j[g]-j[e],n=j[h]-j[f];k<1&&(k=1),l<1&&(l=1),m<1&&(m=1),n<1&&(n=1),a.drawImage(b,i[e]*c,i[f]*d,k,l,j[e],j[f],m,n)},h(b,[{key:"width",get:function(){return this._width},set:function(a){this._width=a,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(a){this._height=a,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(a){this._leftWidth=a;var b=this.uvs,c=this.vertices;b[2]=b[10]=b[18]=b[26]=this._uvw*a,c[2]=c[10]=c[18]=c[26]=a,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;var b=this.uvs,c=this.vertices;b[4]=b[12]=b[20]=b[28]=1-this._uvw*a,c[4]=c[12]=c[20]=c[28]=this._width-a,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(a){this._topHeight=a;var b=this.uvs,c=this.vertices;b[9]=b[11]=b[13]=b[15]=this._uvh*a,c[9]=c[11]=c[13]=c[15]=a,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;var b=this.uvs,c=this.vertices;b[17]=b[19]=b[21]=b[23]=1-this._uvh*a,c[17]=c[19]=c[21]=c[23]=this._height-a,this.dirty=!0}}]),b}(j.default);c.default=l},{"./Plane":157}],157:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./Mesh"),i=d(h),j=function(a){function b(c,d,g){e(this,b);var h=f(this,a.call(this,c));return h._ready=!0,h.verticesX=d||10,h.verticesY=g||10,h.drawMode=i.default.DRAW_MODES.TRIANGLES,h.refresh(),h}return g(b,a),b.prototype.refresh=function(){for(var a=this.verticesX*this.verticesY,b=[],c=[],d=[],e=[],f=this.texture,g=this.verticesX-1,h=this.verticesY-1,i=f.width/g,j=f.height/h,k=0;k<a;k++)if(f._uvs){var l=k%this.verticesX,m=k/this.verticesX|0;b.push(l*i,m*j),d.push(f._uvs.x0+(f._uvs.x1-f._uvs.x0)*(l/(this.verticesX-1)),f._uvs.y0+(f._uvs.y3-f._uvs.y0)*(m/(this.verticesY-1)))}else d.push(0);for(var n=g*h,o=0;o<n;o++){var p=o%g,q=o/g|0,r=q*this.verticesX+p,s=q*this.verticesX+p+1,t=(q+1)*this.verticesX+p,u=(q+1)*this.verticesX+p+1;e.push(r,s,t),e.push(s,u,t)}this.vertices=new Float32Array(b),this.uvs=new Float32Array(d),this.colors=new Float32Array(c),this.indices=new Uint16Array(e),this.indexDirty=!0},b.prototype._onTextureUpdate=function(){i.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b}(i.default);c.default=j},{"./Mesh":155}],158:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("./Mesh"),j=e(i),k=a("../core"),l=d(k),m=function(a){function b(c,d){f(this,b);var e=g(this,a.call(this,c));return e.points=d,e.vertices=new Float32Array(4*d.length),e.uvs=new Float32Array(4*d.length),e.colors=new Float32Array(2*d.length),e.indices=new Uint16Array(2*d.length),e._ready=!0,e.refresh(),e}return h(b,a),b.prototype.refresh=function(){var a=this.points;if(!(a.length<1)&&this._texture._uvs){this.vertices.length/4!==a.length&&(this.vertices=new Float32Array(4*a.length),this.uvs=new Float32Array(4*a.length),this.colors=new Float32Array(2*a.length),this.indices=new Uint16Array(2*a.length));var b=this.uvs,c=this.indices,d=this.colors,e=this._texture._uvs,f=new l.Point(e.x0,e.y0),g=new l.Point(e.x2-e.x0,e.y2-e.y0);b[0]=0+f.x,b[1]=0+f.y,b[2]=0+f.x,b[3]=Number(g.y)+f.y,d[0]=1,d[1]=1,c[0]=0,c[1]=1;for(var h=a.length,i=1;i<h;i++){var j=4*i,k=i/(h-1);b[j]=k*g.x+f.x,b[j+1]=0+f.y,b[j+2]=k*g.x+f.x,b[j+3]=Number(g.y)+f.y,j=2*i,d[j]=1,d[j+1]=1,j=2*i,c[j]=j,c[j+1]=j+1}this.dirty++,this.indexDirty++}},b.prototype._onTextureUpdate=function(){a.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){for(var b=a[0],c=void 0,d=0,e=0,f=this.vertices,g=a.length,h=0;h<g;h++){var i=a[h],j=4*h;c=h<a.length-1?a[h+1]:i,e=-(c.x-b.x),d=c.y-b.y;var k=10*(1-h/(g-1));k>1&&(k=1);var l=Math.sqrt(d*d+e*e),m=this._texture.height/2;d/=l,e/=l,d*=m,e*=m,f[j]=i.x+d,f[j+1]=i.y+e,f[j+2]=i.x-d,f[j+3]=i.y-e,b=i}this.containerUpdateTransform()}},b}(j.default);c.default=m},{"../core":61,"./Mesh":155}],159:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("../../core"),h=e(g),i=a("../Mesh"),j=d(i),k=function(){function a(b){f(this,a),this.renderer=b}return a.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldTransform,e=b.resolution;b.roundPixels?c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e|0,d.ty*e|0):c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),b.setBlendMode(a.blendMode),a.drawMode===j.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)},a.prototype._renderTriangleMesh=function(a){for(var b=a.vertices.length/2,c=0;c<b-2;c++){var d=2*c;this._renderDrawTriangle(a,d,d+2,d+4)}},a.prototype._renderTriangles=function(a){for(var b=a.indices,c=b.length,d=0;d<c;d+=3){var e=2*b[d],f=2*b[d+1],g=2*b[d+2];this._renderDrawTriangle(a,e,f,g)}},a.prototype._renderDrawTriangle=function(a,b,c,d){var e=this.renderer.context,f=a.uvs,g=a.vertices,h=a._texture;if(h.valid){var i=h.baseTexture,j=i.source,k=i.width,l=i.height,m=f[b]*i.width,n=f[c]*i.width,o=f[d]*i.width,p=f[b+1]*i.height,q=f[c+1]*i.height,r=f[d+1]*i.height,s=g[b],t=g[c],u=g[d],v=g[b+1],w=g[c+1],x=g[d+1];if(a.canvasPadding>0){var y=a.canvasPadding/a.worldTransform.a,z=a.canvasPadding/a.worldTransform.d,A=(s+t+u)/3,B=(v+w+x)/3,C=s-A,D=v-B,E=Math.sqrt(C*C+D*D);s=A+C/E*(E+y),v=B+D/E*(E+z),C=t-A,D=w-B,E=Math.sqrt(C*C+D*D),t=A+C/E*(E+y),w=B+D/E*(E+z),C=u-A,D=x-B,E=Math.sqrt(C*C+D*D),u=A+C/E*(E+y),x=B+D/E*(E+z)}e.save(),e.beginPath(),e.moveTo(s,v),e.lineTo(t,w),e.lineTo(u,x),e.closePath(),e.clip();var F=m*q+p*o+n*r-q*o-p*n-m*r,G=s*q+p*u+t*r-q*u-p*t-s*r,H=m*t+s*o+n*u-t*o-s*n-m*u,I=m*q*u+p*t*o+s*n*r-s*q*o-p*n*u-m*t*r,J=v*q+p*x+w*r-q*x-p*w-v*r,K=m*w+v*o+n*x-w*o-v*n-m*x,L=m*q*x+p*w*o+v*n*r-v*q*o-p*n*x-m*w*r;e.transform(G/F,J/F,H/F,K/F,I/F,L/F),e.drawImage(j,0,0,k*i.resolution,l*i.resolution,0,0,k,l),e.restore()}},a.prototype.renderMeshFlat=function(a){var b=this.renderer.context,c=a.vertices,d=c.length/2;b.beginPath();for(var e=1;e<d-2;++e){var f=2*e,g=c[f],h=c[f+1],i=c[f+2],j=c[f+3],k=c[f+4],l=c[f+5];b.moveTo(g,h),b.lineTo(i,j),b.lineTo(k,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c.default=k,h.CanvasRenderer.registerPlugin("mesh",k)},{"../../core":61,"../Mesh":155}],160:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./Mesh");Object.defineProperty(c,"Mesh",{enumerable:!0,get:function(){return d(e).default}});var f=a("./webgl/MeshRenderer");Object.defineProperty(c,"MeshRenderer",{enumerable:!0,get:function(){return d(f).default}});var g=a("./canvas/CanvasMeshRenderer");Object.defineProperty(c,"CanvasMeshRenderer",{enumerable:!0,get:function(){return d(g).default}});var h=a("./Plane");Object.defineProperty(c,"Plane",{enumerable:!0,get:function(){return d(h).default}});var i=a("./NineSlicePlane");Object.defineProperty(c,"NineSlicePlane",{enumerable:!0,get:function(){return d(i).default}});var j=a("./Rope");Object.defineProperty(c,"Rope",{enumerable:!0,get:function(){return d(j).default}})},{"./Mesh":155,"./NineSlicePlane":156,"./Plane":157,"./Rope":158,"./canvas/CanvasMeshRenderer":159,"./webgl/MeshRenderer":161}],161:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("../../core"),j=e(i),k=a("pixi-gl-core"),l=d(k),m=a("../Mesh"),n=d(m),o=(a("path"),function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.shader=null,d}return h(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new j.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=a._texture;if(d.valid){var e=a._glDatas[b.CONTEXT_UID];e||(b.bindVao(null),e={shader:this.shader,vertexBuffer:l.default.GLBuffer.createVertexBuffer(c,a.vertices,c.STREAM_DRAW),uvBuffer:l.default.GLBuffer.createVertexBuffer(c,a.uvs,c.STREAM_DRAW),indexBuffer:l.default.GLBuffer.createIndexBuffer(c,a.indices,c.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty},e.vao=new l.default.VertexArrayObject(c).addIndex(e.indexBuffer).addAttribute(e.vertexBuffer,e.shader.attributes.aVertexPosition,c.FLOAT,!1,8,0).addAttribute(e.uvBuffer,e.shader.attributes.aTextureCoord,c.FLOAT,!1,8,0),a._glDatas[b.CONTEXT_UID]=e),a.dirty!==e.dirty&&(e.dirty=a.dirty,e.uvBuffer.upload(a.uvs)),a.indexDirty!==e.indexDirty&&(e.indexDirty=a.indexDirty,e.indexBuffer.upload(a.indices)),e.vertexBuffer.upload(a.vertices),b.bindShader(e.shader),e.shader.uniforms.uSampler=b.bindTexture(d),b.state.setBlendMode(a.blendMode),e.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0),e.shader.uniforms.alpha=a.worldAlpha,e.shader.uniforms.tint=a.tintRgb;var f=a.drawMode===n.default.DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES;b.bindVao(e.vao),e.vao.draw(f,a.indices.length,0)}},b}(j.ObjectRenderer));c.default=o,j.WebGLRenderer.registerPlugin("mesh",o)},{"../../core":61,"../Mesh":155,path:22,"pixi-gl-core":12}],162:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../core"),i=d(h),j=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,d=arguments[1],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;e(this,b);var h=f(this,a.call(this)),j=16384;return g>j&&(g=j),g>c&&(g=c),h._properties=[!1,!0,!1,!1,!1],h._maxSize=c,h._batchSize=g,h._glBuffers={},h._bufferToUpdate=0,h.interactiveChildren=!1,h.blendMode=i.BLEND_MODES.NORMAL,h.roundPixels=!0,h.baseTexture=null,h.setProperties(d),h}return g(b,a),b.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},b.prototype.renderWebGL=function(a){var b=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return b.onChildrenChange(0)})),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},b.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},b.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode];i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var j=0;j<this.children.length;++j){
var k=this.children[j];if(k.visible){var l=k.texture.frame;if(b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)===0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y;else{d||(d=!0),k.displayObjectUpdateTransform();var m=k.worldTransform;a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution|0,m.ty*a.resolution|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height}var n=k.texture.baseTexture.resolution;b.drawImage(k.texture.baseTexture.source,l.x*n,l.y*n,l.width*n,l.height*n,e*n,f*n,g*n,h*n)}}}},b.prototype.destroy=function(b){if(a.prototype.destroy.call(this,b),this._buffers)for(var c=0;c<this._buffers.length;++c)this._buffers[c].destroy();this._properties=null,this._buffers=null},b}(i.Container);c.default=j},{"../core":61}],163:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./ParticleContainer");Object.defineProperty(c,"ParticleContainer",{enumerable:!0,get:function(){return d(e).default}});var f=a("./webgl/ParticleRenderer");Object.defineProperty(c,"ParticleRenderer",{enumerable:!0,get:function(){return d(f).default}})},{"./ParticleContainer":162,"./webgl/ParticleRenderer":165}],164:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=a("../../core/utils/createIndicesForQuads"),i=d(h),j=function(){function a(b,c,d,f){e(this,a),this.gl=b,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=f,this.dynamicProperties=[],this.staticProperties=[];for(var g=0;g<c.length;++g){var h=c[g];h={attribute:h.attribute,size:h.size,uploadFunction:h.uploadFunction,offset:h.offset},d[g]?this.dynamicProperties.push(h):this.staticProperties.push(h)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return a.prototype.initBuffers=function(){var a=this.gl,b=0;this.indices=(0,i.default)(this.size),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.dynamicStride=0;for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.offset=b,b+=d.size,this.dynamicStride+=d.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=g.default.GLBuffer.createVertexBuffer(a,this.dynamicData,a.STREAM_DRAW);var e=0;this.staticStride=0;for(var f=0;f<this.staticProperties.length;++f){var h=this.staticProperties[f];h.offset=e,e+=h.size,this.staticStride+=h.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=g.default.GLBuffer.createVertexBuffer(a,this.staticData,a.STATIC_DRAW),this.vao=new g.default.VertexArrayObject(a).addIndex(this.indexBuffer);for(var j=0;j<this.dynamicProperties.length;++j){var k=this.dynamicProperties[j];this.vao.addAttribute(this.dynamicBuffer,k.attribute,a.FLOAT,!1,4*this.dynamicStride,4*k.offset)}for(var l=0;l<this.staticProperties.length;++l){var m=this.staticProperties[l];this.vao.addAttribute(this.staticBuffer,m.attribute,a.FLOAT,!1,4*this.staticStride,4*m.offset)}},a.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},a}();c.default=j},{"../../core/utils/createIndicesForQuads":115,"pixi-gl-core":12}],165:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("../../core"),j=e(i),k=a("./ParticleShader"),l=d(k),m=a("./ParticleBuffer"),n=d(m),o=function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.shader=null,d.indexBuffer=null,d.properties=null,d.tempMatrix=new j.Matrix,d.CONTEXT_UID=0,d}return h(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new l.default(a),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},b.prototype.start=function(){this.renderer.bindShader(this.shader)},b.prototype.render=function(a){var b=a.children,c=a._maxSize,d=a._batchSize,e=this.renderer,f=b.length;if(0!==f){f>c&&(f=c);var g=a._glBuffers[e.CONTEXT_UID];g||(g=a._glBuffers[e.CONTEXT_UID]=this.generateBuffers(a)),this.renderer.setBlendMode(a.blendMode);var h=e.gl,i=a.worldTransform.copy(this.tempMatrix);i.prepend(e._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=i.toArray(!0),this.shader.uniforms.uAlpha=a.worldAlpha;var j=b[0]._texture.baseTexture;this.shader.uniforms.uSampler=e.bindTexture(j);for(var k=0,l=0;k<f;k+=d,l+=1){var m=f-k;m>d&&(m=d);var n=g[l];n.uploadDynamic(b,k,m),a._bufferToUpdate===l&&(n.uploadStatic(b,k,m),a._bufferToUpdate=l+1),e.bindVao(n.vao),n.vao.draw(h.TRIANGLES,6*m)}}},b.prototype.generateBuffers=function(a){for(var b=this.renderer.gl,c=[],d=a._maxSize,e=a._batchSize,f=a._properties,g=0;g<d;g+=e)c.push(new n.default(b,this.properties,f,e));return c},b.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g=0,h=0,i=0,j=0,k=0;k<c;++k){var l=a[b+k],m=l._texture,n=l.scale.x,o=l.scale.y,p=m.trim,q=m.orig;p?(h=p.x-l.anchor.x*q.width,g=h+p.width,j=p.y-l.anchor.y*q.height,i=j+p.height):(g=q.width*(1-l.anchor.x),h=q.width*-l.anchor.x,i=q.height*(1-l.anchor.y),j=q.height*-l.anchor.y),d[f]=h*n,d[f+1]=j*o,d[f+e]=g*n,d[f+e+1]=j*o,d[f+2*e]=g*n,d[f+2*e+1]=i*o,d[f+3*e]=h*n,d[f+3*e+1]=i*o,f+=4*e}},b.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].position;d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e}},b.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].rotation;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var h=a[b+g]._texture._uvs;h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)}},b.prototype.uploadAlpha=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].alpha;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},b}(j.ObjectRenderer);c.default=o,j.WebGLRenderer.registerPlugin("particle",o)},{"../../core":61,"./ParticleBuffer":164,"./ParticleShader":166}],166:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core/Shader"),i=d(h),j=function(a){function b(c){return e(this,b),f(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return g(b,a),b}(i.default);c.default=j},{"../../core/Shader":41}],167:[function(a,b,c){"use strict";Math.sign||(Math.sign=function(a){return a=Number(a),0===a||isNaN(a)?a:a>0?1:-1})},{}],168:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("object-assign"),f=d(e);Object.assign||(Object.assign=f.default)},{"object-assign":5}],169:[function(a,b,c){"use strict";a("./Object.assign"),a("./requestAnimationFrame"),a("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":167,"./Object.assign":168,"./requestAnimationFrame":170}],170:[function(a,b,c){(function(a){"use strict";var b=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),a.performance&&a.performance.now||!function(){var b=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-b}}();for(var c=Date.now(),d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;++e){var f=d[e];a.requestAnimationFrame=a[f+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var d=Date.now(),e=b+c-d;return e<0&&(e=0),c=d,setTimeout(function(){c=Date.now(),a(performance.now())},e)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],171:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){return b instanceof l.Text&&(b.updateText(!0),!0)}function h(a,b){if(b instanceof l.TextStyle){var c=l.Text.getFontStyle(b);return l.Text.fontPropertiesCache[c]||l.Text.calculateFontProperties(c),!0}return!1}function i(a,b){if(a instanceof l.Text){b.indexOf(a.style)===-1&&b.push(a.style),b.indexOf(a)===-1&&b.push(a);var c=a._texture.baseTexture;return b.indexOf(c)===-1&&b.push(c),!0}return!1}function j(a,b){return a instanceof l.TextStyle&&(b.indexOf(a)===-1&&b.push(a),!0)}c.__esModule=!0;var k=a("../core"),l=e(k),m=a("./limiters/CountLimiter"),n=d(m),o=l.ticker.shared;l.settings.UPLOADS_PER_FRAME=4;var p=function(){function a(b){var c=this;f(this,a),this.limiter=new n.default(l.settings.UPLOADS_PER_FRAME),this.renderer=b,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){c.queue&&c.prepareItems()},this.register(i,g),this.register(j,h)}return a.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),a&&this.add(a),this.queue.length?(b&&this.completes.push(b),this.ticking||(this.ticking=!0,o.addOnce(this.tick,this))):b&&b()},a.prototype.tick=function(){setTimeout(this.delayedTick,0)},a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){for(var a=this.queue[0],b=!1,c=0,d=this.uploadHooks.length;c<d;c++)if(this.uploadHooks[c](this.uploadHookHelper,a)){this.queue.shift(),b=!0;break}b||this.queue.shift()}if(this.queue.length)o.addOnce(this.tick,this);else{this.ticking=!1;var e=this.completes.slice(0);this.completes.length=0;for(var f=0,g=e.length;f<g;f++)e[f]()}},a.prototype.register=function(a,b){return a&&this.addHooks.push(a),b&&this.uploadHooks.push(b),this},a.prototype.add=function(a){for(var b=0,c=this.addHooks.length;b<c&&!this.addHooks[b](a,this.queue);b++);if(a instanceof l.Container)for(var d=a.children.length-1;d>=0;d--)this.add(a.children[d]);return this},a.prototype.destroy=function(){this.ticking&&o.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},a}();c.default=p},{"../core":61,"./limiters/CountLimiter":174}],172:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){if(b instanceof l.BaseTexture){var c=b.source,d=0===c.width?a.canvas.width:Math.min(a.canvas.width,c.width),e=0===c.height?a.canvas.height:Math.min(a.canvas.height,c.height);return a.ctx.drawImage(c,0,0,d,e,0,0,a.canvas.width,a.canvas.height),!0}return!1}function j(a,b){if(a instanceof l.BaseTexture)return b.indexOf(a)===-1&&b.push(a),!0;if(a._texture&&a._texture instanceof l.Texture){var c=a._texture.baseTexture;return b.indexOf(c)===-1&&b.push(c),!0}return!1}c.__esModule=!0;var k=a("../../core"),l=e(k),m=a("../BasePrepare"),n=d(m),o=16,p=function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.uploadHookHelper=d,d.canvas=document.createElement("canvas"),d.canvas.width=o,d.canvas.height=o,d.ctx=d.canvas.getContext("2d"),d.register(j,i),d}return h(b,a),b.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},b}(n.default);c.default=p,l.CanvasRenderer.registerPlugin("prepare",p)},{"../../core":61,"../BasePrepare":171}],173:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./webgl/WebGLPrepare");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e).default}});var f=a("./canvas/CanvasPrepare");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(f).default}});var g=a("./BasePrepare");Object.defineProperty(c,"BasePrepare",{enumerable:!0,get:function(){return d(g).default}});var h=a("./limiters/CountLimiter");Object.defineProperty(c,"CountLimiter",{enumerable:!0,get:function(){return d(h).default}});var i=a("./limiters/TimeLimiter");Object.defineProperty(c,"TimeLimiter",{enumerable:!0,get:function(){return d(i).default}})},{"./BasePrepare":171,"./canvas/CanvasPrepare":172,"./limiters/CountLimiter":174,"./limiters/TimeLimiter":175,"./webgl/WebGLPrepare":176}],174:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxItemsPerFrame=b,this.itemsLeft=0}return a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},a.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},a}();c.default=e},{}],175:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxMilliseconds=b,this.frameStart=0}return a.prototype.beginFrame=function(){this.frameStart=Date.now()},a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},a}();c.default=e},{}],176:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){return b instanceof n.BaseTexture&&(b._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(b),!0)}function j(a,b){return b instanceof n.Graphics&&((b.dirty||b.clearDirty||!b._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(b),!0)}function k(a,b){if(a instanceof n.BaseTexture)return b.indexOf(a)===-1&&b.push(a),!0;if(a._texture&&a._texture instanceof n.Texture){var c=a._texture.baseTexture;return b.indexOf(c)===-1&&b.push(c),!0}return!1}function l(a,b){return a instanceof n.Graphics&&(b.push(a),!0)}c.__esModule=!0;var m=a("../../core"),n=e(m),o=a("../BasePrepare"),p=d(o),q=function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.uploadHookHelper=d.renderer,d.register(k,i).register(l,j),d}return h(b,a),b}(p.default);c.default=q,n.WebGLRenderer.registerPlugin("prepare",q)},{"../../core":61,"../BasePrepare":171}],177:[function(a,b,c){(function(b){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}c.__esModule=!0,c.loader=c.prepare=c.particles=c.mesh=c.loaders=c.interaction=c.filters=c.extras=c.extract=c.accessibility=void 0;var e=a("./deprecation");Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return e[a]}})});var f=a("./core");Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return f[a]}})}),a("./polyfill");var g=a("./accessibility"),h=d(g),i=a("./extract"),j=d(i),k=a("./extras"),l=d(k),m=a("./filters"),n=d(m),o=a("./interaction"),p=d(o),q=a("./loaders"),r=d(q),s=a("./mesh"),t=d(s),u=a("./particles"),v=d(u),w=a("./prepare"),x=d(w);c.accessibility=h,c.extract=j,c.extras=l,c.filters=n,c.interaction=p,c.loaders=r,c.mesh=t,c.particles=v,c.prepare=x;var y=r&&r.Loader?new r.Loader:null;c.loader=y,b.PIXI=c}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":40,"./core":61,"./deprecation":120,"./extract":122,"./extras":131,"./filters":142,"./interaction":148,"./loaders":151,"./mesh":160,"./particles":163,"./polyfill":169,"./prepare":173}]},{},[177])(177)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(a,b,c){function d(a,b){this.graphics.getChildAt(a).visible=b}function e(a){var b=l(n.body,a),c=l(n.flag);return b.graphics.addChild(c.graphics),b}function f(a){var b=l(v.body,a),c=l(v.flame1),e=l(v.flame2);return b.graphics.addChild(c.graphics,e.graphics),c.graphics.visible=!1,e.graphics.visible=!1,b.flame1On=d.bind(b,0,!0),b.flame1Off=d.bind(b,0,!1),b.flame2On=d.bind(b,1,!0),b.flame2Off=d.bind(b,1,!1),b}function g(a){var b=l(s.body,a),c=l(s.flame1),d=l(s.flame2),e=l(s.flame3),f=l(s.flame4),g=l(s.shipyard),h=l(s.sensors),i=l(s.turret1),j=l(s.turret2),k=l(s.turret3),m=l(s.turret4);return b.graphics.addChild(c.graphics,d.graphics,e.graphics,f.graphics,i.graphics,j.graphics,k.graphics,m.graphics,h.graphics,g.graphics),b}function h(a){var b=l(o.body,a),c=l(o.turret1),d=l(o.turret2),e=l(o.turret3),f=l(o.turret4);return b.graphics.addChild(c.graphics,d.graphics,e.graphics,f.graphics),b}function i(a){var b=l(w.body,a),c=l(w.cargopodL),e=l(w.cargopodR),f=l(w.turret1),g=l(w.turret2),h=l(w.flag),i=l(w.flame);return b.graphics.addChild(i.graphics,h.graphics,c.graphics,e.graphics,f.graphics,g.graphics),b.flameOn=d.bind(b,0,!0),b.flameOff=d.bind(b,0,!1),b}function j(a){return l(p,a)}function k(a,b){var c;return"Star"===a?c=l(t,b):"Shot"===a?c=l(u,b):"PColony"===a?c=l(q,b):"PLab"===a?c=l(r,b):"PComm"===a?c=j(b):"Planet"===a?c=e(b):"Fighter"===a?c=f(b):"StarPort"===a?c=g(b):"PBase"===a?c=h(b):"Freighter"===a&&(c=i(b)),c&&(c.type=a,c.team=b.team,m.add(c)),c}var l=a("./geometry"),m=a("./entityDB"),n=a("./geometry/Planet.json"),o=a("./geometry/PBase.json"),p=a("./geometry/PComm.json"),q=a("./geometry/PColony.json"),r=a("./geometry/PLab.json"),s=a("./geometry/StarPort.json"),t=a("./geometry/Star.json"),u=a("./geometry/Shot.json"),v=a("./geometry/Fighter.json"),w=a("./geometry/Freighter.json"),x={BLUE:0,GREEN:1,RED:2,YELLOW:3,MAGENTA:4};b.exports={create:k,TEAM:x}},{"./entityDB":112,"./geometry":113,"./geometry/Fighter.json":114,"./geometry/Freighter.json":115,"./geometry/PBase.json":116,"./geometry/PColony.json":117,"./geometry/PComm.json":118,"./geometry/PLab.json":119,"./geometry/Planet.json":120,"./geometry/Shot.json":121,"./geometry/Star.json":122,"./geometry/StarPort.json":123}],112:[function(a,b,c){function d(){return j.int(0,Date.now()).toString(16).substr(0,6)}function e(a){a.id=d(),k[a.id.toString()]=a,l[a.type.toString()]=a,m[a.team.toString()]=a}function f(a){return l[a]}function g(a){return l[a]}function h(a){return k[a]}function i(a){}var j=a("./random"),k={},l={},m={};b.exports={add:e,remove:i,getByType:f,getByTeam:g,getById:h}},{"./random":126}],113:[function(a,b,c){function d(a,b){return new l.Vector(a,b)}function e(a,b){return{set x(a){this.graphics.x=a,this.collision.pos.x=a},set y(a){this.graphics.y=a,this.collision.pos.y=a},set rotation(a){this.graphics.rotation=a,this.collision.setAngle(a)},get x(){return this.graphics.x},get y(){return this.graphics.y},get rotation(){return this.graphics.rotation},graphics:a,collision:b}}function f(a){var b=new k.Graphics;return a.lineStyle&&b.lineStyle(a.lineStyle.width,a.lineStyle.color,a.lineStyle.alpha),a.fill?b.beginFill(a.fill.color,a.fill.alpha):b.beginFill(0,0),b.drawCircle(0,0,a.radius),b.endFill(),b.x=a.x,b.y=a.y,e(b,new l.Circle(d(b.x,b.y),a.radius))}function g(a){var b=new k.Graphics;return a.lineStyle&&b.lineStyle(a.lineStyle.width,a.lineStyle.color,a.lineStyle.alpha),a.fill?b.beginFill(a.fill.color,a.fill.alpha):b.beginFill(0,0),b.drawRect(0,0,a.w,a.h),b.endFill(),b.x=a.x,b.y=a.y,e(b,new l.Box(d(b.x,b.y),a.w,a.h))}function h(a){var b=new k.Graphics;return a.lineStyle&&b.lineStyle(a.lineStyle.width,a.lineStyle.color,a.lineStyle.alpha),b.moveTo(0,0),b.lineTo(a.x2,a.y2),b.x=a.x1,b.y=a.y1,b}function i(a){var b=new k.Graphics;a.lineStyle&&b.lineStyle(a.lineStyle.width,a.lineStyle.color,a.lineStyle.alpha),a.fill?b.beginFill(a.fill.color,a.fill.alpha):b.beginFill(0,0),b.drawPolygon(a.path),b.endFill(),b.x=a.x,b.y=a.y;var c=[];if(a.collisionPath)for(var f=0;f<a.collisionPath.length;f+=2)c.push(d(a.collisionPath[f],a.collisionPath[f+1]));return e(b,new l.Polygon(d(b.x,b.y),c))}function j(a,b){var c=JSON.parse(JSON.stringify(a));if(b)for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);else c.x=0,c.y=0;return"circle"===c.type?f(c):"line"===c.type?h(c):"rectangle"===c.type?g(c):"polygon"===c.type?i(c):void 0}var k=a("./custom-lib/pixi.min.js"),l=a("sat");b.exports=j},{"./custom-lib/pixi.min.js":110,sat:99}],114:[function(a,b,c){b.exports={body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-2,2,-4,0,-2,-2,-4,-4,-4,-6,2,-4,0,-2,8,0,0,2,2,4,-4,6,-4,4,-2,2]},flame1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,-4,-8,-5,-4,-6]},flame2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-4,4,-8,5,-4,6]}}},{}],115:[function(a,b,c){b.exports={body:{type:"polygon",lineStyle:{width:1,color:16777215,alpha:1},collisionPath:[-44,-4,-38,-8,26,-10,44,0,26,10,-38,8,-44,4],path:[-26,-2,-26,-8,-38,-8,-38,2,-44,4,-44,-4,-38,-2,-38,8,-26,8,-26,-2,24,-2,26,-10,44,0,26,10,24,2,-26,2]},cargopodL:{type:"polygon",lineStyle:{width:1,color:16777215,alpha:1},path:[-24,-2,-24,-12,22,-12,22,-2]},cargopodR:{type:"polygon",lineStyle:{width:1,color:16777215,alpha:1},path:[-24,2,-24,12,22,12,22,2]},flag:{type:"polygon",lineStyle:{width:2,color:255,alpha:1},path:[34,0,42,0]},turret1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[-34,0,-30,-3,-30,3,-34,0]},turret2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[28,-3,32,0,28,3,28,-2]},flame:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-44,-2,-50,0,-44,2]}}},{}],116:[function(a,b,c){b.exports={_name:"Planetary Base",body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-20,20,-20,-20,20,-20,20,20,-20,20]},turret1:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[65,-60,65,-65,60,-65,65,-60]},turret2:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[-65,-60,-65,-65,-60,-65,-65,-60]},turret3:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[65,60,65,65,60,65,65,60]},turret4:{type:"polygon",lineStyle:{width:1,color:65280,alpha:.5},path:[-65,60,-65,65,-60,65,-65,60]}}},{}],117:[function(a,b,c){b.exports={type:"polygon",_name:"Planetary Colony",lineStyle:{width:1,color:255,alpha:1},path:[-30,40,-70,40,-70,-40,-30,-40,-30,40]}},{}],118:[function(a,b,c){b.exports={type:"polygon",_name:"Planetary Communications Center",lineStyle:{width:1,color:255,alpha:1},path:[40,30,0,30,0,50,40,50,40,30,60,35,30,10,40,30]}},{}],119:[function(a,b,c){b.exports={type:"polygon",_name:"Planetary Lab",lineStyle:{width:1,color:255,alpha:1},path:[0,-40,0,-70,50,-70,50,-40,0,-40]}},{}],120:[function(a,b,c){b.exports={body:{type:"circle",radius:100,lineStyle:{width:1,color:65280,alpha:1}},flag:{type:"polygon",fill:{color:255,alpha:1},path:[-5,-4,-5,4,5,4,5,-4]}}},{}],121:[function(a,b,c){b.exports={cannon_normal:{type:"rectangle",fill:{color:16777215,alpha:1},w:2,h:2}}},{}],122:[function(a,b,c){b.exports={type:"circle",radius:300,lineStyle:{width:1,color:16776960,alpha:1}}},{}],123:[function(a,b,c){b.exports={_name:"High Port",body:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[-2,0,-6,-20,-6,-36,-2,-44,6,-44,6,-24,2,-20,2,20,6,24,6,44,-2,44,-6,36,-6,20,-2,0]},shipyard:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[6,-42,20,-42,20,-22,14,-26,6,-26]},sensors:{type:"polygon",lineStyle:{width:1,color:255,alpha:1},path:[6,26,12,28,12,40,18,46,18,34,12,40,6,42]},turret1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[0,28,4,26,4,30,0,28]},turret2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[0,-28,4,-26,4,-30,0,-28]},turret3:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[4,44,2,48,0,44]},turret4:{type:"polygon",lineStyle:{width:1,color:65535,alpha:.5},path:[4,-44,2,-48,0,-44]},flame1:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,20,-12,22,-6,24]},flame2:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,-24,-12,-22,-6,-20]},flame3:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,32,-12,34,-6,36]},flame4:{type:"polygon",lineStyle:{width:1,color:65535,alpha:1},path:[-6,-36,-12,-34,-6,-32]}}},{}],124:[function(a,b,c){function d(){e(),l=new k.Container,m=new k.WebGLRenderer(n,p,r),document.body.appendChild(m.view),window.addEventListener("resize",f)}function e(){n=window.innerWidth,p=window.innerHeight,o=n>>1,q=p>>1,m&&m.resize(n,p)}function f(){e()}function g(){l.addChild.apply(l,arguments)}function h(){l.removeChild.apply(l,arguments)}function i(){m.render(l)}function j(a){l.x=o-a.x,l.y=q-a.y}var k=a("./custom-lib/pixi.min.js");k.settings.SCALE_MODE=k.SCALE_MODES.NEAREST;var l,m,n,o,p,q,r={};b.exports={init:d,addChild:g,removeChild:h,render:i,centerOn:j}},{"./custom-lib/pixi.min.js":110}],125:[function(a,b,c){function d(){var a=Date.now(),b=a-h;f(),b>n&&(j.centerOn(controller.getFocalPoint()),j.render(),h=a-b%n),g=requestAnimationFrame(d)}function e(){h=Date.now(),d()}function f(){l.process(),k.process()}var g,h,i=a("./assets"),j=a("./graphics"),k=a("./controller/human"),l=a("./controller/planet"),m=60,n=1e3/m;window.addEventListener("DOMContentLoaded",function(){j.init(),k.init(),l.init(),i.init(e)})},{"./assets":106,"./controller/human":108,"./controller/planet":109,"./graphics":124}],126:[function(a,b,c){function d(a,b){return Math.round(e(a,b))}function e(a,b){return a+Math.random()*(b-a)}function f(a){return a[Math.floor(a.length*Math.random())]}b.exports={int:d,float:e,arrayEl:f}},{}]},{},[125]);